import{j as t,i as y,w as x,x as k,m as b,n as f,C as v,ac as H,o as S,r as j,S as B}from"./index-CrrK3HZl.js";import{u as N,P as I,C as A,a as E}from"./useProductBasicDataPageService-g02jTsmT.js";import{S as D}from"./SheContextSidebar-B0Sv3nAf.js";import{u as T}from"./useCardActions-BHRdNbbx.js";import{S as U}from"./SelectEntityCard-CvJCrqU_.js";import{C as O,a as w,P as L,M as G,L as M,b as R}from"./ManageLocationPhotosGridColumns-DoV5z0q0.js";import{I as _}from"./useAppTranslation-CxJKxTt8.js";import"./SheCard-B3aXsHPp.js";import"./SheCardNotification-DR2sdvIB.js";import"./ComponentViewEnum-Ba6F4129.js";import"./SheInput-CcU7QLm1.js";import"./types-C180mTTl.js";import"./form-8Gd4ckLA.js";import"./SheSelect-DvwgVzIf.js";import"./select-fzxiZlKR.js";import"./chevron-up-DlgAtAnx.js";import"./settings-2-jYrWVmd_.js";import"./she-select-convertors-CdG-Ygpu.js";import"./SheFileUploader-CErJcKRj.js";import"./useProductsPageService-DvIfasxq.js";import"./useToast-Cr5gsrmE.js";import"./trash-BTjdaDtM.js";import"./SheGrid-3dIqJXZn.js";import"./AddressForm-DoMEQKnM.js";const z={},q="_iconCheck_1wa1s_1",F={iconCheck:q};function W({onAction:s}){return[{id:"select",header:"Select",minSize:70,maxSize:70,cell:({row:n,table:a})=>{const o=a.options.meta,C=e=>{e.stopPropagation(),e.preventDefault(),s("selectCompany",n.original)};return t.jsx("div",{onClick:e=>e.stopPropagation(),children:t.jsx(y,{className:n.original.isSelected===!0?F.iconCheck:"",icon:n.original.isSelected===!0?x:k,variant:"ghost",onClick:C,disabled:o==null?void 0:o.isRowLoading(n.id)})})}},{id:"companyName",header:"Company",cell:({row:n})=>{const a=n.original.thumbnailUrl,o=n.original.companyName;return n.original.address,t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginLeft:"-8px"},children:[t.jsx("div",{children:a?t.jsx("img",{src:a,alt:o||"Supplier",className:"object-cover rounded-md w-full h-full",style:{minWidth:"48px",height:"48px"}}):t.jsx("div",{style:{width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(b,{icon:_,maxWidth:"30px"})})}),t.jsx(f,{delayDuration:200,text:o,className:"max-w-[120px] overflow-hidden text-ellipsis whitespace-nowrap",children:t.jsx("span",{className:"she-text",children:o})})]})}},{id:"manage",header:"Actions",minSize:120,maxSize:120,cell:({row:n,table:a})=>{const o=a.options.meta,C=e=>{e.stopPropagation(),e.preventDefault(),s("manageCompany",n.original)};return t.jsx("div",{onClick:e=>e.stopPropagation(),children:t.jsx(y,{icon:v,value:"Manage",variant:"secondary",onClick:C,disabled:o==null?void 0:o.isRowLoading(n.id)})})}}]}function he(){var l,m,u,g,p,h,P;const{handleCardAction:s,createRefCallback:n}=T({selectActiveCards:d=>d[B.PRODUCT_BASIC_DATA].activeCards,refreshAction:H.refreshActiveCards}),{state:a,productsState:o,productsService:C,...e}=N(s),{productId:c}=S();j.useEffect(()=>{e.getProductsHandler(o.productsGridRequestModel),e.getCategoriesHandler(),e.getBrandsHandler(),e.getCountersForProductsHandler(Number(c)),e.getProductDetailsHandler(Number(c)),e.getCountryCodesHandler()},[c]);async function i(d,r){switch(d){case"itemsCardClick":e.itemCardClickHandler(r);break;case"submitProductData":e.onSubmitProductDataHandler(c,r);break;case"checkCategoryName":e.checkCategoryNameHandler(r);break;case"createProductCategory":e.createNewCategoryHandler(r);break;case"checkBrandName":e.checkBrandNameHandler(r);break;case"createProductBrand":e.createBrandHandler(r);break;case"gotoProductsPage":e.gotoProductsPageHandler();break;case"generateProductCode":e.generateProductCodeHandler();break;case"checkProductCode":e.checkProductCodeHandler(r);break;case"openCreateProductCategoryCard":s("createCategoryCard",!0);break;case"openCreateProductBrandCard":s("createBrandCard",!0);break;case"closeCreateProductCategoryCard":s("createCategoryCard");break;case"closeCreateProductBrandCard":s("createBrandCard");break;case"openSelectEntityCard":e.openSelectEntityCardHandler();break;case"searchEntity":e.searchEntityHandler(r);break;case"selectCompany":e.selectCompanyHandler(r);break;case"openCreateEntityCard":e.openCreateEntityCardHandler();break;case"closeSelectEntityCard":e.closeSelectEntityCardHandler();break;case"createCompany":e.createCompanyHandler(r);break;case"closeCreateCompanyCard":e.closeCreateCompanyCardHandler();break;case"manageCompany":e.manageCompanyHandler(r);break;case"updateCompany":e.updateCompanyHandler(r);break;case"deleteCompany":e.deleteCompanyHandler(r);break;case"closeCompanyConfigurationCard":e.closeCompanyConfigurationCardHandler();break;case"manageCompanyPhotos":e.manageCompanyPhotosHandler();break;case"uploadPhoto":e.uploadPhotoHandler(r);break;case"deleteCompanyPhoto":e.deleteCompanyPhotoHandler(r);break;case"changePhotoPosition":e.changePhotoPositionHandler(r);break;case"closePhotosCard":e.closePhotosCardHandler(r);break;case"openLocationConfigurationCard":e.openLocationConfigurationCardHandler(r);break;case"createLocation":e.createLocationHandler(r);break;case"deleteLocation":e.deleteLocationHandler(r);break;case"updateLocation":e.updateLocationHandler(r);break;case"manageLocationPhotos":e.manageLocationPhotosHandler();break;case"deleteLocationPhoto":e.deleteLocationPhotoHandler(r);break;case"closeLocationConfigurationCard":e.closeLocationConfigurationCardHandler();break}}return t.jsx("div",{className:z.productBasicDataPage,children:t.jsxs(D,{menuCollectionType:"products",menuTitle:"Manage Product",isListLoading:o.isItemsCardLoading,listItems:o[o.activeTab],showListItems:!0,selectedId:o.activeTab==="products"?c:(l=o.selectedVariant)==null?void 0:l.variantId,skeletonQuantity:o.activeTab==="products"?(m=o.products)==null?void 0:m.length:(u=o.variants)==null?void 0:u.length,activeTab:o.activeTab,counter:o.productCounter,itemId:Number(c),activeCards:a.activeCards,onAction:d=>i("itemsCardClick",d),children:[t.jsx(I,{isLoading:a.isProductConfigurationCardLoading,product:o.product,productId:c,brandsList:o.brands,categoriesList:o.categories,selectedCategory:a.selectedCategory,countryCodesList:a.countryCodes,productCode:o.productCode,onAction:i}),a.activeCards.includes("createCategoryCard")&&t.jsx("div",{ref:n("createCategoryCard"),children:t.jsx(A,{isLoading:a.isCreateCategoryCardLoading,isPhotoUploaderLoading:o.isPhotoUploaderLoading,category:o.category,onAction:i})}),a.activeCards.includes("createBrandCard")&&t.jsx("div",{ref:n("createBrandCard"),children:t.jsx(E,{isLoading:a.isCreateBrandCardLoading,isPhotoUploaderLoading:o.isPhotoUploaderLoading,brand:o.brand,selectedCompany:a.selectedCompany,onAction:i})}),a.activeCards.includes("selectEntityCard")&&t.jsx("div",{ref:n("selectEntityCard"),children:t.jsx(U,{isLoading:a.isSelectEntityCardLoading,isGridLoading:a.isCompaniesGridLoading,entityName:"Company",entityCollection:a.companiesGridRequestModel.items,columns:W({onAction:i}),onAction:i})}),a.activeCards.includes("createCompanyCard")&&t.jsx("div",{ref:n("createCompanyCard"),children:t.jsx(O,{isLoading:a.isCreateCompanyCardLoading,isPhotoUploaderLoading:a.isPhotoUploaderLoading,countryCodes:a.countryCodes,onAction:i})}),a.activeCards.includes("companyConfigurationCard")&&t.jsx("div",{ref:n("companyConfigurationCard"),children:t.jsx(w,{isLoading:a.isCompanyConfigurationCardLoading,isGridLoading:a.isLocationsGridLoading,company:a.managedCompany,countryCodes:a.countryCodes,onAction:i})}),a.activeCards.includes("companyPhotosCard")&&t.jsx("div",{ref:n("companyPhotosCard"),children:t.jsx(L,{isImageUploaderLoading:a.isPhotoUploaderLoading,data:(g=a.managedCompany)==null?void 0:g.photos,contextName:"Company",contextId:(p=a.managedCompany)==null?void 0:p.companyId,noDataText:"COMPANY HAS NO PHOTOS",showCloseButton:!0,columns:G({onAction:i}),onAction:i})}),a.activeCards.includes("locationConfigurationCard")&&t.jsx("div",{ref:n("locationConfigurationCard"),children:t.jsx(M,{isLoading:a.isCustomerAddressDetailsLoading,location:a.managedLocation,countryCodes:a.countryCodes,onAction:i})}),a.activeCards.includes("locationPhotosCard")&&t.jsx("div",{ref:n("locationPhotosCard"),children:t.jsx(L,{isImageUploaderLoading:a.isPhotoUploaderLoading,data:(h=a.managedLocation)==null?void 0:h.photos,contextName:"Location",contextId:(P=a.managedLocation)==null?void 0:P.locationId,noDataText:"LOCATION HAS NO PHOTOS",showCloseButton:!0,columns:R({onAction:i}),onAction:i})})]})})}export{he as ProductBasicDataPage};
