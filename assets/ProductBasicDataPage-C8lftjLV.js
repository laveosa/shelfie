import{j as t,k as y,L as k,Q as b,m as x,z as f,B as v,ap as H,E as S,r as j,S as B}from"./index-CqLEDb0h.js";import{u as N,P as I,C as E,a as A}from"./useProductBasicDataPageService-fYJbOWOi.js";import{S as D}from"./SheContextSidebar-CL4FXvtg.js";import{u as T}from"./useCardActions-BvZqcpJ7.js";import{S as U}from"./SelectEntityCard-CxCADFZ_.js";import{C as w,a as G,P as L,M as O,L as M,b as R}from"./ManageLocationPhotosGridColumns-g5RgDhO9.js";import{I as z}from"./useAppTranslation-CsMEigHw.js";import"./SheCard-CX5qtFRW.js";import"./SheCardNotification-BVOYMQJ2.js";import"./ComponentViewEnum-Ba6F4129.js";import"./SheInput-DbpOA7IC.js";import"./types-TQ-jcydJ.js";import"./form-BPwqqXcv.js";import"./SheSelect-C_zn2LY0.js";import"./select-DL5f33uf.js";import"./chevron-up-DLJ1s3UP.js";import"./plus-Cg_Vlo1I.js";import"./she-select-convertors-CdG-Ygpu.js";import"./SheFileUploader-DanH7GSt.js";import"./index-CmwFoL9v.js";import"./useProductsPageService-TLcc9QQg.js";import"./useToast-BWT7QgMZ.js";import"./settings-2-BKZv0M77.js";import"./folder-up-D4AQ9V_0.js";import"./trash-Czml7Fyd.js";import"./SheGrid-Fci2HgNW.js";import"./AddressForm-Dn6PYovg.js";const _={},q="_iconCheck_1wa1s_1",F={iconCheck:q};function Q({onAction:d}){return[{id:"select",header:"Select",minSize:58,maxSize:58,cell:({row:n,table:a})=>{const o=a.options.meta,c=e=>{e.stopPropagation(),e.preventDefault(),d("selectCompany",n.original)};return t.jsx("div",{onClick:e=>e.stopPropagation(),children:t.jsx(y,{className:n.original.isSelected===!0?F.iconCheck:"",icon:n.original.isSelected===!0?k:b,variant:"ghost",onClick:c,disabled:o==null?void 0:o.isRowLoading(n.id)})})}},{id:"companyName",header:"Company",cell:({row:n})=>{const a=n.original.thumbnailUrl,o=n.original.companyName;return t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",width:"100%"},children:[t.jsx("div",{style:{width:"100%",maxWidth:"40px"},children:a?t.jsx("img",{src:a,alt:o||"Supplier",className:"object-cover rounded-md w-full h-full",style:{width:"100%"}}):t.jsx(x,{icon:z})}),t.jsx(f,{delayDuration:200,text:o,className:"max-w-[120px] overflow-hidden text-ellipsis whitespace-nowrap",children:t.jsx("span",{className:"she-text",children:o})})]})}},{id:"manage",header:"Actions",minSize:120,maxSize:120,cell:({row:n,table:a})=>{const o=a.options.meta,c=e=>{e.stopPropagation(),e.preventDefault(),d("manageCompany",n.original)};return t.jsx("div",{onClick:e=>e.stopPropagation(),children:t.jsx(y,{icon:v,value:"Manage",variant:"secondary",onClick:c,disabled:o==null?void 0:o.isRowLoading(n.id)})})}}]}function Le(){var l,m,u,g,p,h,P;const{handleCardAction:d,createRefCallback:n}=T({selectActiveCards:C=>C[B.PRODUCT_BASIC_DATA].activeCards,refreshAction:H.refreshActiveCards}),{state:a,productsState:o,productsService:c,...e}=N(d),{productId:s}=S();j.useEffect(()=>{e.getProductsHandler(o.productsGridRequestModel),e.getCategoriesHandler(),e.getBrandsHandler(),e.getCountersForProductsHandler(Number(s)),e.getProductDetailsHandler(Number(s)),e.getCountryCodesHandler()},[s]);async function i(C,r){switch(C){case"itemsCardClick":e.itemCardClickHandler(r);break;case"submitProductData":e.onSubmitProductDataHandler(s,r);break;case"checkCategoryName":e.checkCategoryNameHandler(r);break;case"createProductCategory":e.createNewCategoryHandler(r);break;case"checkBrandName":e.checkBrandNameHandler(r);break;case"createProductBrand":e.createBrandHandler(r);break;case"gotoProductsPage":e.gotoProductsPageHandler();break;case"generateProductCode":e.generateProductCodeHandler();break;case"checkProductCode":e.checkProductCodeHandler(r);break;case"openCreateProductCategoryCard":d("createCategoryCard",!0);break;case"openCreateProductBrandCard":d("createBrandCard",!0);break;case"closeCreateProductCategoryCard":d("createCategoryCard");break;case"closeCreateProductBrandCard":d("createBrandCard");break;case"openSelectEntityCard":e.openSelectEntityCardHandler();break;case"searchEntity":e.searchEntityHandler(r);break;case"selectCompany":e.selectCompanyHandler(r);break;case"openCreateEntityCard":e.openCreateEntityCardHandler();break;case"closeSelectEntityCard":e.closeSelectEntityCardHandler();break;case"createCompany":e.createCompanyHandler(r);break;case"closeCreateCompanyCard":e.closeCreateCompanyCardHandler();break;case"manageCompany":e.manageCompanyHandler(r);break;case"updateCompany":e.updateCompanyHandler(r);break;case"deleteCompany":e.deleteCompanyHandler(r);break;case"closeCompanyConfigurationCard":e.closeCompanyConfigurationCardHandler();break;case"manageCompanyPhotos":e.manageCompanyPhotosHandler();break;case"uploadPhoto":e.uploadPhotoHandler(r);break;case"deleteCompanyPhoto":e.deleteCompanyPhotoHandler(r);break;case"changePhotoPosition":e.changePhotoPositionHandler(r);break;case"closePhotosCard":e.closePhotosCardHandler(r);break;case"openLocationConfigurationCard":e.openLocationConfigurationCardHandler(r);break;case"createLocation":e.createLocationHandler(r);break;case"deleteLocation":e.deleteLocationHandler(r);break;case"updateLocation":e.updateLocationHandler(r);break;case"manageLocationPhotos":e.manageLocationPhotosHandler();break;case"deleteLocationPhoto":e.deleteLocationPhotoHandler(r);break;case"closeLocationConfigurationCard":e.closeLocationConfigurationCardHandler();break}}return t.jsx("div",{className:_.productBasicDataPage,children:t.jsxs(D,{menuCollectionType:"products",menuTitle:"Manage Product",isListLoading:o.isItemsCardLoading,listItems:o[o.activeTab],showListItems:!0,selectedId:o.activeTab==="products"?s:(l=o.selectedVariant)==null?void 0:l.variantId,skeletonQuantity:o.activeTab==="products"?(m=o.products)==null?void 0:m.length:(u=o.variants)==null?void 0:u.length,activeTab:o.activeTab,counter:o.productCounter,itemId:Number(s),activeCards:a.activeCards,children:[t.jsx(I,{isLoading:a.isProductConfigurationCardLoading,product:o.product,productId:s,brandsList:o.brands,categoriesList:o.categories,selectedCategory:a.selectedCategory,countryCodesList:a.countryCodes,productCode:o.productCode,onAction:i}),a.activeCards.includes("createCategoryCard")&&t.jsx("div",{ref:n("createCategoryCard"),children:t.jsx(E,{isLoading:a.isCreateProductCategoryCardLoading,isPhotoUploaderLoading:o.isPhotoUploaderLoading,category:o.category,onAction:i})}),a.activeCards.includes("createBrandCard")&&t.jsx("div",{ref:n("createBrandCard"),children:t.jsx(A,{isLoading:a.isCreateProductBrandCardLoading,isPhotoUploaderLoading:o.isPhotoUploaderLoading,brand:o.brand,selectedCompany:a.selectedCompany,onAction:i})}),a.activeCards.includes("selectEntityCard")&&t.jsx("div",{ref:n("selectEntityCard"),children:t.jsx(U,{isLoading:a.isSelectEntityCardLoading,isGridLoading:a.isCompaniesGridLoading,entityName:"Company",entityCollection:a.companiesGridRequestModel.items,columns:Q({onAction:i}),onAction:i})}),a.activeCards.includes("createCompanyCard")&&t.jsx("div",{ref:n("createCompanyCard"),children:t.jsx(w,{isLoading:a.isCreateCompanyCardLoading,isPhotoUploaderLoading:a.isPhotoUploaderLoading,countryCodes:a.countryCodes,onAction:i})}),a.activeCards.includes("companyConfigurationCard")&&t.jsx("div",{ref:n("companyConfigurationCard"),children:t.jsx(G,{isLoading:a.isCompanyConfigurationCardLoading,isGridLoading:a.isLocationsGridLoading,company:a.managedCompany,countryCodes:a.countryCodes,onAction:i})}),a.activeCards.includes("companyPhotosCard")&&t.jsx("div",{ref:n("companyPhotosCard"),children:t.jsx(L,{isImageUploaderLoading:a.isPhotoUploaderLoading,isGridLoading:a.isCompaniesGridLoading,data:(g=a.managedCompany)==null?void 0:g.photos,contextName:"Company",contextId:(p=a.managedCompany)==null?void 0:p.companyId,noDataText:"COMPANY HAS NO PHOTOS",showCloseButton:!0,columns:O({onAction:i}),onAction:i})}),a.activeCards.includes("locationConfigurationCard")&&t.jsx("div",{ref:n("locationConfigurationCard"),children:t.jsx(M,{isLoading:a.isCustomerAddressDetailsLoading,location:a.managedLocation,countryCodes:a.countryCodes,onAction:i})}),a.activeCards.includes("locationPhotosCard")&&t.jsx("div",{ref:n("locationPhotosCard"),children:t.jsx(L,{isImageUploaderLoading:a.isPhotoUploaderLoading,data:(h=a.managedLocation)==null?void 0:h.photos,contextName:"Location",contextId:(P=a.managedLocation)==null?void 0:P.locationId,noDataText:"LOCATION HAS NO PHOTOS",showCloseButton:!0,columns:R({onAction:i}),onAction:i})})]})})}export{Le as ProductBasicDataPage};
