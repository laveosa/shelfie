import{r as s,j as M,b as Ve,_ as K}from"./index-CsFqcJLY.js";import{g as ve,u as Ae,f as be,a as pe,b as Ce,R as q}from"./SheInput-7ZUsCR02.js";const Re="_sheTextArea_f3h53_1",Me="_resize_f3h53_17",Le="_sheTextAreaViewNormal_f3h53_21",Se="_sheTextAreaIcon_f3h53_21",Ie="_sheTextAreaClearButton_f3h53_22",Ne="_sheTextAreaViewCard_f3h53_26",ye="_invalid_f3h53_35",Be="_highlighted_f3h53_39",n={sheTextArea:Re,resize:Me,sheTextAreaViewNormal:Le,sheTextAreaIcon:Se,sheTextAreaClearButton:Ie,sheTextAreaViewCard:Ne,invalid:ye,highlighted:Be},D=s.forwardRef(({className:a,...i},d)=>M.jsx("textarea",{className:Ve("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:d,...i}));D.displayName="Textarea";function ke(a){const{value:i,iconProps:d,placeholder:U="enter text...",placeholderTransKey:W,autoFocus:O,disabled:G,isLoading:J,required:Q,minLength:V,maxLength:v,isValid:o=!0,ignoreValidation:X,showError:L=!0,resize:Y,rows:A=4,rowToExtend:S,delayTime:Z,showHighlighted:ee,clearBtnClassName:re="",view:te,onIsValid:I,onChange:l,onBlur:b,onDelay:h,onClear:p}=a,u=ve(a,Ce),[f,C]=s.useState(null),[N,y]=s.useState(o),[se,m]=s.useState(o),[ae,ne]=s.useState(L),[ie,oe]=s.useState(null),[le,ue]=s.useState(null),[ce,B]=s.useState(null),g=s.useRef(null),x=s.useRef(!1),c=s.useRef(!1),$=s.useRef(null),H=s.useRef(null),{translate:de,ariaDescribedbyId:k,setFocus:he,updateFormValue:F,resetFormField:fe,getFormMode:P}=Ae({props:a,identifier:"ISheTextarea"}),T=be(f,Z);s.useEffect(()=>{B(!1),H.current=i,i!==f&&(c.current=!0,C(i),w(i))},[i]),s.useEffect(()=>{x.current&&h&&h(T,{value:T,model:{...a,value:T,isValid:N},event:$.current})},[T]),s.useEffect(()=>{y(o),o&&(x.current=!1,c.current=!1,m(!0),E(!1))},[o]);function me(r){x.current=!0,$.current=r;const e=r.target.value,t=w(e);P()!==q.BLUR&&F(e||""),C(e),xe(),l==null||l(e,{value:e,model:{...a,value:e,isValid:t},event:r})}function ge(r){c.current=!0;const e=r.target.value,t=w(e);P()===q.BLUR&&F(e||""),B(!K.isEqual(H.current,e)),b==null||b(e,{value:e,model:{...a,value:e,isValid:t},event:r})}function _e(r){x.current=!1,c.current=!1,z(!0),m(!0),E(!1),fe();const e="";C(e),w(e),he(!0,g);const t=g.current;t.rows=A;const _={value:null,model:a,event:r};l==null||l(null,_),h==null||h(null,_),p==null||p(null,_)}function w(r){if(X||!c.current)return!0;let e=!0;e=Te(r,e),e=we(r,e),z(e)}function z(r){I&&I(r),y(r)}function xe(){if(!S||!g.current)return;const r=g.current;r.rows=A;const e=Math.floor(r.scrollHeight/22);r.rows=Math.min(e,S)}function Te(r,e){if(!Q||!e||!c.current)return e;const t=(r==null?void 0:r.length)>0;return t||m(!1),j(t,"context is required","REPLACE.ME"),t}function we(r,e){if(!V&&!v||!e)return m(!0),e;const t=r==null?void 0:r.toString().trim().length,_=typeof V=="number"?t>=V:!0,Ee=typeof v=="number"?t<=v:!0,R=_&&Ee;return m(R),j(R,"value length not valid","REPLACE.ME"),R}function j(r,e,t){r?E(!1):E(!0,e,t)}function E(r,e,t){L&&r&&ne(r),oe(e),ue(t)}return M.jsx(pe,{...u,className:`${u.className} ${n.sheTextArea} ${ee&&ce?n.highlighted:""} ${N?"":n.invalid} ${Y?n.resize:""} ${te==="card"?n.sheTextAreaViewCard:n.sheTextAreaViewNormal}`,clearBtnValue:f,ariaDescribedbyId:k,iconProps:{className:`${d==null?void 0:d.className} ${n.sheTextAreaIcon}`},clearBtnClassName:`${re} ${n.sheTextAreaClearButton}`,contextLengthLimitsValue:f,isContextLengthLimitsValid:se,errorMessage:u.errorMessage??ie,errorMessageTransKey:u.errorMessageTransKey??le,hideErrorMessage:K.isNil(u.hideErrorMessage)?!ae:u.hideErrorMessage,onClear:_e,children:M.jsx(D,{className:"componentTriggerElement",ref:g,value:f??"",placeholder:de(W,{},U),"aria-invalid":!o,"aria-describedby":k,autoFocus:O,disabled:G||J,rows:A,onChange:me,onBlur:ge})})}export{ke as S};
