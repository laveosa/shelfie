import{j as e,q as f,f as I,w as N,s as T,e as m,R as j,o as p,aa as Y,I as ve,J as Ne,x as se,X as ge}from"./index-nY2QEa15.js";import{S as D}from"./SheCard-DogZVG5K.js";import{S as Z}from"./SheDatePicker-CxBaWBOQ.js";import{S as ee}from"./SheSelect-Dj8ONBM5.js";import{S as k}from"./SheGrid-H1pV-ZPE.js";import{I as y,u as L}from"./useAppTranslation-U95Zo56s.js";import{f as he,g as te,M as Ce,h as je,i as Se,U as _e}from"./SheContextSidebar-C9XHDPKZ.js";import{S as A}from"./SheInput-DACYsg9p.js";import{P as B}from"./plus-gDfo8HrU.js";import{G as pe,a as ke}from"./GridSortingEnum-Qa64oiYF.js";import{G as Ie}from"./GridDateRangeFilter-pnY-Vm9C.js";var re=(i=>(i.NONE="None",i.NEW="New",i.PACKING_PENDING="PackingPending",i.DELIVERY_PENDING="DeliveryPending",i.COMPLETED="Completed",i))(re||{});const ye={None:"No Status",New:"New",PackingPending:"Packing Pending",DeliveryPending:"Delivery Pending",Completed:"Completed"},fe="_shipmentConfigurationCard_109vx_1",be="_shipmentConfigurationCardContent_109vx_5",Be="_shipmentConfiguration_109vx_1",Oe="_shipmentDetailsItem_109vx_16",Pe="_subtitleText_109vx_27",Te="_customerInfoAvatarBlock_109vx_31",De="_avatarImage_109vx_36",Le="_avatarInitials_109vx_39",Ae="_selectCustomerBlock_109vx_54",ze="_shipmentProductsBlock_109vx_62",$e="_shipmentProductsButton_109vx_67",Fe="_shipmentContentBlock_109vx_71",we="_packageContentBlock_109vx_71",qe="_deliveryServiceBlock_109vx_77",Ke="_deliveryServiceButtons_109vx_82",l={shipmentConfigurationCard:fe,shipmentConfigurationCardContent:be,shipmentConfiguration:Be,shipmentDetailsItem:Oe,subtitleText:Pe,customerInfoAvatarBlock:Te,avatarImage:De,avatarInitials:Le,selectCustomerBlock:Ae,shipmentProductsBlock:ze,shipmentProductsButton:$e,shipmentContentBlock:Fe,packageContentBlock:we,deliveryServiceBlock:qe,deliveryServiceButtons:Ke},We="_customerNameBlock_vite1_1",Ue="_noImageIcon_vite1_7",Ve="_avatarInitials_vite1_14",Qe="_orderLink_vite1_28",b={customerNameBlock:We,noImageIcon:Ue,avatarInitials:Ve,orderLink:Qe};function Ee(i){return[{accessorKey:"orderId",header:"Order Id",minSize:100,maxSize:100,cell:({row:a})=>e.jsx("div",{className:`${b.orderLink} she-text-link`,onClick:()=>i("navigateToOrder",a.original.orderId),children:a.original.orderId})},{accessorKey:"customerName",header:"Customer",minSize:120,cell:({row:a})=>{var n,r;const s=(n=a.original.customer)==null?void 0:n.thumbnailUrl,t=(r=a.original.customer)==null?void 0:r.customerName;return e.jsxs("div",{className:b.customerNameBlock,children:[e.jsx("div",{children:s?e.jsx("img",{src:s,alt:t||"Customer",className:"object-cover rounded-md w-full h-full",style:{width:"48px",height:"48px"}}):t?e.jsx("div",{className:b.avatarInitials,children:f(t)}):e.jsx("div",{className:b.noImageIcon,children:e.jsx(I,{icon:y,maxWidth:"30px"})})}),e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsx(N,{delayDuration:200,text:t,className:"max-w-[100px] overflow-hidden text-ellipsis whitespace-nowrap",children:e.jsx("span",{className:"she-text",children:t})})})]})}},{accessorKey:"orderDate",header:"Date",minSize:100,maxSize:100,cell:({row:a})=>e.jsx("span",{children:T(a.getValue("orderDate"),"date")})},{accessorKey:"unitsAmount",header:"Items",minSize:80,maxSize:80,cell:({row:a})=>e.jsx("span",{children:a.getValue("unitsAmount")})},{id:"manage",header:"",minSize:120,maxSize:120,cell:({row:a,table:s})=>{const t=s.options.meta;return e.jsx("div",{onClick:n=>n.stopPropagation(),style:{display:"flex",justifyContent:"center"},children:e.jsx(m,{icon:he,variant:"secondary",value:"Remove",onClick:()=>i("removeOrderFromShipment",a.original),disabled:t==null?void 0:t.isRowLoading(a.id)})})}}]}const Re="_variantNameCell_1652q_1",Ge="_productNameImageBlock_1652q_6",He="_productNameImage_1652q_6",Me="_variantName_1652q_1",Je="_traitOptionsCell_1652q_19",Xe="_colorOptions_1652q_29",Ye="_orderLink_1652q_36",S={variantNameCell:Re,productNameImageBlock:Ge,productNameImage:He,variantName:Me,traitOptionsCell:Je,colorOptions:Xe,orderLink:Ye};function Ze({onAction:i}){return[{id:"variantName",accessorFn:a=>a.variantName,header:"Product",minSize:160,maxSize:160,cell:({row:a})=>{var t;const s=(t=a.original.photo)==null?void 0:t.thumbnailUrl;return e.jsxs("div",{className:S.variantNameCell,children:[e.jsx("div",{className:S.productNameImageBlock,children:s?e.jsx("img",{src:s,alt:a.original.variantName||"Variant",className:S.productNameImage}):e.jsx(I,{icon:y,maxWidth:"30px"})}),e.jsx(N,{delayDuration:200,text:a.getValue("variantName"),className:S.variantName,children:e.jsx("span",{children:a.getValue("variantName")})})]})}},{accessorKey:"traitOptions",header:"Traits",minSize:100,maxSize:100,cell:({row:a})=>{const s=a.original.traitOptions||[],t=s.filter(r=>r.traitTypeId===2&&r.optionColor),n=s.filter(r=>r.traitTypeId===1&&r.optionName);return e.jsxs("div",{className:S.traitOptionsCell,children:[t.map((r,o)=>e.jsx("div",{className:S.colorOptions,style:{background:r.optionColor}},`color-${o}`)),n.map((r,o)=>e.jsx("span",{style:{fontSize:"0.875rem"},children:r.optionName},`size-${o}`))]})}},{accessorKey:"orderId",header:"Order",minSize:80,cell:({row:a})=>e.jsx("div",{className:`${S.orderLink} she-text-link`,onClick:()=>i("navigateToOrder",a.original.orderId),children:a.original.orderId})},{accessorKey:"quantityPending",header:"Qty pending",minSize:100,maxSize:100,cell:({row:a})=>e.jsx("span",{children:a.original.quantityPending})},{id:"add",header:"",minSize:100,maxSize:100,cell:({row:a})=>e.jsx("div",{onClick:s=>s.stopPropagation(),children:e.jsx(m,{icon:te,value:"Add",variant:"secondary",onClick:()=>{i("addItemToShipment",a.original.stockActionId)}})})}]}const ea="_variantNameCell_1wbj2_1",aa="_productNameImageBlock_1wbj2_7",sa="_productNameImage_1wbj2_7",ta="_variantName_1wbj2_1",ra="_traitOptionsCell_1wbj2_20",na="_colorOptions_1wbj2_30",la="_orderLink_1wbj2_37",ia="_inputBlock_1wbj2_41",ca="_quantityNumber_1wbj2_47",oa="_quantityInput_1wbj2_58",x={variantNameCell:ea,productNameImageBlock:aa,productNameImage:sa,variantName:ta,traitOptionsCell:ra,colorOptions:na,orderLink:la,inputBlock:ia,quantityNumber:ca,quantityInput:oa};function da({onAction:i}){return[{id:"variantName",accessorFn:a=>a.variantName,header:"Product",minSize:160,maxSize:160,cell:({row:a})=>{var t;const s=(t=a.original.photo)==null?void 0:t.thumbnailUrl;return e.jsxs("div",{className:x.variantNameCell,children:[e.jsx("div",{className:x.productNameImageBlock,children:s?e.jsx("img",{src:s,alt:a.original.variantName||"Variant",className:x.productNameImage}):e.jsx(I,{icon:y,maxWidth:"30px"})}),e.jsx(N,{delayDuration:200,text:a.getValue("variantName"),className:x.variantName,children:e.jsx("span",{children:a.getValue("variantName")})})]})}},{accessorKey:"traitOptions",header:"Details",minSize:100,maxSize:100,cell:({row:a})=>{const s=a.original.traitOptions||[],t=s.filter(r=>r.traitTypeId===2&&r.optionColor),n=s.filter(r=>r.traitTypeId===1&&r.optionName);return e.jsxs("div",{className:x.traitOptionsCell,children:[t.map((r,o)=>e.jsx("div",{className:x.colorOptions,style:{background:r.optionColor}},`color-${o}`)),n.map((r,o)=>e.jsx("span",{style:{fontSize:"0.875rem"},children:r.optionName},`size-${o}`))]})}},{accessorKey:"orderId",header:"Order",minSize:80,cell:({row:a})=>e.jsx("div",{className:`${x.orderLink} she-text-link`,onClick:()=>i("navigateToOrder",a.original.orderId),children:a.original.orderId})},{accessorKey:"quantity",header:"Qty to pack",minSize:250,maxSize:250,cell:({row:a})=>e.jsxs("div",{className:x.inputBlock,children:[e.jsx(m,{icon:Ce,variant:"secondary",onClick:()=>i("decreasePackedOrderItemQuantity",a.original.stockActionId)}),e.jsx("div",{className:x.quantityNumber,children:e.jsx("span",{className:"she-text",children:`${a.original.limitQuantityToPack}  /`})}),e.jsx(A,{className:x.quantityInput,value:a.original.quantityToPack,type:"number",minWidth:"130px",maxWidth:"130px",onDelay:s=>{a.original.quantityToPack=s,i("changePackedOrderItemQuantity",a.original)}}),e.jsx(m,{icon:B,variant:"secondary",disabled:a.original.limitQuantityToPack===a.original.quantityToPack,onClick:()=>i("increasePackedOrderItemQuantity",a.original.stockActionId)})]})}]}const ma="_variantNameCell_sqmc3_1",ua="_productNameImageBlock_sqmc3_7",xa="_productNameImage_sqmc3_7",va="_variantName_sqmc3_1",Na="_traitOptionsCell_sqmc3_20",ga="_colorOptions_sqmc3_30",ha="_orderLink_sqmc3_37",_={variantNameCell:ma,productNameImageBlock:ua,productNameImage:xa,variantName:va,traitOptionsCell:Na,colorOptions:ga,orderLink:ha};function Ca({onAction:i}){return[{id:"variantName",accessorFn:a=>a.variantName,header:"Product",minSize:160,maxSize:160,cell:({row:a})=>{var t;const s=(t=a.original.photo)==null?void 0:t.thumbnailUrl;return e.jsxs("div",{className:_.variantNameCell,children:[e.jsx("div",{className:_.productNameImageBlock,children:s?e.jsx("img",{src:s,alt:a.original.variantName||"Variant",className:_.productNameImage}):e.jsx(I,{icon:y,maxWidth:"30px"})}),e.jsx(N,{delayDuration:200,text:a.getValue("variantName"),className:_.variantName,children:e.jsx("span",{children:a.getValue("variantName")})})]})}},{accessorKey:"traitOptions",header:"Details",minSize:100,maxSize:100,cell:({row:a})=>{const s=a.original.traitOptions||[],t=s.filter(r=>r.traitTypeId===2&&r.optionColor),n=s.filter(r=>r.traitTypeId===1&&r.optionName);return e.jsxs("div",{className:_.traitOptionsCell,children:[t.map((r,o)=>e.jsx("div",{className:_.colorOptions,style:{background:r.optionColor}},`color-${o}`)),n.map((r,o)=>e.jsx("span",{style:{fontSize:"0.875rem"},children:r.optionName},`size-${o}`))]})}},{accessorKey:"orderId",header:"Order",minSize:80,cell:({row:a})=>e.jsx("div",{className:`${_.orderLink} she-text-link`,onClick:()=>i("navigateToOrder",a.original.orderId),children:a.original.orderId})},{accessorKey:"quantity",header:"Qty packed",minSize:100,cell:({row:a})=>e.jsxs("span",{className:"she-text",children:[a.original.quantityPacked," "]})}]}function rs({isLoading:i,shipment:a,deliveryServices:s,onAction:t}){var $,F,w,q,K,W,U,V,Q,E,R,G,H,M,J,X;const[n,r]=j.useState(),[o,C]=j.useState((a==null?void 0:a.trackNumber)||null),[O,ne]=j.useState((a==null?void 0:a.deliveryServiceId)||null),[le,ie]=j.useState(null),[z,ce]=j.useState(null),{translate:d}=L(),oe=j.useRef(null),de=j.useRef(null);function me(c){return u=>e.jsx("span",{dangerouslySetInnerHTML:{__html:c},...u})}function ue(c){return c==null?void 0:c.map(u=>({value:u.deliveryServiceId,text:u.deliveryServiceName,icon:me(u.deliveryServiceLogo)}))}j.useEffect(()=>{ie(()=>{var u;const c=(u=a==null?void 0:a.orderItems)==null?void 0:u.map(P=>({...P,amount:1}));return oe.current=c,c}),ce(()=>{var u;const c=(u=a==null?void 0:a.shipmentItems)==null?void 0:u.map(P=>({...P,amount:1}));return de.current=c,c})},[a==null?void 0:a.orderItems]);function xe(){return Object.values(re).map(c=>({value:c,text:ye[c]}))}return e.jsx(D,{className:l.shipmentConfigurationCard,title:d("CardTitles.ShipmentConfiguration",{shipmentId:a==null?void 0:a.shipmentId}),showCloseButton:!0,isLoading:i,showNotificationCard:!0,notificationCardProps:{title:"Cancel Shipment",titleTransKey:"CardTitles.CancelShipment",text:"This variant will be deleted, it will no longer be available for sale but you will still see it in the orders where it sold",textTransKey:"ConfirmationMessages.CancelShipment",buttonText:"Cancel",buttonTextTransKey:"Cancel",onClick:()=>t("cancelShipment",a==null?void 0:a.shipmentId)},onSecondaryButtonClick:()=>t("closeShipmentConfigurationCard"),children:e.jsx("div",{className:l.shipmentConfigurationCardContent,children:e.jsxs("div",{className:l.shipmentConfiguration,children:[e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("OrderForm.Labels.CreatedAt")}),(a==null?void 0:a.createdAt)&&e.jsx("span",{className:"she-text",children:T(a==null?void 0:a.createdAt,"date")})]}),e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("ShipmentForm.Labels.QueuePacking")}),e.jsx(Z,{maxWidth:"250px",date:a==null?void 0:a.queuePacking,onSelectDate:c=>t("changeShipmentDate",{queuePacking:c,queueShipment:a==null?void 0:a.queueShipment})})]}),e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("ShipmentForm.Labels.QueueShipment")}),e.jsx(Z,{maxWidth:"250px",date:a==null?void 0:a.queueShipment,onSelectDate:c=>t("changeShipmentDate",{queuePacking:a==null?void 0:a.queuePacking,queueShipment:c})})]}),e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("OrderForm.Labels.ShipmentStatus")}),e.jsx(ee,{maxWidth:"250px",hideFirstOption:!0,selected:a==null?void 0:a.shipmentStatus,items:xe(),onSelect:c=>r(c)})]}),e.jsx(p,{}),e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:l.subtitleText,children:d("SectionTitles.Customer")}),e.jsx(m,{value:"Change Customer",valueTransKey:"SpecialText.ChangeCustomer",icon:je,variant:"secondary",onClick:()=>t("changeCustomer")})]}),(a==null?void 0:a.customer)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("CustomerForm.Labels.Name")}),e.jsx("div",{children:e.jsxs("div",{className:l.customerInfoAvatarBlock,children:[($=a==null?void 0:a.customer)!=null&&$.thumbnailUrl?e.jsx("img",{src:(F=a==null?void 0:a.customer)==null?void 0:F.thumbnailUrl,alt:(w=a==null?void 0:a.customer)==null?void 0:w.customerName,className:l.avatarImage}):e.jsx("div",{className:l.avatarInitials,children:f((q=a==null?void 0:a.customer)==null?void 0:q.customerName)}),e.jsx("span",{className:"she-text",children:(K=a==null?void 0:a.customer)==null?void 0:K.customerName})]})})]}),((W=a==null?void 0:a.customer)==null?void 0:W.email)&&e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("CustomerForm.Labels.Email")}),e.jsx("span",{className:"she-text",children:(U=a==null?void 0:a.customer)==null?void 0:U.email})]}),((V=a==null?void 0:a.customer)==null?void 0:V.phone)&&e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("CustomerForm.Labels.PhoneNumber")}),e.jsx("span",{className:"she-text",children:(Q=a==null?void 0:a.customer)==null?void 0:Q.phone})]})]}),e.jsx(p,{}),e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:l.subtitleText,children:d("AddressForm.Labels.AddressLine1")}),e.jsx(m,{value:"Change Address",valueTransKey:"SpecialText.ChangeAddress",icon:Se,variant:"secondary",disabled:!(a!=null&&a.customer),onClick:()=>t("openSelectAddressCard",a==null?void 0:a.customerId)})]}),(a==null?void 0:a.deliveryAddress)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("AddressForm.Labels.AddressLine1")}),e.jsx("span",{className:"she-text",children:(E=a==null?void 0:a.deliveryAddress)==null?void 0:E.addressLine1})]}),e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("AddressForm.Labels.PostalCode")}),e.jsx("span",{className:"she-text",children:(R=a==null?void 0:a.deliveryAddress)==null?void 0:R.postalCode})]}),e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("AddressForm.Labels.City")}),e.jsx("span",{className:"she-text",children:(G=a==null?void 0:a.deliveryAddress)==null?void 0:G.city})]}),e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("AddressForm.Labels.State")}),e.jsx("span",{children:(H=a==null?void 0:a.deliveryAddress)==null?void 0:H.state})]}),e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("AddressForm.Labels.Country")}),e.jsx("span",{children:(M=a==null?void 0:a.deliveryAddress)==null?void 0:M.countryName})]})]}),e.jsx(p,{}),e.jsxs("div",{className:l.selectCustomerBlock,children:[e.jsx("span",{className:l.subtitleText,children:d("ShipmentForm.Labels.OrdersInShipment")}),e.jsx(m,{value:"Select Order",valueTransKey:"SpecialText.SelectOrder",icon:B,variant:"secondary",onClick:()=>t("openSelectOrderForShipmentCard")})]}),e.jsx(k,{isLoading:!1,showHeader:!1,columns:Ee(t),data:a==null?void 0:a.orders}),((J=a==null?void 0:a.orderItems)==null?void 0:J.length)>0&&(a==null?void 0:a.shipmentStatus)!=="DeliveryPending"&&e.jsxs(e.Fragment,{children:[e.jsx(p,{}),e.jsxs("div",{className:l.shipmentProductsBlock,children:[e.jsx("span",{className:l.subtitleText,children:d("ShipmentForm.Labels.ProductsWaitingForShipment")}),e.jsx(m,{value:"Add All",valueTransKey:"SpecialText.AddAll",icon:B,variant:"info",onClick:()=>t("addAllItemsToShipment")})]}),e.jsx(k,{isLoading:!1,showHeader:!1,columns:Ze({onAction:t}),data:le})]}),((X=a==null?void 0:a.shipmentItems)==null?void 0:X.length)>0&&(a==null?void 0:a.shipmentStatus)!=="DeliveryPending"&&e.jsxs(e.Fragment,{children:[e.jsx(p,{}),e.jsx("div",{className:l.shipmentProductsBlock,children:e.jsx("span",{className:l.subtitleText,children:d("OrderActions.ConfirmPackedProducts")})}),e.jsx(k,{isLoading:!1,showHeader:!1,columns:da({onAction:t}),data:z}),e.jsx("div",{className:l.shipmentProductsButton,children:e.jsx(m,{value:"Confirm packed products",valueTransKey:"OrderActions.ConfirmPackedProducts",icon:Y,onClick:()=>t("confirmPackedProducts",z)})})]}),["DeliveryPending","Completed"].includes(a==null?void 0:a.shipmentStatus)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:l.shipmentContentBlock,children:[e.jsx(p,{}),e.jsxs("div",{className:l.packageContentBlock,children:[e.jsx("span",{className:l.subtitleText,children:d("ShipmentForm.Labels.PackageContent")}),e.jsx(k,{isLoading:!1,showHeader:!1,columns:Ca({onAction:t}),data:a==null?void 0:a.shipmentItems})]})]}),e.jsxs("div",{className:l.deliveryServiceBlock,children:[e.jsx("span",{className:l.subtitleText,children:d("ShipmentForm.Labels.ConfirmDeliveryService")}),e.jsx(A,{label:"Tracking number",labelTransKey:"ShipmentForm.Labels.TrackingNumber",placeholder:"enter tracking number...",placeholderTransKey:"ShipmentForm.Placeholders.EnterTrackingNumber",fullWidth:!0,value:o,onDelay:c=>C(c)}),e.jsx(ee,{label:"Delivery service",labelTransKey:"ShipmentForm.Labels.DeliveryService",placeholder:"enter tracking number...",placeholderTransKey:"ShipmentForm.Placeholders.EnterTrackingNumber",fullWidth:!0,hideFirstOption:!0,items:ue(s),selected:O,onSelect:c=>ne(c)}),e.jsxs("div",{className:l.deliveryServiceButtons,children:[e.jsx(m,{value:"Return shipment to packing",valueTransKey:"OrderActions.ReturnShipmentToPacking",variant:"secondary",onClick:()=>t("returnShipmentStatusToPrevious")}),e.jsx(m,{value:(a==null?void 0:a.shipmentStatus)==="DeliveryPending"?"Confirm shipment send":"Save changes",valueTransKey:(a==null?void 0:a.shipmentStatus)==="DeliveryPending"?"OrderActions.ConfirmShipmentSend":"",icon:Y,disabled:!o||!O||!a.deliveryAddressId,onClick:()=>{t("confirmDeliveryData",{trackNumber:o,deliveryServiceId:O,deliveryAddressId:a.deliveryAddressId})}})]})]})]})]})})})}const ja="_selectCustomerAddressCard_g4gnv_1",Sa="_selectCustomerAddressCardContent_g4gnv_1",_a="_customerInformationBlock_g4gnv_6",pa="_customerBlock_g4gnv_11",ka="_noImageIcon_g4gnv_16",Ia="_avatarInitials_g4gnv_23",ya="_createAddressBlock_g4gnv_36",fa="_createAddressText_g4gnv_41",ba="_addressesListBlock_g4gnv_45",g={selectCustomerAddressCard:ja,selectCustomerAddressCardContent:Sa,customerInformationBlock:_a,customerBlock:pa,noImageIcon:ka,avatarInitials:Ia,createAddressBlock:ya,createAddressText:fa,addressesListBlock:ba},Ba="_iconCheck_1wa1s_1",ae={iconCheck:Ba};function Oa({onAction:i}){return[{id:"select",minSize:70,maxSize:70,cell:({row:a,table:s})=>{const t=s.options.meta,n=r=>{r.stopPropagation(),r.preventDefault(),i("selectAddress",a.original.addressId)};return e.jsx("div",{onClick:r=>r.stopPropagation(),children:e.jsx(m,{className:a.original.isSelected===!0?ae.iconCheck:"",icon:a.original.isSelected===!0?ve:Ne,variant:"ghost",onClick:n,disabled:t==null?void 0:t.isRowLoading(a.id)})})}},{id:"city",header:"Address",minSize:100,cell:({row:a})=>{const s=a.original.alias,t=a.original.addressLine1,n=a.original.addressLine2;return e.jsx("div",{className:ae.customerNameBlock,children:e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx(N,{delayDuration:200,text:s,className:"max-w-[120px] overflow-hidden text-ellipsis whitespace-nowrap",children:e.jsx("span",{className:"she-text",children:s})}),t&&e.jsx(N,{delayDuration:200,text:t,className:"max-w-[120px] overflow-hidden text-ellipsis whitespace-nowrap",children:e.jsx("span",{className:"she-subtext",children:t})}),n&&e.jsx(N,{delayDuration:200,text:n,className:"max-w-[120px] overflow-hidden text-ellipsis whitespace-nowrap",children:e.jsx("span",{className:"she-subtext",children:n})})]})})}},{id:"manage",header:"Actions",minSize:120,maxSize:120,cell:({row:a,table:s})=>{const t=s.options.meta,n=r=>{r.stopPropagation(),r.preventDefault(),i("manageAddress",a.original)};return e.jsx("div",{onClick:r=>r.stopPropagation(),children:e.jsx(m,{icon:se,value:"Manage",variant:"secondary",onClick:n,disabled:t==null?void 0:t.isRowLoading(a.id)})})}}]}function ns({isLoading:i,isGridLoading:a,customer:s,addressesList:t,onAction:n}){return L(),e.jsx(D,{className:g.selectCustomerAddressCard,title:"Select Customer Address",isLoading:i,showCloseButton:!0,onSecondaryButtonClick:()=>n("closeSelectAddressCard"),children:e.jsxs("div",{className:g.selectCustomerAddressCardContent,children:[e.jsxs("div",{className:g.customerInformationBlock,children:[e.jsxs("div",{className:g.customerBlock,children:[e.jsx("div",{children:s!=null&&s.thumbnailUrl?e.jsx("img",{src:s==null?void 0:s.thumbnailUrl,alt:s==null?void 0:s.customerName,className:"object-cover rounded-md w-full h-full",style:{width:"48px",height:"48px"}}):s!=null&&s.customerName?e.jsx("div",{className:g.avatarInitials,children:f(s==null?void 0:s.customerName)}):e.jsx("div",{className:g.noImageIcon,children:e.jsx(I,{icon:y,maxWidth:"30px"})})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx(N,{delayDuration:200,text:s==null?void 0:s.customerName,className:"max-w-[120px] overflow-hidden text-ellipsis whitespace-nowrap",children:e.jsx("span",{className:"she-text",children:s==null?void 0:s.customerName})}),(s==null?void 0:s.email)&&e.jsx(N,{delayDuration:200,text:s==null?void 0:s.email,className:"max-w-[120px] overflow-hidden text-ellipsis whitespace-nowrap",children:e.jsx("span",{className:"she-subtext",children:s==null?void 0:s.email})})]})]}),e.jsx(m,{value:"Manage",icon:se,variant:"secondary",onClick:()=>n("openCustomerCard",s)})]}),e.jsxs("div",{className:g.createAddressBlock,children:[e.jsxs("div",{className:g.createAddressText,children:[e.jsx("span",{className:"she-text",children:"Missing address?"}),e.jsx("span",{className:"she-text",children:"Create one!"})]}),e.jsx(m,{value:"Create Address",icon:B,variant:"secondary",onClick:()=>n("manageAddress",null)})]}),e.jsxs("div",{className:g.addressesListBlock,children:[e.jsx(A,{placeholder:"search address...",isSearch:!0,fullWidth:!0,showClearBtn:!0,onDelay:r=>n("searchAddress",r),onClear:()=>n("searchAddress",null)}),e.jsx(k,{data:t,isLoading:a,showHeader:!1,columns:Oa({onAction:n}),skeletonQuantity:10,customMessage:"There are no addresses created yet"})]})]})})}const Pa="_selectOrderForShipmentCard_py9am_1",Ta="_selectOrderForShipmentCardContent_py9am_5",Da="_customerBlockContainer_py9am_10",La="_customerBlock_py9am_10",Aa="_customerInfo_py9am_20",za="_customerInfoAvatarBlock_py9am_26",$a="_avatarImage_py9am_31",Fa="_avatarInitials_py9am_34",wa="_customerName_py9am_47",h={selectOrderForShipmentCard:Pa,selectOrderForShipmentCardContent:Ta,customerBlockContainer:Da,customerBlock:La,customerInfo:Aa,customerInfoAvatarBlock:za,avatarImage:$a,avatarInitials:Fa,customerName:wa},qa="_customerNameBlock_c3ncm_1",Ka="_noImageIcon_c3ncm_7",Wa="_avatarInitials_c3ncm_14",Ua="_shipmentStatus_c3ncm_28",Va="_shipmentStatusAvailable_c3ncm_38",Qa="_shipmentStatusNotAvailable_c3ncm_44",Ea="_selectButton_c3ncm_62",v={customerNameBlock:qa,noImageIcon:Ka,avatarInitials:Wa,shipmentStatus:Ua,shipmentStatusAvailable:Va,shipmentStatusNotAvailable:Qa,selectButton:Ea};function Ra(i){const a=s=>s==="New"||s==="Pending"?v.shipmentStatusAvailable:s==="Not Available"?v.shipmentStatusNotAvailable:"";return[{id:"id",header:"ID",minSize:60,maxSize:60,cell:({row:s})=>e.jsx("span",{children:s.original.id})},{id:"customer",accessorFn:s=>s.variantName,header:"customer",minSize:120,cell:({row:s})=>{var r,o;const t=(r=s.original.customer)==null?void 0:r.thumbnailUrl,n=(o=s.original.customer)==null?void 0:o.customerName;return e.jsxs("div",{className:v.customerNameBlock,children:[t?e.jsx("img",{src:t,alt:n||"Customer",className:"object-cover rounded-md w-full h-full",style:{width:"48px",height:"48px"}}):n?e.jsx("div",{className:v.avatarInitials,children:f(n)}):e.jsx("div",{className:v.noImageIcon,children:e.jsx(I,{icon:y,maxWidth:"30px"})}),e.jsx(N,{delayDuration:200,text:n,className:"max-w-[100%] overflow-hidden text-ellipsis whitespace-nowrap",children:e.jsx("span",{className:"she-text",children:n})})]})}},{id:"date",header:"Date",minSize:90,maxSize:90,cell:({row:s})=>e.jsx("span",{children:T(s.original.date,"date")})},{id:"orderStatus",header:"Order",minSize:100,maxSize:100,cell:({row:s})=>{const t=s.original.orderStatus;return e.jsx("div",{className:`${v.shipmentStatus} ${a(t)}`,children:e.jsx("span",{children:t})})}},{id:"paymentStatus",header:"Payment",minSize:100,maxSize:100,cell:({row:s})=>{const t=s.original.paymentStatus;return e.jsx("div",{className:`${v.shipmentStatus} ${a(t)}`,children:e.jsx("span",{children:t})})}},{id:"shipmentStatus",header:"Status",minSize:100,maxSize:100,cell:({row:s})=>{const t=s.original.shipmentStatus;return e.jsx("div",{className:`${v.shipmentStatus} ${a(t)}`,children:e.jsx("span",{children:t})})}},{id:"value",header:"Value",minSize:80,maxSize:80,cell:({row:s})=>{const t=s.original.currency.briefName;return e.jsx("span",{className:"she-text",children:`${s.original.value}${t}`})}},{id:"add",header:"",minSize:100,maxSize:100,cell:({row:s})=>e.jsx("div",{className:v.selectButton,onClick:t=>t.stopPropagation(),children:e.jsx(m,{icon:te,value:"Add",variant:"secondary",onClick:()=>i("connectOrderToShipment",s.original)})})}]}function ls({isLoading:i,isGridLoading:a,ordersGridRequestModel:s,customer:t,onAction:n}){var o;L();function r(){return Object.values(pe).map(C=>({value:C,description:ke[C]}))}return e.jsx(D,{className:h.selectOrderForShipmentCard,title:"Select order for shipment",titleTransKey:"",showCloseButton:!0,isLoading:i,onSecondaryButtonClick:()=>n("closeSelectOrderForShipmentCard"),children:e.jsxs("div",{className:h.selectOrderForShipmentCardContent,children:[e.jsxs("div",{className:h.customerBlockContainer,children:[e.jsx("span",{className:"she-text",children:"Show customer orders:"}),e.jsxs("div",{className:h.customerBlock,children:[e.jsxs("div",{className:h.customerInfo,children:[t&&e.jsxs("div",{className:h.customerInfoAvatarBlock,children:[t!=null&&t.thumbnailUrl?e.jsx("img",{src:t==null?void 0:t.thumbnailUrl,alt:(t==null?void 0:t.name)||(t==null?void 0:t.customerName),className:h.avatarImage}):e.jsx("div",{className:h.avatarInitials,children:f((t==null?void 0:t.name)||(t==null?void 0:t.customerName))}),e.jsx("span",{className:`${h.customerName} she-subtext`,children:(t==null?void 0:t.name)||(t==null?void 0:t.customerName)})]}),e.jsx(m,{value:t?"Change Customer":"Select Customer",valueTransKey:t?"SpecialText.ChangeCustomer":"OrderActions.SelectCustomer",icon:_e,variant:"secondary",onClick:()=>n("changeCustomer")})]}),e.jsx(m,{value:"Show All",valueTransKey:"SpecialText.ShowAll",icon:ge,variant:"secondary",onClick:()=>n("showAllOrders")})]})]}),e.jsx(k,{gridRequestModel:s,data:s==null?void 0:s.items,columns:Ra(n),sortingItems:r(),skeletonQuantity:(o=s==null?void 0:s.items)==null?void 0:o.length,customMessage:"No orders created yet",customMessageTransKey:"",isLoading:a,onApplyColumns:C=>n("applyColumns",C),onDefaultColumns:()=>n("resetColumns"),onGridRequestChange:C=>n("gridRequestChange",C),children:e.jsx(Ie,{})})]})})}export{re as S,ye as a,rs as b,ls as c,ns as d};
