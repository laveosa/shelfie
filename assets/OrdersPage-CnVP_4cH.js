import{j as s,w as p,f as g,I as h,s as x,e as l,x as S,n as f,S as C,y as _,r as y}from"./index-DybU9lv3.js";import{c as j}from"./OrdersPage.module-m8m3mWZe.js";import{G as O,a as P}from"./GridSortingEnum-Qa64oiYF.js";import{u as v}from"./useOrdersPageService-CceZJp0X.js";import{S as I}from"./SheCard-JWlyTss7.js";import{G as N}from"./GridShowItemsFilter-tNmzy64w.js";import{S as k}from"./SheSelect-DkAtzaWK.js";import{S as z}from"./SheGrid-DvAOS33I.js";import{I as G}from"./useAppTranslation-NlALFuCP.js";import{G as R}from"./GridDateRangeFilter-B_jpiLCH.js";import{a as b,S as B}from"./SheContextSidebar-BKksk-en.js";import{P as D}from"./plus-Dv0aUE5j.js";import"./SheCardNotification-Yx-BMvzf.js";import"./ComponentViewEnum-Ba6F4129.js";import"./SheInput-CKzfybja.js";import"./trash-CFfYG3xN.js";import"./chevron-up-C7ChJr01.js";import"./select-BDB0m4xP.js";import"./settings-2-JTaowDGi.js";import"./SheDatePicker-ByjOO6gI.js";import"./folder-up-Cq6cKtKD.js";const E="_ordersCard_1ywly_1",K="_ordersCardContent_1ywly_5",$="_ordersCardHeader_1ywly_9",L="_createOrderButton_1ywly_12",u={ordersCard:E,ordersCardContent:K,ordersCardHeader:$,createOrderButton:L},V="_productStatus_1fxes_1",w="_customerBlock_1fxes_15",H="_customerImage_1fxes_19",T="_customerInfo_1fxes_27",W="_statusBlank_1fxes_39",q="_statusSuccess_1fxes_45",F="_statusWarning_1fxes_51",M="_statusProcess_1fxes_57",U="_statusProgressing_1fxes_63",A="_statusDone_1fxes_69",Q="_statusError_1fxes_75",r={productStatus:V,customerBlock:w,customerImage:H,customerInfo:T,statusBlank:W,statusSuccess:q,statusWarning:F,statusProcess:M,statusProgressing:U,statusDone:A,statusError:Q};function J(c){const a=e=>{switch(e){case"New":return r.statusBlank;case"Processing":return r.statusProcess;case"Pending":return r.statusWarning;case"Shipped":return r.statusProgressing;case"Delivered":return r.statusDone;case"Returned":return r.statusWarning;case"Refunded":return r.statusError;case"Cancelled":return r.statusError;case"Paid":return r.statusSuccess;default:return r.statusBlank}};return[{accessorKey:"id",header:"ID",minSize:50,maxSize:50},{accessorKey:"customer",header:"Customer",minSize:220,cell:({row:e})=>{const t=e.original.customer.thumbnailUrl;return s.jsx(p,{delayDuration:200,text:e.original.customer.customerName,description:`email: ${e.original.customer.email}, phone: ${e.original.customer.phone}`,className:"max-w-[100%] overflow-hidden text-ellipsis whitespace-nowrap",children:s.jsxs("div",{className:r.customerBlock,children:[s.jsx("div",{className:r.customerImage,children:s.jsx(g,{icon:t||G,fullWidth:!0,iconView:h.BUTTON})}),s.jsxs("div",{className:r.customerInfo,children:[s.jsx("span",{className:"she-text",children:e.original.customer.customerName}),s.jsx("span",{className:"she-subtext",children:e.original.customer.email}),s.jsx("span",{className:"she-subtext",children:e.original.customer.phone})]})]})})}},{accessorKey:"date",header:"Date",minSize:100,cell:({row:e})=>s.jsx("span",{children:x(e.getValue("date"),"date")})},{accessorKey:"channel",header:"Channel",minSize:100,cell:({row:e})=>s.jsx("span",{children:e.getValue("channel")})},{accessorKey:"orderStatus",header:"Order",minSize:100,cell:({row:e})=>{const t=e.getValue("orderStatus");return s.jsx("div",{className:`${r.productStatus} ${a(t)}`,children:s.jsx("span",{children:t})})}},{accessorKey:"paymentStatus",header:"Payment",minSize:100,cell:({row:e})=>{const t=e.getValue("paymentStatus");return s.jsx("div",{className:`${r.productStatus} ${a(t)}`,children:s.jsx("span",{children:t})})}},{accessorKey:"count",header:"Items",minSize:80,maxSize:80,cell:({row:e})=>s.jsx("span",{children:e.getValue("count")})},{accessorKey:"value",header:"Value",minSize:120,maxSize:120,cell:({row:e})=>s.jsx("span",{children:`${e.getValue("value")} ${e.original.currency.briefName}`})},{accessorKey:"income",header:"Income",minSize:120,maxSize:120,cell:({row:e})=>s.jsx("span",{children:`${e.getValue("income")} ${e.original.currency.briefName}`})},{id:"manage",header:"",minSize:120,maxSize:120,cell:({row:e,table:t})=>{const n=t.options.meta,o=i=>{i.stopPropagation(),i.preventDefault(),c(e.id,n==null?void 0:n.setLoadingRow,e.original)};return s.jsx("div",{onClick:i=>i.stopPropagation(),style:{display:"flex",justifyContent:"center"},children:s.jsx(l,{icon:S,variant:"secondary",value:"Manage",onClick:o,disabled:n==null?void 0:n.isRowLoading(e.id)})})}}]}function X({isLoading:c,isGridLoading:a,preferences:e,sortingOptions:t,ordersGridRequestModel:n,onAction:o}){function i(d,Y,m){o("manageOrder",m)}return s.jsxs("div",{className:u.ordersCard,children:[s.jsx(I,{className:u.ordersCardContent,headerClassName:u.ordersCardHeader,title:"Orders",titleTransKey:"CardTitles.Orders",isLoading:c,children:s.jsxs(z,{isLoading:a,columns:J(i),data:n.items,gridRequestModel:n,sortingItems:t,columnsPreferences:e,preferenceContext:"productReferences",skeletonQuantity:n.pageSize,onApplyColumns:d=>o("applyColumns",d),onDefaultColumns:()=>o("resetColumns"),onGridRequestChange:d=>o("gridRequestChange",d),children:[s.jsx(R,{}),s.jsx(k,{icon:b,placeholder:"Status",placeholderTransKey:"OrderForm.Placeholders.Status",minWidth:"150px"}),s.jsx(N,{context:"Canceled"})]})}),s.jsx(l,{className:u.createOrderButton,value:"Create Order",valueTransKey:"OrderActions.CreateOrder",icon:D,variant:"info",onClick:()=>o("createOrder")})]})}function _e(){const c=v(),a=f(C.ORDERS),e=Object.values(O).map(o=>({value:o,description:P[o]})),{orderId:t}=_();y.useEffect(()=>{c.getListOfOrdersForGridHandler(a.ordersGridRequestModel)},[]);async function n(o,i){switch(o){case"createOrder":c.createOrderHandler();break;case"manageOrder":c.manageOrderHandler(i);break;case"gridRequestChange":c.handleGridRequestChange(i);break;case"applyColumns":c.updateUserPreferencesHandler(i);break;case"resetColumns":c.resetUserPreferencesHandler("products");break}}return s.jsx("div",{className:j.ordersPage,children:s.jsx(B,{menuCollectionType:"sales",menuTitle:"Sales",itemId:Number(t),counter:a.salesCounters,activeCards:a.activeCards,children:s.jsx(X,{isLoading:a.isOrdersCardLoading,isGridLoading:a.isOrdersGridLoading,preferences:a.preferences,sortingOptions:e,ordersGridRequestModel:a.ordersGridRequestModel,onAction:n})})})}export{_e as OrdersPage};
