import{j as l,n as xa,i as N,C as Sa,r as w,e as va,k as ka,d as B,S as E,q as Ga,G as F,A as _,H as q,I as H,c as Ma,K as f,bx as a,Y as U,L as ba,Q as W,a8 as z,h as Oa,o as Da}from"./index-BgQa47gg.js";import{S as Ra}from"./SheGrid-uzkyOZng.js";import{c as ja}from"./SheSelect-Bemnzgzd.js";import{c as Fa}from"./ChooseVariantTraitsCard.module-DPmE-6dq.js";import{S as qa}from"./SheCard-TmbF1_I2.js";import{u as Q}from"./chevron-up-BnFDI10H.js";import{p as Na,S as wa}from"./SheContextSidebar-DsZqgJ7j.js";import{P as Y}from"./settings-2-BTVyb-Qp.js";import{A as Aa,C as Ea,P as Ba}from"./AddVariantCard-CPLjfEwC.js";import{V as _a,A as Ua,S as Wa,D as za,a as Ya,M as $a,b as Qa}from"./VariantPhotosCard-DPPjelZi.js";import{S as Ka,C as Ja}from"./CompaniesListGridColumns-DUiN9zdO.js";import{S as Xa}from"./SelectEntityCard-zmDfr_wq.js";import{u as Za}from"./useProductsPageService-DGJ-kwCH.js";import{u as et}from"./useToast-Ddu7z5Z2.js";import{u as at}from"./useCardActions-D6oM1_3i.js";import{C as tt,a as rt,P as $,M as ot,L as nt,b as it}from"./ManageLocationPhotosGridColumns-CXw64TOr.js";import"./SheInput-DR7d3r4D.js";import"./useAppTranslation-WsuOvhO_.js";import"./select-54-gfLzT.js";import"./SheCardNotification-DnnZbXEU.js";import"./ComponentViewEnum-Ba6F4129.js";import"./trash-hroypMYd.js";import"./form-cGuroVqV.js";import"./SheForm-Cmtuihaj.js";import"./SheDatePicker-CydyV-z_.js";import"./types-B685w38Y.js";import"./she-select-convertors-CdG-Ygpu.js";import"./SheFileUploader-C7f--ktf.js";import"./placeholder-image-BgG3Yd5d.js";import"./SheTextarea-BlRA-nqw.js";import"./AddressForm-D71tTBe0.js";const st={},dt="_manageVariantsCard_d685g_1",ct="_manageVariantsContent_d685g_1",lt="_textBlock_d685g_10",ut="_buttonBlock_d685g_22",M={manageVariantsCard:dt,manageVariantsContent:ct,textBlock:lt,buttonBlock:ut},pt=u=>[{accessorKey:"traits",header:"Traits",minSize:80,maxSize:80,cell:({row:e})=>{const o=e.original.traitOptions||[],i=o.filter(c=>c.traitTypeId===2&&c.optionColor),h=o.filter(c=>c.traitTypeId===1&&c.optionName);return l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",maxWidth:"60px"},children:[i.map((c,s)=>l.jsx("div",{style:{background:c.optionColor,minWidth:"20px",minHeight:"20px",borderRadius:"50%"}},`color-${s}`)),h.length>0&&l.jsx(xa,{delayDuration:200,text:h[0].optionName,className:"max-w-[30px] min-w-[30px] overflow-hidden text-ellipsis whitespace-nowrap",children:l.jsx("span",{className:`${Fa.traitName} she-text`,children:h[0].optionName})})]})}},{accessorKey:"stock",header:"Stock",minSize:90,maxSize:90,cell:({row:e})=>l.jsx("span",{style:{paddingLeft:"15px",paddingRight:"15px"},children:e.original.stockAmount??0})},{accessorKey:"isActive",header:"Active",minSize:80,maxSize:80,cell:({row:e})=>l.jsx(ja,{checked:e.original.isActive,onCheckedChange:()=>u("activateVariant",e.id,void 0,e)})},{id:"manage",header:"Actions",minSize:120,maxSize:120,cell:({row:e,table:o})=>{const i=o.options.meta;return l.jsx("div",{onClick:h=>h.stopPropagation(),children:l.jsx(N,{icon:Sa,value:"Manage",variant:"secondary",onClick:()=>u("manageVariant",e.id,i==null?void 0:i.setLoadingRow,e.original),disabled:i==null?void 0:i.isRowLoading(e.id)})})}}];function Ct({isLoading:u,isVariantsLoading:e,data:o,traits:i,variants:h,productCounter:c,onAction:s,...y}){const{t:g}=Q();function T(V,P){switch(V){case"manageVariant":s("manageVariant",P);break;case"activateVariant":s("activateVariant",P);break;case"dnd":const{newIndex:S,activeItem:L}=P;s("changeVariantPosition",{newIndex:S,activeItem:L});break;case"deleteVariant":s("deleteVariant",P);break}}function k(V,P,S,L){switch(V){case"activateVariant":T("activateVariant",L.original);break;case"manageVariant":T("manageVariant",L);break;case"changeVariantPosition":T("changeVariantPosition",{newIndex:L.newIndex,activeItem:L.original});break;case"deleteVariant":T("deleteVariant",L);break}}return l.jsx(qa,{className:M.manageVariantsCard,title:"Manage Variants",titleTransKey:"CardTitles.ManageVariants",isLoading:u,minWidth:"420px",...y,children:l.jsxs("div",{className:M.manageVariantsContent,children:[l.jsx("div",{className:M.textBlock,children:(i==null?void 0:i.length)>0?l.jsxs(l.Fragment,{children:[l.jsxs("span",{className:"she-text",children:[g("ProductForm.Labels.ProductDescribedByTraits")," ",i.map((V,P)=>l.jsxs(w.Fragment,{children:[l.jsx("b",{children:V.traitName}),P<i.length-1?", ":""]},V.traitId))]}),l.jsx(N,{icon:Na,variant:"secondary",value:g("ProductActions.ManageTraits"),onClick:()=>s("openChooseVariantTraitsCard")})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"she-text",children:g("ProductForm.Labels.ProductNotDescribedByTraits")}),l.jsx(N,{icon:Y,variant:"secondary",value:g("ProductActions.SelectTraits"),onClick:()=>{s("openChooseVariantTraitsCard")}})]})}),l.jsx(va,{}),l.jsxs("div",{className:M.buttonBlock,children:[l.jsx("span",{className:"she-title",children:g("SectionTitles.Variant")}),(i==null?void 0:i.length)>0&&l.jsx(N,{icon:Y,variant:"secondary",value:g("ProductActions.CreateVariant"),onClick:()=>{s("openAddVariantCard")}})]}),l.jsx("div",{children:l.jsx(Ra,{isLoading:e,className:M.manageVariantsCardGrid,enableDnd:!0,showHeader:!1,columns:pt(k),data:h,gridRequestModel:o,customMessage:g("ProductMessages.NoVariants"),onNewItemPosition:(V,P)=>T("dnd",{newIndex:V,activeItem:P})})})]})})}function ht(u){const e=ka(),o=Za(),i=B(E.MANAGE_VARIANTS),h=B(E.PRODUCTS),{addToast:c}=et(),{openConfirmationDialog:s}=Ga(),{t:y}=Q(),[g]=F.useGetVariantsForGridMutation(),[T]=F.useToggleVariantIsActiveMutation(),[k]=F.useChangeVariantPositionMutation(),[V]=F.useLazyGenerateProductCodeQuery(),[P]=_.useDeletePhotoMutation(),[S]=q.useGetListOfPurchasesForGridMutation(),[L]=q.useAddVariantToPurchaseProductsMutation(),[b]=q.useLazyGetPurchaseDetailsQuery(),[O]=q.useCreatePurchaseForSupplierMutation(),[I]=H.useGetListOfCompaniesForGridMutation(),[D]=H.useCreateCompanyMutation(),[v]=_.useUploadPhotoMutation(),[p]=H.useAddNewLocationToCompanyMutation(),[K]=Ma.useLazyGetCountryCodeQuery(),[G]=H.useLazyGetCompanyDetailsQuery(),[J]=H.useDeleteCompanyMutation(),[X]=H.useUpdateCompanyDetailsMutation(),[Z]=H.useAddLocationToCompanyMutation(),[ee]=H.useChangePositionOfCompanyPhotoMutation(),[ae]=H.useChangePositionOfLocationPhotoMutation(),[te]=H.useUpdateLocationDetailsMutation(),[re]=H.useDeleteLocationMutation();function oe(t){return g(t).then(r=>r.data)}function ne(){return V(null).then(t=>t.data)}function ie(t){return T(t).then(r=>r.data)}function se(t,r,n){return k({productId:t,variantId:r,index:n}).then(d=>d.data)}function de(t){return P(t).then(r=>r.data)}function ce(t){var r,n;h.products===null&&(e(f.setIsItemsCardLoading(!0)),o.getTheProductsForGridHandler(h.productsGridRequestModel).then(()=>{e(f.setIsItemsCardLoading(!1))})),((r=h.variants)==null?void 0:r.length)===0&&(e(f.setIsItemsCardLoading(!0)),o.getVariantsForGridHandler(h.variantsGridRequestModel).then(()=>{e(f.setIsItemsCardLoading(!1))})),h.selectedVariant&&o.getVariantDetailsHandler(h.selectedVariant.variantId).then(d=>{e(f.refreshSelectedVariant(d)),e(f.refreshVariantPhotos(d.photos))}),i.listOfTraitsWithOptionsForProduct.length===0&&o.getListOfTraitsWithOptionsForProductHandler(t).then(d=>e(a.refreshListOfTraitsWithOptionsForProduct(d))),h.taxesList.length===0&&o.getTaxesListHandler(),(!h.productCounter||((n=h.product)==null?void 0:n.productId)!==t)&&(e(f.setIsProductMenuCardLoading(!0)),o.getCountersForProductsHandler(Number(t)).then(()=>{e(f.setIsProductMenuCardLoading(!1))}))}function le(t){var r;(h.productVariants.length===0||((r=h.product)==null?void 0:r.productId)!==t)&&(e(a.setIsManageVariantsCardLoading(!0)),o.getProductVariantsHandler(t).then(n=>{e(a.setIsManageVariantsCardLoading(!1)),h.selectedVariant?(e(f.refreshProductVariants(U(h.selectedVariant.variantId,n,"variantId"))),u("variantConfigurationCard",!0)):e(f.refreshProductVariants(n))}))}function ue(t){u("variantPhotosCard"),o.itemCardHandler(t)}function pe(t,r){e(a.setIsAddVariantCardLoading(!0)),o.checkVariantCombinationHandler(r,t).then(n=>{n?o.createVariantHandler(r,t).then(d=>{e(a.setIsAddVariantCardLoading(!1)),d?(u("addVariantCard"),o.getCountersForProductsHandler(r),e(f.refreshProductVariants([...h.productVariants,d])),c({text:"Variant added successfully",type:"success"})):c({text:"Variant not added",description:d.error.message,type:"error"})}):(e(a.setIsAddVariantCardLoading(!1)),e(a.refreshIsDuplicateVariant(!0)))})}function Ce(t,r){e(a.setIsAddVariantCardLoading(!0)),o.createVariantHandler(r,t).then(n=>{e(a.setIsAddVariantCardLoading(!1)),n?(u("addVariantCard"),o.getCountersForProductsHandler(r),e(f.refreshProductVariants([...h.productVariants,n])),c({text:"Variant added successfully",type:"success"})):c({text:"Variant not added",description:n.error.message,type:"error"})}),e(a.refreshIsDuplicateVariant(!1))}function he(t,r){u("variantConfigurationCard",!0),e(f.refreshProductVariants(U(t.variantId,h.productVariants,"variantId"))),e(a.setIsVariantConfigurationCardLoading(!0)),e(a.setIsVariantOptionsGridLoading(!0)),e(a.setIsVariantPhotoGridLoading(!0)),i.activeCards.includes("variantPhotosCard")&&(e(a.setIsProductPhotoGridLoading(!0)),o.getProductPhotosForVariantHandler(r,t.variantId).then(n=>{e(a.setIsProductPhotoGridLoading(!1)),e(a.refreshProductPhotosForVariant(n))})),o.getVariantDetailsHandler(t.variantId).then(n=>{e(a.setIsVariantConfigurationCardLoading(!1)),e(a.setIsVariantOptionsGridLoading(!1)),e(a.setIsVariantPhotoGridLoading(!1)),n?(e(f.refreshSelectedVariant(n)),e(f.refreshVariantPhotos(n==null?void 0:n.photos))):(c({text:"Variant not found",type:"error"}),u("variantConfigurationCard"))})}function fe(t){o.updateVariantDetailsHandler(t.variant.variantId,t.formattedData).then(r=>{if(r){const n={...r,traitOptions:ba(r.traitOptions,"color",[{field:"isRemoved",value:!0,color:W.ERROR},{field:"isMissing",value:!0,color:W.ERROR}])};e(f.refreshSelectedVariant(n)),c({text:"Variant updated successfully",type:"success"})}else c({text:"Variant not updated",description:r.error.message,type:"error"})})}function ge(t,r){u("manageTraitsCard"),e(a.setIsManageTraitsCardLoading(!0)),o.updateVariantTraitOptionsHandler(t.variant.variantId,t.submissionData).then(n=>{e(a.setIsManageTraitsCardLoading(!1)),n.error?c({text:"Variant trait options not updated",description:n.error.message,type:"error"}):(o.getProductVariantsHandler(r).then(d=>{e(f.refreshProductVariants(d))}),o.getVariantDetailsHandler(t.variant.variantId).then(d=>{e(f.refreshSelectedVariant(d))}),c({text:"Variant trait options updated successfully",type:"success"}))})}function me(t){ie(t.variantId).then(r=>{r?(e(f.refreshProductVariants(h.productVariants.map(n=>n.variantId===t.variantId?{...n,isActive:!t.isActive}:n))),c({text:"Variant activated successfully",type:"success"})):c({text:"Variant not activated",description:r.error.message,type:"error"})})}async function ye(t){if(await s({headerTitle:"Delete Variant",text:`You are about to delete variant "${t.variantName}".`,primaryButtonValue:"Delete",secondaryButtonValue:"Cancel"}))await o.deleteVariantHandler(t.variantId).then(n=>{n.error?c({text:n.error.data.detail,type:"error"}):(o.getCountersForProductsHandler(t.productId),e(f.refreshProductVariants(h.productVariants.filter(d=>d.variantId!==t.variantId))),u("variantConfigurationCard"),c({text:"Variant deleted successfully",type:"success"}))});else return}function Pe(t){e(a.setIsAddStockCardLoading(!0)),L({id:t.purchaseId,model:t.priceModel}).then(r=>{e(a.setIsAddStockCardLoading(!1)),o.getVariantDetailsHandler(t.priceModel.variantId).then(n=>{n&&(e(f.refreshSelectedVariant(n)),e(f.refreshProductVariants(h.productVariants.map(d=>d.variantId===n.variantId?{...d,stockAmount:n.stockAmount}:d))))}),b(t.purchaseId).then(n=>{e(a.refreshSelectedPurchase(n.data))}),r?(u("addStockCard"),c({text:"Stock increased successfully",type:"success"})):c({text:"Stock not increased",description:r.error.message,type:"error"})})}function Ve(t){e(a.setIsDisposeStockCardLoading(!0)),o.disposeVariantFromStockHandler(t.variant.variantId,t.formattedData).then(r=>{e(a.setIsDisposeStockCardLoading(!1)),c(r?{text:"Variant disposed successfully",type:"success"}:{text:"Variant not disposed",description:r.error.message,type:"error"})})}function Le(t,r){e(a.setIsVariantPhotosCardLoading(!0)),o.uploadPhotoHandler(t).then(n=>{e(a.setIsVariantPhotosCardLoading(!1)),n.error?c({text:"Photo not uploaded",description:n.error.message,type:"error"}):(e(f.refreshVariantPhotos([...h.variantPhotos,n.data])),e(f.refreshSelectedVariant({...h.selectedVariant,photos:[...h.selectedVariant.photos,n.data]})),o.getCountersForProductsHandler(Number(r)).then(d=>{e(f.refreshProductCounter(d))}),c({text:"Photo uploaded successfully",type:"success"}))})}function Ie(t){o.attachProductPhotoToVariantHandler(h.selectedVariant.variantId,t.photoId).then(r=>{if(e(a.setIsVariantPhotosCardLoading(!1)),r.error)c({text:"Can`t attach photo to variant",type:"error"});else{const n=i.productPhotosForVariant.find(d=>d.photoId===t.photoId);if(n){const d=h.variantPhotos??[],C=d.some(m=>m.photoId===n.photoId)?d:[...d,n];e(f.refreshVariantPhotos(C)),e(a.refreshProductPhotosForVariant(i.productPhotosForVariant.filter(m=>m.photoId!==t.photoId)))}c({text:"Photo added to variant successfully",type:"success"})}})}async function He(t){await s({headerTitle:"Detach photo from variant",text:`You are about to detach photo from variant  "${h.selectedVariant.variantName}".`,primaryButtonValue:"Detach",secondaryButtonValue:"Cancel"})&&await o.detachVariantPhotoHandler(h.selectedVariant.variantId,t.photoId).then(n=>{if(n.error)c({text:"Photo not added to variant",description:n.error.message,type:"error"});else{const d=h.variantPhotos??[],C=d.find(m=>m.photoId===t.photoId);if(C){const m=i.productPhotosForVariant??[],x=m.some(A=>A.photoId===C.photoId)?m:[...m,C];e(a.refreshProductPhotosForVariant(x));const j=d.filter(A=>A.photoId!==t.photoId);e(f.refreshVariantPhotos(j))}c({text:"Photo was detached successfully",type:"success"})}})}function Te(t){switch(t.contextName){case"Company":ee({companyId:i.managedCompany.companyId,photoId:t.activeItem.photoId,index:t.newIndex}).then(r=>{r.error||(G(i.managedCompany.companyId).then(n=>{e(a.refreshManagedCompany(n.data))}),(t.newIndex===0||t.oldIndex===0)&&(e(a.setIsSuppliersGridLoading(!0)),I(i.companiesGridRequestModel).then(n=>{e(a.setIsSuppliersGridLoading(!1));const d=n.data.items.map(C=>{var m;return{...C,isSelected:C.companyId===((m=i.selectedCompany)==null?void 0:m.companyId)}});e(a.refreshCompaniesGridRequestModel({...n.data,items:d}))})))});break;case"Location":ae({locationId:i.managedLocation.locationId,photoId:t.activeItem.photoId,index:t.newIndex}).then(r=>{r.error||G(i.managedCompany.companyId).then(n=>{e(a.refreshManagedCompany(n.data))})});break;default:o.changePhotoPositionForVariantHandler(h.selectedVariant.variantId,t.activeItem.photoId,t.newIndex).then(()=>{e(a.setIsVariantPhotoGridLoading(!0)),(t.newIndex===0||t.oldIndex===0)&&o.getVariantsForGridHandler(h.gridRequestModel).then(r=>e(f.refreshVariants(r.items))),o.getVariantDetailsHandler(h.selectedVariant.variantId).then(r=>{e(a.setIsVariantPhotoGridLoading(!1)),e(f.refreshSelectedVariant(r)),e(f.refreshVariantPhotos(r==null?void 0:r.photos))})})}}function xe(){e(a.setIsProductTraitConfigurationCardLoading(!0)),e(a.resetSelectedTrait()),o.getListOfTypesOfTraitsHandler().then(t=>{e(a.setIsProductTraitConfigurationCardLoading(!1)),e(a.refreshTypesOfTraits(t)),u("productTraitConfigurationCard",!0),e(a.refreshSelectedTrait({}))})}function Se(t){u("productTraitConfigurationCard",!0),e(a.setIsProductTraitConfigurationCardLoading(!0)),e(a.setIsTraitOptionsGridLoading(!0)),Promise.all([o.getTraitHandler(t),o.getOptionsForTraitHandler(t),o.getListOfTypesOfTraitsHandler()]).then(([r,n,d])=>{e(a.setIsProductTraitConfigurationCardLoading(!1)),e(a.setIsTraitOptionsGridLoading(!1)),e(a.refreshSelectedTrait(r)),e(a.refreshColorOptionsGridRequestModel({...i.colorOptionsGridRequestModel,items:n.filter(C=>!C.isDeleted)})),e(a.refreshTypesOfTraits(d))})}function ve(t){e(a.setIsProductTraitConfigurationCardLoading(!0)),o.createNewTraitHandler(t).then(r=>{e(a.setIsProductTraitConfigurationCardLoading(!1)),r?(e(a.refreshSelectedTrait(r)),o.getOptionsForTraitHandler(r.traitId).then(n=>{e(a.refreshColorOptionsGridRequestModel({...i.colorOptionsGridRequestModel,items:n.filter(d=>!d.isDeleted)}))}),o.getListOfAllTraitsHandler().then(n=>{e(a.refreshTraits(n))}),c({text:"Trait created successfully",type:"success"})):c({text:"Trait not created",description:r.error.message,type:"error"})})}function ke(t){e(a.setIsProductTraitConfigurationCardLoading(!0)),o.updateTraitHandler(i.selectedTrait.traitId,t).then(r=>{e(a.setIsProductTraitConfigurationCardLoading(!1)),r?(o.getListOfAllTraitsHandler().then(n=>{e(a.refreshTraits(n))}),c({text:"Trait updated successfully",type:"success"})):c({text:"Trait not updated",description:r.error.message,type:"error"})})}function Ge(t,r){e(a.refreshSelectedTraitsIds(t)),e(a.setIsChooseVariantTraitsCardLoading(!0)),o.setProductTraitsHandler(r,t).then(n=>{e(a.setIsChooseVariantTraitsCardLoading(!1)),n?(e(a.resetActiveCards()),o.getListOfTraitsWithOptionsForProductHandler(r).then(d=>{e(a.refreshListOfTraitsWithOptionsForProduct(d))}),e(a.setIsManageVariantsCardLoading(!0)),o.getProductVariantsHandler(r).then(d=>{e(a.setIsManageVariantsCardLoading(!1)),e(f.refreshProductVariants(d))}),c({text:"Traits set successfully",type:"success"})):c({text:"Traits not set",description:n.error.message,type:"error"})})}async function Me(t,r){if(await s({headerTitle:"Deleting trait",text:`You are about to remove the trait ${t.traitName}. All products connected to it will loose the configuration and will require your attention to map it to the new trait.`,primaryButtonValue:"Delete",secondaryButtonValue:"Cancel"})){e(a.setIsChooseVariantTraitsCardLoading(!0));try{await o.deleteTraitHandler(t.traitId);const[d,C]=await Promise.all([o.getListOfTraitsWithOptionsForProductHandler(r),o.getListOfAllTraitsHandler()]);e(a.refreshListOfTraitsWithOptionsForProduct(d)),e(a.refreshTraits(C)),c({text:"Trait deleted successfully",type:"success"})}catch(d){c({text:d.message||"Failed to delete trait",type:"error"})}finally{e(a.setIsChooseVariantTraitsCardLoading(!1)),u("productTraitConfigurationCard")}}}function be(){o.createNewOptionForTraitHandler(i.selectedTrait.traitId,{}).then(t=>{t?(o.getListOfAllTraitsHandler().then(r=>{e(a.refreshTraits(r))}),e(a.refreshColorOptionsGridRequestModel({...i.colorOptionsGridRequestModel,items:[...i.colorOptionsGridRequestModel.items,t]})),c({text:"Option created successfully",type:"success"})):c({text:"Option not created",description:t.error.message,type:"error"})})}function Oe(t){o.updateOptionsForTraitHandler(t.optionId,t.updatedModel).then(r=>{r?(e(a.refreshColorOptionsGridRequestModel({...i.colorOptionsGridRequestModel,items:i.colorOptionsGridRequestModel.items.map(n=>n.optionId===r.optionId?r:n)})),c({text:"Option updated successfully",type:"success"})):c({text:"Option not updated",description:r.error.message,type:"error"})})}async function De(t){await s({headerTitle:"Deleting option",text:`You are about to remove the option ${t.optionName}.`,primaryButtonValue:"Delete",secondaryButtonValue:"Cancel"})&&o.deleteOptionsForTraitHandler(t.optionId).then(n=>{var d;n.error?c({text:(d=n.error)==null?void 0:d.message,type:"error"}):(o.getListOfAllTraitsHandler().then(C=>{e(a.refreshTraits(C))}),e(a.refreshColorOptionsGridRequestModel({...i.colorOptionsGridRequestModel,items:i.colorOptionsGridRequestModel.items.filter(C=>C.optionId!==t.optionId)})),c({text:"Option deleted successfully",type:"success"}))})}function Re(t){o.changePositionOfTraitOptionHandler(t.selectedTrait.traitId,t.activeItem.optionId,t.newIndex)}function je(){e(a.refreshActiveCards([])),u("addVariantCard",!0,[]),e(f.refreshProductVariants(z(h.productVariants)))}function Fe(){e(a.setIsChooseVariantTraitsCardLoading(!0)),o.getListOfAllTraitsHandler().then(t=>{e(a.setIsChooseVariantTraitsCardLoading(!1)),e(a.refreshTraits(t))}),u("chooseVariantTraitsCard",!0)}function qe(){u("addStockCard",!0),e(a.setIsAddStockCardLoading(!0)),o.getCurrenciesListHandler().then(t=>{e(a.setIsAddStockCardLoading(!1)),e(f.refreshCurrenciesList(t))})}function Ne(){u("disposeStockCard",!0),o.getVariantDetailsHandler(h.selectedVariant.variantId).then(t=>{e(f.refreshSelectedVariant(t))})}function we(t){u("variantHistoryCard",!0),e(a.setIsVariantsHistoryGridLoading(!0)),o.getVariantStockHistoryHandler(t).then(r=>{if(e(a.setIsVariantsHistoryGridLoading(!1)),!r.error&&r){const n=r==null?void 0:r.map(d=>({...d,createdDate:Oa(d.createdDate,"date")}));e(a.refreshVariantHistory(n))}})}function Ae(){u("manageTraitsCard",!0)}function Ee(t,r){u("variantPhotosCard",!0),e(a.setIsProductPhotoGridLoading(!0)),o.getProductPhotosForVariantHandler(r,t).then(n=>{e(a.setIsProductPhotoGridLoading(!1)),e(a.refreshProductPhotosForVariant(n))})}function Be(t){u("selectPurchaseCard",!0),e(a.setIsPurchaseGridLoading(!0)),S(t).then(r=>{if(e(a.setIsPurchaseGridLoading(!1)),r.error)return;const n=r.data.items.map(d=>{var C;return{...d,isSelected:d.purchaseId===((C=i.selectedPurchase)==null?void 0:C.purchaseId)}});e(a.refreshPurchaseGridRequestModel({...r.data,items:n}))})}function _e(){u("productTraitConfigurationCard")}function Ue(){e(a.refreshIsDuplicateVariant(!1)),u("addVariantCard")}function We(){u("variantPhotosCard")}function ze(){e(f.refreshProductVariants(z(h.productVariants))),e(f.resetSelectedVariant()),u("variantConfigurationCard")}function Ye(){u("variantHistoryCard")}function $e(){u("selectPurchaseCard")}function Qe(t){u("selectPurchaseCard"),e(a.refreshSelectedPurchase(t))}function Ke(){u("addStockCard"),e(a.resetSelectedPurchase())}function Je(t){e(a.setIsPurchaseGridLoading(!0)),S({...i.purchaseGridRequestModel,searchQuery:t}).then(r=>{if(e(a.setIsPurchaseGridLoading(!1)),r.error)return;const n=r.data.items.map(d=>{var C;return{...d,isSelected:d.purchaseId===((C=i.selectedPurchase)==null?void 0:C.purchaseId)}});e(a.refreshPurchaseGridRequestModel({...r.data,items:n}))})}function Xe(t){e(a.setIsPurchaseGridLoading(!0)),S({...i.purchaseGridRequestModel,filter:t}).then(r=>{if(e(a.setIsPurchaseGridLoading(!1)),r.error)return;const n=r.data.items.map(d=>{var C;return{...d,isSelected:d.purchaseId===((C=i.selectedPurchase)==null?void 0:C.purchaseId)}});e(a.refreshPurchaseGridRequestModel({...r.data,items:n}))})}function Ze(t){return e(a.setIsSupplierCardLoading(!0)),O({date:t.selectedDate,supplierId:i.selectedCompany.companyId,documentNotes:t.purchaseNotes}).then(r=>{e(a.refreshSelectedPurchase(r.data)),e(a.setIsSupplierCardLoading(!1)),r?(u("supplierCard"),c({text:y("SuccessMessages.PurchaseCreated"),type:"success"})):c({text:r.error.message,type:"error"})})}function ea(){u("supplierCard",!0)}function aa(){e(f.resetSelectedSupplier()),u("selectEntityCard",!0),h.countryCodeList||o.getCountryCodeHandler().then(()=>{}),e(a.setIsSelectEntityCardLoading(!0)),e(a.setIsSuppliersGridLoading(!0)),I(i.companiesGridRequestModel).then(t=>{e(a.setIsSelectEntityCardLoading(!1)),e(a.setIsSuppliersGridLoading(!1));const r=t.data.items.map(n=>{var d;return{...n,isSelected:n.companyId===((d=i.selectedCompany)==null?void 0:d.companyId)}});e(a.refreshCompaniesGridRequestModel({...t.data,items:r}))})}function ta(t){e(a.setIsSuppliersGridLoading(!0)),I({...i.companiesGridRequestModel,searchQuery:t}).then(r=>{e(a.setIsSuppliersGridLoading(!1));const n=r.data.items.map(d=>{var C;return{...d,isSelected:d.companyId===((C=i.selectedCompany)==null?void 0:C.companyId)}});e(a.refreshCompaniesGridRequestModel({...r.data,items:n}))})}function ra(){u("createCompanyCard",!0),R()}function oa(t){u("selectEntityCard"),e(a.refreshSelectedCompany(t))}function na(t){e(a.setIsCreateCompanyCardLoading(!0)),D(t.company).then(r=>{r.error?c({text:r.error.details.message,type:"error"}):(t.image.uploadModels.map(n=>{n.contextId=r.data.companyId,e(a.setIsPhotoUploaderLoading(!0)),v(n).then(d=>{e(a.setIsPhotoUploaderLoading(!1)),c(d?{text:y("SuccessMessages.ImageAdded"),type:"success"}:{text:d.error.details.message,type:"error"})})}),p({companyId:r.data.companyId,model:t.address}).then(()=>{e(a.setIsCreateCompanyCardLoading(!1)),u("createCompanyCard"),e(a.setIsSuppliersGridLoading(!0)),I(i.companiesGridRequestModel).then(n=>{e(a.setIsSuppliersGridLoading(!1));const d=n.data.items.map(C=>{var m;return{...C,isSelected:C.companyId===((m=i.selectedCompany)==null?void 0:m.companyId)}});e(a.refreshCompaniesGridRequestModel({...n.data,items:d}))})}),c({text:"Company created successfully",type:"success"}))})}function ia(){u("createCompanyCard")}function sa(t){u("companyConfigurationCard",!0),e(a.setIsCompanyConfigurationCardLoading(!0)),e(a.setIsLocationsGridLoading(!0)),R(),G(t.companyId).then(r=>{e(a.setIsCompanyConfigurationCardLoading(!1)),e(a.setIsLocationsGridLoading(!1)),e(a.refreshManagedCompany(r.data))})}async function da(t){await s({headerTitle:"Deleting company",text:`You are about to delete company ${t.companyName}.`,primaryButtonValue:"Delete",secondaryButtonValue:"Cancel"})&&(e(a.setIsCompanyConfigurationCardLoading(!0)),J(t.companyId).then(n=>{if(n.error){c({text:"Failed to delete company",type:"error"});return}else c({text:"Company deleted successfully",type:"info"}),u("companyConfigurationCard"),e(a.setIsCompanyConfigurationCardLoading(!1)),e(a.setIsLocationsGridLoading(!1)),e(a.resetManagedCompany()),e(a.setIsSuppliersGridLoading(!0)),I(i.companiesGridRequestModel).then(d=>{e(a.setIsSuppliersGridLoading(!1));const C=d.data.items.map(m=>{var x;return{...m,isSelected:m.companyId===((x=i.selectedCompany)==null?void 0:x.companyId)}});e(a.refreshCompaniesGridRequestModel({...d.data,items:C}))}),i.selectedCompany.companyId===i.managedCompany.companyId&&e(a.resetSelectedCompany())}))}function ca(t){e(a.setIsCompanyConfigurationCardLoading(!0)),X({companyId:i.managedCompany.companyId,model:t}).then(r=>{e(a.setIsCompanyConfigurationCardLoading(!1)),r.error?c({text:"Failed to update company",type:"error"}):(e(a.refreshManagedCompany(r.data)),e(a.setIsSuppliersGridLoading(!0)),I(i.companiesGridRequestModel).then(n=>{e(a.setIsSuppliersGridLoading(!1));const d=n.data.items.map(C=>{var m;return{...C,isSelected:C.companyId===((m=i.selectedCompany)==null?void 0:m.companyId)}});e(a.refreshCompaniesGridRequestModel({...n.data,items:d}))}),c({text:"Company updated successfully",type:"success"}))})}function la(){u("companyConfigurationCard"),e(a.resetManagedCompany())}function ua(){u("companyPhotosCard",!0)}async function pa(t){await s({headerTitle:"Deleting company photo",text:"You are about to delete company photo.",primaryButtonValue:"Delete",secondaryButtonValue:"Cancel"})&&P(t.photoId).then(n=>{const d=i.managedCompany.photos.filter(C=>C.photoId!==t.photoId);e(a.refreshManagedCompany({...i.managedCompany,photos:d})),e(a.setIsSuppliersGridLoading(!0)),I(i.companiesGridRequestModel).then(C=>{e(a.setIsSuppliersGridLoading(!1));const m=C.data.items.map(x=>{var j;return{...x,isSelected:x.companyId===((j=i.selectedCompany)==null?void 0:j.companyId)}});e(a.refreshCompaniesGridRequestModel({...C.data,items:m}))}),n.error?c({text:"Photo not deleted",description:n.error.details.message,type:"error"}):c({text:"Photo deleted successfully",type:"success"})})}function Ca(t){return e(a.setIsPhotoUploaderLoading(!0)),v(t).then(r=>{var n;return r.error?(c({text:((n=r.error.data)==null?void 0:n.detail)||"Upload failed",type:"error"}),r):(r.data.photoId&&(e(a.setIsPhotoUploaderLoading(!1)),t.contextName==="Company"?(e(a.setIsSuppliersGridLoading(!0)),I(i.companiesGridRequestModel).then(d=>{e(a.setIsSuppliersGridLoading(!1));const C=d.data.items.map(m=>{var x;return{...m,isSelected:m.companyId===((x=i.selectedCompany)==null?void 0:x.companyId)}});e(a.refreshCompaniesGridRequestModel({...d.data,items:C}))}),e(a.refreshManagedCompany({...i.managedCompany,photos:[...i.managedCompany.photos||[],r.data]}))):e(a.refreshManagedLocation({...i.managedLocation,photos:[...i.managedLocation.photos||[],r.data]})),c({text:"Photos added successfully",type:"success"})),r)})}function ha(t){u(t==="Company"?"companyPhotosCard":"locationPhotosCard")}function fa(t){u("locationConfigurationCard",!0),R(),e(t?a.refreshManagedLocation(t):a.resetManagedLocation())}function ga(t){e(a.setIsLocationConfigurationCardLoading(!0)),Z({companyId:i.managedCompany.companyId,model:t}).then(r=>{var n;r.error?c({text:(n=r.error.data)==null?void 0:n.detail,type:"error"}):(u("locationConfigurationCard"),e(a.setIsCompanyConfigurationCardLoading(!0)),e(a.setIsLocationsGridLoading(!0)),G(i.managedCompany.companyId).then(d=>{e(a.setIsCompanyConfigurationCardLoading(!1)),e(a.setIsLocationsGridLoading(!1)),e(a.refreshManagedCompany(d.data))}),c({text:"Location added successfully",type:"success"}))})}function ma(t){e(a.setIsLocationConfigurationCardLoading(!0)),re(t.locationId).then(r=>{var n;r.error?c({text:(n=r.error.data)==null?void 0:n.detail,type:"error"}):(u("locationConfigurationCard"),e(a.setIsCompanyConfigurationCardLoading(!0)),e(a.setIsLocationsGridLoading(!0)),G(i.managedCompany.companyId).then(d=>{e(a.setIsCompanyConfigurationCardLoading(!1)),e(a.setIsLocationsGridLoading(!1)),e(a.refreshManagedCompany(d.data))}),c({text:"Location deleted successfully",type:"success"}))})}function ya(){u("locationPhotosCard",!0)}function Pa(t){e(a.setIsLocationConfigurationCardLoading(!0)),te({locationId:i.managedLocation.locationId,model:t}).then(r=>{e(a.setIsLocationConfigurationCardLoading(!1)),r.error?c({text:"Failed to update location",type:"error"}):(e(a.setIsCompanyConfigurationCardLoading(!0)),G(i.managedCompany.companyId).then(n=>{e(a.setIsCompanyConfigurationCardLoading(!1)),e(a.refreshManagedCompany(n.data))}),c({text:"Location updated successfully",type:"success"}))})}async function Va(t){await s({headerTitle:"Deleting location photo",text:"You are about to delete location photo.",primaryButtonValue:"Delete",secondaryButtonValue:"Cancel"})&&P(t.photoId).then(n=>{const d=i.managedLocation.photos.filter(C=>C.photoId!==t.photoId);e(a.refreshManagedLocation({...i.managedLocation,photos:d})),n.error?c({text:"Photo not deleted",description:n.error.details.message,type:"error"}):c({text:"Photo deleted successfully",type:"success"})})}function La(){u("locationConfigurationCard"),e(a.resetManagedLocation())}function Ia(){if(u("selectEntityCard",!0),i.companiesGridRequestModel===null)e(a.setIsSelectEntityCardLoading(!0)),e(a.setIsSuppliersGridLoading(!0)),I(i.companiesGridRequestModel).then(t=>{e(a.setIsSelectEntityCardLoading(!1)),e(a.setIsSuppliersGridLoading(!1));const r=t.data.items.map(n=>{var d;return{...n,isSelected:n.companyId===((d=i.selectedCompany)==null?void 0:d.companyId)}});e(a.refreshCompaniesGridRequestModel({...t.data,items:r}))});else{const t=i.companiesGridRequestModel.items.map(r=>{var n;return{...r,isSelected:r.companyId===((n=i.selectedCompany)==null?void 0:n.companyId)}});e(a.refreshCompaniesGridRequestModel({...i.companiesGridRequestModel,items:t}))}}function Ha(){u("supplierCard")}function Ta(){u("selectEntityCard")}function R(){i.countryCodes.length===0&&K(void 0).then(t=>{e(a.refreshCountryCodes(t.data))})}return{state:i,productsState:h,productsService:o,dispatch:e,getVariantsForGridHandler:oe,changeVariantPositionHandler:se,generateProductCodeHandler:ne,deletePhotoHandler:de,getManageVariantsPageDataHandler:ce,getProductVariantsHandler:le,onProductItemClickHandler:ue,addVariantHandler:pe,addDuplicatedVariantHandler:Ce,manageVariantHandler:he,updateVariantDetailsHandler:fe,updateVariantTraitOptions:ge,activateVariantHandler:me,deleteVariantHandler:ye,increaseStockAmountHandler:Pe,disposeFromStockHandler:Ve,uploadPhotoToVariantHandler:Le,addPhotoToVariantHandler:Ie,detachPhotoFromVariantHandler:He,changePhotoPositionHandler:Te,addTraitHandler:xe,manageTraitHandler:Se,createTraitHandler:ve,updateTraitHandler:ke,setProductTraitsHandler:Ge,deleteTraitHandler:Me,addOptionHandler:be,updateOptionHandler:Oe,deleteOptionHandler:De,dndTraitOptionHandler:Re,openAddVariantCardHandler:je,openChooseVariantTraitsCardHandler:Fe,openAddStockCardHandler:qe,openDisposeStockCardHandler:Ne,openVariantHistoryCardHandler:we,openManageTraitsCardHandler:Ae,openVariantPhotosCardHandler:Ee,openSelectPurchaseCardHandler:Be,closeProductTraitConfigurationCardHandler:_e,closeAddVariantCardHandler:Ue,closeVariantPhotosCardHandler:We,closeVariantConfigurationCardHandler:ze,closeVariantHistoryCardHandler:Ye,closeSelectPurchaseCardHandler:$e,selectPurchaseHandler:Qe,closeAddStockCardHandler:Ke,searchSupplierHandle:Je,filterSuppliersByDateHandle:Xe,createPurchaseForSupplierHandler:Ze,closeSupplierCardHandler:Ha,closeSelectEntityCardHandler:Ta,openSupplierCardHandler:ea,openSelectEntityCardHandler:aa,searchEntityHandle:ta,openCreateEntityCardHandler:ra,createCompanyHandler:na,closeCreateCompanyCardHandler:ia,selectCompanyHandle:oa,manageCompanyHandler:sa,deleteCompanyHandler:da,updateCompanyHandler:ca,closeCompanyConfigurationCardHandler:la,manageCompanyPhotosHandler:ua,deleteCompanyPhotoHandler:pa,uploadPhotoHandler:Ca,closePhotosCardHandler:ha,openLocationConfigurationCardHandler:fa,closeLocationConfigurationCardHandler:La,createLocationHandler:ga,deleteLocationHandler:ma,manageLocationPhotosHandler:ya,updateLocationHandler:Pa,deleteLocationPhotoHandler:Va,detachSupplierHandler:Ia,getCountryCodesHandler:R}}function zt(){var T,k,V,P,S,L,b,O,I,D;const{handleCardAction:u,createRefCallback:e}=at({selectActiveCards:v=>v[E.MANAGE_VARIANTS].activeCards,refreshAction:a.refreshActiveCards}),{state:o,productsState:i,productsService:h,dispatch:c,...s}=ht(u),{productId:y}=Da();w.useEffect(()=>{s.getManageVariantsPageDataHandler(y)},[y]),w.useEffect(()=>{s.getProductVariantsHandler(y)},[o.variants,y]),w.useEffect(()=>()=>{c(a.refreshActiveCards([]))},[c]);async function g(v,p){switch(v){case"onProductItemClick":s.onProductItemClickHandler(p);break;case"addVariant":s.addVariantHandler(p,y);break;case"addDuplicatedVariant":s.addDuplicatedVariantHandler(p,y);break;case"manageVariant":s.manageVariantHandler(p,y);break;case"updateVariantDetails":s.updateVariantDetailsHandler(p);break;case"updateVariantTraitOptions":s.updateVariantTraitOptions(p,y);break;case"activateVariant":s.activateVariantHandler(p);break;case"deleteVariant":s.deleteVariantHandler(p);break;case"increaseStockAmount":s.increaseStockAmountHandler(p);break;case"disposeFromStock":s.disposeFromStockHandler(p);break;case"changeVariantPosition":s.changeVariantPositionHandler(y,p.activeItem.variantId,p.newIndex);break;case"uploadPhotoToVariant":s.uploadPhotoToVariantHandler(p,y);break;case"deletePhoto":console.log("PHOTO DELETE",p);break;case"addPhotoToVariant":s.addPhotoToVariantHandler(p);break;case"detachPhotoFromVariant":s.detachPhotoFromVariantHandler(p);break;case"dndVariantPhoto":s.changePhotoPositionHandler(p);break;case"addTrait":s.addTraitHandler();break;case"manageTrait":s.manageTraitHandler(p);break;case"createTrait":s.createTraitHandler(p);break;case"updateTrait":s.updateTraitHandler(p);break;case"setProductTraits":s.setProductTraitsHandler(p,y);break;case"deleteTrait":s.deleteTraitHandler(p,y);break;case"addOption":s.addOptionHandler();break;case"updateOption":s.updateOptionHandler(p);break;case"deleteOption":s.deleteOptionHandler(p);break;case"dndTraitOption":s.dndTraitOptionHandler(p);break;case"openAddVariantCard":s.openAddVariantCardHandler();break;case"openChooseVariantTraitsCard":s.openChooseVariantTraitsCardHandler();break;case"openAddStockCard":s.openAddStockCardHandler();break;case"selectPurchase":s.selectPurchaseHandler(p);break;case"searchSupplier":s.searchSupplierHandle(p);break;case"filterSuppliersByDate":s.filterSuppliersByDateHandle(p);break;case"openDisposeStockCard":s.openDisposeStockCardHandler();break;case"openVariantHistoryCard":s.openVariantHistoryCardHandler(p);break;case"openManageTraitsCard":s.openManageTraitsCardHandler();break;case"openVariantPhotosCard":s.openVariantPhotosCardHandler(p,y);break;case"openSelectPurchaseCard":s.openSelectPurchaseCardHandler(o.purchaseGridRequestModel);break;case"openSupplierCard":s.openSupplierCardHandler();break;case"openSelectEntityCard":s.openSelectEntityCardHandler();break;case"searchEntity":s.searchEntityHandle(p);break;case"openCreateEntityCard":s.openCreateEntityCardHandler();break;case"createCompany":s.createCompanyHandler(p);break;case"closeCreateCompanyCard":s.closeCreateCompanyCardHandler();break;case"manageCompany":s.manageCompanyHandler(p);break;case"updateCompany":s.updateCompanyHandler(p);break;case"deleteCompany":s.deleteCompanyHandler(p);break;case"closeCompanyConfigurationCard":s.closeCompanyConfigurationCardHandler();break;case"manageCompanyPhotos":s.manageCompanyPhotosHandler();break;case"uploadPhoto":s.uploadPhotoHandler(p);break;case"deleteCompanyPhoto":s.deleteCompanyPhotoHandler(p);break;case"changePhotoPosition":s.changePhotoPositionHandler(p);break;case"closePhotosCard":s.closePhotosCardHandler(p);break;case"openLocationConfigurationCard":s.openLocationConfigurationCardHandler(p);break;case"createLocation":s.createLocationHandler(p);break;case"updateLocation":s.updateLocationHandler(p);break;case"deleteLocation":s.deleteLocationHandler(p);break;case"manageLocationPhotos":s.manageLocationPhotosHandler();break;case"deleteLocationPhoto":s.deleteLocationPhotoHandler(p);break;case"closeLocationConfigurationCard":s.closeLocationConfigurationCardHandler();break;case"selectCompany":s.selectCompanyHandle(p);break;case"detachSupplier":s.detachSupplierHandler();break;case"createPurchase":s.createPurchaseForSupplierHandler(p);break;case"closeProductTraitConfigurationCard":s.closeProductTraitConfigurationCardHandler();break;case"closeAddVariantCard":s.closeAddVariantCardHandler();break;case"closeVariantPhotosCard":s.closeVariantPhotosCardHandler();break;case"closeVariantConfigurationCard":s.closeVariantConfigurationCardHandler();break;case"closeVariantHistoryCard":s.closeVariantHistoryCardHandler();break;case"closeSelectPurchaseCard":s.closeSelectPurchaseCardHandler();break;case"closeAddStockCard":s.closeAddStockCardHandler();break;case"closeSupplierCard":s.closeSupplierCardHandler();break;case"closeSelectEntityCard":s.closeSelectEntityCardHandler();break}}return l.jsx("div",{className:st.manageVariantsPage,children:l.jsxs(wa,{menuCollectionType:"products",menuTitle:"Manage Product",isListLoading:i.isItemsCardLoading,listItems:i[i.activeTab],showListItems:!0,selectedId:i.activeTab==="products"?y:(T=i.selectedVariant)==null?void 0:T.variantId,skeletonQuantity:i.activeTab==="products"?(k=i.products)==null?void 0:k.length:(V=i.variants)==null?void 0:V.length,activeTab:i.activeTab,counter:i.productCounter,itemId:Number(y),activeCards:o.activeCards,onAction:v=>g("onProductItemClick",v),children:[l.jsx(Ct,{isLoading:o.isManageVariantsCardLoading,isVariantsLoading:i.isProductVariantsLoading,variants:i.productVariants,traits:i.listOfTraitsWithOptionsForProduct,productCounter:i.productCounter,onAction:g}),o.activeCards.includes("variantConfigurationCard")&&l.jsx("div",{ref:e("variantConfigurationCard"),children:l.jsx(_a,{isLoading:o.isVariantConfigurationCardLoading,isVariantOptionsGridLoading:o.isVariantOptionsGridLoading,isVariantPhotoGridLoading:o.isVariantPhotoGridLoading,variant:i.selectedVariant,variantPhotos:i.variantPhotos,data:o.variantTraitsGridRequestModel,taxesList:i.taxesList,productCounter:i.productCounter,onAction:g,onGenerateProductCode:s.generateProductCodeHandler})}),o.activeCards.includes("addStockCard")&&l.jsx("div",{ref:e("addStockCard"),children:l.jsx(Ua,{isLoading:o.isAddStockCardLoading,taxTypes:i.taxesList,currencyTypes:i.currenciesList,variant:i.selectedVariant,purchase:o.selectedPurchase,onAction:g})}),o.activeCards.includes("selectPurchaseCard")&&l.jsx("div",{ref:e("selectPurchaseCard"),children:l.jsx(Wa,{isLoading:o.isSelectPurchaseCardLoading,isGridLoading:o.isPurchaseGridLoading,purchases:o.purchaseGridRequestModel.items,onAction:g})}),o.activeCards.includes("supplierCard")&&l.jsx("div",{ref:e("supplierCard"),children:l.jsx(Ka,{isLoading:o.isSupplierCardLoading,selectedPurchase:i.selectedPurchase,selectedSupplier:o.selectedCompany,showCloseButton:!0,onAction:g})}),((P=o.activeCards)==null?void 0:P.includes("selectEntityCard"))&&l.jsx("div",{ref:e("selectEntityCard"),children:l.jsx(Xa,{isLoading:o.isSelectEntityCardLoading,isGridLoading:o.isSuppliersGridLoading,entityName:"Company",entityCollection:(S=o.companiesGridRequestModel)==null?void 0:S.items,columns:Ja({onAction:g}),onAction:g})}),o.activeCards.includes("createCompanyCard")&&l.jsx("div",{ref:e("createCompanyCard"),children:l.jsx(tt,{isLoading:o.isCreateCompanyCardLoading,isPhotoUploaderLoading:o.isPhotoUploaderLoading,countryCodes:o.countryCodes,onAction:g})}),o.activeCards.includes("companyConfigurationCard")&&l.jsx("div",{ref:e("companyConfigurationCard"),children:l.jsx(rt,{isLoading:o.isCompanyConfigurationCardLoading,isGridLoading:o.isLocationsGridLoading,company:o.managedCompany,countryCodes:o.countryCodes,onAction:g})}),o.activeCards.includes("companyPhotosCard")&&l.jsx("div",{ref:e("companyPhotosCard"),children:l.jsx($,{isImageUploaderLoading:o.isPhotoUploaderLoading,data:(L=o.managedCompany)==null?void 0:L.photos,contextName:"Company",contextId:(b=o.managedCompany)==null?void 0:b.companyId,noDataText:"COMPANY HAS NO PHOTOS",showCloseButton:!0,columns:ot({onAction:g}),onAction:g})}),o.activeCards.includes("locationConfigurationCard")&&l.jsx("div",{ref:e("locationConfigurationCard"),children:l.jsx(nt,{isLoading:o.isCustomerAddressDetailsLoading,location:o.managedLocation,countryCodes:o.countryCodes,onAction:g})}),o.activeCards.includes("locationPhotosCard")&&l.jsx("div",{ref:e("locationPhotosCard"),children:l.jsx($,{isImageUploaderLoading:o.isPhotoUploaderLoading,data:(O=o.managedLocation)==null?void 0:O.photos,contextName:"Location",contextId:(I=o.managedLocation)==null?void 0:I.locationId,noDataText:"LOCATION HAS NO PHOTOS",showCloseButton:!0,columns:it({onAction:g}),onAction:g})}),o.activeCards.includes("disposeStockCard")&&l.jsx("div",{ref:e("disposeStockCard"),children:l.jsx(za,{isLoading:o.isDisposeStockCardLoading,variant:i.selectedVariant,onAction:g,onSecondaryButtonClick:()=>u("disposeStockCard")})}),o.activeCards.includes("variantHistoryCard")&&l.jsx("div",{ref:e("variantHistoryCard"),children:l.jsx(Ya,{isLoading:o.isVariantHistoryCardLoading,isGridLoading:o.isVariantsHistoryGridLoading,variant:i.selectedVariant,data:o.variantHistory,onAction:g})}),o.activeCards.includes("addVariantCard")&&l.jsx("div",{ref:e("addVariantCard"),children:l.jsx(Aa,{isLoading:o.isAddVariantCardLoading,traits:o.listOfTraitsWithOptionsForProduct,isDuplicateVariant:o.isDuplicateVariant,onAction:g})}),o.activeCards.includes("manageTraitsCard")&&l.jsx("div",{ref:e("manageTraitsCard"),children:l.jsx($a,{isLoading:o.isManageTraitsCardLoading,traits:o.listOfTraitsWithOptionsForProduct,variant:i.selectedVariant,onAction:g,onSecondaryButtonClick:()=>u("manageTraitsCard")})}),o.activeCards.includes("chooseVariantTraitsCard")&&l.jsx("div",{ref:e("chooseVariantTraitsCard"),children:l.jsx(Ea,{isLoading:o.isChooseVariantTraitsCardLoading,items:o.traits,selectedItems:o.listOfTraitsWithOptionsForProduct,onAction:g,onSecondaryButtonClick:()=>u("chooseVariantTraitsCard")})}),o.activeCards.includes("productTraitConfigurationCard")&&l.jsx("div",{ref:e("productTraitConfigurationCard"),children:l.jsx(Ba,{isLoading:o.isProductTraitConfigurationCardLoading,isGridLoading:o.isTraitOptionsGridLoading,data:o.colorOptionsGridRequestModel,selectedTrait:o.selectedTrait,typesOfTraits:o.typesOfTraits,onSecondaryButtonClick:()=>u("productTraitConfigurationCard"),onAction:g})}),o.activeCards.includes("variantPhotosCard")&&l.jsx("div",{ref:e("variantPhotosCard"),children:l.jsx(Qa,{isLoading:o.isVariantPhotosCardLoading,isVariantPhotoGridLoading:o.isVariantPhotoGridLoading,isProductPhotoGridLoading:o.isProductPhotoGridLoading,variantPhotos:i.variantPhotos,productPhotos:o.productPhotosForVariant,contextId:(D=i.selectedVariant)==null?void 0:D.variantId,onAction:g})})]})})}export{zt as ManageVariantsPage};
