var Lo=Object.defineProperty;var ha=A=>{throw TypeError(A)};var Do=(A,$,H)=>$ in A?Lo(A,$,{enumerable:!0,configurable:!0,writable:!0,value:H}):A[$]=H;var $n=(A,$,H)=>Do(A,typeof $!="symbol"?$+"":$,H),fi=(A,$,H)=>$.has(A)||ha("Cannot "+H);var V=(A,$,H)=>(fi(A,$,"read from private field"),H?H.call(A):$.get(A)),it=(A,$,H)=>$.has(A)?ha("Cannot add the same private member more than once"):$ instanceof WeakSet?$.add(A):$.set(A,H),at=(A,$,H,O)=>(fi(A,$,"write to private field"),O?O.call(A,H):$.set(A,H),H),Ue=(A,$,H)=>(fi(A,$,"access private method"),H);var Cr=(A,$,H,O)=>({set _(R){at(A,$,R,H)},get _(){return V(A,$,O)}});import{j as jsxRuntimeExports,m as SheIcon,n as SheTooltip,i as SheButton,bD as getAugmentedNamespace,r as reactExports,aC as reactDomExports,k as useAppDispatch,d as useAppSelector,S as StoreSliceEnum,q as useDialogService,H as PurchasesApiHooks,A as AssetsApiHooks,bE as InvoicesPageSliceActions,o as useParams}from"./index-B43MI0p9.js";import{v as Eye,D as Download,S as SheContextSidebar}from"./SheContextSidebar-wP16Oj66.js";import{S as SheCard}from"./SheCard-BEJVnwk7.js";import{S as SheGrid}from"./SheGrid-Bf16CGS9.js";import{S as SheFileUploader}from"./SheFileUploader-C080oLwN.js";import{c as cs$3}from"./ChooseVariantTraitsCard.module-DPmE-6dq.js";import{F as File,T as Trash2}from"./SheCardNotification-B85G_ouj.js";import{u as useAppTranslation}from"./useAppTranslation-DzTOekUh.js";import{u as useProductsPageService}from"./useProductsPageService-Dxkj_IyB.js";import{u as useToast}from"./useToast-Ef6ZLDEZ.js";import{u as useCardActions}from"./useCardActions-Dp17-WWt.js";import"./settings-2-Cyizket8.js";import"./trash-PifBxtw9.js";import"./chevron-up-Dd3DZlZA.js";import"./ComponentViewEnum-Ba6F4129.js";import"./SheInput-DOBGJMzP.js";import"./SheSelect-BQXq79sv.js";import"./select-B6jgOCTQ.js";const invoicesPage="_invoicesPage_13kgs_1",cs$2={invoicesPage},invoicesCard="_invoicesCard_1qzm8_1",invoicesCardContent="_invoicesCardContent_1qzm8_1",manageInvoices="_manageInvoices_1qzm8_6",cs$1={invoicesCard,invoicesCardContent,manageInvoices},InvoicesGridColumns=(A,$)=>[{accessorKey:"thumbnailUrl",header:"File Name",minSize:155,maxSize:155,cell:({row:H})=>jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[jsxRuntimeExports.jsx(SheIcon,{icon:File,maxWidth:"30px",minWidth:"30px"}),jsxRuntimeExports.jsx(SheTooltip,{delayDuration:200,text:H.original.originalName,className:"max-w-[100%] min-w-[10px] overflow-hidden text-ellipsis whitespace-nowrap",children:jsxRuntimeExports.jsx("span",{className:`${cs$3.traitName} she-text`,children:H.original.originalName})})]})},{id:"actions",header:"Actions",minSize:220,maxSize:220,cell:({row:H,table:O})=>{const R=O.options.meta;return jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[jsxRuntimeExports.jsx(SheButton,{icon:Eye,variant:"secondary",value:"Preview",onClick:()=>A("preview",H.id,R==null?void 0:R.setLoadingRow,H)}),jsxRuntimeExports.jsx(SheButton,{icon:Download,variant:"secondary",onClick:()=>A("download",H.id,R==null?void 0:R.setLoadingRow,H)}),jsxRuntimeExports.jsx(SheButton,{icon:Trash2,variant:"outline",onClick:()=>$({table:O,row:H})})]})}}];function InvoicesCard({isLoading:A,isImageUploaderLoading:$,isGridLoading:H,data:O,contextId:R,onAction:B}){const{translate:Y}=useAppTranslation();function he(le,W,be,ce){switch(le){case"preview":B("previewInvoice",ce.original);break;case"download":B("downloadInvoice",ce.original);break}}function ue(le){B("deleteInvoice",le)}return jsxRuntimeExports.jsx(SheCard,{className:cs$1.invoicesCard,title:"Invoices",titleTransKey:"CardTitles.Invoices",isLoading:A,children:jsxRuntimeExports.jsxs("div",{className:cs$1.invoicesCardContent,children:[jsxRuntimeExports.jsx(SheFileUploader,{isLoading:$,contextName:"invoiceDocument",viewMode:"file",contextId:R,acceptedFileTypes:{"application/pdf":[".pdf"],"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/vnd.ms-excel":[".xls"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"]},onUpload:le=>B("uploadInvoice",le)}),jsxRuntimeExports.jsxs("div",{className:cs$1.manageInvoices,children:[jsxRuntimeExports.jsx("div",{className:`${cs$1.manageInvoicesTitle} she-title`,children:Y("CardTitles.ManageInvoices")}),jsxRuntimeExports.jsx("div",{className:cs$1.manageInvoicesGrid,children:jsxRuntimeExports.jsx(SheGrid,{isLoading:H,className:cs$1.invoicesGrid,showHeader:!1,columns:InvoicesGridColumns(he,ue),data:O,skeletonQuantity:10,customMessage:"There are no files uploaded yet",customMessageTransKey:"InvoiceMessages.NoFilesUploaded"})})]})]})})}var lib$h={exports:{}},defaultLayout_min={},lib$g={exports:{}},core_min={};function commonjsRequire(A){throw new Error('Could not dynamically require "'+A+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function($,H){module.exports=$.pdfjsLib=H()})(globalThis,()=>(()=>{var __webpack_modules__=[,(A,$)=>{var _n;Object.defineProperty($,"__esModule",{value:!0}),$.VerbosityLevel=$.Util=$.UnknownErrorException=$.UnexpectedResponseException=$.TextRenderingMode=$.RenderingIntentFlag=$.PromiseCapability=$.PermissionFlag=$.PasswordResponses=$.PasswordException=$.PageActionEventType=$.OPS=$.MissingPDFException=$.MAX_IMAGE_SIZE_TO_CACHE=$.LINE_FACTOR=$.LINE_DESCENT_FACTOR=$.InvalidPDFException=$.ImageKind=$.IDENTITY_MATRIX=$.FormatError=$.FeatureTest=$.FONT_IDENTITY_MATRIX=$.DocumentActionEventType=$.CMapCompressionType=$.BaseException=$.BASELINE_FACTOR=$.AnnotationType=$.AnnotationReplyType=$.AnnotationPrefix=$.AnnotationMode=$.AnnotationFlag=$.AnnotationFieldFlag=$.AnnotationEditorType=$.AnnotationEditorPrefix=$.AnnotationEditorParamsType=$.AnnotationBorderStyleType=$.AnnotationActionEventType=$.AbortException=void 0,$.assert=Se,$.bytesToString=ot,$.createValidAbsoluteUrl=He,$.getModificationDate=St,$.getUuid=zt,$.getVerbosityLevel=Me,$.info=Ne,$.isArrayBuffer=We,$.isArrayEqual=wt,$.isNodeJS=void 0,$.normalizeUnicode=Rt,$.objectFromMap=mt,$.objectSize=dt,$.setVerbosityLevel=De,$.shadow=_e,$.string32=ut,$.stringToBytes=st,$.stringToPDFString=nt,$.stringToUTF8String=pt,$.unreachable=qe,$.utf8StringToString=ht,$.warn=Ie;const H=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");$.isNodeJS=H;const O=[1,0,0,1,0,0];$.IDENTITY_MATRIX=O;const R=[.001,0,0,.001,0,0];$.FONT_IDENTITY_MATRIX=R;const B=1e7;$.MAX_IMAGE_SIZE_TO_CACHE=B;const Y=1.35;$.LINE_FACTOR=Y;const he=.35;$.LINE_DESCENT_FACTOR=he;const ue=he/Y;$.BASELINE_FACTOR=ue;const le={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};$.RenderingIntentFlag=le;const W={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};$.AnnotationMode=W;const be="pdfjs_internal_editor_";$.AnnotationEditorPrefix=be;const ce={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};$.AnnotationEditorType=ce;const Q={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};$.AnnotationEditorParamsType=Q;const ie={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};$.PermissionFlag=ie;const ee={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};$.TextRenderingMode=ee;const q={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};$.ImageKind=q;const K={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};$.AnnotationType=K;const ne={GROUP:"Group",REPLY:"R"};$.AnnotationReplyType=ne;const fe={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};$.AnnotationFlag=fe;const de={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};$.AnnotationFieldFlag=de;const te={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};$.AnnotationBorderStyleType=te;const se={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};$.AnnotationActionEventType=se;const re={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};$.DocumentActionEventType=re;const ae={O:"PageOpen",C:"PageClose"};$.PageActionEventType=ae;const oe={ERRORS:0,WARNINGS:1,INFOS:5};$.VerbosityLevel=oe;const Ee={NONE:0,BINARY:1};$.CMapCompressionType=Ee;const J={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};$.OPS=J;const ve={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};$.PasswordResponses=ve;let Ce=oe.WARNINGS;function De(gt){Number.isInteger(gt)&&(Ce=gt)}function Me(){return Ce}function Ne(gt){Ce>=oe.INFOS&&console.log(`Info: ${gt}`)}function Ie(gt){Ce>=oe.WARNINGS&&console.log(`Warning: ${gt}`)}function qe(gt){throw new Error(gt)}function Se(gt,Ye){gt||qe(Ye)}function Te(gt){switch(gt==null?void 0:gt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function He(gt,Ye=null,Je=null){if(!gt)return null;try{if(Je&&typeof gt=="string"){if(Je.addDefaultProtocol&&gt.startsWith("www.")){const Lt=gt.match(/\./g);(Lt==null?void 0:Lt.length)>=2&&(gt=`http://${gt}`)}if(Je.tryConvertEncoding)try{gt=pt(gt)}catch{}}const $t=Ye?new URL(gt,Ye):new URL(gt);if(Te($t))return $t}catch{}return null}function _e(gt,Ye,Je,$t=!1){return Object.defineProperty(gt,Ye,{value:Je,enumerable:!$t,configurable:!0,writable:!1}),Je}const G=function(){function Ye(Je,$t){this.constructor===Ye&&qe("Cannot initialize BaseException."),this.message=Je,this.name=$t}return Ye.prototype=new Error,Ye.constructor=Ye,Ye}();$.BaseException=G;class X extends G{constructor(Ye,Je){super(Ye,"PasswordException"),this.code=Je}}$.PasswordException=X;class ge extends G{constructor(Ye,Je){super(Ye,"UnknownErrorException"),this.details=Je}}$.UnknownErrorException=ge;class Pe extends G{constructor(Ye){super(Ye,"InvalidPDFException")}}$.InvalidPDFException=Pe;class Ae extends G{constructor(Ye){super(Ye,"MissingPDFException")}}$.MissingPDFException=Ae;class ke extends G{constructor(Ye,Je){super(Ye,"UnexpectedResponseException"),this.status=Je}}$.UnexpectedResponseException=ke;class Oe extends G{constructor(Ye){super(Ye,"FormatError")}}$.FormatError=Oe;class Qe extends G{constructor(Ye){super(Ye,"AbortException")}}$.AbortException=Qe;function ot(gt){(typeof gt!="object"||(gt==null?void 0:gt.length)===void 0)&&qe("Invalid argument for bytesToString");const Ye=gt.length,Je=8192;if(Ye<Je)return String.fromCharCode.apply(null,gt);const $t=[];for(let Lt=0;Lt<Ye;Lt+=Je){const Gt=Math.min(Lt+Je,Ye),$e=gt.subarray(Lt,Gt);$t.push(String.fromCharCode.apply(null,$e))}return $t.join("")}function st(gt){typeof gt!="string"&&qe("Invalid argument for stringToBytes");const Ye=gt.length,Je=new Uint8Array(Ye);for(let $t=0;$t<Ye;++$t)Je[$t]=gt.charCodeAt($t)&255;return Je}function ut(gt){return String.fromCharCode(gt>>24&255,gt>>16&255,gt>>8&255,gt&255)}function dt(gt){return Object.keys(gt).length}function mt(gt){const Ye=Object.create(null);for(const[Je,$t]of gt)Ye[Je]=$t;return Ye}function Ge(){const gt=new Uint8Array(4);return gt[0]=1,new Uint32Array(gt.buffer,0,1)[0]===1}function Xe(){try{return new Function(""),!0}catch{return!1}}class me{static get isLittleEndian(){return _e(this,"isLittleEndian",Ge())}static get isEvalSupported(){return _e(this,"isEvalSupported",Xe())}static get isOffscreenCanvasSupported(){return _e(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?_e(this,"platform",{isWin:!1,isMac:!1}):_e(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Ye,Je;return _e(this,"isCSSRoundSupported",(Je=(Ye=globalThis.CSS)==null?void 0:Ye.supports)==null?void 0:Je.call(Ye,"width: round(1.5px, 1px)"))}}$.FeatureTest=me;const ye=[...Array(256).keys()].map(gt=>gt.toString(16).padStart(2,"0"));class je{static makeHexColor(Ye,Je,$t){return`#${ye[Ye]}${ye[Je]}${ye[$t]}`}static scaleMinMax(Ye,Je){let $t;Ye[0]?(Ye[0]<0&&($t=Je[0],Je[0]=Je[1],Je[1]=$t),Je[0]*=Ye[0],Je[1]*=Ye[0],Ye[3]<0&&($t=Je[2],Je[2]=Je[3],Je[3]=$t),Je[2]*=Ye[3],Je[3]*=Ye[3]):($t=Je[0],Je[0]=Je[2],Je[2]=$t,$t=Je[1],Je[1]=Je[3],Je[3]=$t,Ye[1]<0&&($t=Je[2],Je[2]=Je[3],Je[3]=$t),Je[2]*=Ye[1],Je[3]*=Ye[1],Ye[2]<0&&($t=Je[0],Je[0]=Je[1],Je[1]=$t),Je[0]*=Ye[2],Je[1]*=Ye[2]),Je[0]+=Ye[4],Je[1]+=Ye[4],Je[2]+=Ye[5],Je[3]+=Ye[5]}static transform(Ye,Je){return[Ye[0]*Je[0]+Ye[2]*Je[1],Ye[1]*Je[0]+Ye[3]*Je[1],Ye[0]*Je[2]+Ye[2]*Je[3],Ye[1]*Je[2]+Ye[3]*Je[3],Ye[0]*Je[4]+Ye[2]*Je[5]+Ye[4],Ye[1]*Je[4]+Ye[3]*Je[5]+Ye[5]]}static applyTransform(Ye,Je){const $t=Ye[0]*Je[0]+Ye[1]*Je[2]+Je[4],Lt=Ye[0]*Je[1]+Ye[1]*Je[3]+Je[5];return[$t,Lt]}static applyInverseTransform(Ye,Je){const $t=Je[0]*Je[3]-Je[1]*Je[2],Lt=(Ye[0]*Je[3]-Ye[1]*Je[2]+Je[2]*Je[5]-Je[4]*Je[3])/$t,Gt=(-Ye[0]*Je[1]+Ye[1]*Je[0]+Je[4]*Je[1]-Je[5]*Je[0])/$t;return[Lt,Gt]}static getAxialAlignedBoundingBox(Ye,Je){const $t=this.applyTransform(Ye,Je),Lt=this.applyTransform(Ye.slice(2,4),Je),Gt=this.applyTransform([Ye[0],Ye[3]],Je),$e=this.applyTransform([Ye[2],Ye[1]],Je);return[Math.min($t[0],Lt[0],Gt[0],$e[0]),Math.min($t[1],Lt[1],Gt[1],$e[1]),Math.max($t[0],Lt[0],Gt[0],$e[0]),Math.max($t[1],Lt[1],Gt[1],$e[1])]}static inverseTransform(Ye){const Je=Ye[0]*Ye[3]-Ye[1]*Ye[2];return[Ye[3]/Je,-Ye[1]/Je,-Ye[2]/Je,Ye[0]/Je,(Ye[2]*Ye[5]-Ye[4]*Ye[3])/Je,(Ye[4]*Ye[1]-Ye[5]*Ye[0])/Je]}static singularValueDecompose2dScale(Ye){const Je=[Ye[0],Ye[2],Ye[1],Ye[3]],$t=Ye[0]*Je[0]+Ye[1]*Je[2],Lt=Ye[0]*Je[1]+Ye[1]*Je[3],Gt=Ye[2]*Je[0]+Ye[3]*Je[2],$e=Ye[2]*Je[1]+Ye[3]*Je[3],ft=($t+$e)/2,Pt=Math.sqrt(($t+$e)**2-4*($t*$e-Gt*Lt))/2,Dt=ft+Pt||1,Bt=ft-Pt||1;return[Math.sqrt(Dt),Math.sqrt(Bt)]}static normalizeRect(Ye){const Je=Ye.slice(0);return Ye[0]>Ye[2]&&(Je[0]=Ye[2],Je[2]=Ye[0]),Ye[1]>Ye[3]&&(Je[1]=Ye[3],Je[3]=Ye[1]),Je}static intersect(Ye,Je){const $t=Math.max(Math.min(Ye[0],Ye[2]),Math.min(Je[0],Je[2])),Lt=Math.min(Math.max(Ye[0],Ye[2]),Math.max(Je[0],Je[2]));if($t>Lt)return null;const Gt=Math.max(Math.min(Ye[1],Ye[3]),Math.min(Je[1],Je[3])),$e=Math.min(Math.max(Ye[1],Ye[3]),Math.max(Je[1],Je[3]));return Gt>$e?null:[$t,Gt,Lt,$e]}static bezierBoundingBox(Ye,Je,$t,Lt,Gt,$e,ft,Pt){const Dt=[],Bt=[[],[]];let Tt,xe,we,ze,ct,lt,vt,yt;for(let nn=0;nn<2;++nn){if(nn===0?(xe=6*Ye-12*$t+6*Gt,Tt=-3*Ye+9*$t-9*Gt+3*ft,we=3*$t-3*Ye):(xe=6*Je-12*Lt+6*$e,Tt=-3*Je+9*Lt-9*$e+3*Pt,we=3*Lt-3*Je),Math.abs(Tt)<1e-12){if(Math.abs(xe)<1e-12)continue;ze=-we/xe,0<ze&&ze<1&&Dt.push(ze);continue}vt=xe*xe-4*we*Tt,yt=Math.sqrt(vt),!(vt<0)&&(ct=(-xe+yt)/(2*Tt),0<ct&&ct<1&&Dt.push(ct),lt=(-xe-yt)/(2*Tt),0<lt&&lt<1&&Dt.push(lt))}let Ot=Dt.length,It;const xt=Ot;for(;Ot--;)ze=Dt[Ot],It=1-ze,Bt[0][Ot]=It*It*It*Ye+3*It*It*ze*$t+3*It*ze*ze*Gt+ze*ze*ze*ft,Bt[1][Ot]=It*It*It*Je+3*It*It*ze*Lt+3*It*ze*ze*$e+ze*ze*ze*Pt;return Bt[0][xt]=Ye,Bt[1][xt]=Je,Bt[0][xt+1]=ft,Bt[1][xt+1]=Pt,Bt[0].length=Bt[1].length=xt+2,[Math.min(...Bt[0]),Math.min(...Bt[1]),Math.max(...Bt[0]),Math.max(...Bt[1])]}}$.Util=je;const Ke=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function nt(gt){if(gt[0]>="ï"){let Je;if(gt[0]==="þ"&&gt[1]==="ÿ"?Je="utf-16be":gt[0]==="ÿ"&&gt[1]==="þ"?Je="utf-16le":gt[0]==="ï"&&gt[1]==="»"&&gt[2]==="¿"&&(Je="utf-8"),Je)try{const $t=new TextDecoder(Je,{fatal:!0}),Lt=st(gt);return $t.decode(Lt)}catch($t){Ie(`stringToPDFString: "${$t}".`)}}const Ye=[];for(let Je=0,$t=gt.length;Je<$t;Je++){const Lt=Ke[gt.charCodeAt(Je)];Ye.push(Lt?String.fromCharCode(Lt):gt.charAt(Je))}return Ye.join("")}function pt(gt){return decodeURIComponent(escape(gt))}function ht(gt){return unescape(encodeURIComponent(gt))}function We(gt){return typeof gt=="object"&&(gt==null?void 0:gt.byteLength)!==void 0}function wt(gt,Ye){if(gt.length!==Ye.length)return!1;for(let Je=0,$t=gt.length;Je<$t;Je++)if(gt[Je]!==Ye[Je])return!1;return!0}function St(gt=new Date){return[gt.getUTCFullYear().toString(),(gt.getUTCMonth()+1).toString().padStart(2,"0"),gt.getUTCDate().toString().padStart(2,"0"),gt.getUTCHours().toString().padStart(2,"0"),gt.getUTCMinutes().toString().padStart(2,"0"),gt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Yt{constructor(){it(this,_n,!1);this.promise=new Promise((Ye,Je)=>{this.resolve=$t=>{at(this,_n,!0),Ye($t)},this.reject=$t=>{at(this,_n,!0),Je($t)}})}get settled(){return V(this,_n)}}_n=new WeakMap,$.PromiseCapability=Yt;let Ut=null,dn=null;function Rt(gt){return Ut||(Ut=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,dn=new Map([["ﬅ","ſt"]])),gt.replaceAll(Ut,(Ye,Je,$t)=>Je?Je.normalize("NFKC"):dn.get($t))}function zt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const gt=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(gt);else for(let Ye=0;Ye<32;Ye++)gt[Ye]=Math.floor(Math.random()*255);return ot(gt)}const an="pdfjs_internal_id_";$.AnnotationPrefix=an},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var A,H,O,R,br,zr,he,ue,le,W,be,ce,Q,ie,ee,Hr,K,ne,pi,de,te;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(re){if(typeof re=="string"||re instanceof URL?re={url:re}:(0,_util.isArrayBuffer)(re)&&(re={data:re}),typeof re!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!re.url&&!re.data&&!re.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const ae=new PDFDocumentLoadingTask,{docId:oe}=ae,Ee=re.url?getUrlProp(re.url):null,J=re.data?getDataProp(re.data):null,ve=re.httpHeaders||null,Ce=re.withCredentials===!0,De=re.password??null,Me=re.range instanceof PDFDataRangeTransport?re.range:null,Ne=Number.isInteger(re.rangeChunkSize)&&re.rangeChunkSize>0?re.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Ie=re.worker instanceof PDFWorker?re.worker:null;const qe=re.verbosity,Se=typeof re.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(re.docBaseUrl)?re.docBaseUrl:null,Te=typeof re.cMapUrl=="string"?re.cMapUrl:null,He=re.cMapPacked!==!1,_e=re.CMapReaderFactory||DefaultCMapReaderFactory,G=typeof re.standardFontDataUrl=="string"?re.standardFontDataUrl:null,X=re.StandardFontDataFactory||DefaultStandardFontDataFactory,ge=re.stopAtErrors!==!0,Pe=Number.isInteger(re.maxImageSize)&&re.maxImageSize>-1?re.maxImageSize:-1,Ae=re.isEvalSupported!==!1,ke=typeof re.isOffscreenCanvasSupported=="boolean"?re.isOffscreenCanvasSupported:!_util.isNodeJS,Oe=Number.isInteger(re.canvasMaxAreaInBytes)?re.canvasMaxAreaInBytes:-1,Qe=typeof re.disableFontFace=="boolean"?re.disableFontFace:_util.isNodeJS,ot=re.fontExtraProperties===!0,st=re.enableXfa===!0,ut=re.ownerDocument||globalThis.document,dt=re.disableRange===!0,mt=re.disableStream===!0,Ge=re.disableAutoFetch===!0,Xe=re.pdfBug===!0,me=Me?Me.length:re.length??NaN,ye=typeof re.useSystemFonts=="boolean"?re.useSystemFonts:!_util.isNodeJS&&!Qe,je=typeof re.useWorkerFetch=="boolean"?re.useWorkerFetch:_e===_display_utils.DOMCMapReaderFactory&&X===_display_utils.DOMStandardFontDataFactory&&Te&&G&&(0,_display_utils.isValidFetchUrl)(Te,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(G,document.baseURI),Ke=re.canvasFactory||new DefaultCanvasFactory({ownerDocument:ut}),nt=re.filterFactory||new DefaultFilterFactory({docId:oe,ownerDocument:ut}),pt=null;(0,_util.setVerbosityLevel)(qe);const ht={canvasFactory:Ke,filterFactory:nt};if(je||(ht.cMapReaderFactory=new _e({baseUrl:Te,isCompressed:He}),ht.standardFontDataFactory=new X({baseUrl:G})),!Ie){const St={verbosity:qe,port:_worker_options.GlobalWorkerOptions.workerPort};Ie=St.port?PDFWorker.fromPort(St):new PDFWorker(St),ae._worker=Ie}const We={docId:oe,apiVersion:"3.11.174",data:J,password:De,disableAutoFetch:Ge,rangeChunkSize:Ne,length:me,docBaseUrl:Se,enableXfa:st,evaluatorOptions:{maxImageSize:Pe,disableFontFace:Qe,ignoreErrors:ge,isEvalSupported:Ae,isOffscreenCanvasSupported:ke,canvasMaxAreaInBytes:Oe,fontExtraProperties:ot,useSystemFonts:ye,cMapUrl:je?Te:null,standardFontDataUrl:je?G:null}},wt={ignoreErrors:ge,isEvalSupported:Ae,disableFontFace:Qe,fontExtraProperties:ot,enableXfa:st,ownerDocument:ut,disableAutoFetch:Ge,pdfBug:Xe,styleElement:pt};return Ie.promise.then(function(){if(ae.destroyed)throw new Error("Loading aborted");const St=_fetchDocument(Ie,We),Yt=new Promise(function(Ut){let dn;Me?dn=new _transport_stream.PDFDataTransportStream({length:me,initialData:Me.initialData,progressiveDone:Me.progressiveDone,contentDispositionFilename:Me.contentDispositionFilename,disableRange:dt,disableStream:mt},Me):J||(dn=(zt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(zt):(0,_display_utils.isValidFetchUrl)(zt.url)?new _displayFetch_stream.PDFFetchStream(zt):new _displayNetwork.PDFNetworkStream(zt))({url:Ee,length:me,httpHeaders:ve,withCredentials:Ce,rangeChunkSize:Ne,disableRange:dt,disableStream:mt})),Ut(dn)});return Promise.all([St,Yt]).then(function([Ut,dn]){if(ae.destroyed)throw new Error("Loading aborted");const Rt=new _message_handler.MessageHandler(oe,Ut,Ie.port),zt=new WorkerTransport(Rt,ae,dn,wt,ht);ae._transport=zt,Rt.send("Ready",null)})}).catch(ae._capability.reject),ae}async function _fetchDocument(re,ae){if(re.destroyed)throw new Error("Worker was destroyed");const oe=await re.messageHandler.sendWithPromise("GetDocRequest",ae,ae.data?[ae.data.buffer]:null);if(re.destroyed)throw new Error("Worker was destroyed");return oe}function getUrlProp(re){if(re instanceof URL)return re.href;try{return new URL(re,window.location).href}catch{if(_util.isNodeJS&&typeof re=="string")return re}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(re){if(_util.isNodeJS&&typeof Buffer<"u"&&re instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(re instanceof Uint8Array&&re.byteLength===re.buffer.byteLength)return re;if(typeof re=="string")return(0,_util.stringToBytes)(re);if(typeof re=="object"&&!isNaN(re==null?void 0:re.length)||(0,_util.isArrayBuffer)(re))return new Uint8Array(re);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const $=class ${constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${Cr($,A)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var ae,oe,Ee;this.destroyed=!0;try{(ae=this._worker)!=null&&ae.port&&(this._worker._pendingDestroy=!0),await((oe=this._transport)==null?void 0:oe.destroy())}catch(J){throw(Ee=this._worker)!=null&&Ee.port&&delete this._worker._pendingDestroy,J}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};A=new WeakMap,it($,A,0);let PDFDocumentLoadingTask=$;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(ae,oe,Ee=!1,J=null){this.length=ae,this.initialData=oe,this.progressiveDone=Ee,this.contentDispositionFilename=J,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(ae){this._rangeListeners.push(ae)}addProgressListener(ae){this._progressListeners.push(ae)}addProgressiveReadListener(ae){this._progressiveReadListeners.push(ae)}addProgressiveDoneListener(ae){this._progressiveDoneListeners.push(ae)}onDataRange(ae,oe){for(const Ee of this._rangeListeners)Ee(ae,oe)}onDataProgress(ae,oe){this._readyCapability.promise.then(()=>{for(const Ee of this._progressListeners)Ee(ae,oe)})}onDataProgressiveRead(ae){this._readyCapability.promise.then(()=>{for(const oe of this._progressiveReadListeners)oe(ae)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const ae of this._progressiveDoneListeners)ae()})}transportReady(){this._readyCapability.resolve()}requestDataRange(ae,oe){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(ae,oe){this._pdfInfo=ae,this._transport=oe,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(Ee=>{if(!Ee)return Ee;const J=[];for(const ve in Ee)J.push(...Ee[ve]);return J}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(ae){return this._transport.getPage(ae)}getPageIndex(ae){return this._transport.getPageIndex(ae)}getDestinations(){return this._transport.getDestinations()}getDestination(ae){return this._transport.getDestination(ae)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(ae=!1){return this._transport.startCleanup(ae||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(ae,oe,Ee,J=!1){it(this,R);it(this,H,null);it(this,O,!1);this._pageIndex=ae,this._pageInfo=oe,this._transport=Ee,this._stats=J?new _display_utils.StatTimer:null,this._pdfBug=J,this.commonObjs=Ee.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:ae,rotation:oe=this.rotate,offsetX:Ee=0,offsetY:J=0,dontFlip:ve=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:ae,rotation:oe,offsetX:Ee,offsetY:J,dontFlip:ve})}getAnnotations({intent:ae="display"}={}){const oe=this._transport.getRenderingIntent(ae);return this._transport.getAnnotations(this._pageIndex,oe.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var ae;return((ae=this._transport._htmlForXfa)==null?void 0:ae.children[this._pageIndex])||null}render({canvasContext:ae,viewport:oe,intent:Ee="display",annotationMode:J=_util.AnnotationMode.ENABLE,transform:ve=null,background:Ce=null,optionalContentConfigPromise:De=null,annotationCanvasMap:Me=null,pageColors:Ne=null,printAnnotationStorage:Ie=null}){var X,ge;(X=this._stats)==null||X.time("Overall");const qe=this._transport.getRenderingIntent(Ee,J,Ie);at(this,O,!1),Ue(this,R,zr).call(this),De||(De=this._transport.getOptionalContentConfig());let Se=this._intentStates.get(qe.cacheKey);Se||(Se=Object.create(null),this._intentStates.set(qe.cacheKey,Se)),Se.streamReaderCancelTimeout&&(clearTimeout(Se.streamReaderCancelTimeout),Se.streamReaderCancelTimeout=null);const Te=!!(qe.renderingIntent&_util.RenderingIntentFlag.PRINT);Se.displayReadyCapability||(Se.displayReadyCapability=new _util.PromiseCapability,Se.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(ge=this._stats)==null||ge.time("Page Request"),this._pumpOperatorList(qe));const He=Pe=>{var Ae,ke;Se.renderTasks.delete(_e),(this._maybeCleanupAfterRender||Te)&&at(this,O,!0),Ue(this,R,br).call(this,!Te),Pe?(_e.capability.reject(Pe),this._abortOperatorList({intentState:Se,reason:Pe instanceof Error?Pe:new Error(Pe)})):_e.capability.resolve(),(Ae=this._stats)==null||Ae.timeEnd("Rendering"),(ke=this._stats)==null||ke.timeEnd("Overall")},_e=new InternalRenderTask({callback:He,params:{canvasContext:ae,viewport:oe,transform:ve,background:Ce},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Me,operatorList:Se.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Te,pdfBug:this._pdfBug,pageColors:Ne});(Se.renderTasks||(Se.renderTasks=new Set)).add(_e);const G=_e.task;return Promise.all([Se.displayReadyCapability.promise,De]).then(([Pe,Ae])=>{var ke;if(this.destroyed){He();return}(ke=this._stats)==null||ke.time("Rendering"),_e.initializeGraphics({transparency:Pe,optionalContentConfig:Ae}),_e.operatorListChanged()}).catch(He),G}getOperatorList({intent:ae="display",annotationMode:oe=_util.AnnotationMode.ENABLE,printAnnotationStorage:Ee=null}={}){var Me;function J(){Ce.operatorList.lastChunk&&(Ce.opListReadCapability.resolve(Ce.operatorList),Ce.renderTasks.delete(De))}const ve=this._transport.getRenderingIntent(ae,oe,Ee,!0);let Ce=this._intentStates.get(ve.cacheKey);Ce||(Ce=Object.create(null),this._intentStates.set(ve.cacheKey,Ce));let De;return Ce.opListReadCapability||(De=Object.create(null),De.operatorListChanged=J,Ce.opListReadCapability=new _util.PromiseCapability,(Ce.renderTasks||(Ce.renderTasks=new Set)).add(De),Ce.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Me=this._stats)==null||Me.time("Page Request"),this._pumpOperatorList(ve)),Ce.opListReadCapability.promise}streamTextContent({includeMarkedContent:ae=!1,disableNormalization:oe=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:ae===!0,disableNormalization:oe===!0},{highWaterMark:100,size(J){return J.items.length}})}getTextContent(ae={}){if(this._transport._htmlForXfa)return this.getXfa().then(Ee=>_xfa_text.XfaText.textContent(Ee));const oe=this.streamTextContent(ae);return new Promise(function(Ee,J){function ve(){Ce.read().then(function({value:Me,done:Ne}){if(Ne){Ee(De);return}Object.assign(De.styles,Me.styles),De.items.push(...Me.items),ve()},J)}const Ce=oe.getReader(),De={items:[],styles:Object.create(null)};ve()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const ae=[];for(const oe of this._intentStates.values())if(this._abortOperatorList({intentState:oe,reason:new Error("Page was destroyed."),force:!0}),!oe.opListReadCapability)for(const Ee of oe.renderTasks)ae.push(Ee.completed),Ee.cancel();return this.objs.clear(),at(this,O,!1),Ue(this,R,zr).call(this),Promise.all(ae)}cleanup(ae=!1){at(this,O,!0);const oe=Ue(this,R,br).call(this,!1);return ae&&oe&&this._stats&&(this._stats=new _display_utils.StatTimer),oe}_startRenderPage(ae,oe){var J,ve;const Ee=this._intentStates.get(oe);Ee&&((J=this._stats)==null||J.timeEnd("Page Request"),(ve=Ee.displayReadyCapability)==null||ve.resolve(ae))}_renderPageChunk(ae,oe){for(let Ee=0,J=ae.length;Ee<J;Ee++)oe.operatorList.fnArray.push(ae.fnArray[Ee]),oe.operatorList.argsArray.push(ae.argsArray[Ee]);oe.operatorList.lastChunk=ae.lastChunk,oe.operatorList.separateAnnots=ae.separateAnnots;for(const Ee of oe.renderTasks)Ee.operatorListChanged();ae.lastChunk&&Ue(this,R,br).call(this,!0)}_pumpOperatorList({renderingIntent:ae,cacheKey:oe,annotationStorageSerializable:Ee}){const{map:J,transfers:ve}=Ee,De=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:ae,cacheKey:oe,annotationStorage:J},ve).getReader(),Me=this._intentStates.get(oe);Me.streamReader=De;const Ne=()=>{De.read().then(({value:Ie,done:qe})=>{if(qe){Me.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Ie,Me),Ne())},Ie=>{if(Me.streamReader=null,!this._transport.destroyed){if(Me.operatorList){Me.operatorList.lastChunk=!0;for(const qe of Me.renderTasks)qe.operatorListChanged();Ue(this,R,br).call(this,!0)}if(Me.displayReadyCapability)Me.displayReadyCapability.reject(Ie);else if(Me.opListReadCapability)Me.opListReadCapability.reject(Ie);else throw Ie}})};Ne()}_abortOperatorList({intentState:ae,reason:oe,force:Ee=!1}){if(ae.streamReader){if(ae.streamReaderCancelTimeout&&(clearTimeout(ae.streamReaderCancelTimeout),ae.streamReaderCancelTimeout=null),!Ee){if(ae.renderTasks.size>0)return;if(oe instanceof _display_utils.RenderingCancelledException){let J=RENDERING_CANCELLED_TIMEOUT;oe.extraDelay>0&&oe.extraDelay<1e3&&(J+=oe.extraDelay),ae.streamReaderCancelTimeout=setTimeout(()=>{ae.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:ae,reason:oe,force:!0})},J);return}}if(ae.streamReader.cancel(new _util.AbortException(oe.message)).catch(()=>{}),ae.streamReader=null,!this._transport.destroyed){for(const[J,ve]of this._intentStates)if(ve===ae){this._intentStates.delete(J);break}this.cleanup()}}}get stats(){return this._stats}}H=new WeakMap,O=new WeakMap,R=new WeakSet,br=function(ae=!1){if(Ue(this,R,zr).call(this),!V(this,O)||this.destroyed)return!1;if(ae)return at(this,H,setTimeout(()=>{at(this,H,null),Ue(this,R,br).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:oe,operatorList:Ee}of this._intentStates.values())if(oe.size>0||!Ee.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),at(this,O,!1),!0},zr=function(){V(this,H)&&(clearTimeout(V(this,H)),at(this,H,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){it(this,he,new Set);it(this,ue,Promise.resolve())}postMessage(ae,oe){const Ee={data:structuredClone(ae,oe?{transfer:oe}:null)};V(this,ue).then(()=>{for(const J of V(this,he))J.call(this,Ee)})}addEventListener(ae,oe){V(this,he).add(oe)}removeEventListener(ae,oe){V(this,he).delete(oe)}terminate(){V(this,he).clear()}}he=new WeakMap,ue=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const re=(le=document==null?void 0:document.currentScript)==null?void 0:le.src;re&&(PDFWorkerUtil.fallbackWorkerSrc=re.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(re,ae){let oe;try{if(oe=new URL(re),!oe.origin||oe.origin==="null")return!1}catch{return!1}const Ee=new URL(ae,oe);return oe.origin===Ee.origin},PDFWorkerUtil.createCDNWrapper=function(re){const ae=`importScripts("${re}");`;return URL.createObjectURL(new Blob([ae]))}}const _PDFWorker=class _PDFWorker{constructor({name:re=null,port:ae=null,verbosity:oe=(0,_util.getVerbosityLevel)()}={}){var Ee;if(this.name=re,this.destroyed=!1,this.verbosity=oe,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,ae){if((Ee=V(_PDFWorker,W))!=null&&Ee.has(ae))throw new Error("Cannot use more than one PDFWorker per port.");(V(_PDFWorker,W)||at(_PDFWorker,W,new WeakMap)).set(ae,this),this._initializeFromPort(ae);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(re){this._port=re,this._messageHandler=new _message_handler.MessageHandler("main","worker",re),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:re}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,re)||(re=PDFWorkerUtil.createCDNWrapper(new URL(re,window.location).href));const ae=new Worker(re),oe=new _message_handler.MessageHandler("main","worker",ae),Ee=()=>{ae.removeEventListener("error",J),oe.destroy(),ae.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},J=()=>{this._webWorker||Ee()};ae.addEventListener("error",J),oe.on("test",Ce=>{if(ae.removeEventListener("error",J),this.destroyed){Ee();return}Ce?(this._messageHandler=oe,this._port=ae,this._webWorker=ae,this._readyCapability.resolve(),oe.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),oe.destroy(),ae.terminate())}),oe.on("ready",Ce=>{if(ae.removeEventListener("error",J),this.destroyed){Ee();return}try{ve()}catch{this._setupFakeWorker()}});const ve=()=>{const Ce=new Uint8Array;oe.send("test",Ce,[Ce.buffer])};ve();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(re=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const ae=new LoopbackPort;this._port=ae;const oe=`fake${PDFWorkerUtil.fakeWorkerId++}`,Ee=new _message_handler.MessageHandler(oe+"_worker",oe,ae);re.setup(Ee,ae);const J=new _message_handler.MessageHandler(oe,oe+"_worker",ae);this._messageHandler=J,this._readyCapability.resolve(),J.send("configure",{verbosity:this.verbosity})}).catch(re=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${re.message}".`))})}destroy(){var re;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(re=V(_PDFWorker,W))==null||re.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(re){var oe;if(!(re!=null&&re.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const ae=(oe=V(this,W))==null?void 0:oe.get(re.port);if(ae){if(ae._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return ae}return new _PDFWorker(re)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var re;try{return((re=globalThis.pdfjsWorker)==null?void 0:re.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};W=new WeakMap,it(_PDFWorker,W);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(ae,oe,Ee,J,ve){it(this,ee);it(this,be,new Map);it(this,ce,new Map);it(this,Q,new Map);it(this,ie,null);this.messageHandler=ae,this.loadingTask=oe,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:J.ownerDocument,styleElement:J.styleElement}),this._params=J,this.canvasFactory=ve.canvasFactory,this.filterFactory=ve.filterFactory,this.cMapReaderFactory=ve.cMapReaderFactory,this.standardFontDataFactory=ve.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=Ee,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(ae,oe=_util.AnnotationMode.ENABLE,Ee=null,J=!1){let ve=_util.RenderingIntentFlag.DISPLAY,Ce=_annotation_storage.SerializableEmpty;switch(ae){case"any":ve=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":ve=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${ae}`)}switch(oe){case _util.AnnotationMode.DISABLE:ve+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:ve+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:ve+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,Ce=(ve&_util.RenderingIntentFlag.PRINT&&Ee instanceof _annotation_storage.PrintAnnotationStorage?Ee:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${oe}`)}return J&&(ve+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:ve,cacheKey:`${ve}_${Ce.hash}`,annotationStorageSerializable:Ce}}destroy(){var Ee;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(Ee=V(this,ie))==null||Ee.reject(new Error("Worker was destroyed during onPassword callback"));const ae=[];for(const J of V(this,ce).values())ae.push(J._destroy());V(this,ce).clear(),V(this,Q).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const oe=this.messageHandler.sendWithPromise("Terminate",null);return ae.push(oe),Promise.all(ae).then(()=>{var J;this.commonObjs.clear(),this.fontLoader.clear(),V(this,be).clear(),this.filterFactory.destroy(),(J=this._networkStream)==null||J.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:ae,loadingTask:oe}=this;ae.on("GetReader",(Ee,J)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=ve=>{this._lastProgress={loaded:ve.loaded,total:ve.total}},J.onPull=()=>{this._fullReader.read().then(function({value:ve,done:Ce}){if(Ce){J.close();return}(0,_util.assert)(ve instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),J.enqueue(new Uint8Array(ve),1,[ve])}).catch(ve=>{J.error(ve)})},J.onCancel=ve=>{this._fullReader.cancel(ve),J.ready.catch(Ce=>{if(!this.destroyed)throw Ce})}}),ae.on("ReaderHeadersReady",Ee=>{const J=new _util.PromiseCapability,ve=this._fullReader;return ve.headersReady.then(()=>{var Ce;(!ve.isStreamingSupported||!ve.isRangeSupported)&&(this._lastProgress&&((Ce=oe.onProgress)==null||Ce.call(oe,this._lastProgress)),ve.onProgress=De=>{var Me;(Me=oe.onProgress)==null||Me.call(oe,{loaded:De.loaded,total:De.total})}),J.resolve({isStreamingSupported:ve.isStreamingSupported,isRangeSupported:ve.isRangeSupported,contentLength:ve.contentLength})},J.reject),J.promise}),ae.on("GetRangeReader",(Ee,J)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const ve=this._networkStream.getRangeReader(Ee.begin,Ee.end);if(!ve){J.close();return}J.onPull=()=>{ve.read().then(function({value:Ce,done:De}){if(De){J.close();return}(0,_util.assert)(Ce instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),J.enqueue(new Uint8Array(Ce),1,[Ce])}).catch(Ce=>{J.error(Ce)})},J.onCancel=Ce=>{ve.cancel(Ce),J.ready.catch(De=>{if(!this.destroyed)throw De})}}),ae.on("GetDoc",({pdfInfo:Ee})=>{this._numPages=Ee.numPages,this._htmlForXfa=Ee.htmlForXfa,delete Ee.htmlForXfa,oe._capability.resolve(new PDFDocumentProxy(Ee,this))}),ae.on("DocException",function(Ee){let J;switch(Ee.name){case"PasswordException":J=new _util.PasswordException(Ee.message,Ee.code);break;case"InvalidPDFException":J=new _util.InvalidPDFException(Ee.message);break;case"MissingPDFException":J=new _util.MissingPDFException(Ee.message);break;case"UnexpectedResponseException":J=new _util.UnexpectedResponseException(Ee.message,Ee.status);break;case"UnknownErrorException":J=new _util.UnknownErrorException(Ee.message,Ee.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}oe._capability.reject(J)}),ae.on("PasswordRequest",Ee=>{if(at(this,ie,new _util.PromiseCapability),oe.onPassword){const J=ve=>{ve instanceof Error?V(this,ie).reject(ve):V(this,ie).resolve({password:ve})};try{oe.onPassword(J,Ee.code)}catch(ve){V(this,ie).reject(ve)}}else V(this,ie).reject(new _util.PasswordException(Ee.message,Ee.code));return V(this,ie).promise}),ae.on("DataLoaded",Ee=>{var J;(J=oe.onProgress)==null||J.call(oe,{loaded:Ee.length,total:Ee.length}),this.downloadInfoCapability.resolve(Ee)}),ae.on("StartRenderPage",Ee=>{if(this.destroyed)return;V(this,ce).get(Ee.pageIndex)._startRenderPage(Ee.transparency,Ee.cacheKey)}),ae.on("commonobj",([Ee,J,ve])=>{var Ce;if(!this.destroyed&&!this.commonObjs.has(Ee))switch(J){case"Font":const De=this._params;if("error"in ve){const Ie=ve.error;(0,_util.warn)(`Error during font loading: ${Ie}`),this.commonObjs.resolve(Ee,Ie);break}const Me=De.pdfBug&&((Ce=globalThis.FontInspector)!=null&&Ce.enabled)?(Ie,qe)=>globalThis.FontInspector.fontAdded(Ie,qe):null,Ne=new _font_loader.FontFaceObject(ve,{isEvalSupported:De.isEvalSupported,disableFontFace:De.disableFontFace,ignoreErrors:De.ignoreErrors,inspectFont:Me});this.fontLoader.bind(Ne).catch(Ie=>ae.sendWithPromise("FontFallback",{id:Ee})).finally(()=>{!De.fontExtraProperties&&Ne.data&&(Ne.data=null),this.commonObjs.resolve(Ee,Ne)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(Ee,ve);break;default:throw new Error(`Got unknown common object type ${J}`)}}),ae.on("obj",([Ee,J,ve,Ce])=>{var Me;if(this.destroyed)return;const De=V(this,ce).get(J);if(!De.objs.has(Ee))switch(ve){case"Image":if(De.objs.resolve(Ee,Ce),Ce){let Ne;if(Ce.bitmap){const{width:Ie,height:qe}=Ce;Ne=Ie*qe*4}else Ne=((Me=Ce.data)==null?void 0:Me.length)||0;Ne>_util.MAX_IMAGE_SIZE_TO_CACHE&&(De._maybeCleanupAfterRender=!0)}break;case"Pattern":De.objs.resolve(Ee,Ce);break;default:throw new Error(`Got unknown object type ${ve}`)}}),ae.on("DocProgress",Ee=>{var J;this.destroyed||(J=oe.onProgress)==null||J.call(oe,{loaded:Ee.loaded,total:Ee.total})}),ae.on("FetchBuiltInCMap",Ee=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(Ee):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),ae.on("FetchStandardFontData",Ee=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(Ee):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var Ee;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:ae,transfers:oe}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:ae,filename:((Ee=this._fullReader)==null?void 0:Ee.filename)??null},oe).finally(()=>{this.annotationStorage.resetModified()})}getPage(ae){if(!Number.isInteger(ae)||ae<=0||ae>this._numPages)return Promise.reject(new Error("Invalid page request."));const oe=ae-1,Ee=V(this,Q).get(oe);if(Ee)return Ee;const J=this.messageHandler.sendWithPromise("GetPage",{pageIndex:oe}).then(ve=>{if(this.destroyed)throw new Error("Transport destroyed");const Ce=new PDFPageProxy(oe,ve,this,this._params.pdfBug);return V(this,ce).set(oe,Ce),Ce});return V(this,Q).set(oe,J),J}getPageIndex(ae){return typeof ae!="object"||ae===null||!Number.isInteger(ae.num)||ae.num<0||!Number.isInteger(ae.gen)||ae.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:ae.num,gen:ae.gen})}getAnnotations(ae,oe){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:ae,intent:oe})}getFieldObjects(){return Ue(this,ee,Hr).call(this,"GetFieldObjects")}hasJSActions(){return Ue(this,ee,Hr).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(ae){return typeof ae!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:ae})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Ue(this,ee,Hr).call(this,"GetDocJSActions")}getPageJSActions(ae){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:ae})}getStructTree(ae){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:ae})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(ae=>new _optional_content_config.OptionalContentConfig(ae))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const ae="GetMetadata",oe=V(this,be).get(ae);if(oe)return oe;const Ee=this.messageHandler.sendWithPromise(ae,null).then(J=>{var ve,Ce;return{info:J[0],metadata:J[1]?new _metadata.Metadata(J[1]):null,contentDispositionFilename:((ve=this._fullReader)==null?void 0:ve.filename)??null,contentLength:((Ce=this._fullReader)==null?void 0:Ce.contentLength)??null}});return V(this,be).set(ae,Ee),Ee}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(ae=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const oe of V(this,ce).values())if(!oe.cleanup())throw new Error(`startCleanup: Page ${oe.pageNumber} is currently rendering.`);this.commonObjs.clear(),ae||this.fontLoader.clear(),V(this,be).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:ae,enableXfa:oe}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:ae,enableXfa:oe})}}be=new WeakMap,ce=new WeakMap,Q=new WeakMap,ie=new WeakMap,ee=new WeakSet,Hr=function(ae,oe=null){const Ee=V(this,be).get(ae);if(Ee)return Ee;const J=this.messageHandler.sendWithPromise(ae,oe);return V(this,be).set(ae,J),J};class PDFObjects{constructor(){it(this,ne);it(this,K,Object.create(null))}get(ae,oe=null){if(oe){const J=Ue(this,ne,pi).call(this,ae);return J.capability.promise.then(()=>oe(J.data)),null}const Ee=V(this,K)[ae];if(!(Ee!=null&&Ee.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${ae}.`);return Ee.data}has(ae){const oe=V(this,K)[ae];return(oe==null?void 0:oe.capability.settled)||!1}resolve(ae,oe=null){const Ee=Ue(this,ne,pi).call(this,ae);Ee.data=oe,Ee.capability.resolve()}clear(){var ae;for(const oe in V(this,K)){const{data:Ee}=V(this,K)[oe];(ae=Ee==null?void 0:Ee.bitmap)==null||ae.close()}at(this,K,Object.create(null))}}K=new WeakMap,ne=new WeakSet,pi=function(ae){var oe;return(oe=V(this,K))[ae]||(oe[ae]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(ae){it(this,de,null);at(this,de,ae),this.onContinue=null}get promise(){return V(this,de).capability.promise}cancel(ae=0){V(this,de).cancel(null,ae)}get separateAnnots(){const{separateAnnots:ae}=V(this,de).operatorList;if(!ae)return!1;const{annotationCanvasMap:oe}=V(this,de);return ae.form||ae.canvas&&(oe==null?void 0:oe.size)>0}}de=new WeakMap,exports.RenderTask=RenderTask;const se=class se{constructor({callback:ae,params:oe,objs:Ee,commonObjs:J,annotationCanvasMap:ve,operatorList:Ce,pageIndex:De,canvasFactory:Me,filterFactory:Ne,useRequestAnimationFrame:Ie=!1,pdfBug:qe=!1,pageColors:Se=null}){this.callback=ae,this.params=oe,this.objs=Ee,this.commonObjs=J,this.annotationCanvasMap=ve,this.operatorListIdx=null,this.operatorList=Ce,this._pageIndex=De,this.canvasFactory=Me,this.filterFactory=Ne,this._pdfBug=qe,this.pageColors=Se,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Ie===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=oe.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:ae=!1,optionalContentConfig:oe}){var De,Me;if(this.cancelled)return;if(this._canvas){if(V(se,te).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");V(se,te).add(this._canvas)}this._pdfBug&&((De=globalThis.StepperManager)!=null&&De.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Ee,viewport:J,transform:ve,background:Ce}=this.params;this.gfx=new _canvas.CanvasGraphics(Ee,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:oe},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:ve,viewport:J,transparency:ae,background:Ce}),this.operatorListIdx=0,this.graphicsReady=!0,(Me=this.graphicsReadyCallback)==null||Me.call(this)}cancel(ae=null,oe=0){var Ee;this.running=!1,this.cancelled=!0,(Ee=this.gfx)==null||Ee.endDrawing(),V(se,te).delete(this._canvas),this.callback(ae||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,oe))}operatorListChanged(){var ae;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(ae=this.stepper)==null||ae.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),V(se,te).delete(this._canvas),this.callback())))}};te=new WeakMap,it(se,te,new WeakSet);let InternalRenderTask=se;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(A,$,H)=>{var le,W,be,fa,Q;Object.defineProperty($,"__esModule",{value:!0}),$.SerializableEmpty=$.PrintAnnotationStorage=$.AnnotationStorage=void 0;var O=H(1),R=H(4),B=H(8);const Y=Object.freeze({map:null,hash:"",transfers:void 0});$.SerializableEmpty=Y;class he{constructor(){it(this,be);it(this,le,!1);it(this,W,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(ee,q){const K=V(this,W).get(ee);return K===void 0?q:Object.assign(q,K)}getRawValue(ee){return V(this,W).get(ee)}remove(ee){if(V(this,W).delete(ee),V(this,W).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const q of V(this,W).values())if(q instanceof R.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(ee,q){const K=V(this,W).get(ee);let ne=!1;if(K!==void 0)for(const[fe,de]of Object.entries(q))K[fe]!==de&&(ne=!0,K[fe]=de);else ne=!0,V(this,W).set(ee,q);ne&&Ue(this,be,fa).call(this),q instanceof R.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(q.constructor._type)}has(ee){return V(this,W).has(ee)}getAll(){return V(this,W).size>0?(0,O.objectFromMap)(V(this,W)):null}setAll(ee){for(const[q,K]of Object.entries(ee))this.setValue(q,K)}get size(){return V(this,W).size}resetModified(){V(this,le)&&(at(this,le,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new ue(this)}get serializable(){if(V(this,W).size===0)return Y;const ee=new Map,q=new B.MurmurHash3_64,K=[],ne=Object.create(null);let fe=!1;for(const[de,te]of V(this,W)){const se=te instanceof R.AnnotationEditor?te.serialize(!1,ne):te;se&&(ee.set(de,se),q.update(`${de}:${JSON.stringify(se)}`),fe||(fe=!!se.bitmap))}if(fe)for(const de of ee.values())de.bitmap&&K.push(de.bitmap);return ee.size>0?{map:ee,hash:q.hexdigest(),transfers:K}:Y}}le=new WeakMap,W=new WeakMap,be=new WeakSet,fa=function(){V(this,le)||(at(this,le,!0),typeof this.onSetModified=="function"&&this.onSetModified())},$.AnnotationStorage=he;class ue extends he{constructor(q){super();it(this,Q);const{map:K,hash:ne,transfers:fe}=q.serializable,de=structuredClone(K,fe?{transfer:fe}:null);at(this,Q,{map:de,hash:ne,transfers:fe})}get print(){(0,O.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return V(this,Q)}}Q=new WeakMap,$.PrintAnnotationStorage=ue},(A,$,H)=>{var ue,le,W,be,ce,Q,ie,ee,q,K,ne,fe,de,te,se,mi,gi,oe,vi,bi,pa,ma,ga,_i,va;Object.defineProperty($,"__esModule",{value:!0}),$.AnnotationEditor=void 0;var O=H(5),R=H(1),B=H(6);const Ie=class Ie{constructor(Se){it(this,se);it(this,ue,"");it(this,le,!1);it(this,W,null);it(this,be,null);it(this,ce,null);it(this,Q,!1);it(this,ie,null);it(this,ee,this.focusin.bind(this));it(this,q,this.focusout.bind(this));it(this,K,!1);it(this,ne,!1);it(this,fe,!1);$n(this,"_initialOptions",Object.create(null));$n(this,"_uiManager",null);$n(this,"_focusEventsAllowed",!0);$n(this,"_l10nPromise",null);it(this,de,!1);it(this,te,Ie._zIndex++);this.constructor===Ie&&(0,R.unreachable)("Cannot initialize AnnotationEditor."),this.parent=Se.parent,this.id=Se.id,this.width=this.height=null,this.pageIndex=Se.parent.pageIndex,this.name=Se.name,this.div=null,this._uiManager=Se.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=Se.isCentered,this._structTreeParentId=null;const{rotation:Te,rawDims:{pageWidth:He,pageHeight:_e,pageX:G,pageY:X}}=this.parent.viewport;this.rotation=Te,this.pageRotation=(360+Te-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[He,_e],this.pageTranslation=[G,X];const[ge,Pe]=this.parentDimensions;this.x=Se.x/ge,this.y=Se.y/Pe,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,R.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(Se){const Te=new he({id:Se.parent.getNextId(),parent:Se.parent,uiManager:Se._uiManager});Te.annotationElementId=Se.annotationElementId,Te.deleted=!0,Te._uiManager.addToAnnotationStorage(Te)}static initialize(Se,Te=null){if(Ie._l10nPromise||(Ie._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(_e=>[_e,Se.get(_e)]))),Te!=null&&Te.strings)for(const _e of Te.strings)Ie._l10nPromise.set(_e,Se.get(_e));if(Ie._borderLineWidth!==-1)return;const He=getComputedStyle(document.documentElement);Ie._borderLineWidth=parseFloat(He.getPropertyValue("--outline-width"))||0}static updateDefaultParams(Se,Te){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(Se){return!1}static paste(Se,Te){(0,R.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return V(this,de)}set _isDraggable(Se){var Te;at(this,de,Se),(Te=this.div)==null||Te.classList.toggle("draggable",Se)}center(){const[Se,Te]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*Te/(Se*2),this.y+=this.width*Se/(Te*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*Te/(Se*2),this.y-=this.width*Se/(Te*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(Se){this._uiManager.addCommands(Se)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=V(this,te)}setParent(Se){Se!==null&&(this.pageIndex=Se.pageIndex,this.pageDimensions=Se.pageDimensions),this.parent=Se}focusin(Se){this._focusEventsAllowed&&(V(this,K)?at(this,K,!1):this.parent.setSelected(this))}focusout(Se){var He;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const Te=Se.relatedTarget;Te!=null&&Te.closest(`#${this.id}`)||(Se.preventDefault(),(He=this.parent)!=null&&He.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(Se,Te,He,_e){const[G,X]=this.parentDimensions;[He,_e]=this.screenToPageTranslation(He,_e),this.x=(Se+He)/G,this.y=(Te+_e)/X,this.fixAndSetPosition()}translate(Se,Te){Ue(this,se,mi).call(this,this.parentDimensions,Se,Te)}translateInPage(Se,Te){Ue(this,se,mi).call(this,this.pageDimensions,Se,Te),this.div.scrollIntoView({block:"nearest"})}drag(Se,Te){const[He,_e]=this.parentDimensions;if(this.x+=Se/He,this.y+=Te/_e,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Ae,y:ke}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Ae,ke)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:G,y:X}=this;const[ge,Pe]=Ue(this,se,gi).call(this);G+=ge,X+=Pe,this.div.style.left=`${(100*G).toFixed(2)}%`,this.div.style.top=`${(100*X).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[Se,Te]=this.pageDimensions;let{x:He,y:_e,width:G,height:X}=this;switch(G*=Se,X*=Te,He*=Se,_e*=Te,this.rotation){case 0:He=Math.max(0,Math.min(Se-G,He)),_e=Math.max(0,Math.min(Te-X,_e));break;case 90:He=Math.max(0,Math.min(Se-X,He)),_e=Math.min(Te,Math.max(G,_e));break;case 180:He=Math.min(Se,Math.max(G,He)),_e=Math.min(Te,Math.max(X,_e));break;case 270:He=Math.min(Se,Math.max(X,He)),_e=Math.max(0,Math.min(Te-G,_e));break}this.x=He/=Se,this.y=_e/=Te;const[ge,Pe]=Ue(this,se,gi).call(this);He+=ge,_e+=Pe;const{style:Ae}=this.div;Ae.left=`${(100*He).toFixed(2)}%`,Ae.top=`${(100*_e).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(Se,Te){var He;return Ue(He=Ie,oe,vi).call(He,Se,Te,this.parentRotation)}pageTranslationToScreen(Se,Te){var He;return Ue(He=Ie,oe,vi).call(He,Se,Te,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:Se,pageDimensions:[Te,He]}=this,_e=Te*Se,G=He*Se;return R.FeatureTest.isCSSRoundSupported?[Math.round(_e),Math.round(G)]:[_e,G]}setDims(Se,Te){var G;const[He,_e]=this.parentDimensions;this.div.style.width=`${(100*Se/He).toFixed(2)}%`,V(this,Q)||(this.div.style.height=`${(100*Te/_e).toFixed(2)}%`),(G=V(this,W))==null||G.classList.toggle("small",Se<Ie.SMALL_EDITOR_SIZE||Te<Ie.SMALL_EDITOR_SIZE)}fixDims(){const{style:Se}=this.div,{height:Te,width:He}=Se,_e=He.endsWith("%"),G=!V(this,Q)&&Te.endsWith("%");if(_e&&G)return;const[X,ge]=this.parentDimensions;_e||(Se.width=`${(100*parseFloat(He)/X).toFixed(2)}%`),!V(this,Q)&&!G&&(Se.height=`${(100*parseFloat(Te)/ge).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(V(this,W))return;const Se=at(this,W,document.createElement("button"));Se.className="altText";const Te=await Ie._l10nPromise.get("editor_alt_text_button_label");Se.textContent=Te,Se.setAttribute("aria-label",Te),Se.tabIndex="0",Se.addEventListener("contextmenu",B.noContextMenu),Se.addEventListener("pointerdown",He=>He.stopPropagation()),Se.addEventListener("click",He=>{He.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),Se.addEventListener("keydown",He=>{He.target===Se&&He.key==="Enter"&&(He.preventDefault(),this._uiManager.editAltText(this))}),Ue(this,se,_i).call(this),this.div.append(Se),Ie.SMALL_EDITOR_SIZE||(Ie.SMALL_EDITOR_SIZE=Math.min(128,Math.round(Se.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:V(this,ue),decorative:V(this,le)}}set altTextData({altText:Se,decorative:Te}){V(this,ue)===Se&&V(this,le)===Te||(at(this,ue,Se),at(this,le,Te),Ue(this,se,_i).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",V(this,ee)),this.div.addEventListener("focusout",V(this,q));const[Se,Te]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*Te/Se).toFixed(2)}%`,this.div.style.maxHeight=`${(100*Se/Te).toFixed(2)}%`);const[He,_e]=this.getInitialTranslation();return this.translate(He,_e),(0,O.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(Se){const{isMac:Te}=R.FeatureTest.platform;if(Se.button!==0||Se.ctrlKey&&Te){Se.preventDefault();return}at(this,K,!0),Ue(this,se,va).call(this,Se)}moveInDOM(){var Se;(Se=this.parent)==null||Se.moveEditorInDOM(this)}_setParentAndPosition(Se,Te,He){Se.changeParent(this),this.x=Te,this.y=He,this.fixAndSetPosition()}getRect(Se,Te){const He=this.parentScale,[_e,G]=this.pageDimensions,[X,ge]=this.pageTranslation,Pe=Se/He,Ae=Te/He,ke=this.x*_e,Oe=this.y*G,Qe=this.width*_e,ot=this.height*G;switch(this.rotation){case 0:return[ke+Pe+X,G-Oe-Ae-ot+ge,ke+Pe+Qe+X,G-Oe-Ae+ge];case 90:return[ke+Ae+X,G-Oe+Pe+ge,ke+Ae+ot+X,G-Oe+Pe+Qe+ge];case 180:return[ke-Pe-Qe+X,G-Oe+Ae+ge,ke-Pe+X,G-Oe+Ae+ot+ge];case 270:return[ke-Ae-ot+X,G-Oe-Pe-Qe+ge,ke-Ae+X,G-Oe-Pe+ge];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(Se,Te){const[He,_e,G,X]=Se,ge=G-He,Pe=X-_e;switch(this.rotation){case 0:return[He,Te-X,ge,Pe];case 90:return[He,Te-_e,Pe,ge];case 180:return[G,Te-_e,ge,Pe];case 270:return[G,Te-X,Pe,ge];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){at(this,fe,!0)}disableEditMode(){at(this,fe,!1)}isInEditMode(){return V(this,fe)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var Se,Te;(Se=this.div)==null||Se.addEventListener("focusin",V(this,ee)),(Te=this.div)==null||Te.addEventListener("focusout",V(this,q))}serialize(Se=!1,Te=null){(0,R.unreachable)("An editor must be serializable")}static deserialize(Se,Te,He){const _e=new this.prototype.constructor({parent:Te,id:Te.getNextId(),uiManager:He});_e.rotation=Se.rotation;const[G,X]=_e.pageDimensions,[ge,Pe,Ae,ke]=_e.getRectInCurrentCoords(Se.rect,X);return _e.x=ge/G,_e.y=Pe/X,_e.width=Ae/G,_e.height=ke/X,_e}remove(){var Se;this.div.removeEventListener("focusin",V(this,ee)),this.div.removeEventListener("focusout",V(this,q)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(Se=V(this,W))==null||Se.remove(),at(this,W,null),at(this,be,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Ue(this,se,pa).call(this),V(this,ie).classList.remove("hidden"))}select(){var Se;this.makeResizable(),(Se=this.div)==null||Se.classList.add("selectedEditor")}unselect(){var Se,Te,He;(Se=V(this,ie))==null||Se.classList.add("hidden"),(Te=this.div)==null||Te.classList.remove("selectedEditor"),(He=this.div)!=null&&He.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(Se,Te){}disableEditing(){V(this,W)&&(V(this,W).hidden=!0)}enableEditing(){V(this,W)&&(V(this,W).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return V(this,ne)}set isEditing(Se){at(this,ne,Se),this.parent&&(Se?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(Se,Te){at(this,Q,!0);const He=Se/Te,{style:_e}=this.div;_e.aspectRatio=He,_e.height="auto"}static get MIN_SIZE(){return 16}};ue=new WeakMap,le=new WeakMap,W=new WeakMap,be=new WeakMap,ce=new WeakMap,Q=new WeakMap,ie=new WeakMap,ee=new WeakMap,q=new WeakMap,K=new WeakMap,ne=new WeakMap,fe=new WeakMap,de=new WeakMap,te=new WeakMap,se=new WeakSet,mi=function([Se,Te],He,_e){[He,_e]=this.screenToPageTranslation(He,_e),this.x+=He/Se,this.y+=_e/Te,this.fixAndSetPosition()},gi=function(){const[Se,Te]=this.parentDimensions,{_borderLineWidth:He}=Ie,_e=He/Se,G=He/Te;switch(this.rotation){case 90:return[-_e,G];case 180:return[_e,G];case 270:return[_e,-G];default:return[-_e,-G]}},oe=new WeakSet,vi=function(Se,Te,He){switch(He){case 90:return[Te,-Se];case 180:return[-Se,-Te];case 270:return[-Te,Se];default:return[Se,Te]}},bi=function(Se){switch(Se){case 90:{const[Te,He]=this.pageDimensions;return[0,-Te/He,He/Te,0]}case 180:return[-1,0,0,-1];case 270:{const[Te,He]=this.pageDimensions;return[0,Te/He,-He/Te,0]}default:return[1,0,0,1]}},pa=function(){if(V(this,ie))return;at(this,ie,document.createElement("div")),V(this,ie).classList.add("resizers");const Se=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||Se.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const Te of Se){const He=document.createElement("div");V(this,ie).append(He),He.classList.add("resizer",Te),He.addEventListener("pointerdown",Ue(this,se,ma).bind(this,Te)),He.addEventListener("contextmenu",B.noContextMenu)}this.div.prepend(V(this,ie))},ma=function(Se,Te){Te.preventDefault();const{isMac:He}=R.FeatureTest.platform;if(Te.button!==0||Te.ctrlKey&&He)return;const _e=Ue(this,se,ga).bind(this,Se),G=this._isDraggable;this._isDraggable=!1;const X={passive:!0,capture:!0};window.addEventListener("pointermove",_e,X);const ge=this.x,Pe=this.y,Ae=this.width,ke=this.height,Oe=this.parent.div.style.cursor,Qe=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(Te.target).cursor;const ot=()=>{this._isDraggable=G,window.removeEventListener("pointerup",ot),window.removeEventListener("blur",ot),window.removeEventListener("pointermove",_e,X),this.parent.div.style.cursor=Oe,this.div.style.cursor=Qe;const st=this.x,ut=this.y,dt=this.width,mt=this.height;st===ge&&ut===Pe&&dt===Ae&&mt===ke||this.addCommands({cmd:()=>{this.width=dt,this.height=mt,this.x=st,this.y=ut;const[Ge,Xe]=this.parentDimensions;this.setDims(Ge*dt,Xe*mt),this.fixAndSetPosition()},undo:()=>{this.width=Ae,this.height=ke,this.x=ge,this.y=Pe;const[Ge,Xe]=this.parentDimensions;this.setDims(Ge*Ae,Xe*ke),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",ot),window.addEventListener("blur",ot)},ga=function(Se,Te){const[He,_e]=this.parentDimensions,G=this.x,X=this.y,ge=this.width,Pe=this.height,Ae=Ie.MIN_SIZE/He,ke=Ie.MIN_SIZE/_e,Oe=Rt=>Math.round(Rt*1e4)/1e4,Qe=Ue(this,se,bi).call(this,this.rotation),ot=(Rt,zt)=>[Qe[0]*Rt+Qe[2]*zt,Qe[1]*Rt+Qe[3]*zt],st=Ue(this,se,bi).call(this,360-this.rotation),ut=(Rt,zt)=>[st[0]*Rt+st[2]*zt,st[1]*Rt+st[3]*zt];let dt,mt,Ge=!1,Xe=!1;switch(Se){case"topLeft":Ge=!0,dt=(Rt,zt)=>[0,0],mt=(Rt,zt)=>[Rt,zt];break;case"topMiddle":dt=(Rt,zt)=>[Rt/2,0],mt=(Rt,zt)=>[Rt/2,zt];break;case"topRight":Ge=!0,dt=(Rt,zt)=>[Rt,0],mt=(Rt,zt)=>[0,zt];break;case"middleRight":Xe=!0,dt=(Rt,zt)=>[Rt,zt/2],mt=(Rt,zt)=>[0,zt/2];break;case"bottomRight":Ge=!0,dt=(Rt,zt)=>[Rt,zt],mt=(Rt,zt)=>[0,0];break;case"bottomMiddle":dt=(Rt,zt)=>[Rt/2,zt],mt=(Rt,zt)=>[Rt/2,0];break;case"bottomLeft":Ge=!0,dt=(Rt,zt)=>[0,zt],mt=(Rt,zt)=>[Rt,0];break;case"middleLeft":Xe=!0,dt=(Rt,zt)=>[0,zt/2],mt=(Rt,zt)=>[Rt,zt/2];break}const me=dt(ge,Pe),ye=mt(ge,Pe);let je=ot(...ye);const Ke=Oe(G+je[0]),nt=Oe(X+je[1]);let pt=1,ht=1,[We,wt]=this.screenToPageTranslation(Te.movementX,Te.movementY);if([We,wt]=ut(We/He,wt/_e),Ge){const Rt=Math.hypot(ge,Pe);pt=ht=Math.max(Math.min(Math.hypot(ye[0]-me[0]-We,ye[1]-me[1]-wt)/Rt,1/ge,1/Pe),Ae/ge,ke/Pe)}else Xe?pt=Math.max(Ae,Math.min(1,Math.abs(ye[0]-me[0]-We)))/ge:ht=Math.max(ke,Math.min(1,Math.abs(ye[1]-me[1]-wt)))/Pe;const St=Oe(ge*pt),Yt=Oe(Pe*ht);je=ot(...mt(St,Yt));const Ut=Ke-je[0],dn=nt-je[1];this.width=St,this.height=Yt,this.x=Ut,this.y=dn,this.setDims(He*St,_e*Yt),this.fixAndSetPosition()},_i=async function(){var He;const Se=V(this,W);if(!Se)return;if(!V(this,ue)&&!V(this,le)){Se.classList.remove("done"),(He=V(this,be))==null||He.remove();return}Ie._l10nPromise.get("editor_alt_text_edit_button_label").then(_e=>{Se.setAttribute("aria-label",_e)});let Te=V(this,be);if(!Te){at(this,be,Te=document.createElement("span")),Te.className="tooltip",Te.setAttribute("role","tooltip");const _e=Te.id=`alt-text-tooltip-${this.id}`;Se.setAttribute("aria-describedby",_e);const G=100;Se.addEventListener("mouseenter",()=>{at(this,ce,setTimeout(()=>{at(this,ce,null),V(this,be).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},G))}),Se.addEventListener("mouseleave",()=>{var X;clearTimeout(V(this,ce)),at(this,ce,null),(X=V(this,be))==null||X.classList.remove("show")})}Se.classList.add("done"),Te.innerText=V(this,le)?await Ie._l10nPromise.get("editor_alt_text_decorative_tooltip"):V(this,ue),Te.parentNode||Se.append(Te)},va=function(Se){if(!this._isDraggable)return;const Te=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let He,_e;Te&&(He={passive:!0,capture:!0},_e=X=>{const[ge,Pe]=this.screenToPageTranslation(X.movementX,X.movementY);this._uiManager.dragSelectedEditors(ge,Pe)},window.addEventListener("pointermove",_e,He));const G=()=>{if(window.removeEventListener("pointerup",G),window.removeEventListener("blur",G),Te&&window.removeEventListener("pointermove",_e,He),at(this,K,!1),!this._uiManager.endDragSession()){const{isMac:X}=R.FeatureTest.platform;Se.ctrlKey&&!X||Se.shiftKey||Se.metaKey&&X?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",G),window.addEventListener("blur",G)},it(Ie,oe),$n(Ie,"_borderLineWidth",-1),$n(Ie,"_colorManager",new O.ColorManager),$n(Ie,"_zIndex",1),$n(Ie,"SMALL_EDITOR_SIZE",0);let Y=Ie;$.AnnotationEditor=Y;class he extends Y{constructor(Se){super(Se),this.annotationElementId=Se.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(A,$,H)=>{var Q,ie,ee,q,K,Ei,de,te,se,re,ae,ba,J,ve,Ce,De,Me,Ne,Ie,qe,Se,Te,He,_e,G,X,ge,Pe,Ae,ke,Oe,Qe,ot,st,ut,dt,mt,Ge,Xe,me,ye,je,Ke,nt,pt,ht,We,_a,yi,Si,Vr,wi,Ai,Qn,Pr,Ea,ya,Ci,kr,Pi;Object.defineProperty($,"__esModule",{value:!0}),$.KeyboardManager=$.CommandManager=$.ColorManager=$.AnnotationEditorUIManager=void 0,$.bindEvents=B,$.opacityToHex=Y;var O=H(1),R=H(6);function B(Gt,$e,ft){for(const Pt of ft)$e.addEventListener(Pt,Gt[Pt].bind(Gt))}function Y(Gt){return Math.round(Math.min(255,Math.max(1,255*Gt))).toString(16).padStart(2,"0")}class he{constructor(){it(this,Q,0)}getId(){return`${O.AnnotationEditorPrefix}${Cr(this,Q)._++}`}}Q=new WeakMap;const fe=class fe{constructor(){it(this,K);it(this,ie,(0,O.getUuid)());it(this,ee,0);it(this,q,null)}static get _isSVGFittingCanvas(){const $e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',Pt=new OffscreenCanvas(1,3).getContext("2d"),Dt=new Image;Dt.src=$e;const Bt=Dt.decode().then(()=>(Pt.drawImage(Dt,0,0,1,1,0,0,1,3),new Uint32Array(Pt.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,O.shadow)(this,"_isSVGFittingCanvas",Bt)}async getFromFile($e){const{lastModified:ft,name:Pt,size:Dt,type:Bt}=$e;return Ue(this,K,Ei).call(this,`${ft}_${Pt}_${Dt}_${Bt}`,$e)}async getFromUrl($e){return Ue(this,K,Ei).call(this,$e,$e)}async getFromId($e){V(this,q)||at(this,q,new Map);const ft=V(this,q).get($e);return ft?ft.bitmap?(ft.refCounter+=1,ft):ft.file?this.getFromFile(ft.file):this.getFromUrl(ft.url):null}getSvgUrl($e){const ft=V(this,q).get($e);return ft!=null&&ft.isSvg?ft.svgUrl:null}deleteId($e){V(this,q)||at(this,q,new Map);const ft=V(this,q).get($e);ft&&(ft.refCounter-=1,ft.refCounter===0&&(ft.bitmap=null))}isValidId($e){return $e.startsWith(`image_${V(this,ie)}_`)}};ie=new WeakMap,ee=new WeakMap,q=new WeakMap,K=new WeakSet,Ei=async function($e,ft){V(this,q)||at(this,q,new Map);let Pt=V(this,q).get($e);if(Pt===null)return null;if(Pt!=null&&Pt.bitmap)return Pt.refCounter+=1,Pt;try{Pt||(Pt={bitmap:null,id:`image_${V(this,ie)}_${Cr(this,ee)._++}`,refCounter:0,isSvg:!1});let Dt;if(typeof ft=="string"){Pt.url=ft;const Bt=await fetch(ft);if(!Bt.ok)throw new Error(Bt.statusText);Dt=await Bt.blob()}else Dt=Pt.file=ft;if(Dt.type==="image/svg+xml"){const Bt=fe._isSVGFittingCanvas,Tt=new FileReader,xe=new Image,we=new Promise((ze,ct)=>{xe.onload=()=>{Pt.bitmap=xe,Pt.isSvg=!0,ze()},Tt.onload=async()=>{const lt=Pt.svgUrl=Tt.result;xe.src=await Bt?`${lt}#svgView(preserveAspectRatio(none))`:lt},xe.onerror=Tt.onerror=ct});Tt.readAsDataURL(Dt),await we}else Pt.bitmap=await createImageBitmap(Dt);Pt.refCounter=1}catch(Dt){console.error(Dt),Pt=null}return V(this,q).set($e,Pt),Pt&&V(this,q).set(Pt.id,Pt),Pt};let ue=fe;class le{constructor($e=128){it(this,de,[]);it(this,te,!1);it(this,se);it(this,re,-1);at(this,se,$e)}add({cmd:$e,undo:ft,mustExec:Pt,type:Dt=NaN,overwriteIfSameType:Bt=!1,keepUndo:Tt=!1}){if(Pt&&$e(),V(this,te))return;const xe={cmd:$e,undo:ft,type:Dt};if(V(this,re)===-1){V(this,de).length>0&&(V(this,de).length=0),at(this,re,0),V(this,de).push(xe);return}if(Bt&&V(this,de)[V(this,re)].type===Dt){Tt&&(xe.undo=V(this,de)[V(this,re)].undo),V(this,de)[V(this,re)]=xe;return}const we=V(this,re)+1;we===V(this,se)?V(this,de).splice(0,1):(at(this,re,we),we<V(this,de).length&&V(this,de).splice(we)),V(this,de).push(xe)}undo(){V(this,re)!==-1&&(at(this,te,!0),V(this,de)[V(this,re)].undo(),at(this,te,!1),at(this,re,V(this,re)-1))}redo(){V(this,re)<V(this,de).length-1&&(at(this,re,V(this,re)+1),at(this,te,!0),V(this,de)[V(this,re)].cmd(),at(this,te,!1))}hasSomethingToUndo(){return V(this,re)!==-1}hasSomethingToRedo(){return V(this,re)<V(this,de).length-1}destroy(){at(this,de,null)}}de=new WeakMap,te=new WeakMap,se=new WeakMap,re=new WeakMap,$.CommandManager=le;class W{constructor($e){it(this,ae);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:ft}=O.FeatureTest.platform;for(const[Pt,Dt,Bt={}]of $e)for(const Tt of Pt){const xe=Tt.startsWith("mac+");ft&&xe?(this.callbacks.set(Tt.slice(4),{callback:Dt,options:Bt}),this.allKeys.add(Tt.split("+").at(-1))):!ft&&!xe&&(this.callbacks.set(Tt,{callback:Dt,options:Bt}),this.allKeys.add(Tt.split("+").at(-1)))}}exec($e,ft){if(!this.allKeys.has(ft.key))return;const Pt=this.callbacks.get(Ue(this,ae,ba).call(this,ft));if(!Pt)return;const{callback:Dt,options:{bubbles:Bt=!1,args:Tt=[],checker:xe=null}}=Pt;xe&&!xe($e,ft)||(Dt.bind($e,...Tt)(),Bt||(ft.stopPropagation(),ft.preventDefault()))}}ae=new WeakSet,ba=function($e){$e.altKey&&this.buffer.push("alt"),$e.ctrlKey&&this.buffer.push("ctrl"),$e.metaKey&&this.buffer.push("meta"),$e.shiftKey&&this.buffer.push("shift"),this.buffer.push($e.key);const ft=this.buffer.join("+");return this.buffer.length=0,ft},$.KeyboardManager=W;const Ee=class Ee{get _colors(){const $e=new Map([["CanvasText",null],["Canvas",null]]);return(0,R.getColorValues)($e),(0,O.shadow)(this,"_colors",$e)}convert($e){const ft=(0,R.getRGB)($e);if(!window.matchMedia("(forced-colors: active)").matches)return ft;for(const[Pt,Dt]of this._colors)if(Dt.every((Bt,Tt)=>Bt===ft[Tt]))return Ee._colorsMapping.get(Pt);return ft}getHexCode($e){const ft=this._colors.get($e);return ft?O.Util.makeHexColor(...ft):$e}};$n(Ee,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let be=Ee;$.ColorManager=be;const Lt=class Lt{constructor($e,ft,Pt,Dt,Bt,Tt){it(this,We);it(this,J,null);it(this,ve,new Map);it(this,Ce,new Map);it(this,De,null);it(this,Me,null);it(this,Ne,new le);it(this,Ie,0);it(this,qe,new Set);it(this,Se,null);it(this,Te,null);it(this,He,new Set);it(this,_e,null);it(this,G,new he);it(this,X,!1);it(this,ge,!1);it(this,Pe,null);it(this,Ae,O.AnnotationEditorType.NONE);it(this,ke,new Set);it(this,Oe,null);it(this,Qe,this.blur.bind(this));it(this,ot,this.focus.bind(this));it(this,st,this.copy.bind(this));it(this,ut,this.cut.bind(this));it(this,dt,this.paste.bind(this));it(this,mt,this.keydown.bind(this));it(this,Ge,this.onEditingAction.bind(this));it(this,Xe,this.onPageChanging.bind(this));it(this,me,this.onScaleChanging.bind(this));it(this,ye,this.onRotationChanging.bind(this));it(this,je,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});it(this,Ke,[0,0]);it(this,nt,null);it(this,pt,null);it(this,ht,null);at(this,pt,$e),at(this,ht,ft),at(this,De,Pt),this._eventBus=Dt,this._eventBus._on("editingaction",V(this,Ge)),this._eventBus._on("pagechanging",V(this,Xe)),this._eventBus._on("scalechanging",V(this,me)),this._eventBus._on("rotationchanging",V(this,ye)),at(this,Me,Bt.annotationStorage),at(this,_e,Bt.filterFactory),at(this,Oe,Tt),this.viewParameters={realScale:R.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const $e=Lt.prototype,ft=Bt=>{const{activeElement:Tt}=document;return Tt&&V(Bt,pt).contains(Tt)&&Bt.hasSomethingToControl()},Pt=this.TRANSLATE_SMALL,Dt=this.TRANSLATE_BIG;return(0,O.shadow)(this,"_keyboardManager",new W([[["ctrl+a","mac+meta+a"],$e.selectAll],[["ctrl+z","mac+meta+z"],$e.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],$e.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],$e.delete],[["Escape","mac+Escape"],$e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],$e.translateSelectedEditors,{args:[-Pt,0],checker:ft}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],$e.translateSelectedEditors,{args:[-Dt,0],checker:ft}],[["ArrowRight","mac+ArrowRight"],$e.translateSelectedEditors,{args:[Pt,0],checker:ft}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],$e.translateSelectedEditors,{args:[Dt,0],checker:ft}],[["ArrowUp","mac+ArrowUp"],$e.translateSelectedEditors,{args:[0,-Pt],checker:ft}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],$e.translateSelectedEditors,{args:[0,-Dt],checker:ft}],[["ArrowDown","mac+ArrowDown"],$e.translateSelectedEditors,{args:[0,Pt],checker:ft}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],$e.translateSelectedEditors,{args:[0,Dt],checker:ft}]]))}destroy(){Ue(this,We,Vr).call(this),Ue(this,We,yi).call(this),this._eventBus._off("editingaction",V(this,Ge)),this._eventBus._off("pagechanging",V(this,Xe)),this._eventBus._off("scalechanging",V(this,me)),this._eventBus._off("rotationchanging",V(this,ye));for(const $e of V(this,Ce).values())$e.destroy();V(this,Ce).clear(),V(this,ve).clear(),V(this,He).clear(),at(this,J,null),V(this,ke).clear(),V(this,Ne).destroy(),V(this,De).destroy()}get hcmFilter(){return(0,O.shadow)(this,"hcmFilter",V(this,Oe)?V(this,_e).addHCMFilter(V(this,Oe).foreground,V(this,Oe).background):"none")}get direction(){return(0,O.shadow)(this,"direction",getComputedStyle(V(this,pt)).direction)}editAltText($e){var ft;(ft=V(this,De))==null||ft.editAltText(this,$e)}onPageChanging({pageNumber:$e}){at(this,Ie,$e-1)}focusMainContainer(){V(this,pt).focus()}findParent($e,ft){for(const Pt of V(this,Ce).values()){const{x:Dt,y:Bt,width:Tt,height:xe}=Pt.div.getBoundingClientRect();if($e>=Dt&&$e<=Dt+Tt&&ft>=Bt&&ft<=Bt+xe)return Pt}return null}disableUserSelect($e=!1){V(this,ht).classList.toggle("noUserSelect",$e)}addShouldRescale($e){V(this,He).add($e)}removeShouldRescale($e){V(this,He).delete($e)}onScaleChanging({scale:$e}){this.commitOrRemove(),this.viewParameters.realScale=$e*R.PixelsPerInch.PDF_TO_CSS_UNITS;for(const ft of V(this,He))ft.onScaleChanging()}onRotationChanging({pagesRotation:$e}){this.commitOrRemove(),this.viewParameters.rotation=$e}addToAnnotationStorage($e){!$e.isEmpty()&&V(this,Me)&&!V(this,Me).has($e.id)&&V(this,Me).setValue($e.id,$e)}blur(){if(!this.hasSelection)return;const{activeElement:$e}=document;for(const ft of V(this,ke))if(ft.div.contains($e)){at(this,Pe,[ft,$e]),ft._focusEventsAllowed=!1;break}}focus(){if(!V(this,Pe))return;const[$e,ft]=V(this,Pe);at(this,Pe,null),ft.addEventListener("focusin",()=>{$e._focusEventsAllowed=!0},{once:!0}),ft.focus()}addEditListeners(){Ue(this,We,Si).call(this),Ue(this,We,wi).call(this)}removeEditListeners(){Ue(this,We,Vr).call(this),Ue(this,We,Ai).call(this)}copy($e){var Pt;if($e.preventDefault(),(Pt=V(this,J))==null||Pt.commitOrRemove(),!this.hasSelection)return;const ft=[];for(const Dt of V(this,ke)){const Bt=Dt.serialize(!0);Bt&&ft.push(Bt)}ft.length!==0&&$e.clipboardData.setData("application/pdfjs",JSON.stringify(ft))}cut($e){this.copy($e),this.delete()}paste($e){$e.preventDefault();const{clipboardData:ft}=$e;for(const Bt of ft.items)for(const Tt of V(this,Te))if(Tt.isHandlingMimeForPasting(Bt.type)){Tt.paste(Bt,this.currentLayer);return}let Pt=ft.getData("application/pdfjs");if(!Pt)return;try{Pt=JSON.parse(Pt)}catch(Bt){(0,O.warn)(`paste: "${Bt.message}".`);return}if(!Array.isArray(Pt))return;this.unselectAll();const Dt=this.currentLayer;try{const Bt=[];for(const we of Pt){const ze=Dt.deserialize(we);if(!ze)return;Bt.push(ze)}const Tt=()=>{for(const we of Bt)Ue(this,We,Ci).call(this,we);Ue(this,We,Pi).call(this,Bt)},xe=()=>{for(const we of Bt)we.remove()};this.addCommands({cmd:Tt,undo:xe,mustExec:!0})}catch(Bt){(0,O.warn)(`paste: "${Bt.message}".`)}}keydown($e){var ft;(ft=this.getActive())!=null&&ft.shouldGetKeyboardEvents()||Lt._keyboardManager.exec(this,$e)}onEditingAction($e){["undo","redo","delete","selectAll"].includes($e.name)&&this[$e.name]()}setEditingState($e){$e?(Ue(this,We,_a).call(this),Ue(this,We,Si).call(this),Ue(this,We,wi).call(this),Ue(this,We,Qn).call(this,{isEditing:V(this,Ae)!==O.AnnotationEditorType.NONE,isEmpty:Ue(this,We,kr).call(this),hasSomethingToUndo:V(this,Ne).hasSomethingToUndo(),hasSomethingToRedo:V(this,Ne).hasSomethingToRedo(),hasSelectedEditor:!1})):(Ue(this,We,yi).call(this),Ue(this,We,Vr).call(this),Ue(this,We,Ai).call(this),Ue(this,We,Qn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes($e){if(!V(this,Te)){at(this,Te,$e);for(const ft of V(this,Te))Ue(this,We,Pr).call(this,ft.defaultPropertiesToUpdate)}}getId(){return V(this,G).getId()}get currentLayer(){return V(this,Ce).get(V(this,Ie))}getLayer($e){return V(this,Ce).get($e)}get currentPageIndex(){return V(this,Ie)}addLayer($e){V(this,Ce).set($e.pageIndex,$e),V(this,X)?$e.enable():$e.disable()}removeLayer($e){V(this,Ce).delete($e.pageIndex)}updateMode($e,ft=null){if(V(this,Ae)!==$e){if(at(this,Ae,$e),$e===O.AnnotationEditorType.NONE){this.setEditingState(!1),Ue(this,We,ya).call(this);return}this.setEditingState(!0),Ue(this,We,Ea).call(this),this.unselectAll();for(const Pt of V(this,Ce).values())Pt.updateMode($e);if(ft){for(const Pt of V(this,ve).values())if(Pt.annotationElementId===ft){this.setSelected(Pt),Pt.enterInEditMode();break}}}}updateToolbar($e){$e!==V(this,Ae)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:$e})}updateParams($e,ft){if(V(this,Te)){if($e===O.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor($e);return}for(const Pt of V(this,ke))Pt.updateParams($e,ft);for(const Pt of V(this,Te))Pt.updateDefaultParams($e,ft)}}enableWaiting($e=!1){if(V(this,ge)!==$e){at(this,ge,$e);for(const ft of V(this,Ce).values())$e?ft.disableClick():ft.enableClick(),ft.div.classList.toggle("waiting",$e)}}getEditors($e){const ft=[];for(const Pt of V(this,ve).values())Pt.pageIndex===$e&&ft.push(Pt);return ft}getEditor($e){return V(this,ve).get($e)}addEditor($e){V(this,ve).set($e.id,$e)}removeEditor($e){var ft;V(this,ve).delete($e.id),this.unselect($e),(!$e.annotationElementId||!V(this,qe).has($e.annotationElementId))&&((ft=V(this,Me))==null||ft.remove($e.id))}addDeletedAnnotationElement($e){V(this,qe).add($e.annotationElementId),$e.deleted=!0}isDeletedAnnotationElement($e){return V(this,qe).has($e)}removeDeletedAnnotationElement($e){V(this,qe).delete($e.annotationElementId),$e.deleted=!1}setActiveEditor($e){V(this,J)!==$e&&(at(this,J,$e),$e&&Ue(this,We,Pr).call(this,$e.propertiesToUpdate))}toggleSelected($e){if(V(this,ke).has($e)){V(this,ke).delete($e),$e.unselect(),Ue(this,We,Qn).call(this,{hasSelectedEditor:this.hasSelection});return}V(this,ke).add($e),$e.select(),Ue(this,We,Pr).call(this,$e.propertiesToUpdate),Ue(this,We,Qn).call(this,{hasSelectedEditor:!0})}setSelected($e){for(const ft of V(this,ke))ft!==$e&&ft.unselect();V(this,ke).clear(),V(this,ke).add($e),$e.select(),Ue(this,We,Pr).call(this,$e.propertiesToUpdate),Ue(this,We,Qn).call(this,{hasSelectedEditor:!0})}isSelected($e){return V(this,ke).has($e)}unselect($e){$e.unselect(),V(this,ke).delete($e),Ue(this,We,Qn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return V(this,ke).size!==0}undo(){V(this,Ne).undo(),Ue(this,We,Qn).call(this,{hasSomethingToUndo:V(this,Ne).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Ue(this,We,kr).call(this)})}redo(){V(this,Ne).redo(),Ue(this,We,Qn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:V(this,Ne).hasSomethingToRedo(),isEmpty:Ue(this,We,kr).call(this)})}addCommands($e){V(this,Ne).add($e),Ue(this,We,Qn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Ue(this,We,kr).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const $e=[...V(this,ke)],ft=()=>{for(const Dt of $e)Dt.remove()},Pt=()=>{for(const Dt of $e)Ue(this,We,Ci).call(this,Dt)};this.addCommands({cmd:ft,undo:Pt,mustExec:!0})}commitOrRemove(){var $e;($e=V(this,J))==null||$e.commitOrRemove()}hasSomethingToControl(){return V(this,J)||this.hasSelection}selectAll(){for(const $e of V(this,ke))$e.commit();Ue(this,We,Pi).call(this,V(this,ve).values())}unselectAll(){if(V(this,J)){V(this,J).commitOrRemove();return}if(this.hasSelection){for(const $e of V(this,ke))$e.unselect();V(this,ke).clear(),Ue(this,We,Qn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors($e,ft,Pt=!1){if(Pt||this.commitOrRemove(),!this.hasSelection)return;V(this,Ke)[0]+=$e,V(this,Ke)[1]+=ft;const[Dt,Bt]=V(this,Ke),Tt=[...V(this,ke)],xe=1e3;V(this,nt)&&clearTimeout(V(this,nt)),at(this,nt,setTimeout(()=>{at(this,nt,null),V(this,Ke)[0]=V(this,Ke)[1]=0,this.addCommands({cmd:()=>{for(const we of Tt)V(this,ve).has(we.id)&&we.translateInPage(Dt,Bt)},undo:()=>{for(const we of Tt)V(this,ve).has(we.id)&&we.translateInPage(-Dt,-Bt)},mustExec:!1})},xe));for(const we of Tt)we.translateInPage($e,ft)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),at(this,Se,new Map);for(const $e of V(this,ke))V(this,Se).set($e,{savedX:$e.x,savedY:$e.y,savedPageIndex:$e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!V(this,Se))return!1;this.disableUserSelect(!1);const $e=V(this,Se);at(this,Se,null);let ft=!1;for(const[{x:Dt,y:Bt,pageIndex:Tt},xe]of $e)xe.newX=Dt,xe.newY=Bt,xe.newPageIndex=Tt,ft||(ft=Dt!==xe.savedX||Bt!==xe.savedY||Tt!==xe.savedPageIndex);if(!ft)return!1;const Pt=(Dt,Bt,Tt,xe)=>{if(V(this,ve).has(Dt.id)){const we=V(this,Ce).get(xe);we?Dt._setParentAndPosition(we,Bt,Tt):(Dt.pageIndex=xe,Dt.x=Bt,Dt.y=Tt)}};return this.addCommands({cmd:()=>{for(const[Dt,{newX:Bt,newY:Tt,newPageIndex:xe}]of $e)Pt(Dt,Bt,Tt,xe)},undo:()=>{for(const[Dt,{savedX:Bt,savedY:Tt,savedPageIndex:xe}]of $e)Pt(Dt,Bt,Tt,xe)},mustExec:!0}),!0}dragSelectedEditors($e,ft){if(V(this,Se))for(const Pt of V(this,Se).keys())Pt.drag($e,ft)}rebuild($e){if($e.parent===null){const ft=this.getLayer($e.pageIndex);ft?(ft.changeParent($e),ft.addOrRebuild($e)):(this.addEditor($e),this.addToAnnotationStorage($e),$e.rebuild())}else $e.parent.addOrRebuild($e)}isActive($e){return V(this,J)===$e}getActive(){return V(this,J)}getMode(){return V(this,Ae)}get imageManager(){return(0,O.shadow)(this,"imageManager",new ue)}};J=new WeakMap,ve=new WeakMap,Ce=new WeakMap,De=new WeakMap,Me=new WeakMap,Ne=new WeakMap,Ie=new WeakMap,qe=new WeakMap,Se=new WeakMap,Te=new WeakMap,He=new WeakMap,_e=new WeakMap,G=new WeakMap,X=new WeakMap,ge=new WeakMap,Pe=new WeakMap,Ae=new WeakMap,ke=new WeakMap,Oe=new WeakMap,Qe=new WeakMap,ot=new WeakMap,st=new WeakMap,ut=new WeakMap,dt=new WeakMap,mt=new WeakMap,Ge=new WeakMap,Xe=new WeakMap,me=new WeakMap,ye=new WeakMap,je=new WeakMap,Ke=new WeakMap,nt=new WeakMap,pt=new WeakMap,ht=new WeakMap,We=new WeakSet,_a=function(){window.addEventListener("focus",V(this,ot)),window.addEventListener("blur",V(this,Qe))},yi=function(){window.removeEventListener("focus",V(this,ot)),window.removeEventListener("blur",V(this,Qe))},Si=function(){window.addEventListener("keydown",V(this,mt),{capture:!0})},Vr=function(){window.removeEventListener("keydown",V(this,mt),{capture:!0})},wi=function(){document.addEventListener("copy",V(this,st)),document.addEventListener("cut",V(this,ut)),document.addEventListener("paste",V(this,dt))},Ai=function(){document.removeEventListener("copy",V(this,st)),document.removeEventListener("cut",V(this,ut)),document.removeEventListener("paste",V(this,dt))},Qn=function($e){Object.entries($e).some(([Pt,Dt])=>V(this,je)[Pt]!==Dt)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(V(this,je),$e)})},Pr=function($e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:$e})},Ea=function(){if(!V(this,X)){at(this,X,!0);for(const $e of V(this,Ce).values())$e.enable()}},ya=function(){if(this.unselectAll(),V(this,X)){at(this,X,!1);for(const $e of V(this,Ce).values())$e.disable()}},Ci=function($e){const ft=V(this,Ce).get($e.pageIndex);ft?ft.addOrRebuild($e):this.addEditor($e)},kr=function(){if(V(this,ve).size===0)return!0;if(V(this,ve).size===1)for(const $e of V(this,ve).values())return $e.isEmpty();return!1},Pi=function($e){V(this,ke).clear();for(const ft of $e)ft.isEmpty()||(V(this,ke).add(ft),ft.select());Ue(this,We,Qn).call(this,{hasSelectedEditor:!0})},$n(Lt,"TRANSLATE_SMALL",1),$n(Lt,"TRANSLATE_BIG",10);let ce=Lt;$.AnnotationEditorUIManager=ce},(A,$,H)=>{var Ie,qe,Se,Te,He,_e,G,X,ge,Pe,Ae,ke,_r,Er,ki,Wr,Ur,xr,Mr;Object.defineProperty($,"__esModule",{value:!0}),$.StatTimer=$.RenderingCancelledException=$.PixelsPerInch=$.PageViewport=$.PDFDateString=$.DOMStandardFontDataFactory=$.DOMSVGFactory=$.DOMFilterFactory=$.DOMCanvasFactory=$.DOMCMapReaderFactory=void 0,$.deprecated=re,$.getColorValues=ve,$.getCurrentTransform=Ce,$.getCurrentTransformInverse=De,$.getFilenameFromUrl=K,$.getPdfFilenameFromUrl=ne,$.getRGB=J,$.getXfaPageViewport=Ee,$.isDataScheme=ee,$.isPdfFile=q,$.isValidFetchUrl=de,$.loadScript=se,$.noContextMenu=te,$.setLayerDimensions=Me;var O=H(7),R=H(1);const B="http://www.w3.org/2000/svg",Ne=class Ne{};$n(Ne,"CSS",96),$n(Ne,"PDF",72),$n(Ne,"PDF_TO_CSS_UNITS",Ne.CSS/Ne.PDF);let Y=Ne;$.PixelsPerInch=Y;class he extends O.BaseFilterFactory{constructor({docId:me,ownerDocument:ye=globalThis.document}={}){super();it(this,ke);it(this,Ie);it(this,qe);it(this,Se);it(this,Te);it(this,He);it(this,_e);it(this,G);it(this,X);it(this,ge);it(this,Pe);it(this,Ae,0);at(this,Se,me),at(this,Te,ye)}addFilter(me){if(!me)return"none";let ye=V(this,ke,_r).get(me);if(ye)return ye;let je,Ke,nt,pt;if(me.length===1){const St=me[0],Yt=new Array(256);for(let Ut=0;Ut<256;Ut++)Yt[Ut]=St[Ut]/255;pt=je=Ke=nt=Yt.join(",")}else{const[St,Yt,Ut]=me,dn=new Array(256),Rt=new Array(256),zt=new Array(256);for(let an=0;an<256;an++)dn[an]=St[an]/255,Rt[an]=Yt[an]/255,zt[an]=Ut[an]/255;je=dn.join(","),Ke=Rt.join(","),nt=zt.join(","),pt=`${je}${Ke}${nt}`}if(ye=V(this,ke,_r).get(pt),ye)return V(this,ke,_r).set(me,ye),ye;const ht=`g_${V(this,Se)}_transfer_map_${Cr(this,Ae)._++}`,We=`url(#${ht})`;V(this,ke,_r).set(me,We),V(this,ke,_r).set(pt,We);const wt=Ue(this,ke,Wr).call(this,ht);return Ue(this,ke,xr).call(this,je,Ke,nt,wt),We}addHCMFilter(me,ye){var Yt;const je=`${me}-${ye}`;if(V(this,_e)===je)return V(this,G);if(at(this,_e,je),at(this,G,"none"),(Yt=V(this,He))==null||Yt.remove(),!me||!ye)return V(this,G);const Ke=Ue(this,ke,Mr).call(this,me);me=R.Util.makeHexColor(...Ke);const nt=Ue(this,ke,Mr).call(this,ye);if(ye=R.Util.makeHexColor(...nt),V(this,ke,Er).style.color="",me==="#000000"&&ye==="#ffffff"||me===ye)return V(this,G);const pt=new Array(256);for(let Ut=0;Ut<=255;Ut++){const dn=Ut/255;pt[Ut]=dn<=.03928?dn/12.92:((dn+.055)/1.055)**2.4}const ht=pt.join(","),We=`g_${V(this,Se)}_hcm_filter`,wt=at(this,X,Ue(this,ke,Wr).call(this,We));Ue(this,ke,xr).call(this,ht,ht,ht,wt),Ue(this,ke,ki).call(this,wt);const St=(Ut,dn)=>{const Rt=Ke[Ut]/255,zt=nt[Ut]/255,an=new Array(dn+1);for(let _n=0;_n<=dn;_n++)an[_n]=Rt+_n/dn*(zt-Rt);return an.join(",")};return Ue(this,ke,xr).call(this,St(0,5),St(1,5),St(2,5),wt),at(this,G,`url(#${We})`),V(this,G)}addHighlightHCMFilter(me,ye,je,Ke){var zt;const nt=`${me}-${ye}-${je}-${Ke}`;if(V(this,ge)===nt)return V(this,Pe);if(at(this,ge,nt),at(this,Pe,"none"),(zt=V(this,X))==null||zt.remove(),!me||!ye)return V(this,Pe);const[pt,ht]=[me,ye].map(Ue(this,ke,Mr).bind(this));let We=Math.round(.2126*pt[0]+.7152*pt[1]+.0722*pt[2]),wt=Math.round(.2126*ht[0]+.7152*ht[1]+.0722*ht[2]),[St,Yt]=[je,Ke].map(Ue(this,ke,Mr).bind(this));wt<We&&([We,wt,St,Yt]=[wt,We,Yt,St]),V(this,ke,Er).style.color="";const Ut=(an,_n,gt)=>{const Ye=new Array(256),Je=(wt-We)/gt,$t=an/255,Lt=(_n-an)/(255*gt);let Gt=0;for(let $e=0;$e<=gt;$e++){const ft=Math.round(We+$e*Je),Pt=$t+$e*Lt;for(let Dt=Gt;Dt<=ft;Dt++)Ye[Dt]=Pt;Gt=ft+1}for(let $e=Gt;$e<256;$e++)Ye[$e]=Ye[Gt-1];return Ye.join(",")},dn=`g_${V(this,Se)}_hcm_highlight_filter`,Rt=at(this,X,Ue(this,ke,Wr).call(this,dn));return Ue(this,ke,ki).call(this,Rt),Ue(this,ke,xr).call(this,Ut(St[0],Yt[0],5),Ut(St[1],Yt[1],5),Ut(St[2],Yt[2],5),Rt),at(this,Pe,`url(#${dn})`),V(this,Pe)}destroy(me=!1){me&&(V(this,G)||V(this,Pe))||(V(this,qe)&&(V(this,qe).parentNode.parentNode.remove(),at(this,qe,null)),V(this,Ie)&&(V(this,Ie).clear(),at(this,Ie,null)),at(this,Ae,0))}}Ie=new WeakMap,qe=new WeakMap,Se=new WeakMap,Te=new WeakMap,He=new WeakMap,_e=new WeakMap,G=new WeakMap,X=new WeakMap,ge=new WeakMap,Pe=new WeakMap,Ae=new WeakMap,ke=new WeakSet,_r=function(){return V(this,Ie)||at(this,Ie,new Map)},Er=function(){if(!V(this,qe)){const me=V(this,Te).createElement("div"),{style:ye}=me;ye.visibility="hidden",ye.contain="strict",ye.width=ye.height=0,ye.position="absolute",ye.top=ye.left=0,ye.zIndex=-1;const je=V(this,Te).createElementNS(B,"svg");je.setAttribute("width",0),je.setAttribute("height",0),at(this,qe,V(this,Te).createElementNS(B,"defs")),me.append(je),je.append(V(this,qe)),V(this,Te).body.append(me)}return V(this,qe)},ki=function(me){const ye=V(this,Te).createElementNS(B,"feColorMatrix");ye.setAttribute("type","matrix"),ye.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),me.append(ye)},Wr=function(me){const ye=V(this,Te).createElementNS(B,"filter");return ye.setAttribute("color-interpolation-filters","sRGB"),ye.setAttribute("id",me),V(this,ke,Er).append(ye),ye},Ur=function(me,ye,je){const Ke=V(this,Te).createElementNS(B,ye);Ke.setAttribute("type","discrete"),Ke.setAttribute("tableValues",je),me.append(Ke)},xr=function(me,ye,je,Ke){const nt=V(this,Te).createElementNS(B,"feComponentTransfer");Ke.append(nt),Ue(this,ke,Ur).call(this,nt,"feFuncR",me),Ue(this,ke,Ur).call(this,nt,"feFuncG",ye),Ue(this,ke,Ur).call(this,nt,"feFuncB",je)},Mr=function(me){return V(this,ke,Er).style.color=me,J(getComputedStyle(V(this,ke,Er)).getPropertyValue("color"))},$.DOMFilterFactory=he;class ue extends O.BaseCanvasFactory{constructor({ownerDocument:Xe=globalThis.document}={}){super(),this._document=Xe}_createCanvas(Xe,me){const ye=this._document.createElement("canvas");return ye.width=Xe,ye.height=me,ye}}$.DOMCanvasFactory=ue;async function le(Ge,Xe=!1){if(de(Ge,document.baseURI)){const me=await fetch(Ge);if(!me.ok)throw new Error(me.statusText);return Xe?new Uint8Array(await me.arrayBuffer()):(0,R.stringToBytes)(await me.text())}return new Promise((me,ye)=>{const je=new XMLHttpRequest;je.open("GET",Ge,!0),Xe&&(je.responseType="arraybuffer"),je.onreadystatechange=()=>{if(je.readyState===XMLHttpRequest.DONE){if(je.status===200||je.status===0){let Ke;if(Xe&&je.response?Ke=new Uint8Array(je.response):!Xe&&je.responseText&&(Ke=(0,R.stringToBytes)(je.responseText)),Ke){me(Ke);return}}ye(new Error(je.statusText))}},je.send(null)})}class W extends O.BaseCMapReaderFactory{_fetchData(Xe,me){return le(Xe,this.isCompressed).then(ye=>({cMapData:ye,compressionType:me}))}}$.DOMCMapReaderFactory=W;class be extends O.BaseStandardFontDataFactory{_fetchData(Xe){return le(Xe,!0)}}$.DOMStandardFontDataFactory=be;class ce extends O.BaseSVGFactory{_createSVG(Xe){return document.createElementNS(B,Xe)}}$.DOMSVGFactory=ce;class Q{constructor({viewBox:Xe,scale:me,rotation:ye,offsetX:je=0,offsetY:Ke=0,dontFlip:nt=!1}){this.viewBox=Xe,this.scale=me,this.rotation=ye,this.offsetX=je,this.offsetY=Ke;const pt=(Xe[2]+Xe[0])/2,ht=(Xe[3]+Xe[1])/2;let We,wt,St,Yt;switch(ye%=360,ye<0&&(ye+=360),ye){case 180:We=-1,wt=0,St=0,Yt=1;break;case 90:We=0,wt=1,St=1,Yt=0;break;case 270:We=0,wt=-1,St=-1,Yt=0;break;case 0:We=1,wt=0,St=0,Yt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}nt&&(St=-St,Yt=-Yt);let Ut,dn,Rt,zt;We===0?(Ut=Math.abs(ht-Xe[1])*me+je,dn=Math.abs(pt-Xe[0])*me+Ke,Rt=(Xe[3]-Xe[1])*me,zt=(Xe[2]-Xe[0])*me):(Ut=Math.abs(pt-Xe[0])*me+je,dn=Math.abs(ht-Xe[1])*me+Ke,Rt=(Xe[2]-Xe[0])*me,zt=(Xe[3]-Xe[1])*me),this.transform=[We*me,wt*me,St*me,Yt*me,Ut-We*me*pt-St*me*ht,dn-wt*me*pt-Yt*me*ht],this.width=Rt,this.height=zt}get rawDims(){const{viewBox:Xe}=this;return(0,R.shadow)(this,"rawDims",{pageWidth:Xe[2]-Xe[0],pageHeight:Xe[3]-Xe[1],pageX:Xe[0],pageY:Xe[1]})}clone({scale:Xe=this.scale,rotation:me=this.rotation,offsetX:ye=this.offsetX,offsetY:je=this.offsetY,dontFlip:Ke=!1}={}){return new Q({viewBox:this.viewBox.slice(),scale:Xe,rotation:me,offsetX:ye,offsetY:je,dontFlip:Ke})}convertToViewportPoint(Xe,me){return R.Util.applyTransform([Xe,me],this.transform)}convertToViewportRectangle(Xe){const me=R.Util.applyTransform([Xe[0],Xe[1]],this.transform),ye=R.Util.applyTransform([Xe[2],Xe[3]],this.transform);return[me[0],me[1],ye[0],ye[1]]}convertToPdfPoint(Xe,me){return R.Util.applyInverseTransform([Xe,me],this.transform)}}$.PageViewport=Q;class ie extends R.BaseException{constructor(Xe,me=0){super(Xe,"RenderingCancelledException"),this.extraDelay=me}}$.RenderingCancelledException=ie;function ee(Ge){const Xe=Ge.length;let me=0;for(;me<Xe&&Ge[me].trim()==="";)me++;return Ge.substring(me,me+5).toLowerCase()==="data:"}function q(Ge){return typeof Ge=="string"&&/\.pdf$/i.test(Ge)}function K(Ge,Xe=!1){return Xe||([Ge]=Ge.split(/[#?]/,1)),Ge.substring(Ge.lastIndexOf("/")+1)}function ne(Ge,Xe="document.pdf"){if(typeof Ge!="string")return Xe;if(ee(Ge))return(0,R.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Xe;const me=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,ye=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,je=me.exec(Ge);let Ke=ye.exec(je[1])||ye.exec(je[2])||ye.exec(je[3]);if(Ke&&(Ke=Ke[0],Ke.includes("%")))try{Ke=ye.exec(decodeURIComponent(Ke))[0]}catch{}return Ke||Xe}class fe{constructor(){$n(this,"started",Object.create(null));$n(this,"times",[])}time(Xe){Xe in this.started&&(0,R.warn)(`Timer is already running for ${Xe}`),this.started[Xe]=Date.now()}timeEnd(Xe){Xe in this.started||(0,R.warn)(`Timer has not been started for ${Xe}`),this.times.push({name:Xe,start:this.started[Xe],end:Date.now()}),delete this.started[Xe]}toString(){const Xe=[];let me=0;for(const{name:ye}of this.times)me=Math.max(ye.length,me);for(const{name:ye,start:je,end:Ke}of this.times)Xe.push(`${ye.padEnd(me)} ${Ke-je}ms
`);return Xe.join("")}}$.StatTimer=fe;function de(Ge,Xe){try{const{protocol:me}=Xe?new URL(Ge,Xe):new URL(Ge);return me==="http:"||me==="https:"}catch{return!1}}function te(Ge){Ge.preventDefault()}function se(Ge,Xe=!1){return new Promise((me,ye)=>{const je=document.createElement("script");je.src=Ge,je.onload=function(Ke){Xe&&je.remove(),me(Ke)},je.onerror=function(){ye(new Error(`Cannot load script at: ${je.src}`))},(document.head||document.documentElement).append(je)})}function re(Ge){console.log("Deprecated API usage: "+Ge)}let ae;class oe{static toDateObject(Xe){if(!Xe||typeof Xe!="string")return null;ae||(ae=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const me=ae.exec(Xe);if(!me)return null;const ye=parseInt(me[1],10);let je=parseInt(me[2],10);je=je>=1&&je<=12?je-1:0;let Ke=parseInt(me[3],10);Ke=Ke>=1&&Ke<=31?Ke:1;let nt=parseInt(me[4],10);nt=nt>=0&&nt<=23?nt:0;let pt=parseInt(me[5],10);pt=pt>=0&&pt<=59?pt:0;let ht=parseInt(me[6],10);ht=ht>=0&&ht<=59?ht:0;const We=me[7]||"Z";let wt=parseInt(me[8],10);wt=wt>=0&&wt<=23?wt:0;let St=parseInt(me[9],10)||0;return St=St>=0&&St<=59?St:0,We==="-"?(nt+=wt,pt+=St):We==="+"&&(nt-=wt,pt-=St),new Date(Date.UTC(ye,je,Ke,nt,pt,ht))}}$.PDFDateString=oe;function Ee(Ge,{scale:Xe=1,rotation:me=0}){const{width:ye,height:je}=Ge.attributes.style,Ke=[0,0,parseInt(ye),parseInt(je)];return new Q({viewBox:Ke,scale:Xe,rotation:me})}function J(Ge){if(Ge.startsWith("#")){const Xe=parseInt(Ge.slice(1),16);return[(Xe&16711680)>>16,(Xe&65280)>>8,Xe&255]}return Ge.startsWith("rgb(")?Ge.slice(4,-1).split(",").map(Xe=>parseInt(Xe)):Ge.startsWith("rgba(")?Ge.slice(5,-1).split(",").map(Xe=>parseInt(Xe)).slice(0,3):((0,R.warn)(`Not a valid color format: "${Ge}"`),[0,0,0])}function ve(Ge){const Xe=document.createElement("span");Xe.style.visibility="hidden",document.body.append(Xe);for(const me of Ge.keys()){Xe.style.color=me;const ye=window.getComputedStyle(Xe).color;Ge.set(me,J(ye))}Xe.remove()}function Ce(Ge){const{a:Xe,b:me,c:ye,d:je,e:Ke,f:nt}=Ge.getTransform();return[Xe,me,ye,je,Ke,nt]}function De(Ge){const{a:Xe,b:me,c:ye,d:je,e:Ke,f:nt}=Ge.getTransform().invertSelf();return[Xe,me,ye,je,Ke,nt]}function Me(Ge,Xe,me=!1,ye=!0){if(Xe instanceof Q){const{pageWidth:je,pageHeight:Ke}=Xe.rawDims,{style:nt}=Ge,pt=R.FeatureTest.isCSSRoundSupported,ht=`var(--scale-factor) * ${je}px`,We=`var(--scale-factor) * ${Ke}px`,wt=pt?`round(${ht}, 1px)`:`calc(${ht})`,St=pt?`round(${We}, 1px)`:`calc(${We})`;!me||Xe.rotation%180===0?(nt.width=wt,nt.height=St):(nt.width=St,nt.height=wt)}ye&&Ge.setAttribute("data-main-rotation",Xe.rotation)}},(A,$,H)=>{Object.defineProperty($,"__esModule",{value:!0}),$.BaseStandardFontDataFactory=$.BaseSVGFactory=$.BaseFilterFactory=$.BaseCanvasFactory=$.BaseCMapReaderFactory=void 0;var O=H(1);class R{constructor(){this.constructor===R&&(0,O.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(W){return"none"}addHCMFilter(W,be){return"none"}addHighlightHCMFilter(W,be,ce,Q){return"none"}destroy(W=!1){}}$.BaseFilterFactory=R;class B{constructor(){this.constructor===B&&(0,O.unreachable)("Cannot initialize BaseCanvasFactory.")}create(W,be){if(W<=0||be<=0)throw new Error("Invalid canvas size");const ce=this._createCanvas(W,be);return{canvas:ce,context:ce.getContext("2d")}}reset(W,be,ce){if(!W.canvas)throw new Error("Canvas is not specified");if(be<=0||ce<=0)throw new Error("Invalid canvas size");W.canvas.width=be,W.canvas.height=ce}destroy(W){if(!W.canvas)throw new Error("Canvas is not specified");W.canvas.width=0,W.canvas.height=0,W.canvas=null,W.context=null}_createCanvas(W,be){(0,O.unreachable)("Abstract method `_createCanvas` called.")}}$.BaseCanvasFactory=B;class Y{constructor({baseUrl:W=null,isCompressed:be=!0}){this.constructor===Y&&(0,O.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=W,this.isCompressed=be}async fetch({name:W}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!W)throw new Error("CMap name must be specified.");const be=this.baseUrl+W+(this.isCompressed?".bcmap":""),ce=this.isCompressed?O.CMapCompressionType.BINARY:O.CMapCompressionType.NONE;return this._fetchData(be,ce).catch(Q=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${be}`)})}_fetchData(W,be){(0,O.unreachable)("Abstract method `_fetchData` called.")}}$.BaseCMapReaderFactory=Y;class he{constructor({baseUrl:W=null}){this.constructor===he&&(0,O.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=W}async fetch({filename:W}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!W)throw new Error("Font filename must be specified.");const be=`${this.baseUrl}${W}`;return this._fetchData(be).catch(ce=>{throw new Error(`Unable to load font data at: ${be}`)})}_fetchData(W){(0,O.unreachable)("Abstract method `_fetchData` called.")}}$.BaseStandardFontDataFactory=he;class ue{constructor(){this.constructor===ue&&(0,O.unreachable)("Cannot initialize BaseSVGFactory.")}create(W,be,ce=!1){if(W<=0||be<=0)throw new Error("Invalid SVG dimensions");const Q=this._createSVG("svg:svg");return Q.setAttribute("version","1.1"),ce||(Q.setAttribute("width",`${W}px`),Q.setAttribute("height",`${be}px`)),Q.setAttribute("preserveAspectRatio","none"),Q.setAttribute("viewBox",`0 0 ${W} ${be}`),Q}createElement(W){if(typeof W!="string")throw new Error("Invalid SVG element type");return this._createSVG(W)}_createSVG(W){(0,O.unreachable)("Abstract method `_createSVG` called.")}}$.BaseSVGFactory=ue},(A,$,H)=>{Object.defineProperty($,"__esModule",{value:!0}),$.MurmurHash3_64=void 0;var O=H(1);const R=3285377520,B=4294901760,Y=65535;class he{constructor(le){this.h1=le?le&4294967295:R,this.h2=le?le&4294967295:R}update(le){let W,be;if(typeof le=="string"){W=new Uint8Array(le.length*2),be=0;for(let re=0,ae=le.length;re<ae;re++){const oe=le.charCodeAt(re);oe<=255?W[be++]=oe:(W[be++]=oe>>>8,W[be++]=oe&255)}}else if((0,O.isArrayBuffer)(le))W=le.slice(),be=W.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const ce=be>>2,Q=be-ce*4,ie=new Uint32Array(W.buffer,0,ce);let ee=0,q=0,K=this.h1,ne=this.h2;const fe=3432918353,de=461845907,te=fe&Y,se=de&Y;for(let re=0;re<ce;re++)re&1?(ee=ie[re],ee=ee*fe&B|ee*te&Y,ee=ee<<15|ee>>>17,ee=ee*de&B|ee*se&Y,K^=ee,K=K<<13|K>>>19,K=K*5+3864292196):(q=ie[re],q=q*fe&B|q*te&Y,q=q<<15|q>>>17,q=q*de&B|q*se&Y,ne^=q,ne=ne<<13|ne>>>19,ne=ne*5+3864292196);switch(ee=0,Q){case 3:ee^=W[ce*4+2]<<16;case 2:ee^=W[ce*4+1]<<8;case 1:ee^=W[ce*4],ee=ee*fe&B|ee*te&Y,ee=ee<<15|ee>>>17,ee=ee*de&B|ee*se&Y,ce&1?K^=ee:ne^=ee}this.h1=K,this.h2=ne}hexdigest(){let le=this.h1,W=this.h2;return le^=W>>>1,le=le*3981806797&B|le*36045&Y,W=W*4283543511&B|((W<<16|le>>>16)*2950163797&B)>>>16,le^=W>>>1,le=le*444984403&B|le*60499&Y,W=W*3301882366&B|((W<<16|le>>>16)*3120437893&B)>>>16,le^=W>>>1,(le>>>0).toString(16).padStart(8,"0")+(W>>>0).toString(16).padStart(8,"0")}}$.MurmurHash3_64=he},(A,$,H)=>{var Y;Object.defineProperty($,"__esModule",{value:!0}),$.FontLoader=$.FontFaceObject=void 0;var O=H(1);class R{constructor({ownerDocument:ue=globalThis.document,styleElement:le=null}){it(this,Y,new Set);this._document=ue,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(ue){this.nativeFontFaces.add(ue),this._document.fonts.add(ue)}removeNativeFontFace(ue){this.nativeFontFaces.delete(ue),this._document.fonts.delete(ue)}insertRule(ue){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const le=this.styleElement.sheet;le.insertRule(ue,le.cssRules.length)}clear(){for(const ue of this.nativeFontFaces)this._document.fonts.delete(ue);this.nativeFontFaces.clear(),V(this,Y).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(ue){if(!(!ue||V(this,Y).has(ue.loadedName))){if((0,O.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:le,src:W,style:be}=ue,ce=new FontFace(le,W,be);this.addNativeFontFace(ce);try{await ce.load(),V(this,Y).add(le)}catch{(0,O.warn)(`Cannot load system font: ${ue.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(ce)}return}(0,O.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(ue){if(ue.attached||ue.missingFile&&!ue.systemFontInfo)return;if(ue.attached=!0,ue.systemFontInfo){await this.loadSystemFont(ue.systemFontInfo);return}if(this.isFontLoadingAPISupported){const W=ue.createNativeFontFace();if(W){this.addNativeFontFace(W);try{await W.loaded}catch(be){throw(0,O.warn)(`Failed to load font '${W.family}': '${be}'.`),ue.disableFontFace=!0,be}}return}const le=ue.createFontFaceRule();if(le){if(this.insertRule(le),this.isSyncFontLoadingSupported)return;await new Promise(W=>{const be=this._queueLoadingCallback(W);this._prepareFontLoadEvent(ue,be)})}}get isFontLoadingAPISupported(){var le;const ue=!!((le=this._document)!=null&&le.fonts);return(0,O.shadow)(this,"isFontLoadingAPISupported",ue)}get isSyncFontLoadingSupported(){let ue=!1;return(O.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(ue=!0),(0,O.shadow)(this,"isSyncFontLoadingSupported",ue)}_queueLoadingCallback(ue){function le(){for((0,O.assert)(!be.done,"completeRequest() cannot be called twice."),be.done=!0;W.length>0&&W[0].done;){const ce=W.shift();setTimeout(ce.callback,0)}}const{loadingRequests:W}=this,be={done:!1,complete:le,callback:ue};return W.push(be),be}get _loadTestFont(){const ue=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,O.shadow)(this,"_loadTestFont",ue)}_prepareFontLoadEvent(ue,le){function W(J,ve){return J.charCodeAt(ve)<<24|J.charCodeAt(ve+1)<<16|J.charCodeAt(ve+2)<<8|J.charCodeAt(ve+3)&255}function be(J,ve,Ce,De){const Me=J.substring(0,ve),Ne=J.substring(ve+Ce);return Me+De+Ne}let ce,Q;const ie=this._document.createElement("canvas");ie.width=1,ie.height=1;const ee=ie.getContext("2d");let q=0;function K(J,ve){if(++q>30){(0,O.warn)("Load test font never loaded."),ve();return}if(ee.font="30px "+J,ee.fillText(".",0,20),ee.getImageData(0,0,1,1).data[3]>0){ve();return}setTimeout(K.bind(null,J,ve))}const ne=`lt${Date.now()}${this.loadTestFontId++}`;let fe=this._loadTestFont;fe=be(fe,976,ne.length,ne);const te=16,se=1482184792;let re=W(fe,te);for(ce=0,Q=ne.length-3;ce<Q;ce+=4)re=re-se+W(ne,ce)|0;ce<ne.length&&(re=re-se+W(ne+"XXX",ce)|0),fe=be(fe,te,4,(0,O.string32)(re));const ae=`url(data:font/opentype;base64,${btoa(fe)});`,oe=`@font-face {font-family:"${ne}";src:${ae}}`;this.insertRule(oe);const Ee=this._document.createElement("div");Ee.style.visibility="hidden",Ee.style.width=Ee.style.height="10px",Ee.style.position="absolute",Ee.style.top=Ee.style.left="0px";for(const J of[ue.loadedName,ne]){const ve=this._document.createElement("span");ve.textContent="Hi",ve.style.fontFamily=J,Ee.append(ve)}this._document.body.append(Ee),K(ne,()=>{Ee.remove(),le.complete()})}}Y=new WeakMap,$.FontLoader=R;class B{constructor(ue,{isEvalSupported:le=!0,disableFontFace:W=!1,ignoreErrors:be=!1,inspectFont:ce=null}){this.compiledGlyphs=Object.create(null);for(const Q in ue)this[Q]=ue[Q];this.isEvalSupported=le!==!1,this.disableFontFace=W===!0,this.ignoreErrors=be===!0,this._inspectFont=ce}createNativeFontFace(){var le;if(!this.data||this.disableFontFace)return null;let ue;if(!this.cssFontInfo)ue=new FontFace(this.loadedName,this.data,{});else{const W={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(W.style=`oblique ${this.cssFontInfo.italicAngle}deg`),ue=new FontFace(this.cssFontInfo.fontFamily,this.data,W)}return(le=this._inspectFont)==null||le.call(this,this),ue}createFontFaceRule(){var be;if(!this.data||this.disableFontFace)return null;const ue=(0,O.bytesToString)(this.data),le=`url(data:${this.mimetype};base64,${btoa(ue)});`;let W;if(!this.cssFontInfo)W=`@font-face {font-family:"${this.loadedName}";src:${le}}`;else{let ce=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(ce+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),W=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${ce}src:${le}}`}return(be=this._inspectFont)==null||be.call(this,this,le),W}getPathGenerator(ue,le){if(this.compiledGlyphs[le]!==void 0)return this.compiledGlyphs[le];let W;try{W=ue.get(this.loadedName+"_path_"+le)}catch(be){if(!this.ignoreErrors)throw be;return(0,O.warn)(`getPathGenerator - ignoring character: "${be}".`),this.compiledGlyphs[le]=function(ce,Q){}}if(this.isEvalSupported&&O.FeatureTest.isEvalSupported){const be=[];for(const ce of W){const Q=ce.args!==void 0?ce.args.join(","):"";be.push("c.",ce.cmd,"(",Q,`);
`)}return this.compiledGlyphs[le]=new Function("c","size",be.join(""))}return this.compiledGlyphs[le]=function(be,ce){for(const Q of W)Q.cmd==="scale"&&(Q.args=[ce,-ce]),be[Q.cmd].apply(be,Q.args)}}}$.FontFaceObject=B},(A,$,H)=>{Object.defineProperty($,"__esModule",{value:!0}),$.NodeStandardFontDataFactory=$.NodeFilterFactory=$.NodeCanvasFactory=$.NodeCMapReaderFactory=void 0;var O=H(7);H(1);const R=function(le){return new Promise((W,be)=>{require$$5.readFile(le,(Q,ie)=>{if(Q||!ie){be(new Error(Q));return}W(new Uint8Array(ie))})})};class B extends O.BaseFilterFactory{}$.NodeFilterFactory=B;class Y extends O.BaseCanvasFactory{_createCanvas(W,be){return require$$5.createCanvas(W,be)}}$.NodeCanvasFactory=Y;class he extends O.BaseCMapReaderFactory{_fetchData(W,be){return R(W).then(ce=>({cMapData:ce,compressionType:be}))}}$.NodeCMapReaderFactory=he;class ue extends O.BaseStandardFontDataFactory{_fetchData(W){return R(W)}}$.NodeStandardFontDataFactory=ue},(A,$,H)=>{var qe,xi,Mi;Object.defineProperty($,"__esModule",{value:!0}),$.CanvasGraphics=void 0;var O=H(1),R=H(6),B=H(12),Y=H(13);const he=16,ue=100,le=4096,W=15,be=10,ce=1e3,Q=16;function ie(_e,G){if(_e._removeMirroring)throw new Error("Context is already forwarding operations.");_e.__originalSave=_e.save,_e.__originalRestore=_e.restore,_e.__originalRotate=_e.rotate,_e.__originalScale=_e.scale,_e.__originalTranslate=_e.translate,_e.__originalTransform=_e.transform,_e.__originalSetTransform=_e.setTransform,_e.__originalResetTransform=_e.resetTransform,_e.__originalClip=_e.clip,_e.__originalMoveTo=_e.moveTo,_e.__originalLineTo=_e.lineTo,_e.__originalBezierCurveTo=_e.bezierCurveTo,_e.__originalRect=_e.rect,_e.__originalClosePath=_e.closePath,_e.__originalBeginPath=_e.beginPath,_e._removeMirroring=()=>{_e.save=_e.__originalSave,_e.restore=_e.__originalRestore,_e.rotate=_e.__originalRotate,_e.scale=_e.__originalScale,_e.translate=_e.__originalTranslate,_e.transform=_e.__originalTransform,_e.setTransform=_e.__originalSetTransform,_e.resetTransform=_e.__originalResetTransform,_e.clip=_e.__originalClip,_e.moveTo=_e.__originalMoveTo,_e.lineTo=_e.__originalLineTo,_e.bezierCurveTo=_e.__originalBezierCurveTo,_e.rect=_e.__originalRect,_e.closePath=_e.__originalClosePath,_e.beginPath=_e.__originalBeginPath,delete _e._removeMirroring},_e.save=function(){G.save(),this.__originalSave()},_e.restore=function(){G.restore(),this.__originalRestore()},_e.translate=function(ge,Pe){G.translate(ge,Pe),this.__originalTranslate(ge,Pe)},_e.scale=function(ge,Pe){G.scale(ge,Pe),this.__originalScale(ge,Pe)},_e.transform=function(ge,Pe,Ae,ke,Oe,Qe){G.transform(ge,Pe,Ae,ke,Oe,Qe),this.__originalTransform(ge,Pe,Ae,ke,Oe,Qe)},_e.setTransform=function(ge,Pe,Ae,ke,Oe,Qe){G.setTransform(ge,Pe,Ae,ke,Oe,Qe),this.__originalSetTransform(ge,Pe,Ae,ke,Oe,Qe)},_e.resetTransform=function(){G.resetTransform(),this.__originalResetTransform()},_e.rotate=function(ge){G.rotate(ge),this.__originalRotate(ge)},_e.clip=function(ge){G.clip(ge),this.__originalClip(ge)},_e.moveTo=function(X,ge){G.moveTo(X,ge),this.__originalMoveTo(X,ge)},_e.lineTo=function(X,ge){G.lineTo(X,ge),this.__originalLineTo(X,ge)},_e.bezierCurveTo=function(X,ge,Pe,Ae,ke,Oe){G.bezierCurveTo(X,ge,Pe,Ae,ke,Oe),this.__originalBezierCurveTo(X,ge,Pe,Ae,ke,Oe)},_e.rect=function(X,ge,Pe,Ae){G.rect(X,ge,Pe,Ae),this.__originalRect(X,ge,Pe,Ae)},_e.closePath=function(){G.closePath(),this.__originalClosePath()},_e.beginPath=function(){G.beginPath(),this.__originalBeginPath()}}class ee{constructor(G){this.canvasFactory=G,this.cache=Object.create(null)}getCanvas(G,X,ge){let Pe;return this.cache[G]!==void 0?(Pe=this.cache[G],this.canvasFactory.reset(Pe,X,ge)):(Pe=this.canvasFactory.create(X,ge),this.cache[G]=Pe),Pe}delete(G){delete this.cache[G]}clear(){for(const G in this.cache){const X=this.cache[G];this.canvasFactory.destroy(X),delete this.cache[G]}}}function q(_e,G,X,ge,Pe,Ae,ke,Oe,Qe,ot){const[st,ut,dt,mt,Ge,Xe]=(0,R.getCurrentTransform)(_e);if(ut===0&&dt===0){const je=ke*st+Ge,Ke=Math.round(je),nt=Oe*mt+Xe,pt=Math.round(nt),ht=(ke+Qe)*st+Ge,We=Math.abs(Math.round(ht)-Ke)||1,wt=(Oe+ot)*mt+Xe,St=Math.abs(Math.round(wt)-pt)||1;return _e.setTransform(Math.sign(st),0,0,Math.sign(mt),Ke,pt),_e.drawImage(G,X,ge,Pe,Ae,0,0,We,St),_e.setTransform(st,ut,dt,mt,Ge,Xe),[We,St]}if(st===0&&mt===0){const je=Oe*dt+Ge,Ke=Math.round(je),nt=ke*ut+Xe,pt=Math.round(nt),ht=(Oe+ot)*dt+Ge,We=Math.abs(Math.round(ht)-Ke)||1,wt=(ke+Qe)*ut+Xe,St=Math.abs(Math.round(wt)-pt)||1;return _e.setTransform(0,Math.sign(ut),Math.sign(dt),0,Ke,pt),_e.drawImage(G,X,ge,Pe,Ae,0,0,St,We),_e.setTransform(st,ut,dt,mt,Ge,Xe),[St,We]}_e.drawImage(G,X,ge,Pe,Ae,ke,Oe,Qe,ot);const me=Math.hypot(st,ut),ye=Math.hypot(dt,mt);return[me*Qe,ye*ot]}function K(_e){const{width:G,height:X}=_e;if(G>ce||X>ce)return null;const ge=1e3,Pe=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),Ae=G+1;let ke=new Uint8Array(Ae*(X+1)),Oe,Qe,ot;const st=G+7&-8;let ut=new Uint8Array(st*X),dt=0;for(const ye of _e.data){let je=128;for(;je>0;)ut[dt++]=ye&je?0:255,je>>=1}let mt=0;for(dt=0,ut[dt]!==0&&(ke[0]=1,++mt),Qe=1;Qe<G;Qe++)ut[dt]!==ut[dt+1]&&(ke[Qe]=ut[dt]?2:1,++mt),dt++;for(ut[dt]!==0&&(ke[Qe]=2,++mt),Oe=1;Oe<X;Oe++){dt=Oe*st,ot=Oe*Ae,ut[dt-st]!==ut[dt]&&(ke[ot]=ut[dt]?1:8,++mt);let ye=(ut[dt]?4:0)+(ut[dt-st]?8:0);for(Qe=1;Qe<G;Qe++)ye=(ye>>2)+(ut[dt+1]?4:0)+(ut[dt-st+1]?8:0),Pe[ye]&&(ke[ot+Qe]=Pe[ye],++mt),dt++;if(ut[dt-st]!==ut[dt]&&(ke[ot+Qe]=ut[dt]?2:4,++mt),mt>ge)return null}for(dt=st*(X-1),ot=Oe*Ae,ut[dt]!==0&&(ke[ot]=8,++mt),Qe=1;Qe<G;Qe++)ut[dt]!==ut[dt+1]&&(ke[ot+Qe]=ut[dt]?4:8,++mt),dt++;if(ut[dt]!==0&&(ke[ot+Qe]=4,++mt),mt>ge)return null;const Ge=new Int32Array([0,Ae,-1,0,-Ae,0,0,0,1]),Xe=new Path2D;for(Oe=0;mt&&Oe<=X;Oe++){let ye=Oe*Ae;const je=ye+G;for(;ye<je&&!ke[ye];)ye++;if(ye===je)continue;Xe.moveTo(ye%Ae,Oe);const Ke=ye;let nt=ke[ye];do{const pt=Ge[nt];do ye+=pt;while(!ke[ye]);const ht=ke[ye];ht!==5&&ht!==10?(nt=ht,ke[ye]=0):(nt=ht&51*nt>>4,ke[ye]&=nt>>2|nt<<2),Xe.lineTo(ye%Ae,ye/Ae|0),ke[ye]||--mt}while(Ke!==ye);--Oe}return ut=null,ke=null,function(ye){ye.save(),ye.scale(1/G,-1/X),ye.translate(0,-X),ye.fill(Xe),ye.beginPath(),ye.restore()}}class ne{constructor(G,X){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=O.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=O.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=O.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,G,X])}clone(){const G=Object.create(this);return G.clipBox=this.clipBox.slice(),G}setCurrentPoint(G,X){this.x=G,this.y=X}updatePathMinMax(G,X,ge){[X,ge]=O.Util.applyTransform([X,ge],G),this.minX=Math.min(this.minX,X),this.minY=Math.min(this.minY,ge),this.maxX=Math.max(this.maxX,X),this.maxY=Math.max(this.maxY,ge)}updateRectMinMax(G,X){const ge=O.Util.applyTransform(X,G),Pe=O.Util.applyTransform(X.slice(2),G);this.minX=Math.min(this.minX,ge[0],Pe[0]),this.minY=Math.min(this.minY,ge[1],Pe[1]),this.maxX=Math.max(this.maxX,ge[0],Pe[0]),this.maxY=Math.max(this.maxY,ge[1],Pe[1])}updateScalingPathMinMax(G,X){O.Util.scaleMinMax(G,X),this.minX=Math.min(this.minX,X[0]),this.maxX=Math.max(this.maxX,X[1]),this.minY=Math.min(this.minY,X[2]),this.maxY=Math.max(this.maxY,X[3])}updateCurvePathMinMax(G,X,ge,Pe,Ae,ke,Oe,Qe,ot,st){const ut=O.Util.bezierBoundingBox(X,ge,Pe,Ae,ke,Oe,Qe,ot);if(st){st[0]=Math.min(st[0],ut[0],ut[2]),st[1]=Math.max(st[1],ut[0],ut[2]),st[2]=Math.min(st[2],ut[1],ut[3]),st[3]=Math.max(st[3],ut[1],ut[3]);return}this.updateRectMinMax(G,ut)}getPathBoundingBox(G=B.PathType.FILL,X=null){const ge=[this.minX,this.minY,this.maxX,this.maxY];if(G===B.PathType.STROKE){X||(0,O.unreachable)("Stroke bounding box must include transform.");const Pe=O.Util.singularValueDecompose2dScale(X),Ae=Pe[0]*this.lineWidth/2,ke=Pe[1]*this.lineWidth/2;ge[0]-=Ae,ge[1]-=ke,ge[2]+=Ae,ge[3]+=ke}return ge}updateClipFromPath(){const G=O.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(G||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(G){this.clipBox=G,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(G=B.PathType.FILL,X=null){return O.Util.intersect(this.clipBox,this.getPathBoundingBox(G,X))}}function fe(_e,G){if(typeof ImageData<"u"&&G instanceof ImageData){_e.putImageData(G,0,0);return}const X=G.height,ge=G.width,Pe=X%Q,Ae=(X-Pe)/Q,ke=Pe===0?Ae:Ae+1,Oe=_e.createImageData(ge,Q);let Qe=0,ot;const st=G.data,ut=Oe.data;let dt,mt,Ge,Xe;if(G.kind===O.ImageKind.GRAYSCALE_1BPP){const me=st.byteLength,ye=new Uint32Array(ut.buffer,0,ut.byteLength>>2),je=ye.length,Ke=ge+7>>3,nt=4294967295,pt=O.FeatureTest.isLittleEndian?4278190080:255;for(dt=0;dt<ke;dt++){for(Ge=dt<Ae?Q:Pe,ot=0,mt=0;mt<Ge;mt++){const ht=me-Qe;let We=0;const wt=ht>Ke?ge:ht*8-7,St=wt&-8;let Yt=0,Ut=0;for(;We<St;We+=8)Ut=st[Qe++],ye[ot++]=Ut&128?nt:pt,ye[ot++]=Ut&64?nt:pt,ye[ot++]=Ut&32?nt:pt,ye[ot++]=Ut&16?nt:pt,ye[ot++]=Ut&8?nt:pt,ye[ot++]=Ut&4?nt:pt,ye[ot++]=Ut&2?nt:pt,ye[ot++]=Ut&1?nt:pt;for(;We<wt;We++)Yt===0&&(Ut=st[Qe++],Yt=128),ye[ot++]=Ut&Yt?nt:pt,Yt>>=1}for(;ot<je;)ye[ot++]=0;_e.putImageData(Oe,0,dt*Q)}}else if(G.kind===O.ImageKind.RGBA_32BPP){for(mt=0,Xe=ge*Q*4,dt=0;dt<Ae;dt++)ut.set(st.subarray(Qe,Qe+Xe)),Qe+=Xe,_e.putImageData(Oe,0,mt),mt+=Q;dt<ke&&(Xe=ge*Pe*4,ut.set(st.subarray(Qe,Qe+Xe)),_e.putImageData(Oe,0,mt))}else if(G.kind===O.ImageKind.RGB_24BPP)for(Ge=Q,Xe=ge*Ge,dt=0;dt<ke;dt++){for(dt>=Ae&&(Ge=Pe,Xe=ge*Ge),ot=0,mt=Xe;mt--;)ut[ot++]=st[Qe++],ut[ot++]=st[Qe++],ut[ot++]=st[Qe++],ut[ot++]=255;_e.putImageData(Oe,0,dt*Q)}else throw new Error(`bad image kind: ${G.kind}`)}function de(_e,G){if(G.bitmap){_e.drawImage(G.bitmap,0,0);return}const X=G.height,ge=G.width,Pe=X%Q,Ae=(X-Pe)/Q,ke=Pe===0?Ae:Ae+1,Oe=_e.createImageData(ge,Q);let Qe=0;const ot=G.data,st=Oe.data;for(let ut=0;ut<ke;ut++){const dt=ut<Ae?Q:Pe;({srcPos:Qe}=(0,Y.convertBlackAndWhiteToRGBA)({src:ot,srcPos:Qe,dest:st,width:ge,height:dt,nonBlackColor:0})),_e.putImageData(Oe,0,ut*Q)}}function te(_e,G){const X=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const ge of X)_e[ge]!==void 0&&(G[ge]=_e[ge]);_e.setLineDash!==void 0&&(G.setLineDash(_e.getLineDash()),G.lineDashOffset=_e.lineDashOffset)}function se(_e){if(_e.strokeStyle=_e.fillStyle="#000000",_e.fillRule="nonzero",_e.globalAlpha=1,_e.lineWidth=1,_e.lineCap="butt",_e.lineJoin="miter",_e.miterLimit=10,_e.globalCompositeOperation="source-over",_e.font="10px sans-serif",_e.setLineDash!==void 0&&(_e.setLineDash([]),_e.lineDashOffset=0),!O.isNodeJS){const{filter:G}=_e;G!=="none"&&G!==""&&(_e.filter="none")}}function re(_e,G,X,ge){const Pe=_e.length;for(let Ae=3;Ae<Pe;Ae+=4){const ke=_e[Ae];if(ke===0)_e[Ae-3]=G,_e[Ae-2]=X,_e[Ae-1]=ge;else if(ke<255){const Oe=255-ke;_e[Ae-3]=_e[Ae-3]*ke+G*Oe>>8,_e[Ae-2]=_e[Ae-2]*ke+X*Oe>>8,_e[Ae-1]=_e[Ae-1]*ke+ge*Oe>>8}}}function ae(_e,G,X){const ge=_e.length,Pe=1/255;for(let Ae=3;Ae<ge;Ae+=4){const ke=X?X[_e[Ae]]:_e[Ae];G[Ae]=G[Ae]*ke*Pe|0}}function oe(_e,G,X){const ge=_e.length;for(let Pe=3;Pe<ge;Pe+=4){const Ae=_e[Pe-3]*77+_e[Pe-2]*152+_e[Pe-1]*28;G[Pe]=X?G[Pe]*X[Ae>>8]>>8:G[Pe]*Ae>>16}}function Ee(_e,G,X,ge,Pe,Ae,ke,Oe,Qe,ot,st){const ut=!!Ae,dt=ut?Ae[0]:0,mt=ut?Ae[1]:0,Ge=ut?Ae[2]:0,Xe=Pe==="Luminosity"?oe:ae,ye=Math.min(ge,Math.ceil(1048576/X));for(let je=0;je<ge;je+=ye){const Ke=Math.min(ye,ge-je),nt=_e.getImageData(Oe-ot,je+(Qe-st),X,Ke),pt=G.getImageData(Oe,je+Qe,X,Ke);ut&&re(nt.data,dt,mt,Ge),Xe(nt.data,pt.data,ke),G.putImageData(pt,Oe,je+Qe)}}function J(_e,G,X,ge){const Pe=ge[0],Ae=ge[1],ke=ge[2]-Pe,Oe=ge[3]-Ae;ke===0||Oe===0||(Ee(G.context,X,ke,Oe,G.subtype,G.backdrop,G.transferMap,Pe,Ae,G.offsetX,G.offsetY),_e.save(),_e.globalAlpha=1,_e.globalCompositeOperation="source-over",_e.setTransform(1,0,0,1,0,0),_e.drawImage(X.canvas,0,0),_e.restore())}function ve(_e,G){const X=O.Util.singularValueDecompose2dScale(_e);X[0]=Math.fround(X[0]),X[1]=Math.fround(X[1]);const ge=Math.fround((globalThis.devicePixelRatio||1)*R.PixelsPerInch.PDF_TO_CSS_UNITS);return G!==void 0?G:X[0]<=ge||X[1]<=ge}const Ce=["butt","round","square"],De=["miter","round","bevel"],Me={},Ne={},He=class He{constructor(G,X,ge,Pe,Ae,{optionalContentConfig:ke,markedContentStack:Oe=null},Qe,ot){it(this,qe);this.ctx=G,this.current=new ne(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=X,this.objs=ge,this.canvasFactory=Pe,this.filterFactory=Ae,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Oe||[],this.optionalContentConfig=ke,this.cachedCanvases=new ee(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Qe,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=ot,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(G,X=null){return typeof G=="string"?G.startsWith("g_")?this.commonObjs.get(G):this.objs.get(G):X}beginDrawing({transform:G,viewport:X,transparency:ge=!1,background:Pe=null}){const Ae=this.ctx.canvas.width,ke=this.ctx.canvas.height,Oe=this.ctx.fillStyle;if(this.ctx.fillStyle=Pe||"#ffffff",this.ctx.fillRect(0,0,Ae,ke),this.ctx.fillStyle=Oe,ge){const Qe=this.cachedCanvases.getCanvas("transparent",Ae,ke);this.compositeCtx=this.ctx,this.transparentCanvas=Qe.canvas,this.ctx=Qe.context,this.ctx.save(),this.ctx.transform(...(0,R.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),se(this.ctx),G&&(this.ctx.transform(...G),this.outputScaleX=G[0],this.outputScaleY=G[0]),this.ctx.transform(...X.transform),this.viewportScale=X.scale,this.baseTransform=(0,R.getCurrentTransform)(this.ctx)}executeOperatorList(G,X,ge,Pe){const Ae=G.argsArray,ke=G.fnArray;let Oe=X||0;const Qe=Ae.length;if(Qe===Oe)return Oe;const ot=Qe-Oe>be&&typeof ge=="function",st=ot?Date.now()+W:0;let ut=0;const dt=this.commonObjs,mt=this.objs;let Ge;for(;;){if(Pe!==void 0&&Oe===Pe.nextBreakPoint)return Pe.breakIt(Oe,ge),Oe;if(Ge=ke[Oe],Ge!==O.OPS.dependency)this[Ge].apply(this,Ae[Oe]);else for(const Xe of Ae[Oe]){const me=Xe.startsWith("g_")?dt:mt;if(!me.has(Xe))return me.get(Xe,ge),Oe}if(Oe++,Oe===Qe)return Oe;if(ot&&++ut>be){if(Date.now()>st)return ge(),Oe;ut=0}}}endDrawing(){Ue(this,qe,xi).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const G of this._cachedBitmapsMap.values()){for(const X of G.values())typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement&&(X.width=X.height=0);G.clear()}this._cachedBitmapsMap.clear(),Ue(this,qe,Mi).call(this)}_scaleImage(G,X){const ge=G.width,Pe=G.height;let Ae=Math.max(Math.hypot(X[0],X[1]),1),ke=Math.max(Math.hypot(X[2],X[3]),1),Oe=ge,Qe=Pe,ot="prescale1",st,ut;for(;Ae>2&&Oe>1||ke>2&&Qe>1;){let dt=Oe,mt=Qe;Ae>2&&Oe>1&&(dt=Oe>=16384?Math.floor(Oe/2)-1||1:Math.ceil(Oe/2),Ae/=Oe/dt),ke>2&&Qe>1&&(mt=Qe>=16384?Math.floor(Qe/2)-1||1:Math.ceil(Qe)/2,ke/=Qe/mt),st=this.cachedCanvases.getCanvas(ot,dt,mt),ut=st.context,ut.clearRect(0,0,dt,mt),ut.drawImage(G,0,0,Oe,Qe,0,0,dt,mt),G=st.canvas,Oe=dt,Qe=mt,ot=ot==="prescale1"?"prescale2":"prescale1"}return{img:G,paintWidth:Oe,paintHeight:Qe}}_createMaskCanvas(G){const X=this.ctx,{width:ge,height:Pe}=G,Ae=this.current.fillColor,ke=this.current.patternFill,Oe=(0,R.getCurrentTransform)(X);let Qe,ot,st,ut;if((G.bitmap||G.data)&&G.count>1){const We=G.bitmap||G.data.buffer;ot=JSON.stringify(ke?Oe:[Oe.slice(0,4),Ae]),Qe=this._cachedBitmapsMap.get(We),Qe||(Qe=new Map,this._cachedBitmapsMap.set(We,Qe));const wt=Qe.get(ot);if(wt&&!ke){const St=Math.round(Math.min(Oe[0],Oe[2])+Oe[4]),Yt=Math.round(Math.min(Oe[1],Oe[3])+Oe[5]);return{canvas:wt,offsetX:St,offsetY:Yt}}st=wt}st||(ut=this.cachedCanvases.getCanvas("maskCanvas",ge,Pe),de(ut.context,G));let dt=O.Util.transform(Oe,[1/ge,0,0,-1/Pe,0,0]);dt=O.Util.transform(dt,[1,0,0,1,0,-Pe]);const mt=O.Util.applyTransform([0,0],dt),Ge=O.Util.applyTransform([ge,Pe],dt),Xe=O.Util.normalizeRect([mt[0],mt[1],Ge[0],Ge[1]]),me=Math.round(Xe[2]-Xe[0])||1,ye=Math.round(Xe[3]-Xe[1])||1,je=this.cachedCanvases.getCanvas("fillCanvas",me,ye),Ke=je.context,nt=Math.min(mt[0],Ge[0]),pt=Math.min(mt[1],Ge[1]);Ke.translate(-nt,-pt),Ke.transform(...dt),st||(st=this._scaleImage(ut.canvas,(0,R.getCurrentTransformInverse)(Ke)),st=st.img,Qe&&ke&&Qe.set(ot,st)),Ke.imageSmoothingEnabled=ve((0,R.getCurrentTransform)(Ke),G.interpolate),q(Ke,st,0,0,st.width,st.height,0,0,ge,Pe),Ke.globalCompositeOperation="source-in";const ht=O.Util.transform((0,R.getCurrentTransformInverse)(Ke),[1,0,0,1,-nt,-pt]);return Ke.fillStyle=ke?Ae.getPattern(X,this,ht,B.PathType.FILL):Ae,Ke.fillRect(0,0,ge,Pe),Qe&&!ke&&(this.cachedCanvases.delete("fillCanvas"),Qe.set(ot,je.canvas)),{canvas:je.canvas,offsetX:Math.round(nt),offsetY:Math.round(pt)}}setLineWidth(G){G!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=G,this.ctx.lineWidth=G}setLineCap(G){this.ctx.lineCap=Ce[G]}setLineJoin(G){this.ctx.lineJoin=De[G]}setMiterLimit(G){this.ctx.miterLimit=G}setDash(G,X){const ge=this.ctx;ge.setLineDash!==void 0&&(ge.setLineDash(G),ge.lineDashOffset=X)}setRenderingIntent(G){}setFlatness(G){}setGState(G){for(const[X,ge]of G)switch(X){case"LW":this.setLineWidth(ge);break;case"LC":this.setLineCap(ge);break;case"LJ":this.setLineJoin(ge);break;case"ML":this.setMiterLimit(ge);break;case"D":this.setDash(ge[0],ge[1]);break;case"RI":this.setRenderingIntent(ge);break;case"FL":this.setFlatness(ge);break;case"Font":this.setFont(ge[0],ge[1]);break;case"CA":this.current.strokeAlpha=ge;break;case"ca":this.current.fillAlpha=ge,this.ctx.globalAlpha=ge;break;case"BM":this.ctx.globalCompositeOperation=ge;break;case"SMask":this.current.activeSMask=ge?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(ge);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const G=this.inSMaskMode;this.current.activeSMask&&!G?this.beginSMaskMode():!this.current.activeSMask&&G&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const G=this.ctx.canvas.width,X=this.ctx.canvas.height,ge="smaskGroupAt"+this.groupLevel,Pe=this.cachedCanvases.getCanvas(ge,G,X);this.suspendedCtx=this.ctx,this.ctx=Pe.context;const Ae=this.ctx;Ae.setTransform(...(0,R.getCurrentTransform)(this.suspendedCtx)),te(this.suspendedCtx,Ae),ie(Ae,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),te(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(G){if(!this.current.activeSMask)return;G?(G[0]=Math.floor(G[0]),G[1]=Math.floor(G[1]),G[2]=Math.ceil(G[2]),G[3]=Math.ceil(G[3])):G=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const X=this.current.activeSMask,ge=this.suspendedCtx;J(ge,X,this.ctx,G),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(te(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const G=this.current;this.stateStack.push(G),this.current=G.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),te(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(G,X,ge,Pe,Ae,ke){this.ctx.transform(G,X,ge,Pe,Ae,ke),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(G,X,ge){const Pe=this.ctx,Ae=this.current;let ke=Ae.x,Oe=Ae.y,Qe,ot;const st=(0,R.getCurrentTransform)(Pe),ut=st[0]===0&&st[3]===0||st[1]===0&&st[2]===0,dt=ut?ge.slice(0):null;for(let mt=0,Ge=0,Xe=G.length;mt<Xe;mt++)switch(G[mt]|0){case O.OPS.rectangle:ke=X[Ge++],Oe=X[Ge++];const me=X[Ge++],ye=X[Ge++],je=ke+me,Ke=Oe+ye;Pe.moveTo(ke,Oe),me===0||ye===0?Pe.lineTo(je,Ke):(Pe.lineTo(je,Oe),Pe.lineTo(je,Ke),Pe.lineTo(ke,Ke)),ut||Ae.updateRectMinMax(st,[ke,Oe,je,Ke]),Pe.closePath();break;case O.OPS.moveTo:ke=X[Ge++],Oe=X[Ge++],Pe.moveTo(ke,Oe),ut||Ae.updatePathMinMax(st,ke,Oe);break;case O.OPS.lineTo:ke=X[Ge++],Oe=X[Ge++],Pe.lineTo(ke,Oe),ut||Ae.updatePathMinMax(st,ke,Oe);break;case O.OPS.curveTo:Qe=ke,ot=Oe,ke=X[Ge+4],Oe=X[Ge+5],Pe.bezierCurveTo(X[Ge],X[Ge+1],X[Ge+2],X[Ge+3],ke,Oe),Ae.updateCurvePathMinMax(st,Qe,ot,X[Ge],X[Ge+1],X[Ge+2],X[Ge+3],ke,Oe,dt),Ge+=6;break;case O.OPS.curveTo2:Qe=ke,ot=Oe,Pe.bezierCurveTo(ke,Oe,X[Ge],X[Ge+1],X[Ge+2],X[Ge+3]),Ae.updateCurvePathMinMax(st,Qe,ot,ke,Oe,X[Ge],X[Ge+1],X[Ge+2],X[Ge+3],dt),ke=X[Ge+2],Oe=X[Ge+3],Ge+=4;break;case O.OPS.curveTo3:Qe=ke,ot=Oe,ke=X[Ge+2],Oe=X[Ge+3],Pe.bezierCurveTo(X[Ge],X[Ge+1],ke,Oe,ke,Oe),Ae.updateCurvePathMinMax(st,Qe,ot,X[Ge],X[Ge+1],ke,Oe,ke,Oe,dt),Ge+=4;break;case O.OPS.closePath:Pe.closePath();break}ut&&Ae.updateScalingPathMinMax(st,dt),Ae.setCurrentPoint(ke,Oe)}closePath(){this.ctx.closePath()}stroke(G=!0){const X=this.ctx,ge=this.current.strokeColor;X.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof ge=="object"&&(ge!=null&&ge.getPattern)?(X.save(),X.strokeStyle=ge.getPattern(X,this,(0,R.getCurrentTransformInverse)(X),B.PathType.STROKE),this.rescaleAndStroke(!1),X.restore()):this.rescaleAndStroke(!0)),G&&this.consumePath(this.current.getClippedPathBoundingBox()),X.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(G=!0){const X=this.ctx,ge=this.current.fillColor,Pe=this.current.patternFill;let Ae=!1;Pe&&(X.save(),X.fillStyle=ge.getPattern(X,this,(0,R.getCurrentTransformInverse)(X),B.PathType.FILL),Ae=!0);const ke=this.current.getClippedPathBoundingBox();this.contentVisible&&ke!==null&&(this.pendingEOFill?(X.fill("evenodd"),this.pendingEOFill=!1):X.fill()),Ae&&X.restore(),G&&this.consumePath(ke)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Me}eoClip(){this.pendingClip=Ne}beginText(){this.current.textMatrix=O.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const G=this.pendingTextPaths,X=this.ctx;if(G===void 0){X.beginPath();return}X.save(),X.beginPath();for(const ge of G)X.setTransform(...ge.transform),X.translate(ge.x,ge.y),ge.addToPath(X,ge.fontSize);X.restore(),X.clip(),X.beginPath(),delete this.pendingTextPaths}setCharSpacing(G){this.current.charSpacing=G}setWordSpacing(G){this.current.wordSpacing=G}setHScale(G){this.current.textHScale=G/100}setLeading(G){this.current.leading=-G}setFont(G,X){var st;const ge=this.commonObjs.get(G),Pe=this.current;if(!ge)throw new Error(`Can't find font for ${G}`);if(Pe.fontMatrix=ge.fontMatrix||O.FONT_IDENTITY_MATRIX,(Pe.fontMatrix[0]===0||Pe.fontMatrix[3]===0)&&(0,O.warn)("Invalid font matrix for font "+G),X<0?(X=-X,Pe.fontDirection=-1):Pe.fontDirection=1,this.current.font=ge,this.current.fontSize=X,ge.isType3Font)return;const Ae=ge.loadedName||"sans-serif",ke=((st=ge.systemFontInfo)==null?void 0:st.css)||`"${Ae}", ${ge.fallbackName}`;let Oe="normal";ge.black?Oe="900":ge.bold&&(Oe="bold");const Qe=ge.italic?"italic":"normal";let ot=X;X<he?ot=he:X>ue&&(ot=ue),this.current.fontSizeScale=X/ot,this.ctx.font=`${Qe} ${Oe} ${ot}px ${ke}`}setTextRenderingMode(G){this.current.textRenderingMode=G}setTextRise(G){this.current.textRise=G}moveText(G,X){this.current.x=this.current.lineX+=G,this.current.y=this.current.lineY+=X}setLeadingMoveText(G,X){this.setLeading(-X),this.moveText(G,X)}setTextMatrix(G,X,ge,Pe,Ae,ke){this.current.textMatrix=[G,X,ge,Pe,Ae,ke],this.current.textMatrixScale=Math.hypot(G,X),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(G,X,ge,Pe){const Ae=this.ctx,ke=this.current,Oe=ke.font,Qe=ke.textRenderingMode,ot=ke.fontSize/ke.fontSizeScale,st=Qe&O.TextRenderingMode.FILL_STROKE_MASK,ut=!!(Qe&O.TextRenderingMode.ADD_TO_PATH_FLAG),dt=ke.patternFill&&!Oe.missingFile;let mt;(Oe.disableFontFace||ut||dt)&&(mt=Oe.getPathGenerator(this.commonObjs,G)),Oe.disableFontFace||dt?(Ae.save(),Ae.translate(X,ge),Ae.beginPath(),mt(Ae,ot),Pe&&Ae.setTransform(...Pe),(st===O.TextRenderingMode.FILL||st===O.TextRenderingMode.FILL_STROKE)&&Ae.fill(),(st===O.TextRenderingMode.STROKE||st===O.TextRenderingMode.FILL_STROKE)&&Ae.stroke(),Ae.restore()):((st===O.TextRenderingMode.FILL||st===O.TextRenderingMode.FILL_STROKE)&&Ae.fillText(G,X,ge),(st===O.TextRenderingMode.STROKE||st===O.TextRenderingMode.FILL_STROKE)&&Ae.strokeText(G,X,ge)),ut&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,R.getCurrentTransform)(Ae),x:X,y:ge,fontSize:ot,addToPath:mt})}get isFontSubpixelAAEnabled(){const{context:G}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);G.scale(1.5,1),G.fillText("I",0,10);const X=G.getImageData(0,0,10,10).data;let ge=!1;for(let Pe=3;Pe<X.length;Pe+=4)if(X[Pe]>0&&X[Pe]<255){ge=!0;break}return(0,O.shadow)(this,"isFontSubpixelAAEnabled",ge)}showText(G){const X=this.current,ge=X.font;if(ge.isType3Font)return this.showType3Text(G);const Pe=X.fontSize;if(Pe===0)return;const Ae=this.ctx,ke=X.fontSizeScale,Oe=X.charSpacing,Qe=X.wordSpacing,ot=X.fontDirection,st=X.textHScale*ot,ut=G.length,dt=ge.vertical,mt=dt?1:-1,Ge=ge.defaultVMetrics,Xe=Pe*X.fontMatrix[0],me=X.textRenderingMode===O.TextRenderingMode.FILL&&!ge.disableFontFace&&!X.patternFill;Ae.save(),Ae.transform(...X.textMatrix),Ae.translate(X.x,X.y+X.textRise),ot>0?Ae.scale(st,-1):Ae.scale(st,1);let ye;if(X.patternFill){Ae.save();const ht=X.fillColor.getPattern(Ae,this,(0,R.getCurrentTransformInverse)(Ae),B.PathType.FILL);ye=(0,R.getCurrentTransform)(Ae),Ae.restore(),Ae.fillStyle=ht}let je=X.lineWidth;const Ke=X.textMatrixScale;if(Ke===0||je===0){const ht=X.textRenderingMode&O.TextRenderingMode.FILL_STROKE_MASK;(ht===O.TextRenderingMode.STROKE||ht===O.TextRenderingMode.FILL_STROKE)&&(je=this.getSinglePixelWidth())}else je/=Ke;if(ke!==1&&(Ae.scale(ke,ke),je/=ke),Ae.lineWidth=je,ge.isInvalidPDFjsFont){const ht=[];let We=0;for(const wt of G)ht.push(wt.unicode),We+=wt.width;Ae.fillText(ht.join(""),0,0),X.x+=We*Xe*st,Ae.restore(),this.compose();return}let nt=0,pt;for(pt=0;pt<ut;++pt){const ht=G[pt];if(typeof ht=="number"){nt+=mt*ht*Pe/1e3;continue}let We=!1;const wt=(ht.isSpace?Qe:0)+Oe,St=ht.fontChar,Yt=ht.accent;let Ut,dn,Rt=ht.width;if(dt){const an=ht.vmetric||Ge,_n=-(ht.vmetric?an[1]:Rt*.5)*Xe,gt=an[2]*Xe;Rt=an?-an[0]:Rt,Ut=_n/ke,dn=(nt+gt)/ke}else Ut=nt/ke,dn=0;if(ge.remeasure&&Rt>0){const an=Ae.measureText(St).width*1e3/Pe*ke;if(Rt<an&&this.isFontSubpixelAAEnabled){const _n=Rt/an;We=!0,Ae.save(),Ae.scale(_n,1),Ut/=_n}else Rt!==an&&(Ut+=(Rt-an)/2e3*Pe/ke)}if(this.contentVisible&&(ht.isInFont||ge.missingFile)){if(me&&!Yt)Ae.fillText(St,Ut,dn);else if(this.paintChar(St,Ut,dn,ye),Yt){const an=Ut+Pe*Yt.offset.x/ke,_n=dn-Pe*Yt.offset.y/ke;this.paintChar(Yt.fontChar,an,_n,ye)}}const zt=dt?Rt*Xe-wt*ot:Rt*Xe+wt*ot;nt+=zt,We&&Ae.restore()}dt?X.y-=nt:X.x+=nt*st,Ae.restore(),this.compose()}showType3Text(G){const X=this.ctx,ge=this.current,Pe=ge.font,Ae=ge.fontSize,ke=ge.fontDirection,Oe=Pe.vertical?1:-1,Qe=ge.charSpacing,ot=ge.wordSpacing,st=ge.textHScale*ke,ut=ge.fontMatrix||O.FONT_IDENTITY_MATRIX,dt=G.length,mt=ge.textRenderingMode===O.TextRenderingMode.INVISIBLE;let Ge,Xe,me,ye;if(!(mt||Ae===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,X.save(),X.transform(...ge.textMatrix),X.translate(ge.x,ge.y),X.scale(st,ke),Ge=0;Ge<dt;++Ge){if(Xe=G[Ge],typeof Xe=="number"){ye=Oe*Xe*Ae/1e3,this.ctx.translate(ye,0),ge.x+=ye*st;continue}const je=(Xe.isSpace?ot:0)+Qe,Ke=Pe.charProcOperatorList[Xe.operatorListId];if(!Ke){(0,O.warn)(`Type3 character "${Xe.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Xe,this.save(),X.scale(Ae,Ae),X.transform(...ut),this.executeOperatorList(Ke),this.restore()),me=O.Util.applyTransform([Xe.width,0],ut)[0]*Ae+je,X.translate(me,0),ge.x+=me*st}X.restore(),this.processingType3=null}}setCharWidth(G,X){}setCharWidthAndBounds(G,X,ge,Pe,Ae,ke){this.ctx.rect(ge,Pe,Ae-ge,ke-Pe),this.ctx.clip(),this.endPath()}getColorN_Pattern(G){let X;if(G[0]==="TilingPattern"){const ge=G[1],Pe=this.baseTransform||(0,R.getCurrentTransform)(this.ctx),Ae={createCanvasGraphics:ke=>new He(ke,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};X=new B.TilingPattern(G,ge,this.ctx,Ae,Pe)}else X=this._getPattern(G[1],G[2]);return X}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(G,X,ge){const Pe=O.Util.makeHexColor(G,X,ge);this.ctx.strokeStyle=Pe,this.current.strokeColor=Pe}setFillRGBColor(G,X,ge){const Pe=O.Util.makeHexColor(G,X,ge);this.ctx.fillStyle=Pe,this.current.fillColor=Pe,this.current.patternFill=!1}_getPattern(G,X=null){let ge;return this.cachedPatterns.has(G)?ge=this.cachedPatterns.get(G):(ge=(0,B.getShadingPattern)(this.getObject(G)),this.cachedPatterns.set(G,ge)),X&&(ge.matrix=X),ge}shadingFill(G){if(!this.contentVisible)return;const X=this.ctx;this.save();const ge=this._getPattern(G);X.fillStyle=ge.getPattern(X,this,(0,R.getCurrentTransformInverse)(X),B.PathType.SHADING);const Pe=(0,R.getCurrentTransformInverse)(X);if(Pe){const{width:Ae,height:ke}=X.canvas,[Oe,Qe,ot,st]=O.Util.getAxialAlignedBoundingBox([0,0,Ae,ke],Pe);this.ctx.fillRect(Oe,Qe,ot-Oe,st-Qe)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,O.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,O.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(G,X){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(G)&&G.length===6&&this.transform(...G),this.baseTransform=(0,R.getCurrentTransform)(this.ctx),X)){const ge=X[2]-X[0],Pe=X[3]-X[1];this.ctx.rect(X[0],X[1],ge,Pe),this.current.updateRectMinMax((0,R.getCurrentTransform)(this.ctx),X),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(G){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const X=this.ctx;G.isolated||(0,O.info)("TODO: Support non-isolated groups."),G.knockout&&(0,O.warn)("Knockout groups not supported.");const ge=(0,R.getCurrentTransform)(X);if(G.matrix&&X.transform(...G.matrix),!G.bbox)throw new Error("Bounding box is required.");let Pe=O.Util.getAxialAlignedBoundingBox(G.bbox,(0,R.getCurrentTransform)(X));const Ae=[0,0,X.canvas.width,X.canvas.height];Pe=O.Util.intersect(Pe,Ae)||[0,0,0,0];const ke=Math.floor(Pe[0]),Oe=Math.floor(Pe[1]);let Qe=Math.max(Math.ceil(Pe[2])-ke,1),ot=Math.max(Math.ceil(Pe[3])-Oe,1),st=1,ut=1;Qe>le&&(st=Qe/le,Qe=le),ot>le&&(ut=ot/le,ot=le),this.current.startNewPathAndClipBox([0,0,Qe,ot]);let dt="groupAt"+this.groupLevel;G.smask&&(dt+="_smask_"+this.smaskCounter++%2);const mt=this.cachedCanvases.getCanvas(dt,Qe,ot),Ge=mt.context;Ge.scale(1/st,1/ut),Ge.translate(-ke,-Oe),Ge.transform(...ge),G.smask?this.smaskStack.push({canvas:mt.canvas,context:Ge,offsetX:ke,offsetY:Oe,scaleX:st,scaleY:ut,subtype:G.smask.subtype,backdrop:G.smask.backdrop,transferMap:G.smask.transferMap||null,startTransformInverse:null}):(X.setTransform(1,0,0,1,0,0),X.translate(ke,Oe),X.scale(st,ut),X.save()),te(X,Ge),this.ctx=Ge,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(X),this.groupLevel++}endGroup(G){if(!this.contentVisible)return;this.groupLevel--;const X=this.ctx,ge=this.groupStack.pop();if(this.ctx=ge,this.ctx.imageSmoothingEnabled=!1,G.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const Pe=(0,R.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...Pe);const Ae=O.Util.getAxialAlignedBoundingBox([0,0,X.canvas.width,X.canvas.height],Pe);this.ctx.drawImage(X.canvas,0,0),this.ctx.restore(),this.compose(Ae)}}beginAnnotation(G,X,ge,Pe,Ae){if(Ue(this,qe,xi).call(this),se(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(X)&&X.length===4){const ke=X[2]-X[0],Oe=X[3]-X[1];if(Ae&&this.annotationCanvasMap){ge=ge.slice(),ge[4]-=X[0],ge[5]-=X[1],X=X.slice(),X[0]=X[1]=0,X[2]=ke,X[3]=Oe;const[Qe,ot]=O.Util.singularValueDecompose2dScale((0,R.getCurrentTransform)(this.ctx)),{viewportScale:st}=this,ut=Math.ceil(ke*this.outputScaleX*st),dt=Math.ceil(Oe*this.outputScaleY*st);this.annotationCanvas=this.canvasFactory.create(ut,dt);const{canvas:mt,context:Ge}=this.annotationCanvas;this.annotationCanvasMap.set(G,mt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Ge,this.ctx.save(),this.ctx.setTransform(Qe,0,0,-ot,0,Oe*ot),se(this.ctx)}else se(this.ctx),this.ctx.rect(X[0],X[1],ke,Oe),this.ctx.clip(),this.endPath()}this.current=new ne(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...ge),this.transform(...Pe)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Ue(this,qe,Mi).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(G){if(!this.contentVisible)return;const X=G.count;G=this.getObject(G.data,G),G.count=X;const ge=this.ctx,Pe=this.processingType3;if(Pe&&(Pe.compiled===void 0&&(Pe.compiled=K(G)),Pe.compiled)){Pe.compiled(ge);return}const Ae=this._createMaskCanvas(G),ke=Ae.canvas;ge.save(),ge.setTransform(1,0,0,1,0,0),ge.drawImage(ke,Ae.offsetX,Ae.offsetY),ge.restore(),this.compose()}paintImageMaskXObjectRepeat(G,X,ge=0,Pe=0,Ae,ke){if(!this.contentVisible)return;G=this.getObject(G.data,G);const Oe=this.ctx;Oe.save();const Qe=(0,R.getCurrentTransform)(Oe);Oe.transform(X,ge,Pe,Ae,0,0);const ot=this._createMaskCanvas(G);Oe.setTransform(1,0,0,1,ot.offsetX-Qe[4],ot.offsetY-Qe[5]);for(let st=0,ut=ke.length;st<ut;st+=2){const dt=O.Util.transform(Qe,[X,ge,Pe,Ae,ke[st],ke[st+1]]),[mt,Ge]=O.Util.applyTransform([0,0],dt);Oe.drawImage(ot.canvas,mt,Ge)}Oe.restore(),this.compose()}paintImageMaskXObjectGroup(G){if(!this.contentVisible)return;const X=this.ctx,ge=this.current.fillColor,Pe=this.current.patternFill;for(const Ae of G){const{data:ke,width:Oe,height:Qe,transform:ot}=Ae,st=this.cachedCanvases.getCanvas("maskCanvas",Oe,Qe),ut=st.context;ut.save();const dt=this.getObject(ke,Ae);de(ut,dt),ut.globalCompositeOperation="source-in",ut.fillStyle=Pe?ge.getPattern(ut,this,(0,R.getCurrentTransformInverse)(X),B.PathType.FILL):ge,ut.fillRect(0,0,Oe,Qe),ut.restore(),X.save(),X.transform(...ot),X.scale(1,-1),q(X,st.canvas,0,0,Oe,Qe,0,-1,1,1),X.restore()}this.compose()}paintImageXObject(G){if(!this.contentVisible)return;const X=this.getObject(G);if(!X){(0,O.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(X)}paintImageXObjectRepeat(G,X,ge,Pe){if(!this.contentVisible)return;const Ae=this.getObject(G);if(!Ae){(0,O.warn)("Dependent image isn't ready yet");return}const ke=Ae.width,Oe=Ae.height,Qe=[];for(let ot=0,st=Pe.length;ot<st;ot+=2)Qe.push({transform:[X,0,0,ge,Pe[ot],Pe[ot+1]],x:0,y:0,w:ke,h:Oe});this.paintInlineImageXObjectGroup(Ae,Qe)}applyTransferMapsToCanvas(G){return this.current.transferMaps!=="none"&&(G.filter=this.current.transferMaps,G.drawImage(G.canvas,0,0),G.filter="none"),G.canvas}applyTransferMapsToBitmap(G){if(this.current.transferMaps==="none")return G.bitmap;const{bitmap:X,width:ge,height:Pe}=G,Ae=this.cachedCanvases.getCanvas("inlineImage",ge,Pe),ke=Ae.context;return ke.filter=this.current.transferMaps,ke.drawImage(X,0,0),ke.filter="none",Ae.canvas}paintInlineImageXObject(G){if(!this.contentVisible)return;const X=G.width,ge=G.height,Pe=this.ctx;if(this.save(),!O.isNodeJS){const{filter:Oe}=Pe;Oe!=="none"&&Oe!==""&&(Pe.filter="none")}Pe.scale(1/X,-1/ge);let Ae;if(G.bitmap)Ae=this.applyTransferMapsToBitmap(G);else if(typeof HTMLElement=="function"&&G instanceof HTMLElement||!G.data)Ae=G;else{const Qe=this.cachedCanvases.getCanvas("inlineImage",X,ge).context;fe(Qe,G),Ae=this.applyTransferMapsToCanvas(Qe)}const ke=this._scaleImage(Ae,(0,R.getCurrentTransformInverse)(Pe));Pe.imageSmoothingEnabled=ve((0,R.getCurrentTransform)(Pe),G.interpolate),q(Pe,ke.img,0,0,ke.paintWidth,ke.paintHeight,0,-ge,X,ge),this.compose(),this.restore()}paintInlineImageXObjectGroup(G,X){if(!this.contentVisible)return;const ge=this.ctx;let Pe;if(G.bitmap)Pe=G.bitmap;else{const Ae=G.width,ke=G.height,Qe=this.cachedCanvases.getCanvas("inlineImage",Ae,ke).context;fe(Qe,G),Pe=this.applyTransferMapsToCanvas(Qe)}for(const Ae of X)ge.save(),ge.transform(...Ae.transform),ge.scale(1,-1),q(ge,Pe,Ae.x,Ae.y,Ae.w,Ae.h,0,-1,1,1),ge.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(G){}markPointProps(G,X){}beginMarkedContent(G){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(G,X){G==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(X)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(G){const X=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(G);const ge=this.ctx;this.pendingClip&&(X||(this.pendingClip===Ne?ge.clip("evenodd"):ge.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),ge.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const G=(0,R.getCurrentTransform)(this.ctx);if(G[1]===0&&G[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(G[0]),Math.abs(G[3]));else{const X=Math.abs(G[0]*G[3]-G[2]*G[1]),ge=Math.hypot(G[0],G[2]),Pe=Math.hypot(G[1],G[3]);this._cachedGetSinglePixelWidth=Math.max(ge,Pe)/X}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:G}=this.current,{a:X,b:ge,c:Pe,d:Ae}=this.ctx.getTransform();let ke,Oe;if(ge===0&&Pe===0){const Qe=Math.abs(X),ot=Math.abs(Ae);if(Qe===ot)if(G===0)ke=Oe=1/Qe;else{const st=Qe*G;ke=Oe=st<1?1/st:1}else if(G===0)ke=1/Qe,Oe=1/ot;else{const st=Qe*G,ut=ot*G;ke=st<1?1/st:1,Oe=ut<1?1/ut:1}}else{const Qe=Math.abs(X*Ae-ge*Pe),ot=Math.hypot(X,ge),st=Math.hypot(Pe,Ae);if(G===0)ke=st/Qe,Oe=ot/Qe;else{const ut=G*Qe;ke=st>ut?st/ut:1,Oe=ot>ut?ot/ut:1}}this._cachedScaleForStroking[0]=ke,this._cachedScaleForStroking[1]=Oe}return this._cachedScaleForStroking}rescaleAndStroke(G){const{ctx:X}=this,{lineWidth:ge}=this.current,[Pe,Ae]=this.getScaleForStroking();if(X.lineWidth=ge||1,Pe===1&&Ae===1){X.stroke();return}const ke=X.getLineDash();if(G&&X.save(),X.scale(Pe,Ae),ke.length>0){const Oe=Math.max(Pe,Ae);X.setLineDash(ke.map(Qe=>Qe/Oe)),X.lineDashOffset/=Oe}X.stroke(),G&&X.restore()}isContentVisible(){for(let G=this.markedContentStack.length-1;G>=0;G--)if(!this.markedContentStack[G].visible)return!1;return!0}};qe=new WeakSet,xi=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Mi=function(){if(this.pageColors){const G=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(G!=="none"){const X=this.ctx.filter;this.ctx.filter=G,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=X}}};let Ie=He;$.CanvasGraphics=Ie;for(const _e in O.OPS)Ie.prototype[_e]!==void 0&&(Ie.prototype[O.OPS[_e]]=Ie.prototype[_e])},(A,$,H)=>{Object.defineProperty($,"__esModule",{value:!0}),$.TilingPattern=$.PathType=void 0,$.getShadingPattern=Q;var O=H(1),R=H(6);const B={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};$.PathType=B;function Y(K,ne){if(!ne)return;const fe=ne[2]-ne[0],de=ne[3]-ne[1],te=new Path2D;te.rect(ne[0],ne[1],fe,de),K.clip(te)}class he{constructor(){this.constructor===he&&(0,O.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,O.unreachable)("Abstract method `getPattern` called.")}}class ue extends he{constructor(ne){super(),this._type=ne[1],this._bbox=ne[2],this._colorStops=ne[3],this._p0=ne[4],this._p1=ne[5],this._r0=ne[6],this._r1=ne[7],this.matrix=null}_createGradient(ne){let fe;this._type==="axial"?fe=ne.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(fe=ne.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const de of this._colorStops)fe.addColorStop(de[0],de[1]);return fe}getPattern(ne,fe,de,te){let se;if(te===B.STROKE||te===B.FILL){const re=fe.current.getClippedPathBoundingBox(te,(0,R.getCurrentTransform)(ne))||[0,0,0,0],ae=Math.ceil(re[2]-re[0])||1,oe=Math.ceil(re[3]-re[1])||1,Ee=fe.cachedCanvases.getCanvas("pattern",ae,oe,!0),J=Ee.context;J.clearRect(0,0,J.canvas.width,J.canvas.height),J.beginPath(),J.rect(0,0,J.canvas.width,J.canvas.height),J.translate(-re[0],-re[1]),de=O.Util.transform(de,[1,0,0,1,re[0],re[1]]),J.transform(...fe.baseTransform),this.matrix&&J.transform(...this.matrix),Y(J,this._bbox),J.fillStyle=this._createGradient(J),J.fill(),se=ne.createPattern(Ee.canvas,"no-repeat");const ve=new DOMMatrix(de);se.setTransform(ve)}else Y(ne,this._bbox),se=this._createGradient(ne);return se}}function le(K,ne,fe,de,te,se,re,ae){const oe=ne.coords,Ee=ne.colors,J=K.data,ve=K.width*4;let Ce;oe[fe+1]>oe[de+1]&&(Ce=fe,fe=de,de=Ce,Ce=se,se=re,re=Ce),oe[de+1]>oe[te+1]&&(Ce=de,de=te,te=Ce,Ce=re,re=ae,ae=Ce),oe[fe+1]>oe[de+1]&&(Ce=fe,fe=de,de=Ce,Ce=se,se=re,re=Ce);const De=(oe[fe]+ne.offsetX)*ne.scaleX,Me=(oe[fe+1]+ne.offsetY)*ne.scaleY,Ne=(oe[de]+ne.offsetX)*ne.scaleX,Ie=(oe[de+1]+ne.offsetY)*ne.scaleY,qe=(oe[te]+ne.offsetX)*ne.scaleX,Se=(oe[te+1]+ne.offsetY)*ne.scaleY;if(Me>=Se)return;const Te=Ee[se],He=Ee[se+1],_e=Ee[se+2],G=Ee[re],X=Ee[re+1],ge=Ee[re+2],Pe=Ee[ae],Ae=Ee[ae+1],ke=Ee[ae+2],Oe=Math.round(Me),Qe=Math.round(Se);let ot,st,ut,dt,mt,Ge,Xe,me;for(let ye=Oe;ye<=Qe;ye++){if(ye<Ie){const ht=ye<Me?0:(Me-ye)/(Me-Ie);ot=De-(De-Ne)*ht,st=Te-(Te-G)*ht,ut=He-(He-X)*ht,dt=_e-(_e-ge)*ht}else{let ht;ye>Se?ht=1:Ie===Se?ht=0:ht=(Ie-ye)/(Ie-Se),ot=Ne-(Ne-qe)*ht,st=G-(G-Pe)*ht,ut=X-(X-Ae)*ht,dt=ge-(ge-ke)*ht}let je;ye<Me?je=0:ye>Se?je=1:je=(Me-ye)/(Me-Se),mt=De-(De-qe)*je,Ge=Te-(Te-Pe)*je,Xe=He-(He-Ae)*je,me=_e-(_e-ke)*je;const Ke=Math.round(Math.min(ot,mt)),nt=Math.round(Math.max(ot,mt));let pt=ve*ye+Ke*4;for(let ht=Ke;ht<=nt;ht++)je=(ot-ht)/(ot-mt),je<0?je=0:je>1&&(je=1),J[pt++]=st-(st-Ge)*je|0,J[pt++]=ut-(ut-Xe)*je|0,J[pt++]=dt-(dt-me)*je|0,J[pt++]=255}}function W(K,ne,fe){const de=ne.coords,te=ne.colors;let se,re;switch(ne.type){case"lattice":const ae=ne.verticesPerRow,oe=Math.floor(de.length/ae)-1,Ee=ae-1;for(se=0;se<oe;se++){let J=se*ae;for(let ve=0;ve<Ee;ve++,J++)le(K,fe,de[J],de[J+1],de[J+ae],te[J],te[J+1],te[J+ae]),le(K,fe,de[J+ae+1],de[J+1],de[J+ae],te[J+ae+1],te[J+1],te[J+ae])}break;case"triangles":for(se=0,re=de.length;se<re;se+=3)le(K,fe,de[se],de[se+1],de[se+2],te[se],te[se+1],te[se+2]);break;default:throw new Error("illegal figure")}}class be extends he{constructor(ne){super(),this._coords=ne[2],this._colors=ne[3],this._figures=ne[4],this._bounds=ne[5],this._bbox=ne[7],this._background=ne[8],this.matrix=null}_createMeshCanvas(ne,fe,de){const ae=Math.floor(this._bounds[0]),oe=Math.floor(this._bounds[1]),Ee=Math.ceil(this._bounds[2])-ae,J=Math.ceil(this._bounds[3])-oe,ve=Math.min(Math.ceil(Math.abs(Ee*ne[0]*1.1)),3e3),Ce=Math.min(Math.ceil(Math.abs(J*ne[1]*1.1)),3e3),De=Ee/ve,Me=J/Ce,Ne={coords:this._coords,colors:this._colors,offsetX:-ae,offsetY:-oe,scaleX:1/De,scaleY:1/Me},Ie=ve+2*2,qe=Ce+2*2,Se=de.getCanvas("mesh",Ie,qe,!1),Te=Se.context,He=Te.createImageData(ve,Ce);if(fe){const G=He.data;for(let X=0,ge=G.length;X<ge;X+=4)G[X]=fe[0],G[X+1]=fe[1],G[X+2]=fe[2],G[X+3]=255}for(const G of this._figures)W(He,G,Ne);return Te.putImageData(He,2,2),{canvas:Se.canvas,offsetX:ae-2*De,offsetY:oe-2*Me,scaleX:De,scaleY:Me}}getPattern(ne,fe,de,te){Y(ne,this._bbox);let se;if(te===B.SHADING)se=O.Util.singularValueDecompose2dScale((0,R.getCurrentTransform)(ne));else if(se=O.Util.singularValueDecompose2dScale(fe.baseTransform),this.matrix){const ae=O.Util.singularValueDecompose2dScale(this.matrix);se=[se[0]*ae[0],se[1]*ae[1]]}const re=this._createMeshCanvas(se,te===B.SHADING?null:this._background,fe.cachedCanvases);return te!==B.SHADING&&(ne.setTransform(...fe.baseTransform),this.matrix&&ne.transform(...this.matrix)),ne.translate(re.offsetX,re.offsetY),ne.scale(re.scaleX,re.scaleY),ne.createPattern(re.canvas,"no-repeat")}}class ce extends he{getPattern(){return"hotpink"}}function Q(K){switch(K[0]){case"RadialAxial":return new ue(K);case"Mesh":return new be(K);case"Dummy":return new ce}throw new Error(`Unknown IR type: ${K[0]}`)}const ie={COLORED:1,UNCOLORED:2},q=class q{constructor(ne,fe,de,te,se){this.operatorList=ne[2],this.matrix=ne[3]||[1,0,0,1,0,0],this.bbox=ne[4],this.xstep=ne[5],this.ystep=ne[6],this.paintType=ne[7],this.tilingType=ne[8],this.color=fe,this.ctx=de,this.canvasGraphicsFactory=te,this.baseTransform=se}createPatternCanvas(ne){const fe=this.operatorList,de=this.bbox,te=this.xstep,se=this.ystep,re=this.paintType,ae=this.tilingType,oe=this.color,Ee=this.canvasGraphicsFactory;(0,O.info)("TilingType: "+ae);const J=de[0],ve=de[1],Ce=de[2],De=de[3],Me=O.Util.singularValueDecompose2dScale(this.matrix),Ne=O.Util.singularValueDecompose2dScale(this.baseTransform),Ie=[Me[0]*Ne[0],Me[1]*Ne[1]],qe=this.getSizeAndScale(te,this.ctx.canvas.width,Ie[0]),Se=this.getSizeAndScale(se,this.ctx.canvas.height,Ie[1]),Te=ne.cachedCanvases.getCanvas("pattern",qe.size,Se.size,!0),He=Te.context,_e=Ee.createCanvasGraphics(He);_e.groupLevel=ne.groupLevel,this.setFillAndStrokeStyleToContext(_e,re,oe);let G=J,X=ve,ge=Ce,Pe=De;return J<0&&(G=0,ge+=Math.abs(J)),ve<0&&(X=0,Pe+=Math.abs(ve)),He.translate(-(qe.scale*G),-(Se.scale*X)),_e.transform(qe.scale,0,0,Se.scale,0,0),He.save(),this.clipBbox(_e,G,X,ge,Pe),_e.baseTransform=(0,R.getCurrentTransform)(_e.ctx),_e.executeOperatorList(fe),_e.endDrawing(),{canvas:Te.canvas,scaleX:qe.scale,scaleY:Se.scale,offsetX:G,offsetY:X}}getSizeAndScale(ne,fe,de){ne=Math.abs(ne);const te=Math.max(q.MAX_PATTERN_SIZE,fe);let se=Math.ceil(ne*de);return se>=te?se=te:de=se/ne,{scale:de,size:se}}clipBbox(ne,fe,de,te,se){const re=te-fe,ae=se-de;ne.ctx.rect(fe,de,re,ae),ne.current.updateRectMinMax((0,R.getCurrentTransform)(ne.ctx),[fe,de,te,se]),ne.clip(),ne.endPath()}setFillAndStrokeStyleToContext(ne,fe,de){const te=ne.ctx,se=ne.current;switch(fe){case ie.COLORED:const re=this.ctx;te.fillStyle=re.fillStyle,te.strokeStyle=re.strokeStyle,se.fillColor=re.fillStyle,se.strokeColor=re.strokeStyle;break;case ie.UNCOLORED:const ae=O.Util.makeHexColor(de[0],de[1],de[2]);te.fillStyle=ae,te.strokeStyle=ae,se.fillColor=ae,se.strokeColor=ae;break;default:throw new O.FormatError(`Unsupported paint type: ${fe}`)}}getPattern(ne,fe,de,te){let se=de;te!==B.SHADING&&(se=O.Util.transform(se,fe.baseTransform),this.matrix&&(se=O.Util.transform(se,this.matrix)));const re=this.createPatternCanvas(fe);let ae=new DOMMatrix(se);ae=ae.translate(re.offsetX,re.offsetY),ae=ae.scale(1/re.scaleX,1/re.scaleY);const oe=ne.createPattern(re.canvas,"repeat");return oe.setTransform(ae),oe}};$n(q,"MAX_PATTERN_SIZE",3e3);let ee=q;$.TilingPattern=ee},(A,$,H)=>{Object.defineProperty($,"__esModule",{value:!0}),$.convertBlackAndWhiteToRGBA=B,$.convertToRGBA=R,$.grayToRGBA=he;var O=H(1);function R(ue){switch(ue.kind){case O.ImageKind.GRAYSCALE_1BPP:return B(ue);case O.ImageKind.RGB_24BPP:return Y(ue)}return null}function B({src:ue,srcPos:le=0,dest:W,width:be,height:ce,nonBlackColor:Q=4294967295,inverseDecode:ie=!1}){const ee=O.FeatureTest.isLittleEndian?4278190080:255,[q,K]=ie?[Q,ee]:[ee,Q],ne=be>>3,fe=be&7,de=ue.length;W=new Uint32Array(W.buffer);let te=0;for(let se=0;se<ce;se++){for(const ae=le+ne;le<ae;le++){const oe=le<de?ue[le]:255;W[te++]=oe&128?K:q,W[te++]=oe&64?K:q,W[te++]=oe&32?K:q,W[te++]=oe&16?K:q,W[te++]=oe&8?K:q,W[te++]=oe&4?K:q,W[te++]=oe&2?K:q,W[te++]=oe&1?K:q}if(fe===0)continue;const re=le<de?ue[le++]:255;for(let ae=0;ae<fe;ae++)W[te++]=re&1<<7-ae?K:q}return{srcPos:le,destPos:te}}function Y({src:ue,srcPos:le=0,dest:W,destPos:be=0,width:ce,height:Q}){let ie=0;const ee=ue.length>>2,q=new Uint32Array(ue.buffer,le,ee);if(O.FeatureTest.isLittleEndian){for(;ie<ee-2;ie+=3,be+=4){const K=q[ie],ne=q[ie+1],fe=q[ie+2];W[be]=K|4278190080,W[be+1]=K>>>24|ne<<8|4278190080,W[be+2]=ne>>>16|fe<<16|4278190080,W[be+3]=fe>>>8|4278190080}for(let K=ie*4,ne=ue.length;K<ne;K+=3)W[be++]=ue[K]|ue[K+1]<<8|ue[K+2]<<16|4278190080}else{for(;ie<ee-2;ie+=3,be+=4){const K=q[ie],ne=q[ie+1],fe=q[ie+2];W[be]=K|255,W[be+1]=K<<24|ne>>>8|255,W[be+2]=ne<<16|fe>>>16|255,W[be+3]=fe<<8|255}for(let K=ie*4,ne=ue.length;K<ne;K+=3)W[be++]=ue[K]<<24|ue[K+1]<<16|ue[K+2]<<8|255}return{srcPos:le,destPos:be}}function he(ue,le){if(O.FeatureTest.isLittleEndian)for(let W=0,be=ue.length;W<be;W++)le[W]=ue[W]*65793|4278190080;else for(let W=0,be=ue.length;W<be;W++)le[W]=ue[W]*16843008|255}},(A,$)=>{Object.defineProperty($,"__esModule",{value:!0}),$.GlobalWorkerOptions=void 0;const H=Object.create(null);$.GlobalWorkerOptions=H,H.workerPort=null,H.workerSrc=""},(A,$,H)=>{var ue,Sa,wa,Gr;Object.defineProperty($,"__esModule",{value:!0}),$.MessageHandler=void 0;var O=H(1);const R={DATA:1,ERROR:2},B={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Y(ce){switch(ce instanceof Error||typeof ce=="object"&&ce!==null||(0,O.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),ce.name){case"AbortException":return new O.AbortException(ce.message);case"MissingPDFException":return new O.MissingPDFException(ce.message);case"PasswordException":return new O.PasswordException(ce.message,ce.code);case"UnexpectedResponseException":return new O.UnexpectedResponseException(ce.message,ce.status);case"UnknownErrorException":return new O.UnknownErrorException(ce.message,ce.details);default:return new O.UnknownErrorException(ce.message,ce.toString())}}class he{constructor(Q,ie,ee){it(this,ue);this.sourceName=Q,this.targetName=ie,this.comObj=ee,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=q=>{const K=q.data;if(K.targetName!==this.sourceName)return;if(K.stream){Ue(this,ue,wa).call(this,K);return}if(K.callback){const fe=K.callbackId,de=this.callbackCapabilities[fe];if(!de)throw new Error(`Cannot resolve callback ${fe}`);if(delete this.callbackCapabilities[fe],K.callback===R.DATA)de.resolve(K.data);else if(K.callback===R.ERROR)de.reject(Y(K.reason));else throw new Error("Unexpected callback case");return}const ne=this.actionHandler[K.action];if(!ne)throw new Error(`Unknown action from worker: ${K.action}`);if(K.callbackId){const fe=this.sourceName,de=K.sourceName;new Promise(function(te){te(ne(K.data))}).then(function(te){ee.postMessage({sourceName:fe,targetName:de,callback:R.DATA,callbackId:K.callbackId,data:te})},function(te){ee.postMessage({sourceName:fe,targetName:de,callback:R.ERROR,callbackId:K.callbackId,reason:Y(te)})});return}if(K.streamId){Ue(this,ue,Sa).call(this,K);return}ne(K.data)},ee.addEventListener("message",this._onComObjOnMessage)}on(Q,ie){const ee=this.actionHandler;if(ee[Q])throw new Error(`There is already an actionName called "${Q}"`);ee[Q]=ie}send(Q,ie,ee){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:Q,data:ie},ee)}sendWithPromise(Q,ie,ee){const q=this.callbackId++,K=new O.PromiseCapability;this.callbackCapabilities[q]=K;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:Q,callbackId:q,data:ie},ee)}catch(ne){K.reject(ne)}return K.promise}sendWithStream(Q,ie,ee,q){const K=this.streamId++,ne=this.sourceName,fe=this.targetName,de=this.comObj;return new ReadableStream({start:te=>{const se=new O.PromiseCapability;return this.streamControllers[K]={controller:te,startCall:se,pullCall:null,cancelCall:null,isClosed:!1},de.postMessage({sourceName:ne,targetName:fe,action:Q,streamId:K,data:ie,desiredSize:te.desiredSize},q),se.promise},pull:te=>{const se=new O.PromiseCapability;return this.streamControllers[K].pullCall=se,de.postMessage({sourceName:ne,targetName:fe,stream:B.PULL,streamId:K,desiredSize:te.desiredSize}),se.promise},cancel:te=>{(0,O.assert)(te instanceof Error,"cancel must have a valid reason");const se=new O.PromiseCapability;return this.streamControllers[K].cancelCall=se,this.streamControllers[K].isClosed=!0,de.postMessage({sourceName:ne,targetName:fe,stream:B.CANCEL,streamId:K,reason:Y(te)}),se.promise}},ee)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}ue=new WeakSet,Sa=function(Q){const ie=Q.streamId,ee=this.sourceName,q=Q.sourceName,K=this.comObj,ne=this,fe=this.actionHandler[Q.action],de={enqueue(te,se=1,re){if(this.isCancelled)return;const ae=this.desiredSize;this.desiredSize-=se,ae>0&&this.desiredSize<=0&&(this.sinkCapability=new O.PromiseCapability,this.ready=this.sinkCapability.promise),K.postMessage({sourceName:ee,targetName:q,stream:B.ENQUEUE,streamId:ie,chunk:te},re)},close(){this.isCancelled||(this.isCancelled=!0,K.postMessage({sourceName:ee,targetName:q,stream:B.CLOSE,streamId:ie}),delete ne.streamSinks[ie])},error(te){(0,O.assert)(te instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,K.postMessage({sourceName:ee,targetName:q,stream:B.ERROR,streamId:ie,reason:Y(te)}))},sinkCapability:new O.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:Q.desiredSize,ready:null};de.sinkCapability.resolve(),de.ready=de.sinkCapability.promise,this.streamSinks[ie]=de,new Promise(function(te){te(fe(Q.data,de))}).then(function(){K.postMessage({sourceName:ee,targetName:q,stream:B.START_COMPLETE,streamId:ie,success:!0})},function(te){K.postMessage({sourceName:ee,targetName:q,stream:B.START_COMPLETE,streamId:ie,reason:Y(te)})})},wa=function(Q){const ie=Q.streamId,ee=this.sourceName,q=Q.sourceName,K=this.comObj,ne=this.streamControllers[ie],fe=this.streamSinks[ie];switch(Q.stream){case B.START_COMPLETE:Q.success?ne.startCall.resolve():ne.startCall.reject(Y(Q.reason));break;case B.PULL_COMPLETE:Q.success?ne.pullCall.resolve():ne.pullCall.reject(Y(Q.reason));break;case B.PULL:if(!fe){K.postMessage({sourceName:ee,targetName:q,stream:B.PULL_COMPLETE,streamId:ie,success:!0});break}fe.desiredSize<=0&&Q.desiredSize>0&&fe.sinkCapability.resolve(),fe.desiredSize=Q.desiredSize,new Promise(function(de){var te;de((te=fe.onPull)==null?void 0:te.call(fe))}).then(function(){K.postMessage({sourceName:ee,targetName:q,stream:B.PULL_COMPLETE,streamId:ie,success:!0})},function(de){K.postMessage({sourceName:ee,targetName:q,stream:B.PULL_COMPLETE,streamId:ie,reason:Y(de)})});break;case B.ENQUEUE:if((0,O.assert)(ne,"enqueue should have stream controller"),ne.isClosed)break;ne.controller.enqueue(Q.chunk);break;case B.CLOSE:if((0,O.assert)(ne,"close should have stream controller"),ne.isClosed)break;ne.isClosed=!0,ne.controller.close(),Ue(this,ue,Gr).call(this,ne,ie);break;case B.ERROR:(0,O.assert)(ne,"error should have stream controller"),ne.controller.error(Y(Q.reason)),Ue(this,ue,Gr).call(this,ne,ie);break;case B.CANCEL_COMPLETE:Q.success?ne.cancelCall.resolve():ne.cancelCall.reject(Y(Q.reason)),Ue(this,ue,Gr).call(this,ne,ie);break;case B.CANCEL:if(!fe)break;new Promise(function(de){var te;de((te=fe.onCancel)==null?void 0:te.call(fe,Y(Q.reason)))}).then(function(){K.postMessage({sourceName:ee,targetName:q,stream:B.CANCEL_COMPLETE,streamId:ie,success:!0})},function(de){K.postMessage({sourceName:ee,targetName:q,stream:B.CANCEL_COMPLETE,streamId:ie,reason:Y(de)})}),fe.sinkCapability.reject(Y(Q.reason)),fe.isCancelled=!0,delete this.streamSinks[ie];break;default:throw new Error("Unexpected stream case")}},Gr=async function(Q,ie){var ee,q,K;await Promise.allSettled([(ee=Q.startCall)==null?void 0:ee.promise,(q=Q.pullCall)==null?void 0:q.promise,(K=Q.cancelCall)==null?void 0:K.promise]),delete this.streamControllers[ie]},$.MessageHandler=he},(A,$,H)=>{var B,Y;Object.defineProperty($,"__esModule",{value:!0}),$.Metadata=void 0;var O=H(1);class R{constructor({parsedData:ue,rawData:le}){it(this,B);it(this,Y);at(this,B,ue),at(this,Y,le)}getRaw(){return V(this,Y)}get(ue){return V(this,B).get(ue)??null}getAll(){return(0,O.objectFromMap)(V(this,B))}has(ue){return V(this,B).has(ue)}}B=new WeakMap,Y=new WeakMap,$.Metadata=R},(A,$,H)=>{var ue,le,W,be,ce,Q,Ti;Object.defineProperty($,"__esModule",{value:!0}),$.OptionalContentConfig=void 0;var O=H(1),R=H(8);const B=Symbol("INTERNAL");class Y{constructor(q,K){it(this,ue,!0);this.name=q,this.intent=K}get visible(){return V(this,ue)}_setVisible(q,K){q!==B&&(0,O.unreachable)("Internal method `_setVisible` called."),at(this,ue,K)}}ue=new WeakMap;class he{constructor(q){it(this,Q);it(this,le,null);it(this,W,new Map);it(this,be,null);it(this,ce,null);if(this.name=null,this.creator=null,q!==null){this.name=q.name,this.creator=q.creator,at(this,ce,q.order);for(const K of q.groups)V(this,W).set(K.id,new Y(K.name,K.intent));if(q.baseState==="OFF")for(const K of V(this,W).values())K._setVisible(B,!1);for(const K of q.on)V(this,W).get(K)._setVisible(B,!0);for(const K of q.off)V(this,W).get(K)._setVisible(B,!1);at(this,be,this.getHash())}}isVisible(q){if(V(this,W).size===0)return!0;if(!q)return(0,O.warn)("Optional content group not defined."),!0;if(q.type==="OCG")return V(this,W).has(q.id)?V(this,W).get(q.id).visible:((0,O.warn)(`Optional content group not found: ${q.id}`),!0);if(q.type==="OCMD"){if(q.expression)return Ue(this,Q,Ti).call(this,q.expression);if(!q.policy||q.policy==="AnyOn"){for(const K of q.ids){if(!V(this,W).has(K))return(0,O.warn)(`Optional content group not found: ${K}`),!0;if(V(this,W).get(K).visible)return!0}return!1}else if(q.policy==="AllOn"){for(const K of q.ids){if(!V(this,W).has(K))return(0,O.warn)(`Optional content group not found: ${K}`),!0;if(!V(this,W).get(K).visible)return!1}return!0}else if(q.policy==="AnyOff"){for(const K of q.ids){if(!V(this,W).has(K))return(0,O.warn)(`Optional content group not found: ${K}`),!0;if(!V(this,W).get(K).visible)return!0}return!1}else if(q.policy==="AllOff"){for(const K of q.ids){if(!V(this,W).has(K))return(0,O.warn)(`Optional content group not found: ${K}`),!0;if(V(this,W).get(K).visible)return!1}return!0}return(0,O.warn)(`Unknown optional content policy ${q.policy}.`),!0}return(0,O.warn)(`Unknown group type ${q.type}.`),!0}setVisibility(q,K=!0){if(!V(this,W).has(q)){(0,O.warn)(`Optional content group not found: ${q}`);return}V(this,W).get(q)._setVisible(B,!!K),at(this,le,null)}get hasInitialVisibility(){return V(this,be)===null||this.getHash()===V(this,be)}getOrder(){return V(this,W).size?V(this,ce)?V(this,ce).slice():[...V(this,W).keys()]:null}getGroups(){return V(this,W).size>0?(0,O.objectFromMap)(V(this,W)):null}getGroup(q){return V(this,W).get(q)||null}getHash(){if(V(this,le)!==null)return V(this,le);const q=new R.MurmurHash3_64;for(const[K,ne]of V(this,W))q.update(`${K}:${ne.visible}`);return at(this,le,q.hexdigest())}}le=new WeakMap,W=new WeakMap,be=new WeakMap,ce=new WeakMap,Q=new WeakSet,Ti=function(q){const K=q.length;if(K<2)return!0;const ne=q[0];for(let fe=1;fe<K;fe++){const de=q[fe];let te;if(Array.isArray(de))te=Ue(this,Q,Ti).call(this,de);else if(V(this,W).has(de))te=V(this,W).get(de).visible;else return(0,O.warn)(`Optional content group not found: ${de}`),!0;switch(ne){case"And":if(!te)return!1;break;case"Or":if(te)return!0;break;case"Not":return!te;default:return!0}}return ne==="And"},$.OptionalContentConfig=he},(A,$,H)=>{Object.defineProperty($,"__esModule",{value:!0}),$.PDFDataTransportStream=void 0;var O=H(1),R=H(6);class B{constructor({length:le,initialData:W,progressiveDone:be=!1,contentDispositionFilename:ce=null,disableRange:Q=!1,disableStream:ie=!1},ee){if((0,O.assert)(ee,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=be,this._contentDispositionFilename=ce,(W==null?void 0:W.length)>0){const q=W instanceof Uint8Array&&W.byteLength===W.buffer.byteLength?W.buffer:new Uint8Array(W).buffer;this._queuedChunks.push(q)}this._pdfDataRangeTransport=ee,this._isStreamingSupported=!ie,this._isRangeSupported=!Q,this._contentLength=le,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((q,K)=>{this._onReceiveData({begin:q,chunk:K})}),this._pdfDataRangeTransport.addProgressListener((q,K)=>{this._onProgress({loaded:q,total:K})}),this._pdfDataRangeTransport.addProgressiveReadListener(q=>{this._onReceiveData({chunk:q})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:le,chunk:W}){const be=W instanceof Uint8Array&&W.byteLength===W.buffer.byteLength?W.buffer:new Uint8Array(W).buffer;if(le===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(be):this._queuedChunks.push(be);else{const ce=this._rangeReaders.some(function(Q){return Q._begin!==le?!1:(Q._enqueue(be),!0)});(0,O.assert)(ce,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var le;return((le=this._fullRequestReader)==null?void 0:le._loaded)??0}_onProgress(le){var W,be,ce,Q;le.total===void 0?(be=(W=this._rangeReaders[0])==null?void 0:W.onProgress)==null||be.call(W,{loaded:le.loaded}):(Q=(ce=this._fullRequestReader)==null?void 0:ce.onProgress)==null||Q.call(ce,{loaded:le.loaded,total:le.total})}_onProgressiveDone(){var le;(le=this._fullRequestReader)==null||le.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(le){const W=this._rangeReaders.indexOf(le);W>=0&&this._rangeReaders.splice(W,1)}getFullReader(){(0,O.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const le=this._queuedChunks;return this._queuedChunks=null,new Y(this,le,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(le,W){if(W<=this._progressiveDataLength)return null;const be=new he(this,le,W);return this._pdfDataRangeTransport.requestDataRange(le,W),this._rangeReaders.push(be),be}cancelAllRequests(le){var W;(W=this._fullRequestReader)==null||W.cancel(le);for(const be of this._rangeReaders.slice(0))be.cancel(le);this._pdfDataRangeTransport.abort()}}$.PDFDataTransportStream=B;class Y{constructor(le,W,be=!1,ce=null){this._stream=le,this._done=be||!1,this._filename=(0,R.isPdfFile)(ce)?ce:null,this._queuedChunks=W||[],this._loaded=0;for(const Q of this._queuedChunks)this._loaded+=Q.byteLength;this._requests=[],this._headersReady=Promise.resolve(),le._fullRequestReader=this,this.onProgress=null}_enqueue(le){this._done||(this._requests.length>0?this._requests.shift().resolve({value:le,done:!1}):this._queuedChunks.push(le),this._loaded+=le.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const le=new O.PromiseCapability;return this._requests.push(le),le.promise}cancel(le){this._done=!0;for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class he{constructor(le,W,be){this._stream=le,this._begin=W,this._end=be,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(le){if(!this._done){if(this._requests.length===0)this._queuedChunk=le;else{this._requests.shift().resolve({value:le,done:!1});for(const be of this._requests)be.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const W=this._queuedChunk;return this._queuedChunk=null,{value:W,done:!1}}if(this._done)return{value:void 0,done:!0};const le=new O.PromiseCapability;return this._requests.push(le),le.promise}cancel(le){this._done=!0;for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(A,$,H)=>{Object.defineProperty($,"__esModule",{value:!0}),$.PDFFetchStream=void 0;var O=H(1),R=H(20);function B(be,ce,Q){return{method:"GET",headers:be,signal:Q.signal,mode:"cors",credentials:ce?"include":"same-origin",redirect:"follow"}}function Y(be){const ce=new Headers;for(const Q in be){const ie=be[Q];ie!==void 0&&ce.append(Q,ie)}return ce}function he(be){return be instanceof Uint8Array?be.buffer:be instanceof ArrayBuffer?be:((0,O.warn)(`getArrayBuffer - unexpected data format: ${be}`),new Uint8Array(be).buffer)}class ue{constructor(ce){this.source=ce,this.isHttp=/^https?:/i.test(ce.url),this.httpHeaders=this.isHttp&&ce.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var ce;return((ce=this._fullRequestReader)==null?void 0:ce._loaded)??0}getFullReader(){return(0,O.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new le(this),this._fullRequestReader}getRangeReader(ce,Q){if(Q<=this._progressiveDataLength)return null;const ie=new W(this,ce,Q);return this._rangeRequestReaders.push(ie),ie}cancelAllRequests(ce){var Q;(Q=this._fullRequestReader)==null||Q.cancel(ce);for(const ie of this._rangeRequestReaders.slice(0))ie.cancel(ce)}}$.PDFFetchStream=ue;class le{constructor(ce){this._stream=ce,this._reader=null,this._loaded=0,this._filename=null;const Q=ce.source;this._withCredentials=Q.withCredentials||!1,this._contentLength=Q.length,this._headersCapability=new O.PromiseCapability,this._disableRange=Q.disableRange||!1,this._rangeChunkSize=Q.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!Q.disableStream,this._isRangeSupported=!Q.disableRange,this._headers=Y(this._stream.httpHeaders);const ie=Q.url;fetch(ie,B(this._headers,this._withCredentials,this._abortController)).then(ee=>{if(!(0,R.validateResponseStatus)(ee.status))throw(0,R.createResponseStatusError)(ee.status,ie);this._reader=ee.body.getReader(),this._headersCapability.resolve();const q=fe=>ee.headers.get(fe),{allowRangeRequests:K,suggestedLength:ne}=(0,R.validateRangeRequestCapabilities)({getResponseHeader:q,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=K,this._contentLength=ne||this._contentLength,this._filename=(0,R.extractFilenameFromHeader)(q),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new O.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ie;await this._headersCapability.promise;const{value:ce,done:Q}=await this._reader.read();return Q?{value:ce,done:Q}:(this._loaded+=ce.byteLength,(ie=this.onProgress)==null||ie.call(this,{loaded:this._loaded,total:this._contentLength}),{value:he(ce),done:!1})}cancel(ce){var Q;(Q=this._reader)==null||Q.cancel(ce),this._abortController.abort()}}class W{constructor(ce,Q,ie){this._stream=ce,this._reader=null,this._loaded=0;const ee=ce.source;this._withCredentials=ee.withCredentials||!1,this._readCapability=new O.PromiseCapability,this._isStreamingSupported=!ee.disableStream,this._abortController=new AbortController,this._headers=Y(this._stream.httpHeaders),this._headers.append("Range",`bytes=${Q}-${ie-1}`);const q=ee.url;fetch(q,B(this._headers,this._withCredentials,this._abortController)).then(K=>{if(!(0,R.validateResponseStatus)(K.status))throw(0,R.createResponseStatusError)(K.status,q);this._readCapability.resolve(),this._reader=K.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ie;await this._readCapability.promise;const{value:ce,done:Q}=await this._reader.read();return Q?{value:ce,done:Q}:(this._loaded+=ce.byteLength,(ie=this.onProgress)==null||ie.call(this,{loaded:this._loaded}),{value:he(ce),done:!1})}cancel(ce){var Q;(Q=this._reader)==null||Q.cancel(ce),this._abortController.abort()}}},(A,$,H)=>{Object.defineProperty($,"__esModule",{value:!0}),$.createResponseStatusError=ue,$.extractFilenameFromHeader=he,$.validateRangeRequestCapabilities=Y,$.validateResponseStatus=le;var O=H(1),R=H(21),B=H(6);function Y({getResponseHeader:W,isHttp:be,rangeChunkSize:ce,disableRange:Q}){const ie={allowRangeRequests:!1,suggestedLength:void 0},ee=parseInt(W("Content-Length"),10);return!Number.isInteger(ee)||(ie.suggestedLength=ee,ee<=2*ce)||Q||!be||W("Accept-Ranges")!=="bytes"||(W("Content-Encoding")||"identity")!=="identity"||(ie.allowRangeRequests=!0),ie}function he(W){const be=W("Content-Disposition");if(be){let ce=(0,R.getFilenameFromContentDispositionHeader)(be);if(ce.includes("%"))try{ce=decodeURIComponent(ce)}catch{}if((0,B.isPdfFile)(ce))return ce}return null}function ue(W,be){return W===404||W===0&&be.startsWith("file:")?new O.MissingPDFException('Missing PDF "'+be+'".'):new O.UnexpectedResponseException(`Unexpected server response (${W}) while retrieving PDF "${be}".`,W)}function le(W){return W===200||W===206}},(A,$,H)=>{Object.defineProperty($,"__esModule",{value:!0}),$.getFilenameFromContentDispositionHeader=R;var O=H(1);function R(B){let Y=!0,he=ue("filename\\*","i").exec(B);if(he){he=he[1];let ee=ce(he);return ee=unescape(ee),ee=Q(ee),ee=ie(ee),W(ee)}if(he=be(B),he){const ee=ie(he);return W(ee)}if(he=ue("filename","i").exec(B),he){he=he[1];let ee=ce(he);return ee=ie(ee),W(ee)}function ue(ee,q){return new RegExp("(?:^|;)\\s*"+ee+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',q)}function le(ee,q){if(ee){if(!/^[\x00-\xFF]+$/.test(q))return q;try{const K=new TextDecoder(ee,{fatal:!0}),ne=(0,O.stringToBytes)(q);q=K.decode(ne),Y=!1}catch{}}return q}function W(ee){return Y&&/[\x80-\xff]/.test(ee)&&(ee=le("utf-8",ee),Y&&(ee=le("iso-8859-1",ee))),ee}function be(ee){const q=[];let K;const ne=ue("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(K=ne.exec(ee))!==null;){let[,de,te,se]=K;if(de=parseInt(de,10),de in q){if(de===0)break;continue}q[de]=[te,se]}const fe=[];for(let de=0;de<q.length&&de in q;++de){let[te,se]=q[de];se=ce(se),te&&(se=unescape(se),de===0&&(se=Q(se))),fe.push(se)}return fe.join("")}function ce(ee){if(ee.startsWith('"')){const q=ee.slice(1).split('\\"');for(let K=0;K<q.length;++K){const ne=q[K].indexOf('"');ne!==-1&&(q[K]=q[K].slice(0,ne),q.length=K+1),q[K]=q[K].replaceAll(/\\(.)/g,"$1")}ee=q.join('"')}return ee}function Q(ee){const q=ee.indexOf("'");if(q===-1)return ee;const K=ee.slice(0,q),fe=ee.slice(q+1).replace(/^[^']*'/,"");return le(K,fe)}function ie(ee){return!ee.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(ee)?ee:ee.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(q,K,ne,fe){if(ne==="q"||ne==="Q")return fe=fe.replaceAll("_"," "),fe=fe.replaceAll(/=([0-9a-fA-F]{2})/g,function(de,te){return String.fromCharCode(parseInt(te,16))}),le(K,fe);try{fe=atob(fe)}catch{}return le(K,fe)})}return""}},(A,$,H)=>{Object.defineProperty($,"__esModule",{value:!0}),$.PDFNetworkStream=void 0;var O=H(1),R=H(20);const B=200,Y=206;function he(ce){const Q=ce.response;return typeof Q!="string"?Q:(0,O.stringToBytes)(Q).buffer}class ue{constructor(Q,ie={}){this.url=Q,this.isHttp=/^https?:/i.test(Q),this.httpHeaders=this.isHttp&&ie.httpHeaders||Object.create(null),this.withCredentials=ie.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(Q,ie,ee){const q={begin:Q,end:ie};for(const K in ee)q[K]=ee[K];return this.request(q)}requestFull(Q){return this.request(Q)}request(Q){const ie=new XMLHttpRequest,ee=this.currXhrId++,q=this.pendingRequests[ee]={xhr:ie};ie.open("GET",this.url),ie.withCredentials=this.withCredentials;for(const K in this.httpHeaders){const ne=this.httpHeaders[K];ne!==void 0&&ie.setRequestHeader(K,ne)}return this.isHttp&&"begin"in Q&&"end"in Q?(ie.setRequestHeader("Range",`bytes=${Q.begin}-${Q.end-1}`),q.expectedStatus=Y):q.expectedStatus=B,ie.responseType="arraybuffer",Q.onError&&(ie.onerror=function(K){Q.onError(ie.status)}),ie.onreadystatechange=this.onStateChange.bind(this,ee),ie.onprogress=this.onProgress.bind(this,ee),q.onHeadersReceived=Q.onHeadersReceived,q.onDone=Q.onDone,q.onError=Q.onError,q.onProgress=Q.onProgress,ie.send(null),ee}onProgress(Q,ie){var q;const ee=this.pendingRequests[Q];ee&&((q=ee.onProgress)==null||q.call(ee,ie))}onStateChange(Q,ie){var de,te,se;const ee=this.pendingRequests[Q];if(!ee)return;const q=ee.xhr;if(q.readyState>=2&&ee.onHeadersReceived&&(ee.onHeadersReceived(),delete ee.onHeadersReceived),q.readyState!==4||!(Q in this.pendingRequests))return;if(delete this.pendingRequests[Q],q.status===0&&this.isHttp){(de=ee.onError)==null||de.call(ee,q.status);return}const K=q.status||B;if(!(K===B&&ee.expectedStatus===Y)&&K!==ee.expectedStatus){(te=ee.onError)==null||te.call(ee,q.status);return}const fe=he(q);if(K===Y){const re=q.getResponseHeader("Content-Range"),ae=/bytes (\d+)-(\d+)\/(\d+)/.exec(re);ee.onDone({begin:parseInt(ae[1],10),chunk:fe})}else fe?ee.onDone({begin:0,chunk:fe}):(se=ee.onError)==null||se.call(ee,q.status)}getRequestXhr(Q){return this.pendingRequests[Q].xhr}isPendingRequest(Q){return Q in this.pendingRequests}abortRequest(Q){const ie=this.pendingRequests[Q].xhr;delete this.pendingRequests[Q],ie.abort()}}class le{constructor(Q){this._source=Q,this._manager=new ue(Q.url,{httpHeaders:Q.httpHeaders,withCredentials:Q.withCredentials}),this._rangeChunkSize=Q.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(Q){const ie=this._rangeRequestReaders.indexOf(Q);ie>=0&&this._rangeRequestReaders.splice(ie,1)}getFullReader(){return(0,O.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new W(this._manager,this._source),this._fullRequestReader}getRangeReader(Q,ie){const ee=new be(this._manager,Q,ie);return ee.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(ee),ee}cancelAllRequests(Q){var ie;(ie=this._fullRequestReader)==null||ie.cancel(Q);for(const ee of this._rangeRequestReaders.slice(0))ee.cancel(Q)}}$.PDFNetworkStream=le;class W{constructor(Q,ie){this._manager=Q;const ee={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=ie.url,this._fullRequestId=Q.requestFull(ee),this._headersReceivedCapability=new O.PromiseCapability,this._disableRange=ie.disableRange||!1,this._contentLength=ie.length,this._rangeChunkSize=ie.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const Q=this._fullRequestId,ie=this._manager.getRequestXhr(Q),ee=ne=>ie.getResponseHeader(ne),{allowRangeRequests:q,suggestedLength:K}=(0,R.validateRangeRequestCapabilities)({getResponseHeader:ee,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});q&&(this._isRangeSupported=!0),this._contentLength=K||this._contentLength,this._filename=(0,R.extractFilenameFromHeader)(ee),this._isRangeSupported&&this._manager.abortRequest(Q),this._headersReceivedCapability.resolve()}_onDone(Q){if(Q&&(this._requests.length>0?this._requests.shift().resolve({value:Q.chunk,done:!1}):this._cachedChunks.push(Q.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const ie of this._requests)ie.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(Q){this._storedError=(0,R.createResponseStatusError)(Q,this._url),this._headersReceivedCapability.reject(this._storedError);for(const ie of this._requests)ie.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(Q){var ie;(ie=this.onProgress)==null||ie.call(this,{loaded:Q.loaded,total:Q.lengthComputable?Q.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const Q=new O.PromiseCapability;return this._requests.push(Q),Q.promise}cancel(Q){this._done=!0,this._headersReceivedCapability.reject(Q);for(const ie of this._requests)ie.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class be{constructor(Q,ie,ee){this._manager=Q;const q={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=Q.url,this._requestId=Q.requestRange(ie,ee,q),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var Q;(Q=this.onClosed)==null||Q.call(this,this)}_onDone(Q){const ie=Q.chunk;this._requests.length>0?this._requests.shift().resolve({value:ie,done:!1}):this._queuedChunk=ie,this._done=!0;for(const ee of this._requests)ee.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(Q){this._storedError=(0,R.createResponseStatusError)(Q,this._url);for(const ie of this._requests)ie.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(Q){var ie;this.isStreamingSupported||(ie=this.onProgress)==null||ie.call(this,{loaded:Q.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const ie=this._queuedChunk;return this._queuedChunk=null,{value:ie,done:!1}}if(this._done)return{value:void 0,done:!0};const Q=new O.PromiseCapability;return this._requests.push(Q),Q.promise}cancel(Q){this._done=!0;for(const ie of this._requests)ie.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(A,$,H)=>{Object.defineProperty($,"__esModule",{value:!0}),$.PDFNodeStream=void 0;var O=H(1),R=H(20);const B=/^file:\/\/\/[a-zA-Z]:\//;function Y(ee){const q=require$$5,K=q.parse(ee);return K.protocol==="file:"||K.host?K:/^[a-z]:[/\\]/i.test(ee)?q.parse(`file:///${ee}`):(K.host||(K.protocol="file:"),K)}class he{constructor(q){this.source=q,this.url=Y(q.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&q.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var q;return((q=this._fullRequestReader)==null?void 0:q._loaded)??0}getFullReader(){return(0,O.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Q(this):new be(this),this._fullRequestReader}getRangeReader(q,K){if(K<=this._progressiveDataLength)return null;const ne=this.isFsUrl?new ie(this,q,K):new ce(this,q,K);return this._rangeRequestReaders.push(ne),ne}cancelAllRequests(q){var K;(K=this._fullRequestReader)==null||K.cancel(q);for(const ne of this._rangeRequestReaders.slice(0))ne.cancel(q)}}$.PDFNodeStream=he;class ue{constructor(q){this._url=q.url,this._done=!1,this._storedError=null,this.onProgress=null;const K=q.source;this._contentLength=K.length,this._loaded=0,this._filename=null,this._disableRange=K.disableRange||!1,this._rangeChunkSize=K.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!K.disableStream,this._isRangeSupported=!K.disableRange,this._readableStream=null,this._readCapability=new O.PromiseCapability,this._headersCapability=new O.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ne;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const q=this._readableStream.read();return q===null?(this._readCapability=new O.PromiseCapability,this.read()):(this._loaded+=q.length,(ne=this.onProgress)==null||ne.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(q).buffer,done:!1})}cancel(q){if(!this._readableStream){this._error(q);return}this._readableStream.destroy(q)}_error(q){this._storedError=q,this._readCapability.resolve()}_setReadableStream(q){this._readableStream=q,q.on("readable",()=>{this._readCapability.resolve()}),q.on("end",()=>{q.destroy(),this._done=!0,this._readCapability.resolve()}),q.on("error",K=>{this._error(K)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new O.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class le{constructor(q){this._url=q.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new O.PromiseCapability;const K=q.source;this._isStreamingSupported=!K.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ne;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const q=this._readableStream.read();return q===null?(this._readCapability=new O.PromiseCapability,this.read()):(this._loaded+=q.length,(ne=this.onProgress)==null||ne.call(this,{loaded:this._loaded}),{value:new Uint8Array(q).buffer,done:!1})}cancel(q){if(!this._readableStream){this._error(q);return}this._readableStream.destroy(q)}_error(q){this._storedError=q,this._readCapability.resolve()}_setReadableStream(q){this._readableStream=q,q.on("readable",()=>{this._readCapability.resolve()}),q.on("end",()=>{q.destroy(),this._done=!0,this._readCapability.resolve()}),q.on("error",K=>{this._error(K)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function W(ee,q){return{protocol:ee.protocol,auth:ee.auth,host:ee.hostname,port:ee.port,path:ee.path,method:"GET",headers:q}}class be extends ue{constructor(q){super(q);const K=ne=>{if(ne.statusCode===404){const se=new O.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=se,this._headersCapability.reject(se);return}this._headersCapability.resolve(),this._setReadableStream(ne);const fe=se=>this._readableStream.headers[se.toLowerCase()],{allowRangeRequests:de,suggestedLength:te}=(0,R.validateRangeRequestCapabilities)({getResponseHeader:fe,isHttp:q.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=de,this._contentLength=te||this._contentLength,this._filename=(0,R.extractFilenameFromHeader)(fe)};if(this._request=null,this._url.protocol==="http:"){const ne=require$$5;this._request=ne.request(W(this._url,q.httpHeaders),K)}else{const ne=require$$5;this._request=ne.request(W(this._url,q.httpHeaders),K)}this._request.on("error",ne=>{this._storedError=ne,this._headersCapability.reject(ne)}),this._request.end()}}class ce extends le{constructor(q,K,ne){super(q),this._httpHeaders={};for(const de in q.httpHeaders){const te=q.httpHeaders[de];te!==void 0&&(this._httpHeaders[de]=te)}this._httpHeaders.Range=`bytes=${K}-${ne-1}`;const fe=de=>{if(de.statusCode===404){const te=new O.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=te;return}this._setReadableStream(de)};if(this._request=null,this._url.protocol==="http:"){const de=require$$5;this._request=de.request(W(this._url,this._httpHeaders),fe)}else{const de=require$$5;this._request=de.request(W(this._url,this._httpHeaders),fe)}this._request.on("error",de=>{this._storedError=de}),this._request.end()}}class Q extends ue{constructor(q){super(q);let K=decodeURIComponent(this._url.path);B.test(this._url.href)&&(K=K.replace(/^\//,""));const ne=require$$5;ne.lstat(K,(fe,de)=>{if(fe){fe.code==="ENOENT"&&(fe=new O.MissingPDFException(`Missing PDF "${K}".`)),this._storedError=fe,this._headersCapability.reject(fe);return}this._contentLength=de.size,this._setReadableStream(ne.createReadStream(K)),this._headersCapability.resolve()})}}class ie extends le{constructor(q,K,ne){super(q);let fe=decodeURIComponent(this._url.path);B.test(this._url.href)&&(fe=fe.replace(/^\//,""));const de=require$$5;this._setReadableStream(de.createReadStream(fe,{start:K,end:ne-1}))}}},(A,$,H)=>{Object.defineProperty($,"__esModule",{value:!0}),$.SVGGraphics=void 0;var O=H(6),R=H(1);const B={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},Y="http://www.w3.org/XML/1998/namespace",he="http://www.w3.org/1999/xlink",ue=["butt","round","square"],le=["miter","round","bevel"],W=function(de,te="",se=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!se)return URL.createObjectURL(new Blob([de],{type:te}));const re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let ae=`data:${te};base64,`;for(let oe=0,Ee=de.length;oe<Ee;oe+=3){const J=de[oe]&255,ve=de[oe+1]&255,Ce=de[oe+2]&255,De=J>>2,Me=(J&3)<<4|ve>>4,Ne=oe+1<Ee?(ve&15)<<2|Ce>>6:64,Ie=oe+2<Ee?Ce&63:64;ae+=re[De]+re[Me]+re[Ne]+re[Ie]}return ae},be=function(){const de=new Uint8Array([137,80,78,71,13,10,26,10]),te=12,se=new Int32Array(256);for(let Ce=0;Ce<256;Ce++){let De=Ce;for(let Me=0;Me<8;Me++)De=De&1?3988292384^De>>1&2147483647:De>>1&2147483647;se[Ce]=De}function re(Ce,De,Me){let Ne=-1;for(let Ie=De;Ie<Me;Ie++){const qe=(Ne^Ce[Ie])&255,Se=se[qe];Ne=Ne>>>8^Se}return Ne^-1}function ae(Ce,De,Me,Ne){let Ie=Ne;const qe=De.length;Me[Ie]=qe>>24&255,Me[Ie+1]=qe>>16&255,Me[Ie+2]=qe>>8&255,Me[Ie+3]=qe&255,Ie+=4,Me[Ie]=Ce.charCodeAt(0)&255,Me[Ie+1]=Ce.charCodeAt(1)&255,Me[Ie+2]=Ce.charCodeAt(2)&255,Me[Ie+3]=Ce.charCodeAt(3)&255,Ie+=4,Me.set(De,Ie),Ie+=De.length;const Se=re(Me,Ne+4,Ie);Me[Ie]=Se>>24&255,Me[Ie+1]=Se>>16&255,Me[Ie+2]=Se>>8&255,Me[Ie+3]=Se&255}function oe(Ce,De,Me){let Ne=1,Ie=0;for(let qe=De;qe<Me;++qe)Ne=(Ne+(Ce[qe]&255))%65521,Ie=(Ie+Ne)%65521;return Ie<<16|Ne}function Ee(Ce){if(!R.isNodeJS)return J(Ce);try{const De=parseInt(process.versions.node)>=8?Ce:Buffer.from(Ce),Me=require$$5.deflateSync(De,{level:9});return Me instanceof Uint8Array?Me:new Uint8Array(Me)}catch(De){(0,R.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+De)}return J(Ce)}function J(Ce){let De=Ce.length;const Me=65535,Ne=Math.ceil(De/Me),Ie=new Uint8Array(2+De+Ne*5+4);let qe=0;Ie[qe++]=120,Ie[qe++]=156;let Se=0;for(;De>Me;)Ie[qe++]=0,Ie[qe++]=255,Ie[qe++]=255,Ie[qe++]=0,Ie[qe++]=0,Ie.set(Ce.subarray(Se,Se+Me),qe),qe+=Me,Se+=Me,De-=Me;Ie[qe++]=1,Ie[qe++]=De&255,Ie[qe++]=De>>8&255,Ie[qe++]=~De&65535&255,Ie[qe++]=(~De&65535)>>8&255,Ie.set(Ce.subarray(Se),qe),qe+=Ce.length-Se;const Te=oe(Ce,0,Ce.length);return Ie[qe++]=Te>>24&255,Ie[qe++]=Te>>16&255,Ie[qe++]=Te>>8&255,Ie[qe++]=Te&255,Ie}function ve(Ce,De,Me,Ne){const Ie=Ce.width,qe=Ce.height;let Se,Te,He;const _e=Ce.data;switch(De){case R.ImageKind.GRAYSCALE_1BPP:Te=0,Se=1,He=Ie+7>>3;break;case R.ImageKind.RGB_24BPP:Te=2,Se=8,He=Ie*3;break;case R.ImageKind.RGBA_32BPP:Te=6,Se=8,He=Ie*4;break;default:throw new Error("invalid format")}const G=new Uint8Array((1+He)*qe);let X=0,ge=0;for(let ot=0;ot<qe;++ot)G[X++]=0,G.set(_e.subarray(ge,ge+He),X),ge+=He,X+=He;if(De===R.ImageKind.GRAYSCALE_1BPP&&Ne){X=0;for(let ot=0;ot<qe;ot++){X++;for(let st=0;st<He;st++)G[X++]^=255}}const Pe=new Uint8Array([Ie>>24&255,Ie>>16&255,Ie>>8&255,Ie&255,qe>>24&255,qe>>16&255,qe>>8&255,qe&255,Se,Te,0,0,0]),Ae=Ee(G),ke=de.length+te*3+Pe.length+Ae.length,Oe=new Uint8Array(ke);let Qe=0;return Oe.set(de,Qe),Qe+=de.length,ae("IHDR",Pe,Oe,Qe),Qe+=te+Pe.length,ae("IDATA",Ae,Oe,Qe),Qe+=te+Ae.length,ae("IEND",new Uint8Array(0),Oe,Qe),W(Oe,"image/png",Me)}return function(De,Me,Ne){const Ie=De.kind===void 0?R.ImageKind.GRAYSCALE_1BPP:De.kind;return ve(De,Ie,Me,Ne)}}();class ce{constructor(){this.fontSizeScale=1,this.fontWeight=B.fontWeight,this.fontSize=0,this.textMatrix=R.IDENTITY_MATRIX,this.fontMatrix=R.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=R.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=B.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(te,se){this.x=te,this.y=se}}function Q(de){let te=[];const se=[];for(const re of de){if(re.fn==="save"){te.push({fnId:92,fn:"group",items:[]}),se.push(te),te=te.at(-1).items;continue}re.fn==="restore"?te=se.pop():te.push(re)}return te}function ie(de){if(Number.isInteger(de))return de.toString();const te=de.toFixed(10);let se=te.length-1;if(te[se]!=="0")return te;do se--;while(te[se]==="0");return te.substring(0,te[se]==="."?se:se+1)}function ee(de){if(de[4]===0&&de[5]===0){if(de[1]===0&&de[2]===0)return de[0]===1&&de[3]===1?"":`scale(${ie(de[0])} ${ie(de[3])})`;if(de[0]===de[3]&&de[1]===-de[2]){const te=Math.acos(de[0])*180/Math.PI;return`rotate(${ie(te)})`}}else if(de[0]===1&&de[1]===0&&de[2]===0&&de[3]===1)return`translate(${ie(de[4])} ${ie(de[5])})`;return`matrix(${ie(de[0])} ${ie(de[1])} ${ie(de[2])} ${ie(de[3])} ${ie(de[4])} ${ie(de[5])})`}let q=0,K=0,ne=0;class fe{constructor(te,se,re=!1){(0,O.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new O.DOMSVGFactory,this.current=new ce,this.transformMatrix=R.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=te,this.objs=se,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!re,this._operatorIdMapping=[];for(const ae in R.OPS)this._operatorIdMapping[R.OPS[ae]]=ae}getObject(te,se=null){return typeof te=="string"?te.startsWith("g_")?this.commonObjs.get(te):this.objs.get(te):se}save(){this.transformStack.push(this.transformMatrix);const te=this.current;this.extraStack.push(te),this.current=te.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(te){this.save(),this.executeOpTree(te),this.restore()}loadDependencies(te){const se=te.fnArray,re=te.argsArray;for(let ae=0,oe=se.length;ae<oe;ae++)if(se[ae]===R.OPS.dependency)for(const Ee of re[ae]){const J=Ee.startsWith("g_")?this.commonObjs:this.objs,ve=new Promise(Ce=>{J.get(Ee,Ce)});this.current.dependencies.push(ve)}return Promise.all(this.current.dependencies)}transform(te,se,re,ae,oe,Ee){const J=[te,se,re,ae,oe,Ee];this.transformMatrix=R.Util.transform(this.transformMatrix,J),this.tgrp=null}getSVG(te,se){this.viewport=se;const re=this._initialize(se);return this.loadDependencies(te).then(()=>(this.transformMatrix=R.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(te)),re))}convertOpList(te){const se=this._operatorIdMapping,re=te.argsArray,ae=te.fnArray,oe=[];for(let Ee=0,J=ae.length;Ee<J;Ee++){const ve=ae[Ee];oe.push({fnId:ve,fn:se[ve],args:re[Ee]})}return Q(oe)}executeOpTree(te){for(const se of te){const re=se.fn,ae=se.fnId,oe=se.args;switch(ae|0){case R.OPS.beginText:this.beginText();break;case R.OPS.dependency:break;case R.OPS.setLeading:this.setLeading(oe);break;case R.OPS.setLeadingMoveText:this.setLeadingMoveText(oe[0],oe[1]);break;case R.OPS.setFont:this.setFont(oe);break;case R.OPS.showText:this.showText(oe[0]);break;case R.OPS.showSpacedText:this.showText(oe[0]);break;case R.OPS.endText:this.endText();break;case R.OPS.moveText:this.moveText(oe[0],oe[1]);break;case R.OPS.setCharSpacing:this.setCharSpacing(oe[0]);break;case R.OPS.setWordSpacing:this.setWordSpacing(oe[0]);break;case R.OPS.setHScale:this.setHScale(oe[0]);break;case R.OPS.setTextMatrix:this.setTextMatrix(oe[0],oe[1],oe[2],oe[3],oe[4],oe[5]);break;case R.OPS.setTextRise:this.setTextRise(oe[0]);break;case R.OPS.setTextRenderingMode:this.setTextRenderingMode(oe[0]);break;case R.OPS.setLineWidth:this.setLineWidth(oe[0]);break;case R.OPS.setLineJoin:this.setLineJoin(oe[0]);break;case R.OPS.setLineCap:this.setLineCap(oe[0]);break;case R.OPS.setMiterLimit:this.setMiterLimit(oe[0]);break;case R.OPS.setFillRGBColor:this.setFillRGBColor(oe[0],oe[1],oe[2]);break;case R.OPS.setStrokeRGBColor:this.setStrokeRGBColor(oe[0],oe[1],oe[2]);break;case R.OPS.setStrokeColorN:this.setStrokeColorN(oe);break;case R.OPS.setFillColorN:this.setFillColorN(oe);break;case R.OPS.shadingFill:this.shadingFill(oe[0]);break;case R.OPS.setDash:this.setDash(oe[0],oe[1]);break;case R.OPS.setRenderingIntent:this.setRenderingIntent(oe[0]);break;case R.OPS.setFlatness:this.setFlatness(oe[0]);break;case R.OPS.setGState:this.setGState(oe[0]);break;case R.OPS.fill:this.fill();break;case R.OPS.eoFill:this.eoFill();break;case R.OPS.stroke:this.stroke();break;case R.OPS.fillStroke:this.fillStroke();break;case R.OPS.eoFillStroke:this.eoFillStroke();break;case R.OPS.clip:this.clip("nonzero");break;case R.OPS.eoClip:this.clip("evenodd");break;case R.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case R.OPS.paintImageXObject:this.paintImageXObject(oe[0]);break;case R.OPS.paintInlineImageXObject:this.paintInlineImageXObject(oe[0]);break;case R.OPS.paintImageMaskXObject:this.paintImageMaskXObject(oe[0]);break;case R.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(oe[0],oe[1]);break;case R.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case R.OPS.closePath:this.closePath();break;case R.OPS.closeStroke:this.closeStroke();break;case R.OPS.closeFillStroke:this.closeFillStroke();break;case R.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case R.OPS.nextLine:this.nextLine();break;case R.OPS.transform:this.transform(oe[0],oe[1],oe[2],oe[3],oe[4],oe[5]);break;case R.OPS.constructPath:this.constructPath(oe[0],oe[1]);break;case R.OPS.endPath:this.endPath();break;case 92:this.group(se.items);break;default:(0,R.warn)(`Unimplemented operator ${re}`);break}}}setWordSpacing(te){this.current.wordSpacing=te}setCharSpacing(te){this.current.charSpacing=te}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(te,se,re,ae,oe,Ee){const J=this.current;J.textMatrix=J.lineMatrix=[te,se,re,ae,oe,Ee],J.textMatrixScale=Math.hypot(te,se),J.x=J.lineX=0,J.y=J.lineY=0,J.xcoords=[],J.ycoords=[],J.tspan=this.svgFactory.createElement("svg:tspan"),J.tspan.setAttributeNS(null,"font-family",J.fontFamily),J.tspan.setAttributeNS(null,"font-size",`${ie(J.fontSize)}px`),J.tspan.setAttributeNS(null,"y",ie(-J.y)),J.txtElement=this.svgFactory.createElement("svg:text"),J.txtElement.append(J.tspan)}beginText(){const te=this.current;te.x=te.lineX=0,te.y=te.lineY=0,te.textMatrix=R.IDENTITY_MATRIX,te.lineMatrix=R.IDENTITY_MATRIX,te.textMatrixScale=1,te.tspan=this.svgFactory.createElement("svg:tspan"),te.txtElement=this.svgFactory.createElement("svg:text"),te.txtgrp=this.svgFactory.createElement("svg:g"),te.xcoords=[],te.ycoords=[]}moveText(te,se){const re=this.current;re.x=re.lineX+=te,re.y=re.lineY+=se,re.xcoords=[],re.ycoords=[],re.tspan=this.svgFactory.createElement("svg:tspan"),re.tspan.setAttributeNS(null,"font-family",re.fontFamily),re.tspan.setAttributeNS(null,"font-size",`${ie(re.fontSize)}px`),re.tspan.setAttributeNS(null,"y",ie(-re.y))}showText(te){const se=this.current,re=se.font,ae=se.fontSize;if(ae===0)return;const oe=se.fontSizeScale,Ee=se.charSpacing,J=se.wordSpacing,ve=se.fontDirection,Ce=se.textHScale*ve,De=re.vertical,Me=De?1:-1,Ne=re.defaultVMetrics,Ie=ae*se.fontMatrix[0];let qe=0;for(const He of te){if(He===null){qe+=ve*J;continue}else if(typeof He=="number"){qe+=Me*He*ae/1e3;continue}const _e=(He.isSpace?J:0)+Ee,G=He.fontChar;let X,ge,Pe=He.width;if(De){let ke;const Oe=He.vmetric||Ne;ke=He.vmetric?Oe[1]:Pe*.5,ke=-ke*Ie;const Qe=Oe[2]*Ie;Pe=Oe?-Oe[0]:Pe,X=ke/oe,ge=(qe+Qe)/oe}else X=qe/oe,ge=0;(He.isInFont||re.missingFile)&&(se.xcoords.push(se.x+X),De&&se.ycoords.push(-se.y+ge),se.tspan.textContent+=G);const Ae=De?Pe*Ie-_e*ve:Pe*Ie+_e*ve;qe+=Ae}se.tspan.setAttributeNS(null,"x",se.xcoords.map(ie).join(" ")),De?se.tspan.setAttributeNS(null,"y",se.ycoords.map(ie).join(" ")):se.tspan.setAttributeNS(null,"y",ie(-se.y)),De?se.y-=qe:se.x+=qe*Ce,se.tspan.setAttributeNS(null,"font-family",se.fontFamily),se.tspan.setAttributeNS(null,"font-size",`${ie(se.fontSize)}px`),se.fontStyle!==B.fontStyle&&se.tspan.setAttributeNS(null,"font-style",se.fontStyle),se.fontWeight!==B.fontWeight&&se.tspan.setAttributeNS(null,"font-weight",se.fontWeight);const Se=se.textRenderingMode&R.TextRenderingMode.FILL_STROKE_MASK;if(Se===R.TextRenderingMode.FILL||Se===R.TextRenderingMode.FILL_STROKE?(se.fillColor!==B.fillColor&&se.tspan.setAttributeNS(null,"fill",se.fillColor),se.fillAlpha<1&&se.tspan.setAttributeNS(null,"fill-opacity",se.fillAlpha)):se.textRenderingMode===R.TextRenderingMode.ADD_TO_PATH?se.tspan.setAttributeNS(null,"fill","transparent"):se.tspan.setAttributeNS(null,"fill","none"),Se===R.TextRenderingMode.STROKE||Se===R.TextRenderingMode.FILL_STROKE){const He=1/(se.textMatrixScale||1);this._setStrokeAttributes(se.tspan,He)}let Te=se.textMatrix;se.textRise!==0&&(Te=Te.slice(),Te[5]+=se.textRise),se.txtElement.setAttributeNS(null,"transform",`${ee(Te)} scale(${ie(Ce)}, -1)`),se.txtElement.setAttributeNS(Y,"xml:space","preserve"),se.txtElement.append(se.tspan),se.txtgrp.append(se.txtElement),this._ensureTransformGroup().append(se.txtElement)}setLeadingMoveText(te,se){this.setLeading(-se),this.moveText(te,se)}addFontStyle(te){if(!te.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const se=W(te.data,te.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${te.loadedName}"; src: url(${se}); }
`}setFont(te){const se=this.current,re=this.commonObjs.get(te[0]);let ae=te[1];se.font=re,this.embedFonts&&!re.missingFile&&!this.embeddedFonts[re.loadedName]&&(this.addFontStyle(re),this.embeddedFonts[re.loadedName]=re),se.fontMatrix=re.fontMatrix||R.FONT_IDENTITY_MATRIX;let oe="normal";re.black?oe="900":re.bold&&(oe="bold");const Ee=re.italic?"italic":"normal";ae<0?(ae=-ae,se.fontDirection=-1):se.fontDirection=1,se.fontSize=ae,se.fontFamily=re.loadedName,se.fontWeight=oe,se.fontStyle=Ee,se.tspan=this.svgFactory.createElement("svg:tspan"),se.tspan.setAttributeNS(null,"y",ie(-se.y)),se.xcoords=[],se.ycoords=[]}endText(){var se;const te=this.current;te.textRenderingMode&R.TextRenderingMode.ADD_TO_PATH_FLAG&&((se=te.txtElement)!=null&&se.hasChildNodes())&&(te.element=te.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(te){te>0&&(this.current.lineWidth=te)}setLineCap(te){this.current.lineCap=ue[te]}setLineJoin(te){this.current.lineJoin=le[te]}setMiterLimit(te){this.current.miterLimit=te}setStrokeAlpha(te){this.current.strokeAlpha=te}setStrokeRGBColor(te,se,re){this.current.strokeColor=R.Util.makeHexColor(te,se,re)}setFillAlpha(te){this.current.fillAlpha=te}setFillRGBColor(te,se,re){this.current.fillColor=R.Util.makeHexColor(te,se,re),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(te){this.current.strokeColor=this._makeColorN_Pattern(te)}setFillColorN(te){this.current.fillColor=this._makeColorN_Pattern(te)}shadingFill(te){const{width:se,height:re}=this.viewport,ae=R.Util.inverseTransform(this.transformMatrix),[oe,Ee,J,ve]=R.Util.getAxialAlignedBoundingBox([0,0,se,re],ae),Ce=this.svgFactory.createElement("svg:rect");Ce.setAttributeNS(null,"x",oe),Ce.setAttributeNS(null,"y",Ee),Ce.setAttributeNS(null,"width",J-oe),Ce.setAttributeNS(null,"height",ve-Ee),Ce.setAttributeNS(null,"fill",this._makeShadingPattern(te)),this.current.fillAlpha<1&&Ce.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Ce)}_makeColorN_Pattern(te){return te[0]==="TilingPattern"?this._makeTilingPattern(te):this._makeShadingPattern(te)}_makeTilingPattern(te){const se=te[1],re=te[2],ae=te[3]||R.IDENTITY_MATRIX,[oe,Ee,J,ve]=te[4],Ce=te[5],De=te[6],Me=te[7],Ne=`shading${ne++}`,[Ie,qe,Se,Te]=R.Util.normalizeRect([...R.Util.applyTransform([oe,Ee],ae),...R.Util.applyTransform([J,ve],ae)]),[He,_e]=R.Util.singularValueDecompose2dScale(ae),G=Ce*He,X=De*_e,ge=this.svgFactory.createElement("svg:pattern");ge.setAttributeNS(null,"id",Ne),ge.setAttributeNS(null,"patternUnits","userSpaceOnUse"),ge.setAttributeNS(null,"width",G),ge.setAttributeNS(null,"height",X),ge.setAttributeNS(null,"x",`${Ie}`),ge.setAttributeNS(null,"y",`${qe}`);const Pe=this.svg,Ae=this.transformMatrix,ke=this.current.fillColor,Oe=this.current.strokeColor,Qe=this.svgFactory.create(Se-Ie,Te-qe);if(this.svg=Qe,this.transformMatrix=ae,Me===2){const ot=R.Util.makeHexColor(...se);this.current.fillColor=ot,this.current.strokeColor=ot}return this.executeOpTree(this.convertOpList(re)),this.svg=Pe,this.transformMatrix=Ae,this.current.fillColor=ke,this.current.strokeColor=Oe,ge.append(Qe.childNodes[0]),this.defs.append(ge),`url(#${Ne})`}_makeShadingPattern(te){switch(typeof te=="string"&&(te=this.objs.get(te)),te[0]){case"RadialAxial":const se=`shading${ne++}`,re=te[3];let ae;switch(te[1]){case"axial":const oe=te[4],Ee=te[5];ae=this.svgFactory.createElement("svg:linearGradient"),ae.setAttributeNS(null,"id",se),ae.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),ae.setAttributeNS(null,"x1",oe[0]),ae.setAttributeNS(null,"y1",oe[1]),ae.setAttributeNS(null,"x2",Ee[0]),ae.setAttributeNS(null,"y2",Ee[1]);break;case"radial":const J=te[4],ve=te[5],Ce=te[6],De=te[7];ae=this.svgFactory.createElement("svg:radialGradient"),ae.setAttributeNS(null,"id",se),ae.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),ae.setAttributeNS(null,"cx",ve[0]),ae.setAttributeNS(null,"cy",ve[1]),ae.setAttributeNS(null,"r",De),ae.setAttributeNS(null,"fx",J[0]),ae.setAttributeNS(null,"fy",J[1]),ae.setAttributeNS(null,"fr",Ce);break;default:throw new Error(`Unknown RadialAxial type: ${te[1]}`)}for(const oe of re){const Ee=this.svgFactory.createElement("svg:stop");Ee.setAttributeNS(null,"offset",oe[0]),Ee.setAttributeNS(null,"stop-color",oe[1]),ae.append(Ee)}return this.defs.append(ae),`url(#${se})`;case"Mesh":return(0,R.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${te[0]}`)}}setDash(te,se){this.current.dashArray=te,this.current.dashPhase=se}constructPath(te,se){const re=this.current;let ae=re.x,oe=re.y,Ee=[],J=0;for(const ve of te)switch(ve|0){case R.OPS.rectangle:ae=se[J++],oe=se[J++];const Ce=se[J++],De=se[J++],Me=ae+Ce,Ne=oe+De;Ee.push("M",ie(ae),ie(oe),"L",ie(Me),ie(oe),"L",ie(Me),ie(Ne),"L",ie(ae),ie(Ne),"Z");break;case R.OPS.moveTo:ae=se[J++],oe=se[J++],Ee.push("M",ie(ae),ie(oe));break;case R.OPS.lineTo:ae=se[J++],oe=se[J++],Ee.push("L",ie(ae),ie(oe));break;case R.OPS.curveTo:ae=se[J+4],oe=se[J+5],Ee.push("C",ie(se[J]),ie(se[J+1]),ie(se[J+2]),ie(se[J+3]),ie(ae),ie(oe)),J+=6;break;case R.OPS.curveTo2:Ee.push("C",ie(ae),ie(oe),ie(se[J]),ie(se[J+1]),ie(se[J+2]),ie(se[J+3])),ae=se[J+2],oe=se[J+3],J+=4;break;case R.OPS.curveTo3:ae=se[J+2],oe=se[J+3],Ee.push("C",ie(se[J]),ie(se[J+1]),ie(ae),ie(oe),ie(ae),ie(oe)),J+=4;break;case R.OPS.closePath:Ee.push("Z");break}Ee=Ee.join(" "),re.path&&te.length>0&&te[0]!==R.OPS.rectangle&&te[0]!==R.OPS.moveTo?Ee=re.path.getAttributeNS(null,"d")+Ee:(re.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(re.path)),re.path.setAttributeNS(null,"d",Ee),re.path.setAttributeNS(null,"fill","none"),re.element=re.path,re.setCurrentPoint(ae,oe)}endPath(){const te=this.current;if(te.path=null,!this.pendingClip)return;if(!te.element){this.pendingClip=null;return}const se=`clippath${q++}`,re=this.svgFactory.createElement("svg:clipPath");re.setAttributeNS(null,"id",se),re.setAttributeNS(null,"transform",ee(this.transformMatrix));const ae=te.element.cloneNode(!0);if(this.pendingClip==="evenodd"?ae.setAttributeNS(null,"clip-rule","evenodd"):ae.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,re.append(ae),this.defs.append(re),te.activeClipUrl){te.clipGroup=null;for(const oe of this.extraStack)oe.clipGroup=null;re.setAttributeNS(null,"clip-path",te.activeClipUrl)}te.activeClipUrl=`url(#${se})`,this.tgrp=null}clip(te){this.pendingClip=te}closePath(){const te=this.current;if(te.path){const se=`${te.path.getAttributeNS(null,"d")}Z`;te.path.setAttributeNS(null,"d",se)}}setLeading(te){this.current.leading=-te}setTextRise(te){this.current.textRise=te}setTextRenderingMode(te){this.current.textRenderingMode=te}setHScale(te){this.current.textHScale=te/100}setRenderingIntent(te){}setFlatness(te){}setGState(te){for(const[se,re]of te)switch(se){case"LW":this.setLineWidth(re);break;case"LC":this.setLineCap(re);break;case"LJ":this.setLineJoin(re);break;case"ML":this.setMiterLimit(re);break;case"D":this.setDash(re[0],re[1]);break;case"RI":this.setRenderingIntent(re);break;case"FL":this.setFlatness(re);break;case"Font":this.setFont(re);break;case"CA":this.setStrokeAlpha(re);break;case"ca":this.setFillAlpha(re);break;default:(0,R.warn)(`Unimplemented graphic state operator ${se}`);break}}fill(){const te=this.current;te.element&&(te.element.setAttributeNS(null,"fill",te.fillColor),te.element.setAttributeNS(null,"fill-opacity",te.fillAlpha),this.endPath())}stroke(){const te=this.current;te.element&&(this._setStrokeAttributes(te.element),te.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(te,se=1){const re=this.current;let ae=re.dashArray;se!==1&&ae.length>0&&(ae=ae.map(function(oe){return se*oe})),te.setAttributeNS(null,"stroke",re.strokeColor),te.setAttributeNS(null,"stroke-opacity",re.strokeAlpha),te.setAttributeNS(null,"stroke-miterlimit",ie(re.miterLimit)),te.setAttributeNS(null,"stroke-linecap",re.lineCap),te.setAttributeNS(null,"stroke-linejoin",re.lineJoin),te.setAttributeNS(null,"stroke-width",ie(se*re.lineWidth)+"px"),te.setAttributeNS(null,"stroke-dasharray",ae.map(ie).join(" ")),te.setAttributeNS(null,"stroke-dashoffset",ie(se*re.dashPhase)+"px")}eoFill(){var te;(te=this.current.element)==null||te.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var te;(te=this.current.element)==null||te.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const te=this.svgFactory.createElement("svg:rect");te.setAttributeNS(null,"x","0"),te.setAttributeNS(null,"y","0"),te.setAttributeNS(null,"width","1px"),te.setAttributeNS(null,"height","1px"),te.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(te)}paintImageXObject(te){const se=this.getObject(te);if(!se){(0,R.warn)(`Dependent image with object ID ${te} is not ready yet`);return}this.paintInlineImageXObject(se)}paintInlineImageXObject(te,se){const re=te.width,ae=te.height,oe=be(te,this.forceDataSchema,!!se),Ee=this.svgFactory.createElement("svg:rect");Ee.setAttributeNS(null,"x","0"),Ee.setAttributeNS(null,"y","0"),Ee.setAttributeNS(null,"width",ie(re)),Ee.setAttributeNS(null,"height",ie(ae)),this.current.element=Ee,this.clip("nonzero");const J=this.svgFactory.createElement("svg:image");J.setAttributeNS(he,"xlink:href",oe),J.setAttributeNS(null,"x","0"),J.setAttributeNS(null,"y",ie(-ae)),J.setAttributeNS(null,"width",ie(re)+"px"),J.setAttributeNS(null,"height",ie(ae)+"px"),J.setAttributeNS(null,"transform",`scale(${ie(1/re)} ${ie(-1/ae)})`),se?se.append(J):this._ensureTransformGroup().append(J)}paintImageMaskXObject(te){const se=this.getObject(te.data,te);if(se.bitmap){(0,R.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const re=this.current,ae=se.width,oe=se.height,Ee=re.fillColor;re.maskId=`mask${K++}`;const J=this.svgFactory.createElement("svg:mask");J.setAttributeNS(null,"id",re.maskId);const ve=this.svgFactory.createElement("svg:rect");ve.setAttributeNS(null,"x","0"),ve.setAttributeNS(null,"y","0"),ve.setAttributeNS(null,"width",ie(ae)),ve.setAttributeNS(null,"height",ie(oe)),ve.setAttributeNS(null,"fill",Ee),ve.setAttributeNS(null,"mask",`url(#${re.maskId})`),this.defs.append(J),this._ensureTransformGroup().append(ve),this.paintInlineImageXObject(se,J)}paintFormXObjectBegin(te,se){if(Array.isArray(te)&&te.length===6&&this.transform(te[0],te[1],te[2],te[3],te[4],te[5]),se){const re=se[2]-se[0],ae=se[3]-se[1],oe=this.svgFactory.createElement("svg:rect");oe.setAttributeNS(null,"x",se[0]),oe.setAttributeNS(null,"y",se[1]),oe.setAttributeNS(null,"width",ie(re)),oe.setAttributeNS(null,"height",ie(ae)),this.current.element=oe,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(te){const se=this.svgFactory.create(te.width,te.height),re=this.svgFactory.createElement("svg:defs");se.append(re),this.defs=re;const ae=this.svgFactory.createElement("svg:g");return ae.setAttributeNS(null,"transform",ee(te.transform)),se.append(ae),this.svg=ae,se}_ensureClipGroup(){if(!this.current.clipGroup){const te=this.svgFactory.createElement("svg:g");te.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(te),this.current.clipGroup=te}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",ee(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}$.SVGGraphics=fe},(A,$)=>{Object.defineProperty($,"__esModule",{value:!0}),$.XfaText=void 0;class H{static textContent(R){const B=[],Y={items:B,styles:Object.create(null)};function he(ue){var be;if(!ue)return;let le=null;const W=ue.name;if(W==="#text")le=ue.value;else if(H.shouldBuildText(W))(be=ue==null?void 0:ue.attributes)!=null&&be.textContent?le=ue.attributes.textContent:ue.value&&(le=ue.value);else return;if(le!==null&&B.push({str:le}),!!ue.children)for(const ce of ue.children)he(ce)}return he(R),Y}static shouldBuildText(R){return!(R==="textarea"||R==="input"||R==="option"||R==="select")}}$.XfaText=H},(A,$,H)=>{Object.defineProperty($,"__esModule",{value:!0}),$.TextLayerRenderTask=void 0,$.renderTextLayer=ee,$.updateTextLayer=q;var O=H(1),R=H(6);const B=1e5,Y=30,he=.8,ue=new Map;function le(K,ne){let fe;if(ne&&O.FeatureTest.isOffscreenCanvasSupported)fe=new OffscreenCanvas(K,K).getContext("2d",{alpha:!1});else{const de=document.createElement("canvas");de.width=de.height=K,fe=de.getContext("2d",{alpha:!1})}return fe}function W(K,ne){const fe=ue.get(K);if(fe)return fe;const de=le(Y,ne);de.font=`${Y}px ${K}`;const te=de.measureText("");let se=te.fontBoundingBoxAscent,re=Math.abs(te.fontBoundingBoxDescent);if(se){const oe=se/(se+re);return ue.set(K,oe),de.canvas.width=de.canvas.height=0,oe}de.strokeStyle="red",de.clearRect(0,0,Y,Y),de.strokeText("g",0,0);let ae=de.getImageData(0,0,Y,Y).data;re=0;for(let oe=ae.length-1-3;oe>=0;oe-=4)if(ae[oe]>0){re=Math.ceil(oe/4/Y);break}de.clearRect(0,0,Y,Y),de.strokeText("A",0,Y),ae=de.getImageData(0,0,Y,Y).data,se=0;for(let oe=0,Ee=ae.length;oe<Ee;oe+=4)if(ae[oe]>0){se=Y-Math.floor(oe/4/Y);break}if(de.canvas.width=de.canvas.height=0,se){const oe=se/(se+re);return ue.set(K,oe),oe}return ue.set(K,he),he}function be(K,ne,fe){const de=document.createElement("span"),te={angle:0,canvasWidth:0,hasText:ne.str!=="",hasEOL:ne.hasEOL,fontSize:0};K._textDivs.push(de);const se=O.Util.transform(K._transform,ne.transform);let re=Math.atan2(se[1],se[0]);const ae=fe[ne.fontName];ae.vertical&&(re+=Math.PI/2);const oe=Math.hypot(se[2],se[3]),Ee=oe*W(ae.fontFamily,K._isOffscreenCanvasSupported);let J,ve;re===0?(J=se[4],ve=se[5]-Ee):(J=se[4]+Ee*Math.sin(re),ve=se[5]-Ee*Math.cos(re));const Ce="calc(var(--scale-factor)*",De=de.style;K._container===K._rootContainer?(De.left=`${(100*J/K._pageWidth).toFixed(2)}%`,De.top=`${(100*ve/K._pageHeight).toFixed(2)}%`):(De.left=`${Ce}${J.toFixed(2)}px)`,De.top=`${Ce}${ve.toFixed(2)}px)`),De.fontSize=`${Ce}${oe.toFixed(2)}px)`,De.fontFamily=ae.fontFamily,te.fontSize=oe,de.setAttribute("role","presentation"),de.textContent=ne.str,de.dir=ne.dir,K._fontInspectorEnabled&&(de.dataset.fontName=ne.fontName),re!==0&&(te.angle=re*(180/Math.PI));let Me=!1;if(ne.str.length>1)Me=!0;else if(ne.str!==" "&&ne.transform[0]!==ne.transform[3]){const Ne=Math.abs(ne.transform[0]),Ie=Math.abs(ne.transform[3]);Ne!==Ie&&Math.max(Ne,Ie)/Math.min(Ne,Ie)>1.5&&(Me=!0)}Me&&(te.canvasWidth=ae.vertical?ne.height:ne.width),K._textDivProperties.set(de,te),K._isReadableStream&&K._layoutText(de)}function ce(K){const{div:ne,scale:fe,properties:de,ctx:te,prevFontSize:se,prevFontFamily:re}=K,{style:ae}=ne;let oe="";if(de.canvasWidth!==0&&de.hasText){const{fontFamily:Ee}=ae,{canvasWidth:J,fontSize:ve}=de;(se!==ve||re!==Ee)&&(te.font=`${ve*fe}px ${Ee}`,K.prevFontSize=ve,K.prevFontFamily=Ee);const{width:Ce}=te.measureText(ne.textContent);Ce>0&&(oe=`scaleX(${J*fe/Ce})`)}de.angle!==0&&(oe=`rotate(${de.angle}deg) ${oe}`),oe.length>0&&(ae.transform=oe)}function Q(K){if(K._canceled)return;const ne=K._textDivs,fe=K._capability;if(ne.length>B){fe.resolve();return}if(!K._isReadableStream)for(const te of ne)K._layoutText(te);fe.resolve()}class ie{constructor({textContentSource:ne,container:fe,viewport:de,textDivs:te,textDivProperties:se,textContentItemsStr:re,isOffscreenCanvasSupported:ae}){var Ce;this._textContentSource=ne,this._isReadableStream=ne instanceof ReadableStream,this._container=this._rootContainer=fe,this._textDivs=te||[],this._textContentItemsStr=re||[],this._isOffscreenCanvasSupported=ae,this._fontInspectorEnabled=!!((Ce=globalThis.FontInspector)!=null&&Ce.enabled),this._reader=null,this._textDivProperties=se||new WeakMap,this._canceled=!1,this._capability=new O.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:de.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:le(0,ae)};const{pageWidth:oe,pageHeight:Ee,pageX:J,pageY:ve}=de.rawDims;this._transform=[1,0,0,-1,-J,ve+Ee],this._pageWidth=oe,this._pageHeight=Ee,(0,R.setLayerDimensions)(fe,de),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new O.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new O.AbortException("TextLayer task cancelled."))}_processItems(ne,fe){for(const de of ne){if(de.str===void 0){if(de.type==="beginMarkedContentProps"||de.type==="beginMarkedContent"){const te=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),de.id!==null&&this._container.setAttribute("id",`${de.id}`),te.append(this._container)}else de.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(de.str),be(this,de,fe)}}_layoutText(ne){const fe=this._layoutTextParams.properties=this._textDivProperties.get(ne);if(this._layoutTextParams.div=ne,ce(this._layoutTextParams),fe.hasText&&this._container.append(ne),fe.hasEOL){const de=document.createElement("br");de.setAttribute("role","presentation"),this._container.append(de)}}_render(){const ne=new O.PromiseCapability;let fe=Object.create(null);if(this._isReadableStream){const de=()=>{this._reader.read().then(({value:te,done:se})=>{if(se){ne.resolve();return}Object.assign(fe,te.styles),this._processItems(te.items,fe),de()},ne.reject)};this._reader=this._textContentSource.getReader(),de()}else if(this._textContentSource){const{items:de,styles:te}=this._textContentSource;this._processItems(de,te),ne.resolve()}else throw new Error('No "textContentSource" parameter specified.');ne.promise.then(()=>{fe=null,Q(this)},this._capability.reject)}}$.TextLayerRenderTask=ie;function ee(K){!K.textContentSource&&(K.textContent||K.textContentStream)&&((0,R.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),K.textContentSource=K.textContent||K.textContentStream);const{container:ne,viewport:fe}=K,de=getComputedStyle(ne),te=de.getPropertyValue("visibility"),se=parseFloat(de.getPropertyValue("--scale-factor"));te==="visible"&&(!se||Math.abs(se-fe.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const re=new ie(K);return re._render(),re}function q({container:K,viewport:ne,textDivs:fe,textDivProperties:de,isOffscreenCanvasSupported:te,mustRotate:se=!0,mustRescale:re=!0}){if(se&&(0,R.setLayerDimensions)(K,{rotation:ne.rotation}),re){const ae=le(0,te),Ee={prevFontSize:null,prevFontFamily:null,div:null,scale:ne.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:ae};for(const J of fe)Ee.properties=de.get(J),Ee.div=J,ce(Ee)}}},(A,$,H)=>{var W,be,ce,Q,ie,ee,q,K,ne,fe,de,$i,qr,Ri,Ii;Object.defineProperty($,"__esModule",{value:!0}),$.AnnotationEditorLayer=void 0;var O=H(1),R=H(4),B=H(28),Y=H(33),he=H(6),ue=H(34);const oe=class oe{constructor({uiManager:J,pageIndex:ve,div:Ce,accessibilityManager:De,annotationLayer:Me,viewport:Ne,l10n:Ie}){it(this,de);it(this,W);it(this,be,!1);it(this,ce,null);it(this,Q,this.pointerup.bind(this));it(this,ie,this.pointerdown.bind(this));it(this,ee,new Map);it(this,q,!1);it(this,K,!1);it(this,ne,!1);it(this,fe);const qe=[B.FreeTextEditor,Y.InkEditor,ue.StampEditor];if(!oe._initialized){oe._initialized=!0;for(const Se of qe)Se.initialize(Ie)}J.registerEditorTypes(qe),at(this,fe,J),this.pageIndex=ve,this.div=Ce,at(this,W,De),at(this,ce,Me),this.viewport=Ne,V(this,fe).addLayer(this)}get isEmpty(){return V(this,ee).size===0}updateToolbar(J){V(this,fe).updateToolbar(J)}updateMode(J=V(this,fe).getMode()){Ue(this,de,Ii).call(this),J===O.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),J!==O.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",J===O.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",J===O.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",J===O.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(J){if(!J&&V(this,fe).getMode()!==O.AnnotationEditorType.INK)return;if(!J){for(const Ce of V(this,ee).values())if(Ce.isEmpty()){Ce.setInBackground();return}}Ue(this,de,qr).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(J){V(this,fe).setEditingState(J)}addCommands(J){V(this,fe).addCommands(J)}enable(){this.div.style.pointerEvents="auto";const J=new Set;for(const Ce of V(this,ee).values())Ce.enableEditing(),Ce.annotationElementId&&J.add(Ce.annotationElementId);if(!V(this,ce))return;const ve=V(this,ce).getEditableAnnotations();for(const Ce of ve){if(Ce.hide(),V(this,fe).isDeletedAnnotationElement(Ce.data.id)||J.has(Ce.data.id))continue;const De=this.deserialize(Ce);De&&(this.addOrRebuild(De),De.enableEditing())}}disable(){var ve;at(this,ne,!0),this.div.style.pointerEvents="none";const J=new Set;for(const Ce of V(this,ee).values()){if(Ce.disableEditing(),!Ce.annotationElementId||Ce.serialize()!==null){J.add(Ce.annotationElementId);continue}(ve=this.getEditableAnnotation(Ce.annotationElementId))==null||ve.show(),Ce.remove()}if(V(this,ce)){const Ce=V(this,ce).getEditableAnnotations();for(const De of Ce){const{id:Me}=De.data;J.has(Me)||V(this,fe).isDeletedAnnotationElement(Me)||De.show()}}Ue(this,de,Ii).call(this),this.isEmpty&&(this.div.hidden=!0),at(this,ne,!1)}getEditableAnnotation(J){var ve;return((ve=V(this,ce))==null?void 0:ve.getEditableAnnotation(J))||null}setActiveEditor(J){V(this,fe).getActive()!==J&&V(this,fe).setActiveEditor(J)}enableClick(){this.div.addEventListener("pointerdown",V(this,ie)),this.div.addEventListener("pointerup",V(this,Q))}disableClick(){this.div.removeEventListener("pointerdown",V(this,ie)),this.div.removeEventListener("pointerup",V(this,Q))}attach(J){V(this,ee).set(J.id,J);const{annotationElementId:ve}=J;ve&&V(this,fe).isDeletedAnnotationElement(ve)&&V(this,fe).removeDeletedAnnotationElement(J)}detach(J){var ve;V(this,ee).delete(J.id),(ve=V(this,W))==null||ve.removePointerInTextLayer(J.contentDiv),!V(this,ne)&&J.annotationElementId&&V(this,fe).addDeletedAnnotationElement(J)}remove(J){this.detach(J),V(this,fe).removeEditor(J),J.div.contains(document.activeElement)&&setTimeout(()=>{V(this,fe).focusMainContainer()},0),J.div.remove(),J.isAttachedToDOM=!1,V(this,K)||this.addInkEditorIfNeeded(!1)}changeParent(J){var ve;J.parent!==this&&(J.annotationElementId&&(V(this,fe).addDeletedAnnotationElement(J.annotationElementId),R.AnnotationEditor.deleteAnnotationElement(J),J.annotationElementId=null),this.attach(J),(ve=J.parent)==null||ve.detach(J),J.setParent(this),J.div&&J.isAttachedToDOM&&(J.div.remove(),this.div.append(J.div)))}add(J){if(this.changeParent(J),V(this,fe).addEditor(J),this.attach(J),!J.isAttachedToDOM){const ve=J.render();this.div.append(ve),J.isAttachedToDOM=!0}J.fixAndSetPosition(),J.onceAdded(),V(this,fe).addToAnnotationStorage(J)}moveEditorInDOM(J){var Ce;if(!J.isAttachedToDOM)return;const{activeElement:ve}=document;J.div.contains(ve)&&(J._focusEventsAllowed=!1,setTimeout(()=>{J.div.contains(document.activeElement)?J._focusEventsAllowed=!0:(J.div.addEventListener("focusin",()=>{J._focusEventsAllowed=!0},{once:!0}),ve.focus())},0)),J._structTreeParentId=(Ce=V(this,W))==null?void 0:Ce.moveElementInDOM(this.div,J.div,J.contentDiv,!0)}addOrRebuild(J){J.needsToBeRebuilt()?J.rebuild():this.add(J)}addUndoableEditor(J){const ve=()=>J._uiManager.rebuild(J),Ce=()=>{J.remove()};this.addCommands({cmd:ve,undo:Ce,mustExec:!1})}getNextId(){return V(this,fe).getId()}pasteEditor(J,ve){V(this,fe).updateToolbar(J),V(this,fe).updateMode(J);const{offsetX:Ce,offsetY:De}=Ue(this,de,Ri).call(this),Me=this.getNextId(),Ne=Ue(this,de,$i).call(this,{parent:this,id:Me,x:Ce,y:De,uiManager:V(this,fe),isCentered:!0,...ve});Ne&&this.add(Ne)}deserialize(J){switch(J.annotationType??J.annotationEditorType){case O.AnnotationEditorType.FREETEXT:return B.FreeTextEditor.deserialize(J,this,V(this,fe));case O.AnnotationEditorType.INK:return Y.InkEditor.deserialize(J,this,V(this,fe));case O.AnnotationEditorType.STAMP:return ue.StampEditor.deserialize(J,this,V(this,fe))}return null}addNewEditor(){Ue(this,de,qr).call(this,Ue(this,de,Ri).call(this),!0)}setSelected(J){V(this,fe).setSelected(J)}toggleSelected(J){V(this,fe).toggleSelected(J)}isSelected(J){return V(this,fe).isSelected(J)}unselect(J){V(this,fe).unselect(J)}pointerup(J){const{isMac:ve}=O.FeatureTest.platform;if(!(J.button!==0||J.ctrlKey&&ve)&&J.target===this.div&&V(this,q)){if(at(this,q,!1),!V(this,be)){at(this,be,!0);return}if(V(this,fe).getMode()===O.AnnotationEditorType.STAMP){V(this,fe).unselectAll();return}Ue(this,de,qr).call(this,J,!1)}}pointerdown(J){if(V(this,q)){at(this,q,!1);return}const{isMac:ve}=O.FeatureTest.platform;if(J.button!==0||J.ctrlKey&&ve||J.target!==this.div)return;at(this,q,!0);const Ce=V(this,fe).getActive();at(this,be,!Ce||Ce.isEmpty())}findNewParent(J,ve,Ce){const De=V(this,fe).findParent(ve,Ce);return De===null||De===this?!1:(De.changeParent(J),!0)}destroy(){var J,ve;((J=V(this,fe).getActive())==null?void 0:J.parent)===this&&(V(this,fe).commitOrRemove(),V(this,fe).setActiveEditor(null));for(const Ce of V(this,ee).values())(ve=V(this,W))==null||ve.removePointerInTextLayer(Ce.contentDiv),Ce.setParent(null),Ce.isAttachedToDOM=!1,Ce.div.remove();this.div=null,V(this,ee).clear(),V(this,fe).removeLayer(this)}render({viewport:J}){this.viewport=J,(0,he.setLayerDimensions)(this.div,J);for(const ve of V(this,fe).getEditors(this.pageIndex))this.add(ve);this.updateMode()}update({viewport:J}){V(this,fe).commitOrRemove(),this.viewport=J,(0,he.setLayerDimensions)(this.div,{rotation:J.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:J,pageHeight:ve}=this.viewport.rawDims;return[J,ve]}};W=new WeakMap,be=new WeakMap,ce=new WeakMap,Q=new WeakMap,ie=new WeakMap,ee=new WeakMap,q=new WeakMap,K=new WeakMap,ne=new WeakMap,fe=new WeakMap,de=new WeakSet,$i=function(J){switch(V(this,fe).getMode()){case O.AnnotationEditorType.FREETEXT:return new B.FreeTextEditor(J);case O.AnnotationEditorType.INK:return new Y.InkEditor(J);case O.AnnotationEditorType.STAMP:return new ue.StampEditor(J)}return null},qr=function(J,ve){const Ce=this.getNextId(),De=Ue(this,de,$i).call(this,{parent:this,id:Ce,x:J.offsetX,y:J.offsetY,uiManager:V(this,fe),isCentered:ve});return De&&this.add(De),De},Ri=function(){const{x:J,y:ve,width:Ce,height:De}=this.div.getBoundingClientRect(),Me=Math.max(0,J),Ne=Math.max(0,ve),Ie=Math.min(window.innerWidth,J+Ce),qe=Math.min(window.innerHeight,ve+De),Se=(Me+Ie)/2-J,Te=(Ne+qe)/2-ve,[He,_e]=this.viewport.rotation%180===0?[Se,Te]:[Te,Se];return{offsetX:He,offsetY:_e}},Ii=function(){at(this,K,!0);for(const J of V(this,ee).values())J.isEmpty()&&J.remove();at(this,K,!1)},$n(oe,"_initialized",!1);let le=oe;$.AnnotationEditorLayer=le},(A,$,H)=>{var ue,le,W,be,ce,Q,ie,ee,q,K,Aa,Ca,Pa,Tr,Fi,ka,Li;Object.defineProperty($,"__esModule",{value:!0}),$.FreeTextEditor=void 0;var O=H(1),R=H(5),B=H(4),Y=H(29);const oe=class oe extends B.AnnotationEditor{constructor(ve){super({...ve,name:"freeTextEditor"});it(this,K);it(this,ue,this.editorDivBlur.bind(this));it(this,le,this.editorDivFocus.bind(this));it(this,W,this.editorDivInput.bind(this));it(this,be,this.editorDivKeydown.bind(this));it(this,ce);it(this,Q,"");it(this,ie,`${this.id}-editor`);it(this,ee);it(this,q,null);at(this,ce,ve.color||oe._defaultColor||B.AnnotationEditor._defaultLineColor),at(this,ee,ve.fontSize||oe._defaultFontSize)}static get _keyboardManager(){const ve=oe.prototype,Ce=Ne=>Ne.isEmpty(),De=R.AnnotationEditorUIManager.TRANSLATE_SMALL,Me=R.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,O.shadow)(this,"_keyboardManager",new R.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],ve.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],ve.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],ve._translateEmpty,{args:[-De,0],checker:Ce}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],ve._translateEmpty,{args:[-Me,0],checker:Ce}],[["ArrowRight","mac+ArrowRight"],ve._translateEmpty,{args:[De,0],checker:Ce}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],ve._translateEmpty,{args:[Me,0],checker:Ce}],[["ArrowUp","mac+ArrowUp"],ve._translateEmpty,{args:[0,-De],checker:Ce}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],ve._translateEmpty,{args:[0,-Me],checker:Ce}],[["ArrowDown","mac+ArrowDown"],ve._translateEmpty,{args:[0,De],checker:Ce}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],ve._translateEmpty,{args:[0,Me],checker:Ce}]]))}static initialize(ve){B.AnnotationEditor.initialize(ve,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const Ce=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Ce.getPropertyValue("--freetext-padding"))}static updateDefaultParams(ve,Ce){switch(ve){case O.AnnotationEditorParamsType.FREETEXT_SIZE:oe._defaultFontSize=Ce;break;case O.AnnotationEditorParamsType.FREETEXT_COLOR:oe._defaultColor=Ce;break}}updateParams(ve,Ce){switch(ve){case O.AnnotationEditorParamsType.FREETEXT_SIZE:Ue(this,K,Aa).call(this,Ce);break;case O.AnnotationEditorParamsType.FREETEXT_COLOR:Ue(this,K,Ca).call(this,Ce);break}}static get defaultPropertiesToUpdate(){return[[O.AnnotationEditorParamsType.FREETEXT_SIZE,oe._defaultFontSize],[O.AnnotationEditorParamsType.FREETEXT_COLOR,oe._defaultColor||B.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[O.AnnotationEditorParamsType.FREETEXT_SIZE,V(this,ee)],[O.AnnotationEditorParamsType.FREETEXT_COLOR,V(this,ce)]]}_translateEmpty(ve,Ce){this._uiManager.translateSelectedEditors(ve,Ce,!0)}getInitialTranslation(){const ve=this.parentScale;return[-oe._internalPadding*ve,-(oe._internalPadding+V(this,ee))*ve]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(O.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",V(this,be)),this.editorDiv.addEventListener("focus",V(this,le)),this.editorDiv.addEventListener("blur",V(this,ue)),this.editorDiv.addEventListener("input",V(this,W)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",V(this,ie)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",V(this,be)),this.editorDiv.removeEventListener("focus",V(this,le)),this.editorDiv.removeEventListener("blur",V(this,ue)),this.editorDiv.removeEventListener("input",V(this,W)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(ve){this._focusEventsAllowed&&(super.focusin(ve),ve.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var ve;if(this.width){Ue(this,K,Li).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(ve=this._initialOptions)!=null&&ve.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const ve=V(this,Q),Ce=at(this,Q,Ue(this,K,Pa).call(this).trimEnd());if(ve===Ce)return;const De=Me=>{if(at(this,Q,Me),!Me){this.remove();return}Ue(this,K,Fi).call(this),this._uiManager.rebuild(this),Ue(this,K,Tr).call(this)};this.addCommands({cmd:()=>{De(Ce)},undo:()=>{De(ve)},mustExec:!1}),Ue(this,K,Tr).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(ve){this.enterInEditMode()}keydown(ve){ve.target===this.div&&ve.key==="Enter"&&(this.enterInEditMode(),ve.preventDefault())}editorDivKeydown(ve){oe._keyboardManager.exec(this,ve)}editorDivFocus(ve){this.isEditing=!0}editorDivBlur(ve){this.isEditing=!1}editorDivInput(ve){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let ve,Ce;this.width&&(ve=this.x,Ce=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",V(this,ie)),this.enableEditing(),B.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Me=>{var Ne;return(Ne=this.editorDiv)==null?void 0:Ne.setAttribute("aria-label",Me)}),B.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Me=>{var Ne;return(Ne=this.editorDiv)==null?void 0:Ne.setAttribute("default-content",Me)}),this.editorDiv.contentEditable=!0;const{style:De}=this.editorDiv;if(De.fontSize=`calc(${V(this,ee)}px * var(--scale-factor))`,De.color=V(this,ce),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,R.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Me,Ne]=this.parentDimensions;if(this.annotationElementId){const{position:Ie}=V(this,q);let[qe,Se]=this.getInitialTranslation();[qe,Se]=this.pageTranslationToScreen(qe,Se);const[Te,He]=this.pageDimensions,[_e,G]=this.pageTranslation;let X,ge;switch(this.rotation){case 0:X=ve+(Ie[0]-_e)/Te,ge=Ce+this.height-(Ie[1]-G)/He;break;case 90:X=ve+(Ie[0]-_e)/Te,ge=Ce-(Ie[1]-G)/He,[qe,Se]=[Se,-qe];break;case 180:X=ve-this.width+(Ie[0]-_e)/Te,ge=Ce-(Ie[1]-G)/He,[qe,Se]=[-qe,-Se];break;case 270:X=ve+(Ie[0]-_e-this.height*He)/Te,ge=Ce+(Ie[1]-G-this.width*Te)/He,[qe,Se]=[-Se,qe];break}this.setAt(X*Me,ge*Ne,qe,Se)}else this.setAt(ve*Me,Ce*Ne,this.width*Me,this.height*Ne);Ue(this,K,Fi).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(ve,Ce,De){let Me=null;if(ve instanceof Y.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Ie,fontColor:qe},rect:Se,rotation:Te,id:He},textContent:_e,textPosition:G,parent:{page:{pageNumber:X}}}=ve;if(!_e||_e.length===0)return null;Me=ve={annotationType:O.AnnotationEditorType.FREETEXT,color:Array.from(qe),fontSize:Ie,value:_e.join(`
`),position:G,pageIndex:X-1,rect:Se,rotation:Te,id:He,deleted:!1}}const Ne=super.deserialize(ve,Ce,De);return at(Ne,ee,ve.fontSize),at(Ne,ce,O.Util.makeHexColor(...ve.color)),at(Ne,Q,ve.value),Ne.annotationElementId=ve.id||null,at(Ne,q,Me),Ne}serialize(ve=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const Ce=oe._internalPadding*this.parentScale,De=this.getRect(Ce,Ce),Me=B.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:V(this,ce)),Ne={annotationType:O.AnnotationEditorType.FREETEXT,color:Me,fontSize:V(this,ee),value:V(this,Q),pageIndex:this.pageIndex,rect:De,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return ve?Ne:this.annotationElementId&&!Ue(this,K,ka).call(this,Ne)?null:(Ne.id=this.annotationElementId,Ne)}};ue=new WeakMap,le=new WeakMap,W=new WeakMap,be=new WeakMap,ce=new WeakMap,Q=new WeakMap,ie=new WeakMap,ee=new WeakMap,q=new WeakMap,K=new WeakSet,Aa=function(ve){const Ce=Me=>{this.editorDiv.style.fontSize=`calc(${Me}px * var(--scale-factor))`,this.translate(0,-(Me-V(this,ee))*this.parentScale),at(this,ee,Me),Ue(this,K,Tr).call(this)},De=V(this,ee);this.addCommands({cmd:()=>{Ce(ve)},undo:()=>{Ce(De)},mustExec:!0,type:O.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Ca=function(ve){const Ce=V(this,ce);this.addCommands({cmd:()=>{at(this,ce,this.editorDiv.style.color=ve)},undo:()=>{at(this,ce,this.editorDiv.style.color=Ce)},mustExec:!0,type:O.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Pa=function(){const ve=this.editorDiv.getElementsByTagName("div");if(ve.length===0)return this.editorDiv.innerText;const Ce=[];for(const De of ve)Ce.push(De.innerText.replace(/\r\n?|\n/,""));return Ce.join(`
`)},Tr=function(){const[ve,Ce]=this.parentDimensions;let De;if(this.isAttachedToDOM)De=this.div.getBoundingClientRect();else{const{currentLayer:Me,div:Ne}=this,Ie=Ne.style.display;Ne.style.display="hidden",Me.div.append(this.div),De=Ne.getBoundingClientRect(),Ne.remove(),Ne.style.display=Ie}this.rotation%180===this.parentRotation%180?(this.width=De.width/ve,this.height=De.height/Ce):(this.width=De.height/ve,this.height=De.width/Ce),this.fixAndSetPosition()},Fi=function(){if(this.editorDiv.replaceChildren(),!!V(this,Q))for(const ve of V(this,Q).split(`
`)){const Ce=document.createElement("div");Ce.append(ve?document.createTextNode(ve):document.createElement("br")),this.editorDiv.append(Ce)}},ka=function(ve){const{value:Ce,fontSize:De,color:Me,rect:Ne,pageIndex:Ie}=V(this,q);return ve.value!==Ce||ve.fontSize!==De||ve.rect.some((qe,Se)=>Math.abs(qe-Ne[Se])>=1)||ve.color.some((qe,Se)=>qe!==Me[Se])||ve.pageIndex!==Ie},Li=function(ve=!1){if(!this.annotationElementId)return;if(Ue(this,K,Tr).call(this),!ve&&(this.width===0||this.height===0)){setTimeout(()=>Ue(this,K,Li).call(this,!0),0);return}const Ce=oe._internalPadding*this.parentScale;V(this,q).rect=this.getRect(Ce,Ce)},$n(oe,"_freeTextDefaultContent",""),$n(oe,"_internalPadding",0),$n(oe,"_defaultColor",null),$n(oe,"_defaultFontSize",10),$n(oe,"_type","freetext");let he=oe;$.FreeTextEditor=he},(A,$,H)=>{var ge,Ae,pr,xa,Qe,ot,st,ut,dt,mt,Ge,Xe,me,ye,je,Ke,nt,pt,ht,We,wt,St,Ma,Xr,Di,Oi,zt,an,_n,gt,Ye,Je,$t,Ni,Gt,$e,ft,Pt,Ta,Bi;Object.defineProperty($,"__esModule",{value:!0}),$.StampAnnotationElement=$.InkAnnotationElement=$.FreeTextAnnotationElement=$.AnnotationLayer=void 0;var O=H(1),R=H(6),B=H(3),Y=H(30),he=H(31),ue=H(32);const le=1e3,W=9,be=new WeakSet;function ce(Tt){return{width:Tt[2]-Tt[0],height:Tt[3]-Tt[1]}}class Q{static create(xe){switch(xe.data.annotationType){case O.AnnotationType.LINK:return new ee(xe);case O.AnnotationType.TEXT:return new q(xe);case O.AnnotationType.WIDGET:switch(xe.data.fieldType){case"Tx":return new ne(xe);case"Btn":return xe.data.radioButton?new te(xe):xe.data.checkBox?new de(xe):new se(xe);case"Ch":return new re(xe);case"Sig":return new fe(xe)}return new K(xe);case O.AnnotationType.POPUP:return new ae(xe);case O.AnnotationType.FREETEXT:return new Ee(xe);case O.AnnotationType.LINE:return new J(xe);case O.AnnotationType.SQUARE:return new ve(xe);case O.AnnotationType.CIRCLE:return new Ce(xe);case O.AnnotationType.POLYLINE:return new De(xe);case O.AnnotationType.CARET:return new Ne(xe);case O.AnnotationType.INK:return new Ie(xe);case O.AnnotationType.POLYGON:return new Me(xe);case O.AnnotationType.HIGHLIGHT:return new qe(xe);case O.AnnotationType.UNDERLINE:return new Se(xe);case O.AnnotationType.SQUIGGLY:return new Te(xe);case O.AnnotationType.STRIKEOUT:return new He(xe);case O.AnnotationType.STAMP:return new _e(xe);case O.AnnotationType.FILEATTACHMENT:return new G(xe);default:return new ie(xe)}}}const Pe=class Pe{constructor(xe,{isRenderable:we=!1,ignoreBorder:ze=!1,createQuadrilaterals:ct=!1}={}){it(this,ge,!1);this.isRenderable=we,this.data=xe.data,this.layer=xe.layer,this.linkService=xe.linkService,this.downloadManager=xe.downloadManager,this.imageResourcesPath=xe.imageResourcesPath,this.renderForms=xe.renderForms,this.svgFactory=xe.svgFactory,this.annotationStorage=xe.annotationStorage,this.enableScripting=xe.enableScripting,this.hasJSActions=xe.hasJSActions,this._fieldObjects=xe.fieldObjects,this.parent=xe.parent,we&&(this.container=this._createContainer(ze)),ct&&this._createQuadrilaterals()}static _hasPopupData({titleObj:xe,contentsObj:we,richText:ze}){return!!(xe!=null&&xe.str||we!=null&&we.str||ze!=null&&ze.str)}get hasPopupData(){return Pe._hasPopupData(this.data)}_createContainer(xe){const{data:we,parent:{page:ze,viewport:ct}}=this,lt=document.createElement("section");lt.setAttribute("data-annotation-id",we.id),this instanceof K||(lt.tabIndex=le),lt.style.zIndex=this.parent.zIndex++,this.data.popupRef&&lt.setAttribute("aria-haspopup","dialog"),we.noRotate&&lt.classList.add("norotate");const{pageWidth:vt,pageHeight:yt,pageX:Ot,pageY:It}=ct.rawDims;if(!we.rect||this instanceof ae){const{rotation:Zt}=we;return!we.hasOwnCanvas&&Zt!==0&&this.setRotation(Zt,lt),lt}const{width:xt,height:nn}=ce(we.rect),Ft=O.Util.normalizeRect([we.rect[0],ze.view[3]-we.rect[1]+ze.view[1],we.rect[2],ze.view[3]-we.rect[3]+ze.view[1]]);if(!xe&&we.borderStyle.width>0){lt.style.borderWidth=`${we.borderStyle.width}px`;const Zt=we.borderStyle.horizontalCornerRadius,cn=we.borderStyle.verticalCornerRadius;if(Zt>0||cn>0){const Cn=`calc(${Zt}px * var(--scale-factor)) / calc(${cn}px * var(--scale-factor))`;lt.style.borderRadius=Cn}else if(this instanceof te){const Cn=`calc(${xt}px * var(--scale-factor)) / calc(${nn}px * var(--scale-factor))`;lt.style.borderRadius=Cn}switch(we.borderStyle.style){case O.AnnotationBorderStyleType.SOLID:lt.style.borderStyle="solid";break;case O.AnnotationBorderStyleType.DASHED:lt.style.borderStyle="dashed";break;case O.AnnotationBorderStyleType.BEVELED:(0,O.warn)("Unimplemented border style: beveled");break;case O.AnnotationBorderStyleType.INSET:(0,O.warn)("Unimplemented border style: inset");break;case O.AnnotationBorderStyleType.UNDERLINE:lt.style.borderBottomStyle="solid";break}const gn=we.borderColor||null;gn?(at(this,ge,!0),lt.style.borderColor=O.Util.makeHexColor(gn[0]|0,gn[1]|0,gn[2]|0)):lt.style.borderWidth=0}lt.style.left=`${100*(Ft[0]-Ot)/vt}%`,lt.style.top=`${100*(Ft[1]-It)/yt}%`;const{rotation:jt}=we;return we.hasOwnCanvas||jt===0?(lt.style.width=`${100*xt/vt}%`,lt.style.height=`${100*nn/yt}%`):this.setRotation(jt,lt),lt}setRotation(xe,we=this.container){if(!this.data.rect)return;const{pageWidth:ze,pageHeight:ct}=this.parent.viewport.rawDims,{width:lt,height:vt}=ce(this.data.rect);let yt,Ot;xe%180===0?(yt=100*lt/ze,Ot=100*vt/ct):(yt=100*vt/ze,Ot=100*lt/ct),we.style.width=`${yt}%`,we.style.height=`${Ot}%`,we.setAttribute("data-main-rotation",(360-xe)%360)}get _commonActions(){const xe=(we,ze,ct)=>{const lt=ct.detail[we],vt=lt[0],yt=lt.slice(1);ct.target.style[ze]=Y.ColorConverters[`${vt}_HTML`](yt),this.annotationStorage.setValue(this.data.id,{[ze]:Y.ColorConverters[`${vt}_rgb`](yt)})};return(0,O.shadow)(this,"_commonActions",{display:we=>{const{display:ze}=we.detail,ct=ze%2===1;this.container.style.visibility=ct?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:ct,noPrint:ze===1||ze===2})},print:we=>{this.annotationStorage.setValue(this.data.id,{noPrint:!we.detail.print})},hidden:we=>{const{hidden:ze}=we.detail;this.container.style.visibility=ze?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:ze,noView:ze})},focus:we=>{setTimeout(()=>we.target.focus({preventScroll:!1}),0)},userName:we=>{we.target.title=we.detail.userName},readonly:we=>{we.target.disabled=we.detail.readonly},required:we=>{this._setRequired(we.target,we.detail.required)},bgColor:we=>{xe("bgColor","backgroundColor",we)},fillColor:we=>{xe("fillColor","backgroundColor",we)},fgColor:we=>{xe("fgColor","color",we)},textColor:we=>{xe("textColor","color",we)},borderColor:we=>{xe("borderColor","borderColor",we)},strokeColor:we=>{xe("strokeColor","borderColor",we)},rotation:we=>{const ze=we.detail.rotation;this.setRotation(ze),this.annotationStorage.setValue(this.data.id,{rotation:ze})}})}_dispatchEventFromSandbox(xe,we){const ze=this._commonActions;for(const ct of Object.keys(we.detail)){const lt=xe[ct]||ze[ct];lt==null||lt(we)}}_setDefaultPropertiesFromJS(xe){if(!this.enableScripting)return;const we=this.annotationStorage.getRawValue(this.data.id);if(!we)return;const ze=this._commonActions;for(const[ct,lt]of Object.entries(we)){const vt=ze[ct];if(vt){const yt={detail:{[ct]:lt},target:xe};vt(yt),delete we[ct]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:xe}=this.data;if(!xe)return;const[we,ze,ct,lt]=this.data.rect;if(xe.length===1){const[,{x:cn,y:gn},{x:Cn,y:Vn}]=xe[0];if(ct===cn&&lt===gn&&we===Cn&&ze===Vn)return}const{style:vt}=this.container;let yt;if(V(this,ge)){const{borderColor:cn,borderWidth:gn}=vt;vt.borderWidth=0,yt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${cn}" stroke-width="${gn}">`],this.container.classList.add("hasBorder")}const Ot=ct-we,It=lt-ze,{svgFactory:xt}=this,nn=xt.createElement("svg");nn.classList.add("quadrilateralsContainer"),nn.setAttribute("width",0),nn.setAttribute("height",0);const Ft=xt.createElement("defs");nn.append(Ft);const jt=xt.createElement("clipPath"),Zt=`clippath_${this.data.id}`;jt.setAttribute("id",Zt),jt.setAttribute("clipPathUnits","objectBoundingBox"),Ft.append(jt);for(const[,{x:cn,y:gn},{x:Cn,y:Vn}]of xe){const Dn=xt.createElement("rect"),er=(Cn-we)/Ot,nr=(lt-gn)/It,rr=(cn-Cn)/Ot,Ir=(gn-Vn)/It;Dn.setAttribute("x",er),Dn.setAttribute("y",nr),Dn.setAttribute("width",rr),Dn.setAttribute("height",Ir),jt.append(Dn),yt==null||yt.push(`<rect vector-effect="non-scaling-stroke" x="${er}" y="${nr}" width="${rr}" height="${Ir}"/>`)}V(this,ge)&&(yt.push("</g></svg>')"),vt.backgroundImage=yt.join("")),this.container.append(nn),this.container.style.clipPath=`url(#${Zt})`}_createPopup(){const{container:xe,data:we}=this;xe.setAttribute("aria-haspopup","dialog");const ze=new ae({data:{color:we.color,titleObj:we.titleObj,modificationDate:we.modificationDate,contentsObj:we.contentsObj,richText:we.richText,parentRect:we.rect,borderStyle:0,id:`popup_${we.id}`,rotation:we.rotation},parent:this.parent,elements:[this]});this.parent.div.append(ze.render())}render(){(0,O.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(xe,we=null){const ze=[];if(this._fieldObjects){const ct=this._fieldObjects[xe];if(ct)for(const{page:lt,id:vt,exportValues:yt}of ct){if(lt===-1||vt===we)continue;const Ot=typeof yt=="string"?yt:null,It=document.querySelector(`[data-element-id="${vt}"]`);if(It&&!be.has(It)){(0,O.warn)(`_getElementsByName - element not allowed: ${vt}`);continue}ze.push({id:vt,exportValue:Ot,domElement:It})}return ze}for(const ct of document.getElementsByName(xe)){const{exportValue:lt}=ct,vt=ct.getAttribute("data-element-id");vt!==we&&be.has(ct)&&ze.push({id:vt,exportValue:lt,domElement:ct})}return ze}show(){var xe;this.container&&(this.container.hidden=!1),(xe=this.popup)==null||xe.maybeShow()}hide(){var xe;this.container&&(this.container.hidden=!0),(xe=this.popup)==null||xe.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const xe=this.getElementsToTriggerPopup();if(Array.isArray(xe))for(const we of xe)we.classList.add("highlightArea");else xe.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:xe,data:{id:we}}=this;this.container.addEventListener("dblclick",()=>{var ze;(ze=this.linkService.eventBus)==null||ze.dispatch("switchannotationeditormode",{source:this,mode:xe,editId:we})})}};ge=new WeakMap;let ie=Pe;class ee extends ie{constructor(we,ze=null){super(we,{isRenderable:!0,ignoreBorder:!!(ze!=null&&ze.ignoreBorder),createQuadrilaterals:!0});it(this,Ae);this.isTooltipOnly=we.data.isTooltipOnly}render(){const{data:we,linkService:ze}=this,ct=document.createElement("a");ct.setAttribute("data-element-id",we.id);let lt=!1;return we.url?(ze.addLinkAttributes(ct,we.url,we.newWindow),lt=!0):we.action?(this._bindNamedAction(ct,we.action),lt=!0):we.attachment?(this._bindAttachment(ct,we.attachment),lt=!0):we.setOCGState?(Ue(this,Ae,xa).call(this,ct,we.setOCGState),lt=!0):we.dest?(this._bindLink(ct,we.dest),lt=!0):(we.actions&&(we.actions.Action||we.actions["Mouse Up"]||we.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(ct,we),lt=!0),we.resetForm?(this._bindResetFormAction(ct,we.resetForm),lt=!0):this.isTooltipOnly&&!lt&&(this._bindLink(ct,""),lt=!0)),this.container.classList.add("linkAnnotation"),lt&&this.container.append(ct),this.container}_bindLink(we,ze){we.href=this.linkService.getDestinationHash(ze),we.onclick=()=>(ze&&this.linkService.goToDestination(ze),!1),(ze||ze==="")&&Ue(this,Ae,pr).call(this)}_bindNamedAction(we,ze){we.href=this.linkService.getAnchorUrl(""),we.onclick=()=>(this.linkService.executeNamedAction(ze),!1),Ue(this,Ae,pr).call(this)}_bindAttachment(we,ze){we.href=this.linkService.getAnchorUrl(""),we.onclick=()=>{var ct;return(ct=this.downloadManager)==null||ct.openOrDownloadData(this.container,ze.content,ze.filename),!1},Ue(this,Ae,pr).call(this)}_bindJSAction(we,ze){we.href=this.linkService.getAnchorUrl("");const ct=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const lt of Object.keys(ze.actions)){const vt=ct.get(lt);vt&&(we[vt]=()=>{var yt;return(yt=this.linkService.eventBus)==null||yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ze.id,name:lt}}),!1})}we.onclick||(we.onclick=()=>!1),Ue(this,Ae,pr).call(this)}_bindResetFormAction(we,ze){const ct=we.onclick;if(ct||(we.href=this.linkService.getAnchorUrl("")),Ue(this,Ae,pr).call(this),!this._fieldObjects){(0,O.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),ct||(we.onclick=()=>!1);return}we.onclick=()=>{var nn;ct==null||ct();const{fields:lt,refs:vt,include:yt}=ze,Ot=[];if(lt.length!==0||vt.length!==0){const Ft=new Set(vt);for(const jt of lt){const Zt=this._fieldObjects[jt]||[];for(const{id:cn}of Zt)Ft.add(cn)}for(const jt of Object.values(this._fieldObjects))for(const Zt of jt)Ft.has(Zt.id)===yt&&Ot.push(Zt)}else for(const Ft of Object.values(this._fieldObjects))Ot.push(...Ft);const It=this.annotationStorage,xt=[];for(const Ft of Ot){const{id:jt}=Ft;switch(xt.push(jt),Ft.type){case"text":{const cn=Ft.defaultValue||"";It.setValue(jt,{value:cn});break}case"checkbox":case"radiobutton":{const cn=Ft.defaultValue===Ft.exportValues;It.setValue(jt,{value:cn});break}case"combobox":case"listbox":{const cn=Ft.defaultValue||"";It.setValue(jt,{value:cn});break}default:continue}const Zt=document.querySelector(`[data-element-id="${jt}"]`);if(Zt){if(!be.has(Zt)){(0,O.warn)(`_bindResetFormAction - element not allowed: ${jt}`);continue}}else continue;Zt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((nn=this.linkService.eventBus)==null||nn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:xt,name:"ResetForm"}})),!1}}}Ae=new WeakSet,pr=function(){this.container.setAttribute("data-internal-link","")},xa=function(we,ze){we.href=this.linkService.getAnchorUrl(""),we.onclick=()=>(this.linkService.executeSetOCGState(ze),!1),Ue(this,Ae,pr).call(this)};class q extends ie{constructor(xe){super(xe,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const xe=document.createElement("img");return xe.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",xe.alt="[{{type}} Annotation]",xe.dataset.l10nId="text_annotation_type",xe.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(xe),this.container}}class K extends ie{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(xe){var we;this.data.hasOwnCanvas&&(((we=xe.previousSibling)==null?void 0:we.nodeName)==="CANVAS"&&(xe.previousSibling.hidden=!0),xe.hidden=!1)}_getKeyModifier(xe){const{isWin:we,isMac:ze}=O.FeatureTest.platform;return we&&xe.ctrlKey||ze&&xe.metaKey}_setEventListener(xe,we,ze,ct,lt){ze.includes("mouse")?xe.addEventListener(ze,vt=>{var yt;(yt=this.linkService.eventBus)==null||yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ct,value:lt(vt),shift:vt.shiftKey,modifier:this._getKeyModifier(vt)}})}):xe.addEventListener(ze,vt=>{var yt;if(ze==="blur"){if(!we.focused||!vt.relatedTarget)return;we.focused=!1}else if(ze==="focus"){if(we.focused)return;we.focused=!0}lt&&((yt=this.linkService.eventBus)==null||yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ct,value:lt(vt)}}))})}_setEventListeners(xe,we,ze,ct){var lt,vt,yt;for(const[Ot,It]of ze)(It==="Action"||(lt=this.data.actions)!=null&&lt[It])&&((It==="Focus"||It==="Blur")&&(we||(we={focused:!1})),this._setEventListener(xe,we,Ot,It,ct),It==="Focus"&&!((vt=this.data.actions)!=null&&vt.Blur)?this._setEventListener(xe,we,"blur","Blur",null):It==="Blur"&&!((yt=this.data.actions)!=null&&yt.Focus)&&this._setEventListener(xe,we,"focus","Focus",null))}_setBackgroundColor(xe){const we=this.data.backgroundColor||null;xe.style.backgroundColor=we===null?"transparent":O.Util.makeHexColor(we[0],we[1],we[2])}_setTextStyle(xe){const we=["left","center","right"],{fontColor:ze}=this.data.defaultAppearanceData,ct=this.data.defaultAppearanceData.fontSize||W,lt=xe.style;let vt;const yt=2,Ot=It=>Math.round(10*It)/10;if(this.data.multiLine){const It=Math.abs(this.data.rect[3]-this.data.rect[1]-yt),xt=Math.round(It/(O.LINE_FACTOR*ct))||1,nn=It/xt;vt=Math.min(ct,Ot(nn/O.LINE_FACTOR))}else{const It=Math.abs(this.data.rect[3]-this.data.rect[1]-yt);vt=Math.min(ct,Ot(It/O.LINE_FACTOR))}lt.fontSize=`calc(${vt}px * var(--scale-factor))`,lt.color=O.Util.makeHexColor(ze[0],ze[1],ze[2]),this.data.textAlignment!==null&&(lt.textAlign=we[this.data.textAlignment])}_setRequired(xe,we){we?xe.setAttribute("required",!0):xe.removeAttribute("required"),xe.setAttribute("aria-required",we)}}class ne extends K{constructor(xe){const we=xe.renderForms||!xe.data.hasAppearance&&!!xe.data.fieldValue;super(xe,{isRenderable:we})}setPropertyOnSiblings(xe,we,ze,ct){const lt=this.annotationStorage;for(const vt of this._getElementsByName(xe.name,xe.id))vt.domElement&&(vt.domElement[we]=ze),lt.setValue(vt.id,{[ct]:ze})}render(){var ct,lt;const xe=this.annotationStorage,we=this.data.id;this.container.classList.add("textWidgetAnnotation");let ze=null;if(this.renderForms){const vt=xe.getValue(we,{value:this.data.fieldValue});let yt=vt.value||"";const Ot=xe.getValue(we,{charLimit:this.data.maxLen}).charLimit;Ot&&yt.length>Ot&&(yt=yt.slice(0,Ot));let It=vt.formattedValue||((ct=this.data.textContent)==null?void 0:ct.join(`
`))||null;It&&this.data.comb&&(It=It.replaceAll(/\s+/g,""));const xt={userValue:yt,formattedValue:It,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(ze=document.createElement("textarea"),ze.textContent=It??yt,this.data.doNotScroll&&(ze.style.overflowY="hidden")):(ze=document.createElement("input"),ze.type="text",ze.setAttribute("value",It??yt),this.data.doNotScroll&&(ze.style.overflowX="hidden")),this.data.hasOwnCanvas&&(ze.hidden=!0),be.add(ze),ze.setAttribute("data-element-id",we),ze.disabled=this.data.readOnly,ze.name=this.data.fieldName,ze.tabIndex=le,this._setRequired(ze,this.data.required),Ot&&(ze.maxLength=Ot),ze.addEventListener("input",Ft=>{xe.setValue(we,{value:Ft.target.value}),this.setPropertyOnSiblings(ze,"value",Ft.target.value,"value"),xt.formattedValue=null}),ze.addEventListener("resetform",Ft=>{const jt=this.data.defaultFieldValue??"";ze.value=xt.userValue=jt,xt.formattedValue=null});let nn=Ft=>{const{formattedValue:jt}=xt;jt!=null&&(Ft.target.value=jt),Ft.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){ze.addEventListener("focus",jt=>{if(xt.focused)return;const{target:Zt}=jt;xt.userValue&&(Zt.value=xt.userValue),xt.lastCommittedValue=Zt.value,xt.commitKey=1,xt.focused=!0}),ze.addEventListener("updatefromsandbox",jt=>{this.showElementAndHideCanvas(jt.target);const Zt={value(cn){xt.userValue=cn.detail.value??"",xe.setValue(we,{value:xt.userValue.toString()}),cn.target.value=xt.userValue},formattedValue(cn){const{formattedValue:gn}=cn.detail;xt.formattedValue=gn,gn!=null&&cn.target!==document.activeElement&&(cn.target.value=gn),xe.setValue(we,{formattedValue:gn})},selRange(cn){cn.target.setSelectionRange(...cn.detail.selRange)},charLimit:cn=>{var Dn;const{charLimit:gn}=cn.detail,{target:Cn}=cn;if(gn===0){Cn.removeAttribute("maxLength");return}Cn.setAttribute("maxLength",gn);let Vn=xt.userValue;!Vn||Vn.length<=gn||(Vn=Vn.slice(0,gn),Cn.value=xt.userValue=Vn,xe.setValue(we,{value:Vn}),(Dn=this.linkService.eventBus)==null||Dn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:we,name:"Keystroke",value:Vn,willCommit:!0,commitKey:1,selStart:Cn.selectionStart,selEnd:Cn.selectionEnd}}))}};this._dispatchEventFromSandbox(Zt,jt)}),ze.addEventListener("keydown",jt=>{var gn;xt.commitKey=1;let Zt=-1;if(jt.key==="Escape"?Zt=0:jt.key==="Enter"&&!this.data.multiLine?Zt=2:jt.key==="Tab"&&(xt.commitKey=3),Zt===-1)return;const{value:cn}=jt.target;xt.lastCommittedValue!==cn&&(xt.lastCommittedValue=cn,xt.userValue=cn,(gn=this.linkService.eventBus)==null||gn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:we,name:"Keystroke",value:cn,willCommit:!0,commitKey:Zt,selStart:jt.target.selectionStart,selEnd:jt.target.selectionEnd}}))});const Ft=nn;nn=null,ze.addEventListener("blur",jt=>{var cn;if(!xt.focused||!jt.relatedTarget)return;xt.focused=!1;const{value:Zt}=jt.target;xt.userValue=Zt,xt.lastCommittedValue!==Zt&&((cn=this.linkService.eventBus)==null||cn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:we,name:"Keystroke",value:Zt,willCommit:!0,commitKey:xt.commitKey,selStart:jt.target.selectionStart,selEnd:jt.target.selectionEnd}})),Ft(jt)}),(lt=this.data.actions)!=null&&lt.Keystroke&&ze.addEventListener("beforeinput",jt=>{var nr;xt.lastCommittedValue=null;const{data:Zt,target:cn}=jt,{value:gn,selectionStart:Cn,selectionEnd:Vn}=cn;let Dn=Cn,er=Vn;switch(jt.inputType){case"deleteWordBackward":{const rr=gn.substring(0,Cn).match(/\w*[^\w]*$/);rr&&(Dn-=rr[0].length);break}case"deleteWordForward":{const rr=gn.substring(Cn).match(/^[^\w]*\w*/);rr&&(er+=rr[0].length);break}case"deleteContentBackward":Cn===Vn&&(Dn-=1);break;case"deleteContentForward":Cn===Vn&&(er+=1);break}jt.preventDefault(),(nr=this.linkService.eventBus)==null||nr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:we,name:"Keystroke",value:gn,change:Zt||"",willCommit:!1,selStart:Dn,selEnd:er}})}),this._setEventListeners(ze,xt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],jt=>jt.target.value)}if(nn&&ze.addEventListener("blur",nn),this.data.comb){const jt=(this.data.rect[2]-this.data.rect[0])/Ot;ze.classList.add("comb"),ze.style.letterSpacing=`calc(${jt}px * var(--scale-factor) - 1ch)`}}else ze=document.createElement("div"),ze.textContent=this.data.fieldValue,ze.style.verticalAlign="middle",ze.style.display="table-cell";return this._setTextStyle(ze),this._setBackgroundColor(ze),this._setDefaultPropertiesFromJS(ze),this.container.append(ze),this.container}}class fe extends K{constructor(xe){super(xe,{isRenderable:!!xe.data.hasOwnCanvas})}}class de extends K{constructor(xe){super(xe,{isRenderable:xe.renderForms})}render(){const xe=this.annotationStorage,we=this.data,ze=we.id;let ct=xe.getValue(ze,{value:we.exportValue===we.fieldValue}).value;typeof ct=="string"&&(ct=ct!=="Off",xe.setValue(ze,{value:ct})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const lt=document.createElement("input");return be.add(lt),lt.setAttribute("data-element-id",ze),lt.disabled=we.readOnly,this._setRequired(lt,this.data.required),lt.type="checkbox",lt.name=we.fieldName,ct&&lt.setAttribute("checked",!0),lt.setAttribute("exportValue",we.exportValue),lt.tabIndex=le,lt.addEventListener("change",vt=>{const{name:yt,checked:Ot}=vt.target;for(const It of this._getElementsByName(yt,ze)){const xt=Ot&&It.exportValue===we.exportValue;It.domElement&&(It.domElement.checked=xt),xe.setValue(It.id,{value:xt})}xe.setValue(ze,{value:Ot})}),lt.addEventListener("resetform",vt=>{const yt=we.defaultFieldValue||"Off";vt.target.checked=yt===we.exportValue}),this.enableScripting&&this.hasJSActions&&(lt.addEventListener("updatefromsandbox",vt=>{const yt={value(Ot){Ot.target.checked=Ot.detail.value!=="Off",xe.setValue(ze,{value:Ot.target.checked})}};this._dispatchEventFromSandbox(yt,vt)}),this._setEventListeners(lt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],vt=>vt.target.checked)),this._setBackgroundColor(lt),this._setDefaultPropertiesFromJS(lt),this.container.append(lt),this.container}}class te extends K{constructor(xe){super(xe,{isRenderable:xe.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const xe=this.annotationStorage,we=this.data,ze=we.id;let ct=xe.getValue(ze,{value:we.fieldValue===we.buttonValue}).value;typeof ct=="string"&&(ct=ct!==we.buttonValue,xe.setValue(ze,{value:ct}));const lt=document.createElement("input");if(be.add(lt),lt.setAttribute("data-element-id",ze),lt.disabled=we.readOnly,this._setRequired(lt,this.data.required),lt.type="radio",lt.name=we.fieldName,ct&&lt.setAttribute("checked",!0),lt.tabIndex=le,lt.addEventListener("change",vt=>{const{name:yt,checked:Ot}=vt.target;for(const It of this._getElementsByName(yt,ze))xe.setValue(It.id,{value:!1});xe.setValue(ze,{value:Ot})}),lt.addEventListener("resetform",vt=>{const yt=we.defaultFieldValue;vt.target.checked=yt!=null&&yt===we.buttonValue}),this.enableScripting&&this.hasJSActions){const vt=we.buttonValue;lt.addEventListener("updatefromsandbox",yt=>{const Ot={value:It=>{const xt=vt===It.detail.value;for(const nn of this._getElementsByName(It.target.name)){const Ft=xt&&nn.id===ze;nn.domElement&&(nn.domElement.checked=Ft),xe.setValue(nn.id,{value:Ft})}}};this._dispatchEventFromSandbox(Ot,yt)}),this._setEventListeners(lt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],yt=>yt.target.checked)}return this._setBackgroundColor(lt),this._setDefaultPropertiesFromJS(lt),this.container.append(lt),this.container}}class se extends ee{constructor(xe){super(xe,{ignoreBorder:xe.data.hasAppearance})}render(){const xe=super.render();xe.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(xe.title=this.data.alternativeText);const we=xe.lastChild;return this.enableScripting&&this.hasJSActions&&we&&(this._setDefaultPropertiesFromJS(we),we.addEventListener("updatefromsandbox",ze=>{this._dispatchEventFromSandbox({},ze)})),xe}}class re extends K{constructor(xe){super(xe,{isRenderable:xe.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const xe=this.annotationStorage,we=this.data.id,ze=xe.getValue(we,{value:this.data.fieldValue}),ct=document.createElement("select");be.add(ct),ct.setAttribute("data-element-id",we),ct.disabled=this.data.readOnly,this._setRequired(ct,this.data.required),ct.name=this.data.fieldName,ct.tabIndex=le;let lt=this.data.combo&&this.data.options.length>0;this.data.combo||(ct.size=this.data.options.length,this.data.multiSelect&&(ct.multiple=!0)),ct.addEventListener("resetform",xt=>{const nn=this.data.defaultFieldValue;for(const Ft of ct.options)Ft.selected=Ft.value===nn});for(const xt of this.data.options){const nn=document.createElement("option");nn.textContent=xt.displayValue,nn.value=xt.exportValue,ze.value.includes(xt.exportValue)&&(nn.setAttribute("selected",!0),lt=!1),ct.append(nn)}let vt=null;if(lt){const xt=document.createElement("option");xt.value=" ",xt.setAttribute("hidden",!0),xt.setAttribute("selected",!0),ct.prepend(xt),vt=()=>{xt.remove(),ct.removeEventListener("input",vt),vt=null},ct.addEventListener("input",vt)}const yt=xt=>{const nn=xt?"value":"textContent",{options:Ft,multiple:jt}=ct;return jt?Array.prototype.filter.call(Ft,Zt=>Zt.selected).map(Zt=>Zt[nn]):Ft.selectedIndex===-1?null:Ft[Ft.selectedIndex][nn]};let Ot=yt(!1);const It=xt=>{const nn=xt.target.options;return Array.prototype.map.call(nn,Ft=>({displayValue:Ft.textContent,exportValue:Ft.value}))};return this.enableScripting&&this.hasJSActions?(ct.addEventListener("updatefromsandbox",xt=>{const nn={value(Ft){vt==null||vt();const jt=Ft.detail.value,Zt=new Set(Array.isArray(jt)?jt:[jt]);for(const cn of ct.options)cn.selected=Zt.has(cn.value);xe.setValue(we,{value:yt(!0)}),Ot=yt(!1)},multipleSelection(Ft){ct.multiple=!0},remove(Ft){const jt=ct.options,Zt=Ft.detail.remove;jt[Zt].selected=!1,ct.remove(Zt),jt.length>0&&Array.prototype.findIndex.call(jt,gn=>gn.selected)===-1&&(jt[0].selected=!0),xe.setValue(we,{value:yt(!0),items:It(Ft)}),Ot=yt(!1)},clear(Ft){for(;ct.length!==0;)ct.remove(0);xe.setValue(we,{value:null,items:[]}),Ot=yt(!1)},insert(Ft){const{index:jt,displayValue:Zt,exportValue:cn}=Ft.detail.insert,gn=ct.children[jt],Cn=document.createElement("option");Cn.textContent=Zt,Cn.value=cn,gn?gn.before(Cn):ct.append(Cn),xe.setValue(we,{value:yt(!0),items:It(Ft)}),Ot=yt(!1)},items(Ft){const{items:jt}=Ft.detail;for(;ct.length!==0;)ct.remove(0);for(const Zt of jt){const{displayValue:cn,exportValue:gn}=Zt,Cn=document.createElement("option");Cn.textContent=cn,Cn.value=gn,ct.append(Cn)}ct.options.length>0&&(ct.options[0].selected=!0),xe.setValue(we,{value:yt(!0),items:It(Ft)}),Ot=yt(!1)},indices(Ft){const jt=new Set(Ft.detail.indices);for(const Zt of Ft.target.options)Zt.selected=jt.has(Zt.index);xe.setValue(we,{value:yt(!0)}),Ot=yt(!1)},editable(Ft){Ft.target.disabled=!Ft.detail.editable}};this._dispatchEventFromSandbox(nn,xt)}),ct.addEventListener("input",xt=>{var Ft;const nn=yt(!0);xe.setValue(we,{value:nn}),xt.preventDefault(),(Ft=this.linkService.eventBus)==null||Ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:we,name:"Keystroke",value:Ot,changeEx:nn,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(ct,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],xt=>xt.target.value)):ct.addEventListener("input",function(xt){xe.setValue(we,{value:yt(!0)})}),this.data.combo&&this._setTextStyle(ct),this._setBackgroundColor(ct),this._setDefaultPropertiesFromJS(ct),this.container.append(ct),this.container}}class ae extends ie{constructor(xe){const{data:we,elements:ze}=xe;super(xe,{isRenderable:ie._hasPopupData(we)}),this.elements=ze}render(){this.container.classList.add("popupAnnotation");const xe=new oe({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),we=[];for(const ze of this.elements)ze.popup=xe,we.push(ze.data.id),ze.addHighlightArea();return this.container.setAttribute("aria-controls",we.map(ze=>`${O.AnnotationPrefix}${ze}`).join(",")),this.container}}class oe{constructor({container:xe,color:we,elements:ze,titleObj:ct,modificationDate:lt,contentsObj:vt,richText:yt,parent:Ot,rect:It,parentRect:xt,open:nn}){it(this,St);it(this,Qe,null);it(this,ot,Ue(this,St,Ma).bind(this));it(this,st,Ue(this,St,Oi).bind(this));it(this,ut,Ue(this,St,Di).bind(this));it(this,dt,Ue(this,St,Xr).bind(this));it(this,mt,null);it(this,Ge,null);it(this,Xe,null);it(this,me,null);it(this,ye,null);it(this,je,null);it(this,Ke,!1);it(this,nt,null);it(this,pt,null);it(this,ht,null);it(this,We,null);it(this,wt,!1);var jt;at(this,Ge,xe),at(this,We,ct),at(this,Xe,vt),at(this,ht,yt),at(this,ye,Ot),at(this,mt,we),at(this,pt,It),at(this,je,xt),at(this,me,ze);const Ft=R.PDFDateString.toDateObject(lt);Ft&&at(this,Qe,Ot.l10n.get("annotation_date_string",{date:Ft.toLocaleDateString(),time:Ft.toLocaleTimeString()})),this.trigger=ze.flatMap(Zt=>Zt.getElementsToTriggerPopup());for(const Zt of this.trigger)Zt.addEventListener("click",V(this,dt)),Zt.addEventListener("mouseenter",V(this,ut)),Zt.addEventListener("mouseleave",V(this,st)),Zt.classList.add("popupTriggerArea");for(const Zt of ze)(jt=Zt.container)==null||jt.addEventListener("keydown",V(this,ot));V(this,Ge).hidden=!0,nn&&Ue(this,St,Xr).call(this)}render(){if(V(this,nt))return;const{page:{view:xe},viewport:{rawDims:{pageWidth:we,pageHeight:ze,pageX:ct,pageY:lt}}}=V(this,ye),vt=at(this,nt,document.createElement("div"));if(vt.className="popup",V(this,mt)){const Dn=vt.style.outlineColor=O.Util.makeHexColor(...V(this,mt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?vt.style.backgroundColor=`color-mix(in srgb, ${Dn} 30%, white)`:vt.style.backgroundColor=O.Util.makeHexColor(...V(this,mt).map(nr=>Math.floor(.7*(255-nr)+nr)))}const yt=document.createElement("span");yt.className="header";const Ot=document.createElement("h1");if(yt.append(Ot),{dir:Ot.dir,str:Ot.textContent}=V(this,We),vt.append(yt),V(this,Qe)){const Dn=document.createElement("span");Dn.classList.add("popupDate"),V(this,Qe).then(er=>{Dn.textContent=er}),yt.append(Dn)}const It=V(this,Xe),xt=V(this,ht);if(xt!=null&&xt.str&&(!(It!=null&&It.str)||It.str===xt.str))ue.XfaLayer.render({xfaHtml:xt.html,intent:"richText",div:vt}),vt.lastChild.classList.add("richText","popupContent");else{const Dn=this._formatContents(It);vt.append(Dn)}let nn=!!V(this,je),Ft=nn?V(this,je):V(this,pt);for(const Dn of V(this,me))if(!Ft||O.Util.intersect(Dn.data.rect,Ft)!==null){Ft=Dn.data.rect,nn=!0;break}const jt=O.Util.normalizeRect([Ft[0],xe[3]-Ft[1]+xe[1],Ft[2],xe[3]-Ft[3]+xe[1]]),cn=nn?Ft[2]-Ft[0]+5:0,gn=jt[0]+cn,Cn=jt[1],{style:Vn}=V(this,Ge);Vn.left=`${100*(gn-ct)/we}%`,Vn.top=`${100*(Cn-lt)/ze}%`,V(this,Ge).append(vt)}_formatContents({str:xe,dir:we}){const ze=document.createElement("p");ze.classList.add("popupContent"),ze.dir=we;const ct=xe.split(/(?:\r\n?|\n)/);for(let lt=0,vt=ct.length;lt<vt;++lt){const yt=ct[lt];ze.append(document.createTextNode(yt)),lt<vt-1&&ze.append(document.createElement("br"))}return ze}forceHide(){at(this,wt,this.isVisible),V(this,wt)&&(V(this,Ge).hidden=!0)}maybeShow(){V(this,wt)&&(at(this,wt,!1),V(this,Ge).hidden=!1)}get isVisible(){return V(this,Ge).hidden===!1}}Qe=new WeakMap,ot=new WeakMap,st=new WeakMap,ut=new WeakMap,dt=new WeakMap,mt=new WeakMap,Ge=new WeakMap,Xe=new WeakMap,me=new WeakMap,ye=new WeakMap,je=new WeakMap,Ke=new WeakMap,nt=new WeakMap,pt=new WeakMap,ht=new WeakMap,We=new WeakMap,wt=new WeakMap,St=new WeakSet,Ma=function(xe){xe.altKey||xe.shiftKey||xe.ctrlKey||xe.metaKey||(xe.key==="Enter"||xe.key==="Escape"&&V(this,Ke))&&Ue(this,St,Xr).call(this)},Xr=function(){at(this,Ke,!V(this,Ke)),V(this,Ke)?(Ue(this,St,Di).call(this),V(this,Ge).addEventListener("click",V(this,dt)),V(this,Ge).addEventListener("keydown",V(this,ot))):(Ue(this,St,Oi).call(this),V(this,Ge).removeEventListener("click",V(this,dt)),V(this,Ge).removeEventListener("keydown",V(this,ot)))},Di=function(){V(this,nt)||this.render(),this.isVisible?V(this,Ke)&&V(this,Ge).classList.add("focused"):(V(this,Ge).hidden=!1,V(this,Ge).style.zIndex=parseInt(V(this,Ge).style.zIndex)+1e3)},Oi=function(){V(this,Ge).classList.remove("focused"),!(V(this,Ke)||!this.isVisible)&&(V(this,Ge).hidden=!0,V(this,Ge).style.zIndex=parseInt(V(this,Ge).style.zIndex)-1e3)};class Ee extends ie{constructor(xe){super(xe,{isRenderable:!0,ignoreBorder:!0}),this.textContent=xe.data.textContent,this.textPosition=xe.data.textPosition,this.annotationEditorType=O.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const xe=document.createElement("div");xe.classList.add("annotationTextContent"),xe.setAttribute("role","comment");for(const we of this.textContent){const ze=document.createElement("span");ze.textContent=we,xe.append(ze)}this.container.append(xe)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}$.FreeTextAnnotationElement=Ee;class J extends ie{constructor(we){super(we,{isRenderable:!0,ignoreBorder:!0});it(this,zt,null)}render(){this.container.classList.add("lineAnnotation");const we=this.data,{width:ze,height:ct}=ce(we.rect),lt=this.svgFactory.create(ze,ct,!0),vt=at(this,zt,this.svgFactory.createElement("svg:line"));return vt.setAttribute("x1",we.rect[2]-we.lineCoordinates[0]),vt.setAttribute("y1",we.rect[3]-we.lineCoordinates[1]),vt.setAttribute("x2",we.rect[2]-we.lineCoordinates[2]),vt.setAttribute("y2",we.rect[3]-we.lineCoordinates[3]),vt.setAttribute("stroke-width",we.borderStyle.width||1),vt.setAttribute("stroke","transparent"),vt.setAttribute("fill","transparent"),lt.append(vt),this.container.append(lt),!we.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return V(this,zt)}addHighlightArea(){this.container.classList.add("highlightArea")}}zt=new WeakMap;class ve extends ie{constructor(we){super(we,{isRenderable:!0,ignoreBorder:!0});it(this,an,null)}render(){this.container.classList.add("squareAnnotation");const we=this.data,{width:ze,height:ct}=ce(we.rect),lt=this.svgFactory.create(ze,ct,!0),vt=we.borderStyle.width,yt=at(this,an,this.svgFactory.createElement("svg:rect"));return yt.setAttribute("x",vt/2),yt.setAttribute("y",vt/2),yt.setAttribute("width",ze-vt),yt.setAttribute("height",ct-vt),yt.setAttribute("stroke-width",vt||1),yt.setAttribute("stroke","transparent"),yt.setAttribute("fill","transparent"),lt.append(yt),this.container.append(lt),!we.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return V(this,an)}addHighlightArea(){this.container.classList.add("highlightArea")}}an=new WeakMap;class Ce extends ie{constructor(we){super(we,{isRenderable:!0,ignoreBorder:!0});it(this,_n,null)}render(){this.container.classList.add("circleAnnotation");const we=this.data,{width:ze,height:ct}=ce(we.rect),lt=this.svgFactory.create(ze,ct,!0),vt=we.borderStyle.width,yt=at(this,_n,this.svgFactory.createElement("svg:ellipse"));return yt.setAttribute("cx",ze/2),yt.setAttribute("cy",ct/2),yt.setAttribute("rx",ze/2-vt/2),yt.setAttribute("ry",ct/2-vt/2),yt.setAttribute("stroke-width",vt||1),yt.setAttribute("stroke","transparent"),yt.setAttribute("fill","transparent"),lt.append(yt),this.container.append(lt),!we.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return V(this,_n)}addHighlightArea(){this.container.classList.add("highlightArea")}}_n=new WeakMap;class De extends ie{constructor(we){super(we,{isRenderable:!0,ignoreBorder:!0});it(this,gt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const we=this.data,{width:ze,height:ct}=ce(we.rect),lt=this.svgFactory.create(ze,ct,!0);let vt=[];for(const Ot of we.vertices){const It=Ot.x-we.rect[0],xt=we.rect[3]-Ot.y;vt.push(It+","+xt)}vt=vt.join(" ");const yt=at(this,gt,this.svgFactory.createElement(this.svgElementName));return yt.setAttribute("points",vt),yt.setAttribute("stroke-width",we.borderStyle.width||1),yt.setAttribute("stroke","transparent"),yt.setAttribute("fill","transparent"),lt.append(yt),this.container.append(lt),!we.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return V(this,gt)}addHighlightArea(){this.container.classList.add("highlightArea")}}gt=new WeakMap;class Me extends De{constructor(xe){super(xe),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Ne extends ie{constructor(xe){super(xe,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Ie extends ie{constructor(we){super(we,{isRenderable:!0,ignoreBorder:!0});it(this,Ye,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=O.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const we=this.data,{width:ze,height:ct}=ce(we.rect),lt=this.svgFactory.create(ze,ct,!0);for(const vt of we.inkLists){let yt=[];for(const It of vt){const xt=It.x-we.rect[0],nn=we.rect[3]-It.y;yt.push(`${xt},${nn}`)}yt=yt.join(" ");const Ot=this.svgFactory.createElement(this.svgElementName);V(this,Ye).push(Ot),Ot.setAttribute("points",yt),Ot.setAttribute("stroke-width",we.borderStyle.width||1),Ot.setAttribute("stroke","transparent"),Ot.setAttribute("fill","transparent"),!we.popupRef&&this.hasPopupData&&this._createPopup(),lt.append(Ot)}return this.container.append(lt),this.container}getElementsToTriggerPopup(){return V(this,Ye)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ye=new WeakMap,$.InkAnnotationElement=Ie;class qe extends ie{constructor(xe){super(xe,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Se extends ie{constructor(xe){super(xe,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Te extends ie{constructor(xe){super(xe,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class He extends ie{constructor(xe){super(xe,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class _e extends ie{constructor(xe){super(xe,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}$.StampAnnotationElement=_e;class G extends ie{constructor(we){var lt;super(we,{isRenderable:!0});it(this,$t);it(this,Je,null);const{filename:ze,content:ct}=this.data.file;this.filename=(0,R.getFilenameFromUrl)(ze,!0),this.content=ct,(lt=this.linkService.eventBus)==null||lt.dispatch("fileattachmentannotation",{source:this,filename:ze,content:ct})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:we,data:ze}=this;let ct;ze.hasAppearance||ze.fillAlpha===0?ct=document.createElement("div"):(ct=document.createElement("img"),ct.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(ze.name)?"paperclip":"pushpin"}.svg`,ze.fillAlpha&&ze.fillAlpha<1&&(ct.style=`filter: opacity(${Math.round(ze.fillAlpha*100)}%);`)),ct.addEventListener("dblclick",Ue(this,$t,Ni).bind(this)),at(this,Je,ct);const{isMac:lt}=O.FeatureTest.platform;return we.addEventListener("keydown",vt=>{vt.key==="Enter"&&(lt?vt.metaKey:vt.ctrlKey)&&Ue(this,$t,Ni).call(this)}),!ze.popupRef&&this.hasPopupData?this._createPopup():ct.classList.add("popupTriggerArea"),we.append(ct),we}getElementsToTriggerPopup(){return V(this,Je)}addHighlightArea(){this.container.classList.add("highlightArea")}}Je=new WeakMap,$t=new WeakSet,Ni=function(){var we;(we=this.downloadManager)==null||we.openOrDownloadData(this.container,this.content,this.filename)};class X{constructor({div:xe,accessibilityManager:we,annotationCanvasMap:ze,l10n:ct,page:lt,viewport:vt}){it(this,Pt);it(this,Gt,null);it(this,$e,null);it(this,ft,new Map);this.div=xe,at(this,Gt,we),at(this,$e,ze),this.l10n=ct,this.page=lt,this.viewport=vt,this.zIndex=0,this.l10n||(this.l10n=he.NullL10n)}async render(xe){const{annotations:we}=xe,ze=this.div;(0,R.setLayerDimensions)(ze,this.viewport);const ct=new Map,lt={data:null,layer:ze,linkService:xe.linkService,downloadManager:xe.downloadManager,imageResourcesPath:xe.imageResourcesPath||"",renderForms:xe.renderForms!==!1,svgFactory:new R.DOMSVGFactory,annotationStorage:xe.annotationStorage||new B.AnnotationStorage,enableScripting:xe.enableScripting===!0,hasJSActions:xe.hasJSActions,fieldObjects:xe.fieldObjects,parent:this,elements:null};for(const vt of we){if(vt.noHTML)continue;const yt=vt.annotationType===O.AnnotationType.POPUP;if(yt){const xt=ct.get(vt.id);if(!xt)continue;lt.elements=xt}else{const{width:xt,height:nn}=ce(vt.rect);if(xt<=0||nn<=0)continue}lt.data=vt;const Ot=Q.create(lt);if(!Ot.isRenderable)continue;if(!yt&&vt.popupRef){const xt=ct.get(vt.popupRef);xt?xt.push(Ot):ct.set(vt.popupRef,[Ot])}Ot.annotationEditorType>0&&V(this,ft).set(Ot.data.id,Ot);const It=Ot.render();vt.hidden&&(It.style.visibility="hidden"),Ue(this,Pt,Ta).call(this,It,vt.id)}Ue(this,Pt,Bi).call(this),await this.l10n.translate(ze)}update({viewport:xe}){const we=this.div;this.viewport=xe,(0,R.setLayerDimensions)(we,{rotation:xe.rotation}),Ue(this,Pt,Bi).call(this),we.hidden=!1}getEditableAnnotations(){return Array.from(V(this,ft).values())}getEditableAnnotation(xe){return V(this,ft).get(xe)}}Gt=new WeakMap,$e=new WeakMap,ft=new WeakMap,Pt=new WeakSet,Ta=function(xe,we){var ct;const ze=xe.firstChild||xe;ze.id=`${O.AnnotationPrefix}${we}`,this.div.append(xe),(ct=V(this,Gt))==null||ct.moveElementInDOM(this.div,xe,ze,!1)},Bi=function(){if(!V(this,$e))return;const xe=this.div;for(const[we,ze]of V(this,$e)){const ct=xe.querySelector(`[data-annotation-id="${we}"]`);if(!ct)continue;const{firstChild:lt}=ct;lt?lt.nodeName==="CANVAS"?lt.replaceWith(ze):lt.before(ze):ct.append(ze)}V(this,$e).clear()},$.AnnotationLayer=X},(A,$)=>{Object.defineProperty($,"__esModule",{value:!0}),$.ColorConverters=void 0;function H(B){return Math.floor(Math.max(0,Math.min(1,B))*255).toString(16).padStart(2,"0")}function O(B){return Math.max(0,Math.min(255,255*B))}class R{static CMYK_G([Y,he,ue,le]){return["G",1-Math.min(1,.3*Y+.59*ue+.11*he+le)]}static G_CMYK([Y]){return["CMYK",0,0,0,1-Y]}static G_RGB([Y]){return["RGB",Y,Y,Y]}static G_rgb([Y]){return Y=O(Y),[Y,Y,Y]}static G_HTML([Y]){const he=H(Y);return`#${he}${he}${he}`}static RGB_G([Y,he,ue]){return["G",.3*Y+.59*he+.11*ue]}static RGB_rgb(Y){return Y.map(O)}static RGB_HTML(Y){return`#${Y.map(H).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([Y,he,ue,le]){return["RGB",1-Math.min(1,Y+le),1-Math.min(1,ue+le),1-Math.min(1,he+le)]}static CMYK_rgb([Y,he,ue,le]){return[O(1-Math.min(1,Y+le)),O(1-Math.min(1,ue+le)),O(1-Math.min(1,he+le))]}static CMYK_HTML(Y){const he=this.CMYK_RGB(Y).slice(1);return this.RGB_HTML(he)}static RGB_CMYK([Y,he,ue]){const le=1-Y,W=1-he,be=1-ue,ce=Math.min(le,W,be);return["CMYK",le,W,be,ce]}}$.ColorConverters=R},(A,$)=>{Object.defineProperty($,"__esModule",{value:!0}),$.NullL10n=void 0,$.getL10nFallback=O;const H={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};H.print_progress_percent="{{progress}}%";function O(Y,he){switch(Y){case"find_match_count":Y=`find_match_count[${he.total===1?"one":"other"}]`;break;case"find_match_count_limit":Y=`find_match_count_limit[${he.limit===1?"one":"other"}]`;break}return H[Y]||""}function R(Y,he){return he?Y.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(ue,le)=>le in he?he[le]:"{{"+le+"}}"):Y}const B={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(Y,he=null,ue=O(Y,he)){return R(ue,he)},async translate(Y){}};$.NullL10n=B},(A,$,H)=>{Object.defineProperty($,"__esModule",{value:!0}),$.XfaLayer=void 0;var O=H(25);class R{static setupStorage(Y,he,ue,le,W){const be=le.getValue(he,{value:null});switch(ue.name){case"textarea":if(be.value!==null&&(Y.textContent=be.value),W==="print")break;Y.addEventListener("input",ce=>{le.setValue(he,{value:ce.target.value})});break;case"input":if(ue.attributes.type==="radio"||ue.attributes.type==="checkbox"){if(be.value===ue.attributes.xfaOn?Y.setAttribute("checked",!0):be.value===ue.attributes.xfaOff&&Y.removeAttribute("checked"),W==="print")break;Y.addEventListener("change",ce=>{le.setValue(he,{value:ce.target.checked?ce.target.getAttribute("xfaOn"):ce.target.getAttribute("xfaOff")})})}else{if(be.value!==null&&Y.setAttribute("value",be.value),W==="print")break;Y.addEventListener("input",ce=>{le.setValue(he,{value:ce.target.value})})}break;case"select":if(be.value!==null){Y.setAttribute("value",be.value);for(const ce of ue.children)ce.attributes.value===be.value?ce.attributes.selected=!0:ce.attributes.hasOwnProperty("selected")&&delete ce.attributes.selected}Y.addEventListener("input",ce=>{const Q=ce.target.options,ie=Q.selectedIndex===-1?"":Q[Q.selectedIndex].value;le.setValue(he,{value:ie})});break}}static setAttributes({html:Y,element:he,storage:ue=null,intent:le,linkService:W}){const{attributes:be}=he,ce=Y instanceof HTMLAnchorElement;be.type==="radio"&&(be.name=`${be.name}-${le}`);for(const[Q,ie]of Object.entries(be))if(ie!=null)switch(Q){case"class":ie.length&&Y.setAttribute(Q,ie.join(" "));break;case"dataId":break;case"id":Y.setAttribute("data-element-id",ie);break;case"style":Object.assign(Y.style,ie);break;case"textContent":Y.textContent=ie;break;default:(!ce||Q!=="href"&&Q!=="newWindow")&&Y.setAttribute(Q,ie)}ce&&W.addLinkAttributes(Y,be.href,be.newWindow),ue&&be.dataId&&this.setupStorage(Y,be.dataId,he,ue)}static render(Y){var ee;const he=Y.annotationStorage,ue=Y.linkService,le=Y.xfaHtml,W=Y.intent||"display",be=document.createElement(le.name);le.attributes&&this.setAttributes({html:be,element:le,intent:W,linkService:ue});const ce=[[le,-1,be]],Q=Y.div;if(Q.append(be),Y.viewport){const q=`matrix(${Y.viewport.transform.join(",")})`;Q.style.transform=q}W!=="richText"&&Q.setAttribute("class","xfaLayer xfaFont");const ie=[];for(;ce.length>0;){const[q,K,ne]=ce.at(-1);if(K+1===q.children.length){ce.pop();continue}const fe=q.children[++ce.at(-1)[1]];if(fe===null)continue;const{name:de}=fe;if(de==="#text"){const se=document.createTextNode(fe.value);ie.push(se),ne.append(se);continue}const te=(ee=fe==null?void 0:fe.attributes)!=null&&ee.xmlns?document.createElementNS(fe.attributes.xmlns,de):document.createElement(de);if(ne.append(te),fe.attributes&&this.setAttributes({html:te,element:fe,storage:he,intent:W,linkService:ue}),fe.children&&fe.children.length>0)ce.push([fe,-1,te]);else if(fe.value){const se=document.createTextNode(fe.value);O.XfaText.shouldBuildText(de)&&ie.push(se),te.append(se)}}for(const q of Q.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))q.setAttribute("readOnly",!0);return{textDivs:ie}}static update(Y){const he=`matrix(${Y.viewport.transform.join(",")})`;Y.div.style.transform=he,Y.div.hidden=!1}}$.XfaLayer=R},(A,$,H)=>{var le,W,be,ce,Q,ie,ee,q,K,ne,fe,de,te,se,re,$a,Ra,Ia,Fa,ji,La,zi,Da,Oa,Na,Ba,ja,or,Hi,Kr,Yr,yr,Vi,Zr,Ae,za,Wi,Ha,Va,Ui,Jr,Sr;Object.defineProperty($,"__esModule",{value:!0}),$.InkEditor=void 0;var O=H(1),R=H(4),B=H(29),Y=H(6),he=H(5);const mt=class mt extends R.AnnotationEditor{constructor(me){super({...me,name:"inkEditor"});it(this,re);it(this,le,0);it(this,W,0);it(this,be,this.canvasPointermove.bind(this));it(this,ce,this.canvasPointerleave.bind(this));it(this,Q,this.canvasPointerup.bind(this));it(this,ie,this.canvasPointerdown.bind(this));it(this,ee,new Path2D);it(this,q,!1);it(this,K,!1);it(this,ne,!1);it(this,fe,null);it(this,de,0);it(this,te,0);it(this,se,null);this.color=me.color||null,this.thickness=me.thickness||null,this.opacity=me.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(me){R.AnnotationEditor.initialize(me,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(me,ye){switch(me){case O.AnnotationEditorParamsType.INK_THICKNESS:mt._defaultThickness=ye;break;case O.AnnotationEditorParamsType.INK_COLOR:mt._defaultColor=ye;break;case O.AnnotationEditorParamsType.INK_OPACITY:mt._defaultOpacity=ye/100;break}}updateParams(me,ye){switch(me){case O.AnnotationEditorParamsType.INK_THICKNESS:Ue(this,re,$a).call(this,ye);break;case O.AnnotationEditorParamsType.INK_COLOR:Ue(this,re,Ra).call(this,ye);break;case O.AnnotationEditorParamsType.INK_OPACITY:Ue(this,re,Ia).call(this,ye);break}}static get defaultPropertiesToUpdate(){return[[O.AnnotationEditorParamsType.INK_THICKNESS,mt._defaultThickness],[O.AnnotationEditorParamsType.INK_COLOR,mt._defaultColor||R.AnnotationEditor._defaultLineColor],[O.AnnotationEditorParamsType.INK_OPACITY,Math.round(mt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[O.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||mt._defaultThickness],[O.AnnotationEditorParamsType.INK_COLOR,this.color||mt._defaultColor||R.AnnotationEditor._defaultLineColor],[O.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??mt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Ue(this,re,Kr).call(this),Ue(this,re,Yr).call(this)),this.isAttachedToDOM||(this.parent.add(this),Ue(this,re,yr).call(this)),Ue(this,re,Sr).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,V(this,fe).disconnect(),at(this,fe,null),super.remove())}setParent(me){!this.parent&&me?this._uiManager.removeShouldRescale(this):this.parent&&me===null&&this._uiManager.addShouldRescale(this),super.setParent(me)}onScaleChanging(){const[me,ye]=this.parentDimensions,je=this.width*me,Ke=this.height*ye;this.setDimensions(je,Ke)}enableEditMode(){V(this,q)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",V(this,ie)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",V(this,ie)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){V(this,q)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),at(this,q,!0),this.div.classList.add("disabled"),Ue(this,re,Sr).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(me){this._focusEventsAllowed&&(super.focusin(me),this.enableEditMode())}canvasPointerdown(me){me.button!==0||!this.isInEditMode()||V(this,q)||(this.setInForeground(),me.preventDefault(),me.type!=="mouse"&&this.div.focus(),Ue(this,re,La).call(this,me.offsetX,me.offsetY))}canvasPointermove(me){me.preventDefault(),Ue(this,re,zi).call(this,me.offsetX,me.offsetY)}canvasPointerup(me){me.preventDefault(),Ue(this,re,Hi).call(this,me)}canvasPointerleave(me){Ue(this,re,Hi).call(this,me)}get isResizable(){return!this.isEmpty()&&V(this,q)}render(){if(this.div)return this.div;let me,ye;this.width&&(me=this.x,ye=this.y),super.render(),R.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(ht=>{var We;return(We=this.div)==null?void 0:We.setAttribute("aria-label",ht)});const[je,Ke,nt,pt]=Ue(this,re,Fa).call(this);if(this.setAt(je,Ke,0,0),this.setDims(nt,pt),Ue(this,re,Kr).call(this),this.width){const[ht,We]=this.parentDimensions;this.setAspectRatio(this.width*ht,this.height*We),this.setAt(me*ht,ye*We,this.width*ht,this.height*We),at(this,ne,!0),Ue(this,re,yr).call(this),this.setDims(this.width*ht,this.height*We),Ue(this,re,or).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Ue(this,re,Yr).call(this),this.div}setDimensions(me,ye){const je=Math.round(me),Ke=Math.round(ye);if(V(this,de)===je&&V(this,te)===Ke)return;at(this,de,je),at(this,te,Ke),this.canvas.style.visibility="hidden";const[nt,pt]=this.parentDimensions;this.width=me/nt,this.height=ye/pt,this.fixAndSetPosition(),V(this,q)&&Ue(this,re,Vi).call(this,me,ye),Ue(this,re,yr).call(this),Ue(this,re,or).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(me,ye,je){var zt,an,_n;if(me instanceof B.InkAnnotationElement)return null;const Ke=super.deserialize(me,ye,je);Ke.thickness=me.thickness,Ke.color=O.Util.makeHexColor(...me.color),Ke.opacity=me.opacity;const[nt,pt]=Ke.pageDimensions,ht=Ke.width*nt,We=Ke.height*pt,wt=Ke.parentScale,St=me.thickness/2;at(Ke,q,!0),at(Ke,de,Math.round(ht)),at(Ke,te,Math.round(We));const{paths:Yt,rect:Ut,rotation:dn}=me;for(let{bezier:gt}of Yt){gt=Ue(zt=mt,Ae,Ha).call(zt,gt,Ut,dn);const Ye=[];Ke.paths.push(Ye);let Je=wt*(gt[0]-St),$t=wt*(gt[1]-St);for(let Gt=2,$e=gt.length;Gt<$e;Gt+=6){const ft=wt*(gt[Gt]-St),Pt=wt*(gt[Gt+1]-St),Dt=wt*(gt[Gt+2]-St),Bt=wt*(gt[Gt+3]-St),Tt=wt*(gt[Gt+4]-St),xe=wt*(gt[Gt+5]-St);Ye.push([[Je,$t],[ft,Pt],[Dt,Bt],[Tt,xe]]),Je=Tt,$t=xe}const Lt=Ue(this,Ae,za).call(this,Ye);Ke.bezierPath2D.push(Lt)}const Rt=Ue(an=Ke,re,Ui).call(an);return at(Ke,W,Math.max(R.AnnotationEditor.MIN_SIZE,Rt[2]-Rt[0])),at(Ke,le,Math.max(R.AnnotationEditor.MIN_SIZE,Rt[3]-Rt[1])),Ue(_n=Ke,re,Vi).call(_n,ht,We),Ke}serialize(){if(this.isEmpty())return null;const me=this.getRect(0,0),ye=R.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:O.AnnotationEditorType.INK,color:ye,thickness:this.thickness,opacity:this.opacity,paths:Ue(this,re,Va).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,me),pageIndex:this.pageIndex,rect:me,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};le=new WeakMap,W=new WeakMap,be=new WeakMap,ce=new WeakMap,Q=new WeakMap,ie=new WeakMap,ee=new WeakMap,q=new WeakMap,K=new WeakMap,ne=new WeakMap,fe=new WeakMap,de=new WeakMap,te=new WeakMap,se=new WeakMap,re=new WeakSet,$a=function(me){const ye=this.thickness;this.addCommands({cmd:()=>{this.thickness=me,Ue(this,re,Sr).call(this)},undo:()=>{this.thickness=ye,Ue(this,re,Sr).call(this)},mustExec:!0,type:O.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Ra=function(me){const ye=this.color;this.addCommands({cmd:()=>{this.color=me,Ue(this,re,or).call(this)},undo:()=>{this.color=ye,Ue(this,re,or).call(this)},mustExec:!0,type:O.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ia=function(me){me/=100;const ye=this.opacity;this.addCommands({cmd:()=>{this.opacity=me,Ue(this,re,or).call(this)},undo:()=>{this.opacity=ye,Ue(this,re,or).call(this)},mustExec:!0,type:O.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Fa=function(){const{parentRotation:me,parentDimensions:[ye,je]}=this;switch(me){case 90:return[0,je,je,ye];case 180:return[ye,je,ye,je];case 270:return[ye,0,je,ye];default:return[0,0,ye,je]}},ji=function(){const{ctx:me,color:ye,opacity:je,thickness:Ke,parentScale:nt,scaleFactor:pt}=this;me.lineWidth=Ke*nt/pt,me.lineCap="round",me.lineJoin="round",me.miterLimit=10,me.strokeStyle=`${ye}${(0,he.opacityToHex)(je)}`},La=function(me,ye){this.canvas.addEventListener("contextmenu",Y.noContextMenu),this.canvas.addEventListener("pointerleave",V(this,ce)),this.canvas.addEventListener("pointermove",V(this,be)),this.canvas.addEventListener("pointerup",V(this,Q)),this.canvas.removeEventListener("pointerdown",V(this,ie)),this.isEditing=!0,V(this,ne)||(at(this,ne,!0),Ue(this,re,yr).call(this),this.thickness||(this.thickness=mt._defaultThickness),this.color||(this.color=mt._defaultColor||R.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=mt._defaultOpacity)),this.currentPath.push([me,ye]),at(this,K,!1),Ue(this,re,ji).call(this),at(this,se,()=>{Ue(this,re,Na).call(this),V(this,se)&&window.requestAnimationFrame(V(this,se))}),window.requestAnimationFrame(V(this,se))},zi=function(me,ye){const[je,Ke]=this.currentPath.at(-1);if(this.currentPath.length>1&&me===je&&ye===Ke)return;const nt=this.currentPath;let pt=V(this,ee);if(nt.push([me,ye]),at(this,K,!0),nt.length<=2){pt.moveTo(...nt[0]),pt.lineTo(me,ye);return}nt.length===3&&(at(this,ee,pt=new Path2D),pt.moveTo(...nt[0])),Ue(this,re,Ba).call(this,pt,...nt.at(-3),...nt.at(-2),me,ye)},Da=function(){if(this.currentPath.length===0)return;const me=this.currentPath.at(-1);V(this,ee).lineTo(...me)},Oa=function(me,ye){at(this,se,null),me=Math.min(Math.max(me,0),this.canvas.width),ye=Math.min(Math.max(ye,0),this.canvas.height),Ue(this,re,zi).call(this,me,ye),Ue(this,re,Da).call(this);let je;if(this.currentPath.length!==1)je=Ue(this,re,ja).call(this);else{const We=[me,ye];je=[[We,We.slice(),We.slice(),We]]}const Ke=V(this,ee),nt=this.currentPath;this.currentPath=[],at(this,ee,new Path2D);const pt=()=>{this.allRawPaths.push(nt),this.paths.push(je),this.bezierPath2D.push(Ke),this.rebuild()},ht=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Ue(this,re,Kr).call(this),Ue(this,re,Yr).call(this)),Ue(this,re,Sr).call(this))};this.addCommands({cmd:pt,undo:ht,mustExec:!0})},Na=function(){if(!V(this,K))return;at(this,K,!1);const me=Math.ceil(this.thickness*this.parentScale),ye=this.currentPath.slice(-3),je=ye.map(pt=>pt[0]),Ke=ye.map(pt=>pt[1]);Math.min(...je)-me,Math.max(...je)+me,Math.min(...Ke)-me,Math.max(...Ke)+me;const{ctx:nt}=this;nt.save(),nt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const pt of this.bezierPath2D)nt.stroke(pt);nt.stroke(V(this,ee)),nt.restore()},Ba=function(me,ye,je,Ke,nt,pt,ht){const We=(ye+Ke)/2,wt=(je+nt)/2,St=(Ke+pt)/2,Yt=(nt+ht)/2;me.bezierCurveTo(We+2*(Ke-We)/3,wt+2*(nt-wt)/3,St+2*(Ke-St)/3,Yt+2*(nt-Yt)/3,St,Yt)},ja=function(){const me=this.currentPath;if(me.length<=2)return[[me[0],me[0],me.at(-1),me.at(-1)]];const ye=[];let je,[Ke,nt]=me[0];for(je=1;je<me.length-2;je++){const[Ut,dn]=me[je],[Rt,zt]=me[je+1],an=(Ut+Rt)/2,_n=(dn+zt)/2,gt=[Ke+2*(Ut-Ke)/3,nt+2*(dn-nt)/3],Ye=[an+2*(Ut-an)/3,_n+2*(dn-_n)/3];ye.push([[Ke,nt],gt,Ye,[an,_n]]),[Ke,nt]=[an,_n]}const[pt,ht]=me[je],[We,wt]=me[je+1],St=[Ke+2*(pt-Ke)/3,nt+2*(ht-nt)/3],Yt=[We+2*(pt-We)/3,wt+2*(ht-wt)/3];return ye.push([[Ke,nt],St,Yt,[We,wt]]),ye},or=function(){if(this.isEmpty()){Ue(this,re,Zr).call(this);return}Ue(this,re,ji).call(this);const{canvas:me,ctx:ye}=this;ye.setTransform(1,0,0,1,0,0),ye.clearRect(0,0,me.width,me.height),Ue(this,re,Zr).call(this);for(const je of this.bezierPath2D)ye.stroke(je)},Hi=function(me){this.canvas.removeEventListener("pointerleave",V(this,ce)),this.canvas.removeEventListener("pointermove",V(this,be)),this.canvas.removeEventListener("pointerup",V(this,Q)),this.canvas.addEventListener("pointerdown",V(this,ie)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",Y.noContextMenu)},10),Ue(this,re,Oa).call(this,me.offsetX,me.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Kr=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",R.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(me=>{var ye;return(ye=this.canvas)==null?void 0:ye.setAttribute("aria-label",me)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Yr=function(){at(this,fe,new ResizeObserver(me=>{const ye=me[0].contentRect;ye.width&&ye.height&&this.setDimensions(ye.width,ye.height)})),V(this,fe).observe(this.div)},yr=function(){if(!V(this,ne))return;const[me,ye]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*me),this.canvas.height=Math.ceil(this.height*ye),Ue(this,re,Zr).call(this)},Vi=function(me,ye){const je=Ue(this,re,Jr).call(this),Ke=(me-je)/V(this,W),nt=(ye-je)/V(this,le);this.scaleFactor=Math.min(Ke,nt)},Zr=function(){const me=Ue(this,re,Jr).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+me,this.translationY*this.scaleFactor+me)},Ae=new WeakSet,za=function(me){const ye=new Path2D;for(let je=0,Ke=me.length;je<Ke;je++){const[nt,pt,ht,We]=me[je];je===0&&ye.moveTo(...nt),ye.bezierCurveTo(pt[0],pt[1],ht[0],ht[1],We[0],We[1])}return ye},Wi=function(me,ye,je){const[Ke,nt,pt,ht]=ye;switch(je){case 0:for(let We=0,wt=me.length;We<wt;We+=2)me[We]+=Ke,me[We+1]=ht-me[We+1];break;case 90:for(let We=0,wt=me.length;We<wt;We+=2){const St=me[We];me[We]=me[We+1]+Ke,me[We+1]=St+nt}break;case 180:for(let We=0,wt=me.length;We<wt;We+=2)me[We]=pt-me[We],me[We+1]+=nt;break;case 270:for(let We=0,wt=me.length;We<wt;We+=2){const St=me[We];me[We]=pt-me[We+1],me[We+1]=ht-St}break;default:throw new Error("Invalid rotation")}return me},Ha=function(me,ye,je){const[Ke,nt,pt,ht]=ye;switch(je){case 0:for(let We=0,wt=me.length;We<wt;We+=2)me[We]-=Ke,me[We+1]=ht-me[We+1];break;case 90:for(let We=0,wt=me.length;We<wt;We+=2){const St=me[We];me[We]=me[We+1]-nt,me[We+1]=St-Ke}break;case 180:for(let We=0,wt=me.length;We<wt;We+=2)me[We]=pt-me[We],me[We+1]-=nt;break;case 270:for(let We=0,wt=me.length;We<wt;We+=2){const St=me[We];me[We]=ht-me[We+1],me[We+1]=pt-St}break;default:throw new Error("Invalid rotation")}return me},Va=function(me,ye,je,Ke){var wt,St;const nt=[],pt=this.thickness/2,ht=me*ye+pt,We=me*je+pt;for(const Yt of this.paths){const Ut=[],dn=[];for(let Rt=0,zt=Yt.length;Rt<zt;Rt++){const[an,_n,gt,Ye]=Yt[Rt],Je=me*an[0]+ht,$t=me*an[1]+We,Lt=me*_n[0]+ht,Gt=me*_n[1]+We,$e=me*gt[0]+ht,ft=me*gt[1]+We,Pt=me*Ye[0]+ht,Dt=me*Ye[1]+We;Rt===0&&(Ut.push(Je,$t),dn.push(Je,$t)),Ut.push(Lt,Gt,$e,ft,Pt,Dt),dn.push(Lt,Gt),Rt===zt-1&&dn.push(Pt,Dt)}nt.push({bezier:Ue(wt=mt,Ae,Wi).call(wt,Ut,Ke,this.rotation),points:Ue(St=mt,Ae,Wi).call(St,dn,Ke,this.rotation)})}return nt},Ui=function(){let me=1/0,ye=-1/0,je=1/0,Ke=-1/0;for(const nt of this.paths)for(const[pt,ht,We,wt]of nt){const St=O.Util.bezierBoundingBox(...pt,...ht,...We,...wt);me=Math.min(me,St[0]),je=Math.min(je,St[1]),ye=Math.max(ye,St[2]),Ke=Math.max(Ke,St[3])}return[me,je,ye,Ke]},Jr=function(){return V(this,q)?Math.ceil(this.thickness*this.parentScale):0},Sr=function(me=!1){if(this.isEmpty())return;if(!V(this,q)){Ue(this,re,or).call(this);return}const ye=Ue(this,re,Ui).call(this),je=Ue(this,re,Jr).call(this);at(this,W,Math.max(R.AnnotationEditor.MIN_SIZE,ye[2]-ye[0])),at(this,le,Math.max(R.AnnotationEditor.MIN_SIZE,ye[3]-ye[1]));const Ke=Math.ceil(je+V(this,W)*this.scaleFactor),nt=Math.ceil(je+V(this,le)*this.scaleFactor),[pt,ht]=this.parentDimensions;this.width=Ke/pt,this.height=nt/ht,this.setAspectRatio(Ke,nt);const We=this.translationX,wt=this.translationY;this.translationX=-ye[0],this.translationY=-ye[1],Ue(this,re,yr).call(this),Ue(this,re,or).call(this),at(this,de,Ke),at(this,te,nt),this.setDims(Ke,nt);const St=me?je/this.scaleFactor/2:0;this.translate(We-this.translationX-St,wt-this.translationY-St)},it(mt,Ae),$n(mt,"_defaultColor",null),$n(mt,"_defaultOpacity",1),$n(mt,"_defaultThickness",1),$n(mt,"_type","ink");let ue=mt;$.InkEditor=ue},(A,$,H)=>{var ue,le,W,be,ce,Q,ie,ee,q,K,ne,$r,Rr,Qr,Gi,Wa,Ua,qi,ei,Ga;Object.defineProperty($,"__esModule",{value:!0}),$.StampEditor=void 0;var O=H(1),R=H(4),B=H(6),Y=H(29);const ve=class ve extends R.AnnotationEditor{constructor(Me){super({...Me,name:"stampEditor"});it(this,ne);it(this,ue,null);it(this,le,null);it(this,W,null);it(this,be,null);it(this,ce,null);it(this,Q,null);it(this,ie,null);it(this,ee,null);it(this,q,!1);it(this,K,!1);at(this,be,Me.bitmapUrl),at(this,ce,Me.bitmapFile)}static initialize(Me){R.AnnotationEditor.initialize(Me)}static get supportedTypes(){const Me=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,O.shadow)(this,"supportedTypes",Me.map(Ne=>`image/${Ne}`))}static get supportedTypesStr(){return(0,O.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(Me){return this.supportedTypes.includes(Me)}static paste(Me,Ne){Ne.pasteEditor(O.AnnotationEditorType.STAMP,{bitmapFile:Me.getAsFile()})}remove(){var Me,Ne;V(this,le)&&(at(this,ue,null),this._uiManager.imageManager.deleteId(V(this,le)),(Me=V(this,Q))==null||Me.remove(),at(this,Q,null),(Ne=V(this,ie))==null||Ne.disconnect(),at(this,ie,null)),super.remove()}rebuild(){if(!this.parent){V(this,le)&&Ue(this,ne,Qr).call(this);return}super.rebuild(),this.div!==null&&(V(this,le)&&Ue(this,ne,Qr).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(V(this,W)||V(this,ue)||V(this,be)||V(this,ce))}get isResizable(){return!0}render(){if(this.div)return this.div;let Me,Ne;if(this.width&&(Me=this.x,Ne=this.y),super.render(),this.div.hidden=!0,V(this,ue)?Ue(this,ne,Gi).call(this):Ue(this,ne,Qr).call(this),this.width){const[Ie,qe]=this.parentDimensions;this.setAt(Me*Ie,Ne*qe,this.width*Ie,this.height*qe)}return this.div}static deserialize(Me,Ne,Ie){if(Me instanceof Y.StampAnnotationElement)return null;const qe=super.deserialize(Me,Ne,Ie),{rect:Se,bitmapUrl:Te,bitmapId:He,isSvg:_e,accessibilityData:G}=Me;He&&Ie.imageManager.isValidId(He)?at(qe,le,He):at(qe,be,Te),at(qe,q,_e);const[X,ge]=qe.pageDimensions;return qe.width=(Se[2]-Se[0])/X,qe.height=(Se[3]-Se[1])/ge,G&&(qe.altTextData=G),qe}serialize(Me=!1,Ne=null){if(this.isEmpty())return null;const Ie={annotationType:O.AnnotationEditorType.STAMP,bitmapId:V(this,le),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:V(this,q),structTreeParentId:this._structTreeParentId};if(Me)return Ie.bitmapUrl=Ue(this,ne,ei).call(this,!0),Ie.accessibilityData=this.altTextData,Ie;const{decorative:qe,altText:Se}=this.altTextData;if(!qe&&Se&&(Ie.accessibilityData={type:"Figure",alt:Se}),Ne===null)return Ie;Ne.stamps||(Ne.stamps=new Map);const Te=V(this,q)?(Ie.rect[2]-Ie.rect[0])*(Ie.rect[3]-Ie.rect[1]):null;if(!Ne.stamps.has(V(this,le)))Ne.stamps.set(V(this,le),{area:Te,serialized:Ie}),Ie.bitmap=Ue(this,ne,ei).call(this,!1);else if(V(this,q)){const He=Ne.stamps.get(V(this,le));Te>He.area&&(He.area=Te,He.serialized.bitmap.close(),He.serialized.bitmap=Ue(this,ne,ei).call(this,!1))}return Ie}};ue=new WeakMap,le=new WeakMap,W=new WeakMap,be=new WeakMap,ce=new WeakMap,Q=new WeakMap,ie=new WeakMap,ee=new WeakMap,q=new WeakMap,K=new WeakMap,ne=new WeakSet,$r=function(Me,Ne=!1){if(!Me){this.remove();return}at(this,ue,Me.bitmap),Ne||(at(this,le,Me.id),at(this,q,Me.isSvg)),Ue(this,ne,Gi).call(this)},Rr=function(){at(this,W,null),this._uiManager.enableWaiting(!1),V(this,Q)&&this.div.focus()},Qr=function(){if(V(this,le)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(V(this,le)).then(Ne=>Ue(this,ne,$r).call(this,Ne,!0)).finally(()=>Ue(this,ne,Rr).call(this));return}if(V(this,be)){const Ne=V(this,be);at(this,be,null),this._uiManager.enableWaiting(!0),at(this,W,this._uiManager.imageManager.getFromUrl(Ne).then(Ie=>Ue(this,ne,$r).call(this,Ie)).finally(()=>Ue(this,ne,Rr).call(this)));return}if(V(this,ce)){const Ne=V(this,ce);at(this,ce,null),this._uiManager.enableWaiting(!0),at(this,W,this._uiManager.imageManager.getFromFile(Ne).then(Ie=>Ue(this,ne,$r).call(this,Ie)).finally(()=>Ue(this,ne,Rr).call(this)));return}const Me=document.createElement("input");Me.type="file",Me.accept=ve.supportedTypesStr,at(this,W,new Promise(Ne=>{Me.addEventListener("change",async()=>{if(!Me.files||Me.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const Ie=await this._uiManager.imageManager.getFromFile(Me.files[0]);Ue(this,ne,$r).call(this,Ie)}Ne()}),Me.addEventListener("cancel",()=>{this.remove(),Ne()})}).finally(()=>Ue(this,ne,Rr).call(this))),Me.click()},Gi=function(){const{div:Me}=this;let{width:Ne,height:Ie}=V(this,ue);const[qe,Se]=this.pageDimensions,Te=.75;if(this.width)Ne=this.width*qe,Ie=this.height*Se;else if(Ne>Te*qe||Ie>Te*Se){const X=Math.min(Te*qe/Ne,Te*Se/Ie);Ne*=X,Ie*=X}const[He,_e]=this.parentDimensions;this.setDims(Ne*He/qe,Ie*_e/Se),this._uiManager.enableWaiting(!1);const G=at(this,Q,document.createElement("canvas"));Me.append(G),Me.hidden=!1,Ue(this,ne,qi).call(this,Ne,Ie),Ue(this,ne,Ga).call(this),V(this,K)||(this.parent.addUndoableEditor(this),at(this,K,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},Wa=function(Me,Ne){var Te;const[Ie,qe]=this.parentDimensions;this.width=Me/Ie,this.height=Ne/qe,this.setDims(Me,Ne),(Te=this._initialOptions)!=null&&Te.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,V(this,ee)!==null&&clearTimeout(V(this,ee)),at(this,ee,setTimeout(()=>{at(this,ee,null),Ue(this,ne,qi).call(this,Me,Ne)},200))},Ua=function(Me,Ne){const{width:Ie,height:qe}=V(this,ue);let Se=Ie,Te=qe,He=V(this,ue);for(;Se>2*Me||Te>2*Ne;){const _e=Se,G=Te;Se>2*Me&&(Se=Se>=16384?Math.floor(Se/2)-1:Math.ceil(Se/2)),Te>2*Ne&&(Te=Te>=16384?Math.floor(Te/2)-1:Math.ceil(Te/2));const X=new OffscreenCanvas(Se,Te);X.getContext("2d").drawImage(He,0,0,_e,G,0,0,Se,Te),He=X.transferToImageBitmap()}return He},qi=function(Me,Ne){Me=Math.ceil(Me),Ne=Math.ceil(Ne);const Ie=V(this,Q);if(!Ie||Ie.width===Me&&Ie.height===Ne)return;Ie.width=Me,Ie.height=Ne;const qe=V(this,q)?V(this,ue):Ue(this,ne,Ua).call(this,Me,Ne),Se=Ie.getContext("2d");Se.filter=this._uiManager.hcmFilter,Se.drawImage(qe,0,0,qe.width,qe.height,0,0,Me,Ne)},ei=function(Me){if(Me){if(V(this,q)){const qe=this._uiManager.imageManager.getSvgUrl(V(this,le));if(qe)return qe}const Ne=document.createElement("canvas");return{width:Ne.width,height:Ne.height}=V(this,ue),Ne.getContext("2d").drawImage(V(this,ue),0,0),Ne.toDataURL()}if(V(this,q)){const[Ne,Ie]=this.pageDimensions,qe=Math.round(this.width*Ne*B.PixelsPerInch.PDF_TO_CSS_UNITS),Se=Math.round(this.height*Ie*B.PixelsPerInch.PDF_TO_CSS_UNITS),Te=new OffscreenCanvas(qe,Se);return Te.getContext("2d").drawImage(V(this,ue),0,0,V(this,ue).width,V(this,ue).height,0,0,qe,Se),Te.transferToImageBitmap()}return structuredClone(V(this,ue))},Ga=function(){at(this,ie,new ResizeObserver(Me=>{const Ne=Me[0].contentRect;Ne.width&&Ne.height&&Ue(this,ne,Wa).call(this,Ne.width,Ne.height)})),V(this,ie).observe(this.div)},$n(ve,"_type","stamp");let he=ve;$.StampEditor=he}],__webpack_module_cache__={};function __w_pdfjs_require__(A){var $=__webpack_module_cache__[A];if($!==void 0)return $.exports;var H=__webpack_module_cache__[A]={exports:{}};return __webpack_modules__[A](H,H.exports,__w_pdfjs_require__),H.exports}var __webpack_exports__={};return(()=>{var A=__webpack_exports__;Object.defineProperty(A,"__esModule",{value:!0}),Object.defineProperty(A,"AbortException",{enumerable:!0,get:function(){return $.AbortException}}),Object.defineProperty(A,"AnnotationEditorLayer",{enumerable:!0,get:function(){return B.AnnotationEditorLayer}}),Object.defineProperty(A,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return $.AnnotationEditorParamsType}}),Object.defineProperty(A,"AnnotationEditorType",{enumerable:!0,get:function(){return $.AnnotationEditorType}}),Object.defineProperty(A,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return Y.AnnotationEditorUIManager}}),Object.defineProperty(A,"AnnotationLayer",{enumerable:!0,get:function(){return he.AnnotationLayer}}),Object.defineProperty(A,"AnnotationMode",{enumerable:!0,get:function(){return $.AnnotationMode}}),Object.defineProperty(A,"CMapCompressionType",{enumerable:!0,get:function(){return $.CMapCompressionType}}),Object.defineProperty(A,"DOMSVGFactory",{enumerable:!0,get:function(){return O.DOMSVGFactory}}),Object.defineProperty(A,"FeatureTest",{enumerable:!0,get:function(){return $.FeatureTest}}),Object.defineProperty(A,"GlobalWorkerOptions",{enumerable:!0,get:function(){return ue.GlobalWorkerOptions}}),Object.defineProperty(A,"ImageKind",{enumerable:!0,get:function(){return $.ImageKind}}),Object.defineProperty(A,"InvalidPDFException",{enumerable:!0,get:function(){return $.InvalidPDFException}}),Object.defineProperty(A,"MissingPDFException",{enumerable:!0,get:function(){return $.MissingPDFException}}),Object.defineProperty(A,"OPS",{enumerable:!0,get:function(){return $.OPS}}),Object.defineProperty(A,"PDFDataRangeTransport",{enumerable:!0,get:function(){return H.PDFDataRangeTransport}}),Object.defineProperty(A,"PDFDateString",{enumerable:!0,get:function(){return O.PDFDateString}}),Object.defineProperty(A,"PDFWorker",{enumerable:!0,get:function(){return H.PDFWorker}}),Object.defineProperty(A,"PasswordResponses",{enumerable:!0,get:function(){return $.PasswordResponses}}),Object.defineProperty(A,"PermissionFlag",{enumerable:!0,get:function(){return $.PermissionFlag}}),Object.defineProperty(A,"PixelsPerInch",{enumerable:!0,get:function(){return O.PixelsPerInch}}),Object.defineProperty(A,"PromiseCapability",{enumerable:!0,get:function(){return $.PromiseCapability}}),Object.defineProperty(A,"RenderingCancelledException",{enumerable:!0,get:function(){return O.RenderingCancelledException}}),Object.defineProperty(A,"SVGGraphics",{enumerable:!0,get:function(){return H.SVGGraphics}}),Object.defineProperty(A,"UnexpectedResponseException",{enumerable:!0,get:function(){return $.UnexpectedResponseException}}),Object.defineProperty(A,"Util",{enumerable:!0,get:function(){return $.Util}}),Object.defineProperty(A,"VerbosityLevel",{enumerable:!0,get:function(){return $.VerbosityLevel}}),Object.defineProperty(A,"XfaLayer",{enumerable:!0,get:function(){return le.XfaLayer}}),Object.defineProperty(A,"build",{enumerable:!0,get:function(){return H.build}}),Object.defineProperty(A,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return $.createValidAbsoluteUrl}}),Object.defineProperty(A,"getDocument",{enumerable:!0,get:function(){return H.getDocument}}),Object.defineProperty(A,"getFilenameFromUrl",{enumerable:!0,get:function(){return O.getFilenameFromUrl}}),Object.defineProperty(A,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return O.getPdfFilenameFromUrl}}),Object.defineProperty(A,"getXfaPageViewport",{enumerable:!0,get:function(){return O.getXfaPageViewport}}),Object.defineProperty(A,"isDataScheme",{enumerable:!0,get:function(){return O.isDataScheme}}),Object.defineProperty(A,"isPdfFile",{enumerable:!0,get:function(){return O.isPdfFile}}),Object.defineProperty(A,"loadScript",{enumerable:!0,get:function(){return O.loadScript}}),Object.defineProperty(A,"noContextMenu",{enumerable:!0,get:function(){return O.noContextMenu}}),Object.defineProperty(A,"normalizeUnicode",{enumerable:!0,get:function(){return $.normalizeUnicode}}),Object.defineProperty(A,"renderTextLayer",{enumerable:!0,get:function(){return R.renderTextLayer}}),Object.defineProperty(A,"setLayerDimensions",{enumerable:!0,get:function(){return O.setLayerDimensions}}),Object.defineProperty(A,"shadow",{enumerable:!0,get:function(){return $.shadow}}),Object.defineProperty(A,"updateTextLayer",{enumerable:!0,get:function(){return R.updateTextLayer}}),Object.defineProperty(A,"version",{enumerable:!0,get:function(){return H.version}});var $=__w_pdfjs_require__(1),H=__w_pdfjs_require__(2),O=__w_pdfjs_require__(6),R=__w_pdfjs_require__(26),B=__w_pdfjs_require__(27),Y=__w_pdfjs_require__(5),he=__w_pdfjs_require__(29),ue=__w_pdfjs_require__(14),le=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;(function(A){var $=reactExports,H=pdfExports;function O(U){var pe=Object.create(null);return U&&Object.keys(U).forEach(function(Re){if(Re!=="default"){var Fe=Object.getOwnPropertyDescriptor(U,Re);Object.defineProperty(pe,Re,Fe.get?Fe:{enumerable:!0,get:function(){return U[Re]}})}}),pe.default=U,Object.freeze(pe)}var R,B=O($),Y=O(H);A.AnnotationType=void 0,(R=A.AnnotationType||(A.AnnotationType={}))[R.Text=1]="Text",R[R.Link=2]="Link",R[R.FreeText=3]="FreeText",R[R.Line=4]="Line",R[R.Square=5]="Square",R[R.Circle=6]="Circle",R[R.Polygon=7]="Polygon",R[R.Polyline=8]="Polyline",R[R.Highlight=9]="Highlight",R[R.Underline=10]="Underline",R[R.Squiggly=11]="Squiggly",R[R.StrikeOut=12]="StrikeOut",R[R.Stamp=13]="Stamp",R[R.Caret=14]="Caret",R[R.Ink=15]="Ink",R[R.Popup=16]="Popup",R[R.FileAttachment=17]="FileAttachment";var he=function(U,pe){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Re,Fe){Re.__proto__=Fe}||function(Re,Fe){for(var Be in Fe)Object.prototype.hasOwnProperty.call(Fe,Be)&&(Re[Be]=Fe[Be])},he(U,pe)};function ue(U,pe){if(typeof pe!="function"&&pe!==null)throw new TypeError("Class extends value "+String(pe)+" is not a constructor or null");function Re(){this.constructor=U}he(U,pe),U.prototype=pe===null?Object.create(pe):(Re.prototype=pe.prototype,new Re)}var le,W=function(){return W=Object.assign||function(U){for(var pe,Re=1,Fe=arguments.length;Re<Fe;Re++)for(var Be in pe=arguments[Re])Object.prototype.hasOwnProperty.call(pe,Be)&&(U[Be]=pe[Be]);return U},W.apply(this,arguments)};A.TextDirection=void 0,(le=A.TextDirection||(A.TextDirection={})).RightToLeft="RTL",le.LeftToRight="LTR";var be,ce=B.createContext({currentTheme:"light",direction:A.TextDirection.LeftToRight,setCurrentTheme:function(){}}),Q=function(U){var pe=[];return Object.keys(U).forEach(function(Re){Re&&U[Re]&&pe.push(Re)}),pe.join(" ")},ie=typeof window<"u"?B.useLayoutEffect:B.useEffect,ee=function(U){var pe=B.useRef(null),Re=U.once,Fe=U.threshold,Be=U.onVisibilityChanged;return ie(function(){var Ve=pe.current;if(Ve){var rt=new IntersectionObserver(function(Ze){Ze.forEach(function(Le){var tt=Le.isIntersecting,et=Le.intersectionRatio;Be({isVisible:tt,ratio:et}),tt&&Re&&(rt.unobserve(Ve),rt.disconnect())})},{threshold:Fe||0});return rt.observe(Ve),function(){rt.unobserve(Ve),rt.disconnect()}}},[]),pe},q=function(U){var pe=U.children,Re=U.ignoreDirection,Fe=Re!==void 0&&Re,Be=U.size,Ve=Be===void 0?24:Be,rt=B.useContext(ce).direction,Ze=!Fe&&rt===A.TextDirection.RightToLeft,Le="".concat(Ve||24,"px");return B.createElement("svg",{"aria-hidden":"true",className:Q({"rpv-core__icon":!0,"rpv-core__icon--rtl":Ze}),focusable:"false",height:Le,viewBox:"0 0 24 24",width:Le},pe)},K=function(){return B.createElement(q,{size:16},B.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},ne=function(U){var pe=U.children,Re=U.testId,Fe=U.onClick,Be=B.useContext(ce).direction===A.TextDirection.RightToLeft,Ve=Re?{"data-testid":Re}:{};return B.createElement("button",W({className:Q({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":Be}),type:"button",onClick:Fe},Ve),pe)},fe=function(U){var pe=U.size,Re=pe===void 0?"4rem":pe,Fe=U.testId,Be=B.useState(!1),Ve=Be[0],rt=Be[1],Ze=Fe?{"data-testid":Fe}:{},Le=ee({onVisibilityChanged:function(tt){rt(tt.isVisible)}});return B.createElement("div",W({},Ze,{className:Q({"rpv-core__spinner":!0,"rpv-core__spinner--animating":Ve}),ref:Le,style:{height:Re,width:Re}}))},de=function(U){var pe=U.ariaLabel,Re=pe===void 0?"":pe,Fe=U.autoFocus,Be=Fe!==void 0&&Fe,Ve=U.placeholder,rt=Ve===void 0?"":Ve,Ze=U.testId,Le=U.type,tt=Le===void 0?"text":Le,et=U.value,Et=et===void 0?"":et,_t=U.onChange,bt=U.onKeyDown,Mt=bt===void 0?function(){}:bt,kt=B.useContext(ce).direction,Ct=B.useRef(),pn=kt===A.TextDirection.RightToLeft,Kt={ref:Ct,"data-testid":"","aria-label":Re,className:Q({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":pn}),placeholder:rt,value:Et,onChange:function(Jt){return _t(Jt.target.value)},onKeyDown:Mt};return Ze&&(Kt["data-testid"]=Ze),ie(function(){if(Be){var Jt=Ct.current;if(Jt){var rn=window.scrollX,Ht=window.scrollY;Jt.focus(),window.scrollTo(rn,Ht)}}},[]),tt==="text"?B.createElement("input",W({type:"text"},Kt)):B.createElement("input",W({type:"password"},Kt))};(function(U){U[U.ExitFullScreen=0]="ExitFullScreen",U[U.FullScreenChange=1]="FullScreenChange",U[U.FullScreenElement=2]="FullScreenElement",U[U.FullScreenEnabled=3]="FullScreenEnabled",U[U.RequestFullScreen=4]="RequestFullScreen"})(be||(be={}));var te,se={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},re={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},ae={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},oe=typeof window<"u",Ee=oe&&(be.FullScreenEnabled in document&&se||re.FullScreenEnabled in document&&re||ae.FullScreenEnabled in document&&ae)||se,J=function(){return oe&&Ee.FullScreenEnabled in document&&document[Ee.FullScreenEnabled]===!0},ve=function(U){return oe?U[Ee.ExitFullScreen]():Promise.resolve({})},Ce=function(){return oe?document[Ee.FullScreenElement]:null},De=function(U,pe){var Re=B.useRef(),Fe=function(){Re.current&&clearTimeout(Re.current)};return B.useEffect(function(){return function(){return Fe()}},[]),B.useCallback(function(){for(var Be=[],Ve=0;Ve<arguments.length;Ve++)Be[Ve]=arguments[Ve];Fe(),Re.current=setTimeout(function(){U.apply(void 0,Be)},pe)},[U,pe])},Me=function(){var U=B.useRef(!1);return B.useEffect(function(){return U.current=!0,function(){U.current=!1}},[]),U},Ne=function(U){var pe=B.useRef(U);return B.useEffect(function(){pe.current=U},[U]),pe.current};(function(U){U.NotRenderedYet="NotRenderedYet",U.Rendering="Rendering",U.Rendered="Rendered"})(te||(te={}));var Ie,qe=-9999,Se=function(U){var pe=U.doc,Re=pe.numPages,Fe=pe.loadingTask.docId,Be=B.useMemo(function(){return Array(Re).fill(null).map(function(Ze,Le){return{pageIndex:Le,renderStatus:te.NotRenderedYet,visibility:qe}})},[Fe]),Ve=B.useRef({currentRenderingPage:-1,startRange:0,endRange:Re-1,visibilities:Be}),rt=function(Ze,Le){Ve.current.visibilities[Ze].visibility=Le};return{getHighestPriorityPage:function(){var Ze=Ve.current.visibilities.slice(Ve.current.startRange,Ve.current.endRange+1).filter(function(_t){return _t.visibility>qe});if(!Ze.length)return-1;for(var Le=Ze[0].pageIndex,tt=Ze[Ze.length-1].pageIndex,et=Ze.length,Et=0;Et<et;Et++){if(Ze[Et].renderStatus===te.Rendering)return-1;if(Ze[Et].renderStatus===te.NotRenderedYet)return Ze[Et].pageIndex}return tt+1<Re&&Ve.current.visibilities[tt+1].renderStatus!==te.Rendered?tt+1:Le-1>=0&&Ve.current.visibilities[Le-1].renderStatus!==te.Rendered?Le-1:-1},isInRange:function(Ze){return Ze>=Ve.current.startRange&&Ze<=Ve.current.endRange},markNotRendered:function(){for(var Ze=0;Ze<Re;Ze++)Ve.current.visibilities[Ze].renderStatus=te.NotRenderedYet},markRendered:function(Ze){Ve.current.visibilities[Ze].renderStatus=te.Rendered},markRendering:function(Ze){Ve.current.currentRenderingPage!==-1&&Ve.current.currentRenderingPage!==Ze&&Ve.current.visibilities[Ve.current.currentRenderingPage].renderStatus===te.Rendering&&(Ve.current.visibilities[Ve.current.currentRenderingPage].renderStatus=te.NotRenderedYet),Ve.current.visibilities[Ze].renderStatus=te.Rendering,Ve.current.currentRenderingPage=Ze},setOutOfRange:function(Ze){rt(Ze,qe)},setRange:function(Ze,Le){Ve.current.startRange=Ze,Ve.current.endRange=Le;for(var tt=0;tt<Re;tt++)(tt<Ze||tt>Le)&&(Ve.current.visibilities[tt].visibility=qe,Ve.current.visibilities[tt].renderStatus=te.NotRenderedYet)},setVisibility:rt}},Te={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},He=B.createContext({l10n:Te,setL10n:function(){}}),_e=0,G=function(){return _e++},X=function(U,pe,Re){var Fe=function(Be){var Ve=pe.current;if(Ve){var rt=Be.target;if(rt instanceof Element&&rt.shadowRoot){var Ze=Be.composedPath();Ze.length>0&&!Ve.contains(Ze[0])&&Re()}else Ve.contains(rt)||Re()}};B.useEffect(function(){if(U){var Be={capture:!0};return document.addEventListener("click",Fe,Be),function(){document.removeEventListener("click",Fe,Be)}}},[])},ge=function(U){var pe=function(Re){Re.key==="Escape"&&U()};B.useEffect(function(){return document.addEventListener("keyup",pe),function(){document.removeEventListener("keyup",pe)}},[])},Pe=function(U){var pe=U.ariaControlsSuffix,Re=U.children,Fe=U.closeOnClickOutside,Be=U.closeOnEscape,Ve=U.onToggle,rt=B.useRef(),Ze=B.useContext(ce).direction===A.TextDirection.RightToLeft;return B.useEffect(function(){var Le=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=Le}},[]),ge(function(){rt.current&&Be&&Ve()}),X(Fe,rt,Ve),ie(function(){var Le=rt.current;if(Le){var tt=.75*document.body.clientHeight;Le.getBoundingClientRect().height>=tt&&(Le.style.overflow="auto",Le.style.maxHeight="".concat(tt,"px"))}},[]),B.createElement("div",{"aria-modal":"true",className:Q({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":Ze}),id:"rpv-core__modal-body-".concat(pe),ref:rt,role:"dialog",tabIndex:-1},Re)},Ae=function(U){var pe=U.children;return B.createElement("div",{className:"rpv-core__modal-overlay"},pe)};A.ToggleStatus=void 0,(Ie=A.ToggleStatus||(A.ToggleStatus={})).Close="Close",Ie.Open="Open",Ie.Toggle="Toggle";var ke,Oe=function(U){var pe=B.useState(U),Re=pe[0],Fe=pe[1];return{opened:Re,toggle:function(Be){switch(Be){case A.ToggleStatus.Close:Fe(!1);break;case A.ToggleStatus.Open:Fe(!0);break;case A.ToggleStatus.Toggle:default:Fe(function(Ve){return!Ve})}}}},Qe=function(U){var pe=U.content,Re=U.isOpened,Fe=Re!==void 0&&Re,Be=U.target,Ve=Oe(Fe),rt=Ve.opened,Ze=Ve.toggle;return B.createElement(B.Fragment,null,Be&&Be(Ze,rt),rt&&pe(Ze))};A.Position=void 0,(ke=A.Position||(A.Position={})).TopLeft="TOP_LEFT",ke.TopCenter="TOP_CENTER",ke.TopRight="TOP_RIGHT",ke.RightTop="RIGHT_TOP",ke.RightCenter="RIGHT_CENTER",ke.RightBottom="RIGHT_BOTTOM",ke.BottomLeft="BOTTOM_LEFT",ke.BottomCenter="BOTTOM_CENTER",ke.BottomRight="BOTTOM_RIGHT",ke.LeftTop="LEFT_TOP",ke.LeftCenter="LEFT_CENTER",ke.LeftBottom="LEFT_BOTTOM";var ot,st,ut,dt,mt,Ge,Xe,me,ye=function(U,pe,Re,Fe,Be){ie(function(){var Ve=pe.current,rt=U.current,Ze=Re.current;if(rt&&Ve&&Ze){var Le=Ze.getBoundingClientRect(),tt=function(_t,bt,Mt,kt){var Ct=bt.getBoundingClientRect(),pn=_t.getBoundingClientRect(),Kt=pn.height,Jt=pn.width,rn=0,Ht=0;switch(Mt){case A.Position.TopLeft:rn=Ct.top-Kt,Ht=Ct.left;break;case A.Position.TopCenter:rn=Ct.top-Kt,Ht=Ct.left+Ct.width/2-Jt/2;break;case A.Position.TopRight:rn=Ct.top-Kt,Ht=Ct.left+Ct.width-Jt;break;case A.Position.RightTop:rn=Ct.top,Ht=Ct.left+Ct.width;break;case A.Position.RightCenter:rn=Ct.top+Ct.height/2-Kt/2,Ht=Ct.left+Ct.width;break;case A.Position.RightBottom:rn=Ct.top+Ct.height-Kt,Ht=Ct.left+Ct.width;break;case A.Position.BottomLeft:rn=Ct.top+Ct.height,Ht=Ct.left;break;case A.Position.BottomCenter:rn=Ct.top+Ct.height,Ht=Ct.left+Ct.width/2-Jt/2;break;case A.Position.BottomRight:rn=Ct.top+Ct.height,Ht=Ct.left+Ct.width-Jt;break;case A.Position.LeftTop:rn=Ct.top,Ht=Ct.left-Jt;break;case A.Position.LeftCenter:rn=Ct.top+Ct.height/2-Kt/2,Ht=Ct.left-Jt;break;case A.Position.LeftBottom:rn=Ct.top+Ct.height-Kt,Ht=Ct.left-Jt}return{left:Ht+(kt.left||0),top:rn+(kt.top||0)}}(rt,Ve,Fe,Be),et=tt.top,Et=tt.left;rt.style.top="".concat(et-Le.top,"px"),rt.style.left="".concat(Et-Le.left,"px")}},[])},je=function(U){var pe,Re=U.customClassName,Fe=U.position;return B.createElement("div",{className:Q((pe={"rpv-core__arrow":!0,"rpv-core__arrow--tl":Fe===A.Position.TopLeft,"rpv-core__arrow--tc":Fe===A.Position.TopCenter,"rpv-core__arrow--tr":Fe===A.Position.TopRight,"rpv-core__arrow--rt":Fe===A.Position.RightTop,"rpv-core__arrow--rc":Fe===A.Position.RightCenter,"rpv-core__arrow--rb":Fe===A.Position.RightBottom,"rpv-core__arrow--bl":Fe===A.Position.BottomLeft,"rpv-core__arrow--bc":Fe===A.Position.BottomCenter,"rpv-core__arrow--br":Fe===A.Position.BottomRight,"rpv-core__arrow--lt":Fe===A.Position.LeftTop,"rpv-core__arrow--lc":Fe===A.Position.LeftCenter,"rpv-core__arrow--lb":Fe===A.Position.LeftBottom},pe["".concat(Re)]=Re!=="",pe))})},Ke=function(U){var pe=U.ariaControlsSuffix,Re=U.children,Fe=U.closeOnClickOutside,Be=U.offset,Ve=U.position,rt=U.targetRef,Ze=U.onClose,Le=B.useRef(),tt=B.useRef(),et=B.useRef(),Et=B.useContext(ce).direction===A.TextDirection.RightToLeft;X(Fe,Le,Ze),ye(Le,rt,et,Ve,Be),ie(function(){var bt=tt.current;if(bt){var Mt=.75*document.body.clientHeight;bt.getBoundingClientRect().height>=Mt&&(bt.style.overflow="auto",bt.style.maxHeight="".concat(Mt,"px"))}},[]);var _t="rpv-core__popover-body-inner-".concat(pe);return B.createElement(B.Fragment,null,B.createElement("div",{ref:et,style:{left:0,position:"absolute",top:0}}),B.createElement("div",{"aria-describedby":_t,className:Q({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":Et}),id:"rpv-core__popover-body-".concat(pe),ref:Le,role:"dialog",tabIndex:-1},B.createElement(je,{customClassName:"rpv-core__popover-body-arrow",position:Ve}),B.createElement("div",{id:_t,ref:tt},Re)))},nt=function(U){var pe=U.closeOnEscape,Re=U.onClose,Fe=B.useRef();return ge(function(){Fe.current&&pe&&Re()}),B.createElement("div",{className:"rpv-core__popover-overlay",ref:Fe})},pt=function(U){var pe=U.ariaControlsSuffix,Re=U.children,Fe=U.contentRef,Be=U.offset,Ve=U.position,rt=U.targetRef,Ze=B.useRef(),Le=B.useContext(ce).direction===A.TextDirection.RightToLeft;return ye(Fe,rt,Ze,Ve,Be),B.createElement(B.Fragment,null,B.createElement("div",{ref:Ze,style:{left:0,position:"absolute",top:0}}),B.createElement("div",{className:Q({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":Le}),id:"rpv-core__tooltip-body-".concat(pe),ref:Fe,role:"tooltip"},B.createElement(je,{customClassName:"rpv-core__tooltip-body-arrow",position:Ve}),B.createElement("div",{className:"rpv-core__tooltip-body-content"},Re)))};A.FullScreenMode=void 0,(ot=A.FullScreenMode||(A.FullScreenMode={})).Normal="Normal",ot.Entering="Entering",ot.Entered="Entered",ot.EnteredCompletely="EnteredCompletely",ot.Exitting="Exitting",ot.Exited="Exited",A.LayerRenderStatus=void 0,(st=A.LayerRenderStatus||(A.LayerRenderStatus={}))[st.PreRender=0]="PreRender",st[st.DidRender=1]="DidRender",A.PageMode=void 0,(ut=A.PageMode||(A.PageMode={})).Attachments="UseAttachments",ut.Bookmarks="UseOutlines",ut.ContentGroup="UseOC",ut.Default="UserNone",ut.FullScreen="FullScreen",ut.Thumbnails="UseThumbs",A.PasswordStatus=void 0,(dt=A.PasswordStatus||(A.PasswordStatus={})).RequiredPassword="RequiredPassword",dt.WrongPassword="WrongPassword",A.RotateDirection=void 0,(mt=A.RotateDirection||(A.RotateDirection={})).Backward="Backward",mt.Forward="Forward",A.ScrollMode=void 0,(Ge=A.ScrollMode||(A.ScrollMode={})).Page="Page",Ge.Horizontal="Horizontal",Ge.Vertical="Vertical",Ge.Wrapped="Wrapped",A.SpecialZoomLevel=void 0,(Xe=A.SpecialZoomLevel||(A.SpecialZoomLevel={})).ActualSize="ActualSize",Xe.PageFit="PageFit",Xe.PageWidth="PageWidth",A.ViewMode=void 0,(me=A.ViewMode||(A.ViewMode={})).DualPage="DualPage",me.DualPageWithCover="DualPageWithCover",me.SinglePage="SinglePage";var ht,We=function(U,pe){return U.reduce(function(Re,Fe,Be){return Be%pe?Re[Re.length-1].push(Fe):Re.push([Fe]),Re},[])},wt=function(U,pe){switch(pe[1].name){case"XYZ":return{bottomOffset:function(Re,Fe){return pe[3]===null?Fe:pe[3]},leftOffset:function(Re,Fe){return pe[2]===null?0:pe[2]},pageIndex:U,scaleTo:pe[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:U,scaleTo:A.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:pe[2],leftOffset:0,pageIndex:U,scaleTo:A.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:U,scaleTo:1}}},St=new Map,Yt=new Map,Ut=function(U,pe){return"".concat(U.loadingTask.docId,"___").concat(pe.num,"R").concat(pe.gen===0?"":pe.gen)},dn=function(U,pe,Re){St.set(Ut(U,pe),Re)},Rt=function(U,pe){if(!U)return Promise.reject("The document is not loaded yet");var Re="".concat(U.loadingTask.docId,"___").concat(pe),Fe=Yt.get(Re);return Fe?Promise.resolve(Fe):new Promise(function(Be,Ve){U.getPage(pe+1).then(function(rt){Yt.set(Re,rt),rt.ref&&dn(U,rt.ref,pe),Be(rt)})})},zt=function(U,pe){return new Promise(function(Re){new Promise(function(Fe){typeof pe=="string"?U.getDestination(pe).then(function(Be){Fe(Be)}):Fe(pe)}).then(function(Fe){if(typeof Fe[0]=="object"&&Fe[0]!==null){var Be=Fe[0],Ve=function(Ze,Le){var tt=Ut(Ze,Le);return St.has(tt)?St.get(tt):null}(U,Be);Ve===null?U.getPageIndex(Be).then(function(Ze){dn(U,Be,Ze),zt(U,pe).then(function(Le){return Re(Le)})}):Re(wt(Ve,Fe))}else{var rt=wt(Fe[0],Fe);Re(rt)}})})};(function(U){U[U.Solid=1]="Solid",U[U.Dashed=2]="Dashed",U[U.Beveled=3]="Beveled",U[U.Inset=4]="Inset",U[U.Underline=5]="Underline"})(ht||(ht={}));var an,_n=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),gt=function(U,pe,Re,Fe){var Be=parseInt(U,10);return Be>=pe&&Be<=Re?Be:Fe},Ye=function(U){return U.contentsObj?U.contentsObj.str:U.contents||""},Je=function(U){return U.titleObj?U.titleObj.str:U.title||""},$t=function(U){var pe=U.annotation,Re=B.useContext(ce).direction,Fe=Je(pe),Be=Ye(pe),Ve=Re===A.TextDirection.RightToLeft,rt=B.useRef(),Ze="";if(pe.modificationDate){var Le=function(tt){var et=_n.exec(tt);if(!et)return null;var Et=parseInt(et[1],10),_t=gt(et[2],1,12,1)-1,bt=gt(et[3],1,31,1),Mt=gt(et[4],0,23,0),kt=gt(et[5],0,59,0),Ct=gt(et[6],0,59,0),pn=et[7]||"Z",Kt=gt(et[8],0,23,0),Jt=gt(et[9],0,59,0);switch(pn){case"-":Mt+=Kt,kt+=Jt;break;case"+":Mt-=Kt,kt-=Jt}return new Date(Date.UTC(Et,_t,bt,Mt,kt,Ct))}(pe.modificationDate);Ze=Le?"".concat(Le.toLocaleDateString(),", ").concat(Le.toLocaleTimeString()):""}return B.useLayoutEffect(function(){if(rt.current){var tt=document.querySelector('[data-annotation-id="'.concat(pe.id,'"]'));if(tt){var et=tt;return et.style.zIndex+=1,function(){et.style.zIndex="".concat(parseInt(et.style.zIndex,10)-1)}}}},[]),B.createElement("div",{ref:rt,className:Q({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":Ve}),style:{top:pe.annotationType===A.AnnotationType.Popup?"":"100%"}},Fe&&B.createElement(B.Fragment,null,B.createElement("div",{className:Q({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!Ve,"rpv-core__annotation-popup-title--rtl":Ve})},Fe),B.createElement("div",{className:"rpv-core__annotation-popup-date"},Ze)),Be&&B.createElement("div",{className:"rpv-core__annotation-popup-content"},Be.split(`
`).map(function(tt,et){return B.createElement(B.Fragment,{key:et},tt,B.createElement("br",null))})))};(function(U){U.Click="Click",U.Hover="Hover"})(an||(an={}));var Lt,Gt=function(U){var pe,Re=U.annotation,Fe=U.children,Be=U.ignoreBorder,Ve=U.hasPopup,rt=U.isRenderable,Ze=U.page,Le=U.viewport,tt=Re.rect,et=function(){var en=Oe(!1),yn=en.opened,En=en.toggle,Sn=B.useState(an.Hover),wn=Sn[0],Pn=Sn[1];return{opened:yn,closeOnHover:function(){wn===an.Hover&&En(A.ToggleStatus.Close)},openOnHover:function(){wn===an.Hover&&En(A.ToggleStatus.Open)},toggleOnClick:function(){switch(wn){case an.Click:yn&&Pn(an.Hover),En(A.ToggleStatus.Toggle);break;case an.Hover:Pn(an.Click),En(A.ToggleStatus.Open)}}}}(),Et=et.closeOnHover,_t=et.opened,bt=et.openOnHover,Mt=et.toggleOnClick,kt=(pe=[tt[0],Ze.view[3]+Ze.view[1]-tt[1],tt[2],Ze.view[3]+Ze.view[1]-tt[3]],[Math.min(pe[0],pe[2]),Math.min(pe[1],pe[3]),Math.max(pe[0],pe[2]),Math.max(pe[1],pe[3])]),Ct=tt[2]-tt[0],pn=tt[3]-tt[1],Kt={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!Be&&Re.borderStyle.width>0){switch(Re.borderStyle.style){case ht.Dashed:Kt.borderStyle="dashed";break;case ht.Solid:Kt.borderStyle="solid";break;case ht.Underline:Kt=Object.assign({borderBottomStyle:"solid"},Kt);case ht.Beveled:case ht.Inset:}var Jt=Re.borderStyle.width;Kt.borderWidth="".concat(Jt,"px"),Re.borderStyle.style!==ht.Underline&&(Ct-=2*Jt,pn-=2*Jt);var rn=Re.borderStyle,Ht=rn.horizontalCornerRadius,on=rn.verticalCornerRadius;(Ht>0||on>0)&&(Kt.borderRadius="".concat(Ht,"px / ").concat(on,"px")),Re.color?Kt.borderColor="rgb(".concat(0|Re.color[0],", ").concat(0|Re.color[1],", ").concat(0|Re.color[2],")"):Kt.borderWidth="0"}return B.createElement(B.Fragment,null,rt&&Fe({popup:{opened:_t,closeOnHover:Et,openOnHover:bt,toggleOnClick:Mt},slot:{attrs:{style:Object.assign({height:"".concat(pn,"px"),left:"".concat(kt[0],"px"),top:"".concat(kt[1],"px"),transform:"matrix(".concat(Le.transform.join(","),")"),transformOrigin:"-".concat(kt[0],"px -").concat(kt[1],"px"),width:"".concat(Ct,"px")},Kt)},children:B.createElement(B.Fragment,null,Ve&&_t&&B.createElement($t,{annotation:Re}))}}))},$e=function(U){var pe=U.annotation,Re=U.page,Fe=U.viewport,Be=pe.hasPopup===!1,Ve=Je(pe),rt=Ye(pe),Ze=!!(pe.hasPopup||Ve||rt);return B.createElement(Gt,{annotation:pe,hasPopup:Be,ignoreBorder:!0,isRenderable:Ze,page:Re,viewport:Fe},function(Le){return B.createElement("div",W({},Le.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":pe.id,onClick:Le.popup.toggleOnClick,onMouseEnter:Le.popup.openOnHover,onMouseLeave:Le.popup.closeOnHover}),Le.slot.children)})},ft=function(U){var pe=U.annotation,Re=U.page,Fe=U.viewport,Be=pe.hasPopup===!1,Ve=Je(pe),rt=Ye(pe),Ze=!!(pe.hasPopup||Ve||rt),Le=pe.rect,tt=Le[2]-Le[0],et=Le[3]-Le[1],Et=pe.borderStyle.width;return B.createElement(Gt,{annotation:pe,hasPopup:Be,ignoreBorder:!0,isRenderable:Ze,page:Re,viewport:Fe},function(_t){return B.createElement("div",W({},_t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":pe.id,onClick:_t.popup.toggleOnClick,onMouseEnter:_t.popup.openOnHover,onMouseLeave:_t.popup.closeOnHover}),B.createElement("svg",{height:"".concat(et,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(tt," ").concat(et),width:"".concat(tt,"px")},B.createElement("circle",{cy:et/2,fill:"none",rx:tt/2-Et/2,ry:et/2-Et/2,stroke:"transparent",strokeWidth:Et||1})),_t.slot.children)})},Pt=function(U){var pe=U.annotation,Re=U.page,Fe=U.viewport,Be=Je(pe),Ve=Ye(pe),rt=!(pe.hasPopup!==!1||!Be&&!Ve),Ze=function(){var Le,tt,et,Et,_t=pe.file;_t&&(Le=_t.filename,tt=_t.content,et=typeof tt=="string"?"":URL.createObjectURL(new Blob([tt],{type:""})),(Et=document.createElement("a")).style.display="none",Et.href=et||Le,Et.setAttribute("download",function(bt){var Mt=bt.split("/").pop();return Mt?Mt.split("#")[0].split("?")[0]:bt}(Le)),document.body.appendChild(Et),Et.click(),document.body.removeChild(Et),et&&URL.revokeObjectURL(et))};return B.createElement(Gt,{annotation:pe,hasPopup:rt,ignoreBorder:!0,isRenderable:!0,page:Re,viewport:Fe},function(Le){return B.createElement("div",W({},Le.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":pe.id,onClick:Le.popup.toggleOnClick,onDoubleClick:Ze,onMouseEnter:Le.popup.openOnHover,onMouseLeave:Le.popup.closeOnHover}),Le.slot.children)})},Dt=function(U){var pe=U.annotation,Re=U.page,Fe=U.viewport,Be=pe.hasPopup===!1,Ve=Je(pe),rt=Ye(pe),Ze=!!(pe.hasPopup||Ve||rt);return B.createElement(Gt,{annotation:pe,hasPopup:Be,ignoreBorder:!0,isRenderable:Ze,page:Re,viewport:Fe},function(Le){return B.createElement("div",W({},Le.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":pe.id,onClick:Le.popup.toggleOnClick,onMouseEnter:Le.popup.openOnHover,onMouseLeave:Le.popup.closeOnHover}),Le.slot.children)})},Bt=function(U){var pe=U.annotation,Re=U.page,Fe=U.viewport,Be=Je(pe),Ve=Ye(pe),rt=!(!Be&&!Ve),Ze=!pe.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(pe.parentType)!==-1;return ie(function(){if(pe.parentId){var Le=document.querySelector('[data-annotation-id="'.concat(pe.parentId,'"]')),tt=document.querySelector('[data-annotation-id="'.concat(pe.id,'"]'));if(Le&&tt){var et=parseFloat(Le.style.left),Et=parseFloat(Le.style.top)+parseFloat(Le.style.height);tt.style.left="".concat(et,"px"),tt.style.top="".concat(Et,"px"),tt.style.transformOrigin="-".concat(et,"px -").concat(Et,"px")}}},[]),B.createElement(Gt,{annotation:pe,hasPopup:Ze,ignoreBorder:!1,isRenderable:rt,page:Re,viewport:Fe},function(Le){return B.createElement("div",W({},Le.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":pe.id}),B.createElement($t,{annotation:pe}))})},Tt=function(U){var pe=U.annotation,Re=U.childAnnotation,Fe=U.page,Be=U.viewport,Ve=pe.hasPopup===!1,rt=Je(pe),Ze=Ye(pe),Le=!!(pe.hasPopup||rt||Ze);if(pe.quadPoints&&pe.quadPoints.length>0){var tt=pe.quadPoints.map(function(et){return Object.assign({},pe,{rect:[et[2].x,et[2].y,et[1].x,et[1].y],quadPoints:[]})});return B.createElement(B.Fragment,null,tt.map(function(et,Et){return B.createElement(Tt,{key:Et,annotation:et,childAnnotation:Re,page:Fe,viewport:Be})}))}return B.createElement(Gt,{annotation:pe,hasPopup:Ve,ignoreBorder:!0,isRenderable:Le,page:Fe,viewport:Be},function(et){return B.createElement(B.Fragment,null,B.createElement("div",W({},et.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":pe.id,onClick:et.popup.toggleOnClick,onMouseEnter:et.popup.openOnHover,onMouseLeave:et.popup.closeOnHover}),et.slot.children),Re&&Re.annotationType===A.AnnotationType.Popup&&et.popup.opened&&B.createElement(Bt,{annotation:Re,page:Fe,viewport:Be}))})},xe=function(U){var pe=U.annotation,Re=U.page,Fe=U.viewport,Be=pe.hasPopup===!1,Ve=Je(pe),rt=Ye(pe),Ze=!!(pe.hasPopup||Ve||rt),Le=pe.rect,tt=Le[2]-Le[0],et=Le[3]-Le[1],Et=pe.borderStyle.width;return B.createElement(Gt,{annotation:pe,hasPopup:Be,ignoreBorder:!0,isRenderable:Ze,page:Re,viewport:Fe},function(_t){return B.createElement("div",W({},_t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":pe.id,onClick:_t.popup.toggleOnClick,onMouseEnter:_t.popup.openOnHover,onMouseLeave:_t.popup.closeOnHover}),pe.inkLists&&pe.inkLists.length&&B.createElement("svg",{height:"".concat(et,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(tt," ").concat(et),width:"".concat(tt,"px")},pe.inkLists.map(function(bt,Mt){return B.createElement("polyline",{key:Mt,fill:"none",stroke:"transparent",strokeWidth:Et||1,points:bt.map(function(kt){return"".concat(kt.x-Le[0],",").concat(Le[3]-kt.y)}).join(" ")})})),_t.slot.children)})},we=function(U){var pe=U.annotation,Re=U.page,Fe=U.viewport,Be=pe.hasPopup===!1,Ve=Je(pe),rt=Ye(pe),Ze=!!(pe.hasPopup||Ve||rt),Le=pe.rect,tt=Le[2]-Le[0],et=Le[3]-Le[1],Et=pe.borderStyle.width;return B.createElement(Gt,{annotation:pe,hasPopup:Be,ignoreBorder:!0,isRenderable:Ze,page:Re,viewport:Fe},function(_t){return B.createElement("div",W({},_t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":pe.id,onClick:_t.popup.toggleOnClick,onMouseEnter:_t.popup.openOnHover,onMouseLeave:_t.popup.closeOnHover}),B.createElement("svg",{height:"".concat(et,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(tt," ").concat(et),width:"".concat(tt,"px")},B.createElement("line",{stroke:"transparent",strokeWidth:Et||1,x1:Le[2]-pe.lineCoordinates[0],x2:Le[2]-pe.lineCoordinates[2],y1:Le[3]-pe.lineCoordinates[1],y2:Le[3]-pe.lineCoordinates[3]})),_t.slot.children)})},ze=/^([^\w]*)(javascript|data|vbscript)/im,ct=/&#(\w+)(^\w|;)?/g,lt=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,vt=/^([^:]+):/gm,yt=function(U,pe){var Re,Fe=(Re=U||"",Re.replace(ct,function(Ze,Le){return String.fromCharCode(Le)})).replace(lt,"").trim();if(!Fe)return pe;var Be=Fe[0];if(Be==="."||Be==="/")return Fe;var Ve=Fe.match(vt);if(!Ve)return Fe;var rt=Ve[0];return ze.test(rt)?pe:Fe},Ot=function(U){var pe,Re=U.annotation,Fe=U.annotationContainerRef,Be=U.doc,Ve=U.outlines,rt=U.page,Ze=U.pageIndex,Le=U.scale,tt=U.viewport,et=U.onExecuteNamedAction,Et=U.onJumpFromLinkAnnotation,_t=U.onJumpToDest,bt=B.useRef(),Mt=Ve&&Ve.length&&Re.dest&&typeof Re.dest=="string"?(pe=Ve.find(function(Kt){return Kt.dest===Re.dest}))===null||pe===void 0?void 0:pe.title:"",kt=!!(Re.url||Re.dest||Re.action||Re.unsafeUrl),Ct={};if(Re.url||Re.unsafeUrl){var pn=yt(Re.url||Re.unsafeUrl,"");pn?Ct={"data-target":"external",href:pn,rel:"noopener noreferrer nofollow",target:Re.newWindow?"_blank":"",title:pn}:kt=!1}else Ct={href:"","data-annotation-link":Re.id,onClick:function(Kt){Kt.preventDefault(),Re.action?et(Re.action):zt(Be,Re.dest).then(function(Jt){var rn=bt.current,Ht=Fe.current;if(rn&&Ht){var on=rn.getBoundingClientRect();Ht.style.setProperty("height","100%"),Ht.style.setProperty("width","100%");var en=Ht.getBoundingClientRect();Ht.style.removeProperty("height"),Ht.style.removeProperty("width");var yn=(on.left-en.left)/Le,En=(en.bottom-on.bottom+on.height)/Le;Et({bottomOffset:En,label:Mt,leftOffset:yn,pageIndex:Ze})}_t(Jt)})}};return Mt&&(Ct=Object.assign({},Ct,{title:Mt,"aria-label":Mt})),B.createElement(Gt,{annotation:Re,hasPopup:!1,ignoreBorder:!1,isRenderable:kt,page:rt,viewport:tt},function(Kt){return B.createElement("div",W({},Kt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":Re.id,"data-testid":"core__annotation--link-".concat(Re.id)}),B.createElement("a",W({ref:bt},Ct)))})},It=function(U){var pe=U.annotation,Re=U.page,Fe=U.viewport,Be=pe.hasPopup===!1,Ve=Je(pe),rt=Ye(pe),Ze=!!(pe.hasPopup||Ve||rt),Le=pe.rect,tt=Le[2]-Le[0],et=Le[3]-Le[1],Et=pe.borderStyle.width;return B.createElement(Gt,{annotation:pe,hasPopup:Be,ignoreBorder:!0,isRenderable:Ze,page:Re,viewport:Fe},function(_t){return B.createElement("div",W({},_t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":pe.id,onClick:_t.popup.toggleOnClick,onMouseEnter:_t.popup.openOnHover,onMouseLeave:_t.popup.closeOnHover}),pe.vertices&&pe.vertices.length&&B.createElement("svg",{height:"".concat(et,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(tt," ").concat(et),width:"".concat(tt,"px")},B.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:Et||1,points:pe.vertices.map(function(bt){return"".concat(bt.x-Le[0],",").concat(Le[3]-bt.y)}).join(" ")})),_t.slot.children)})},xt=function(U){var pe=U.annotation,Re=U.page,Fe=U.viewport,Be=pe.hasPopup===!1,Ve=Je(pe),rt=Ye(pe),Ze=!!(pe.hasPopup||Ve||rt),Le=pe.rect,tt=Le[2]-Le[0],et=Le[3]-Le[1],Et=pe.borderStyle.width;return B.createElement(Gt,{annotation:pe,hasPopup:Be,ignoreBorder:!0,isRenderable:Ze,page:Re,viewport:Fe},function(_t){return B.createElement("div",W({},_t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":pe.id,onClick:_t.popup.toggleOnClick,onMouseEnter:_t.popup.openOnHover,onMouseLeave:_t.popup.closeOnHover}),pe.vertices&&pe.vertices.length&&B.createElement("svg",{height:"".concat(et,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(tt," ").concat(et),width:"".concat(tt,"px")},B.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:Et||1,points:pe.vertices.map(function(bt){return"".concat(bt.x-Le[0],",").concat(Le[3]-bt.y)}).join(" ")})),_t.slot.children)})},nn=function(U){var pe=U.annotation,Re=U.page,Fe=U.viewport,Be=pe.hasPopup===!1,Ve=Je(pe),rt=Ye(pe),Ze=!!(pe.hasPopup||Ve||rt),Le=pe.rect,tt=Le[2]-Le[0],et=Le[3]-Le[1],Et=pe.borderStyle.width;return B.createElement(Gt,{annotation:pe,hasPopup:Be,ignoreBorder:!0,isRenderable:Ze,page:Re,viewport:Fe},function(_t){return B.createElement("div",W({},_t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":pe.id,onClick:_t.popup.toggleOnClick,onMouseEnter:_t.popup.openOnHover,onMouseLeave:_t.popup.closeOnHover}),B.createElement("svg",{height:"".concat(et,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(tt," ").concat(et),width:"".concat(tt,"px")},B.createElement("rect",{height:et-Et,fill:"none",stroke:"transparent",strokeWidth:Et||1,x:Et/2,y:Et/2,width:tt-Et})),_t.slot.children)})},Ft=function(U){var pe=U.annotation,Re=U.page,Fe=U.viewport,Be=pe.hasPopup===!1,Ve=Je(pe),rt=Ye(pe),Ze=!!(pe.hasPopup||Ve||rt);return B.createElement(Gt,{annotation:pe,hasPopup:Be,ignoreBorder:!0,isRenderable:Ze,page:Re,viewport:Fe},function(Le){return B.createElement("div",W({},Le.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":pe.id,onClick:Le.popup.toggleOnClick,onMouseEnter:Le.popup.openOnHover,onMouseLeave:Le.popup.closeOnHover}),Le.slot.children)})},jt=function(U){var pe=U.annotation,Re=U.page,Fe=U.viewport,Be=pe.hasPopup===!1,Ve=Je(pe),rt=Ye(pe),Ze=!!(pe.hasPopup||Ve||rt);return B.createElement(Gt,{annotation:pe,hasPopup:Be,ignoreBorder:!0,isRenderable:Ze,page:Re,viewport:Fe},function(Le){return B.createElement("div",W({},Le.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":pe.id,onClick:Le.popup.toggleOnClick,onMouseEnter:Le.popup.openOnHover,onMouseLeave:Le.popup.closeOnHover}),Le.slot.children)})},Zt=function(U){var pe=U.annotation,Re=U.page,Fe=U.viewport,Be=pe.hasPopup===!1,Ve=Je(pe),rt=Ye(pe),Ze=!!(pe.hasPopup||Ve||rt);return B.createElement(Gt,{annotation:pe,hasPopup:Be,ignoreBorder:!0,isRenderable:Ze,page:Re,viewport:Fe},function(Le){return B.createElement("div",W({},Le.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":pe.id,onClick:Le.popup.toggleOnClick,onMouseEnter:Le.popup.openOnHover,onMouseLeave:Le.popup.closeOnHover}),Le.slot.children)})},cn=function(){return B.createElement(q,{size:16},B.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),B.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),B.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),B.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},gn=function(){return B.createElement(q,{size:16},B.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),B.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),B.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),B.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),B.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),B.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),B.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),B.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),B.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),B.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},Cn=function(){return B.createElement(q,{size:16},B.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),B.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},Vn=function(){return B.createElement(q,{size:16},B.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),B.createElement("path",{d:"M6 4.5L6 0.5"}),B.createElement("path",{d:"M18 4.5L18 0.5"}),B.createElement("path",{d:"M10 4.5L10 0.5"}),B.createElement("path",{d:"M14 4.5L14 0.5"}))},Dn=function(){return B.createElement(q,{size:16},B.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),B.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),B.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},er=function(){return B.createElement(q,{size:16},B.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},nr=function(U){var pe=U.annotation,Re=U.childAnnotation,Fe=U.page,Be=U.viewport,Ve=pe.hasPopup===!1,rt=Je(pe),Ze=Ye(pe),Le=!!(pe.hasPopup||rt||Ze),tt=pe.name?pe.name.toLowerCase():"";return B.createElement(Gt,{annotation:pe,hasPopup:Ve,ignoreBorder:!1,isRenderable:Le,page:Fe,viewport:Be},function(et){return B.createElement(B.Fragment,null,B.createElement("div",W({},et.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":pe.id,onClick:et.popup.toggleOnClick,onMouseEnter:et.popup.openOnHover,onMouseLeave:et.popup.closeOnHover}),tt&&B.createElement("div",{className:"rpv-core__annotation-text-icon"},tt==="check"&&B.createElement(K,null),tt==="comment"&&B.createElement(cn,null),tt==="help"&&B.createElement(gn,null),tt==="insert"&&B.createElement(er,null),tt==="key"&&B.createElement(Cn,null),tt==="note"&&B.createElement(Vn,null),(tt==="newparagraph"||tt==="paragraph")&&B.createElement(Dn,null)),et.slot.children),Re&&Re.annotationType===A.AnnotationType.Popup&&et.popup.opened&&B.createElement(Bt,{annotation:Re,page:Fe,viewport:Be}))})},rr=function(U){var pe=U.annotation,Re=U.page,Fe=U.viewport,Be=pe.hasPopup===!1,Ve=Je(pe),rt=Ye(pe),Ze=!!(pe.hasPopup||Ve||rt);return B.createElement(Gt,{annotation:pe,hasPopup:Be,ignoreBorder:!0,isRenderable:Ze,page:Re,viewport:Fe},function(Le){return B.createElement("div",W({},Le.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":pe.id,onClick:Le.popup.toggleOnClick,onMouseEnter:Le.popup.openOnHover,onMouseLeave:Le.popup.closeOnHover}),Le.slot.children)})},Ir=function(U){var pe=U.annotations,Re=U.doc,Fe=U.outlines,Be=U.page,Ve=U.pageIndex,rt=U.plugins,Ze=U.rotation,Le=U.scale,tt=U.onExecuteNamedAction,et=U.onJumpFromLinkAnnotation,Et=U.onJumpToDest,_t=B.useRef(),bt=Be.getViewport({rotation:Ze,scale:Le}).clone({dontFlip:!0}),Mt=pe.filter(function(kt){return!kt.parentId});return ie(function(){var kt=_t.current;kt&&rt.forEach(function(Ct){Ct.onAnnotationLayerRender&&Ct.onAnnotationLayerRender({annotations:Mt,container:kt,pageIndex:Ve,rotation:Ze,scale:Le})})},[]),B.createElement("div",{ref:_t,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(Ve)},Mt.map(function(kt){var Ct=pe.find(function(pn){return pn.parentId===kt.id});switch(kt.annotationType){case A.AnnotationType.Caret:return B.createElement($e,{key:kt.id,annotation:kt,page:Be,viewport:bt});case A.AnnotationType.Circle:return B.createElement(ft,{key:kt.id,annotation:kt,page:Be,viewport:bt});case A.AnnotationType.FileAttachment:return B.createElement(Pt,{key:kt.id,annotation:kt,page:Be,viewport:bt});case A.AnnotationType.FreeText:return B.createElement(Dt,{key:kt.id,annotation:kt,page:Be,viewport:bt});case A.AnnotationType.Highlight:return B.createElement(Tt,{key:kt.id,annotation:kt,childAnnotation:Ct,page:Be,viewport:bt});case A.AnnotationType.Ink:return B.createElement(xe,{key:kt.id,annotation:kt,page:Be,viewport:bt});case A.AnnotationType.Line:return B.createElement(we,{key:kt.id,annotation:kt,page:Be,viewport:bt});case A.AnnotationType.Link:return B.createElement(Ot,{key:kt.id,annotation:kt,annotationContainerRef:_t,doc:Re,outlines:Fe,page:Be,pageIndex:Ve,scale:Le,viewport:bt,onExecuteNamedAction:tt,onJumpFromLinkAnnotation:et,onJumpToDest:Et});case A.AnnotationType.Polygon:return B.createElement(It,{key:kt.id,annotation:kt,page:Be,viewport:bt});case A.AnnotationType.Polyline:return B.createElement(xt,{key:kt.id,annotation:kt,page:Be,viewport:bt});case A.AnnotationType.Popup:return B.createElement(Bt,{key:kt.id,annotation:kt,page:Be,viewport:bt});case A.AnnotationType.Square:return B.createElement(nn,{key:kt.id,annotation:kt,page:Be,viewport:bt});case A.AnnotationType.Squiggly:return B.createElement(Ft,{key:kt.id,annotation:kt,page:Be,viewport:bt});case A.AnnotationType.Stamp:return B.createElement(jt,{key:kt.id,annotation:kt,page:Be,viewport:bt});case A.AnnotationType.StrikeOut:return B.createElement(Zt,{key:kt.id,annotation:kt,page:Be,viewport:bt});case A.AnnotationType.Text:return B.createElement(nr,{key:kt.id,annotation:kt,childAnnotation:Ct,page:Be,viewport:bt});case A.AnnotationType.Underline:return B.createElement(rr,{key:kt.id,annotation:kt,page:Be,viewport:bt});default:return B.createElement(B.Fragment,{key:kt.id})}}))},qa=function(U){var pe=U.page,Re=U.renderAnnotations,Fe=Me(),Be=B.useState({loading:!0,annotations:[]}),Ve=Be[0],rt=Be[1];return B.useEffect(function(){pe.getAnnotations({intent:"display"}).then(function(Ze){Fe.current&&rt({loading:!1,annotations:Ze})})},[]),Ve.loading?B.createElement(B.Fragment,null):Re(Ve.annotations)},Xa=function(U){var pe=U.doc,Re=U.outlines,Fe=U.page,Be=U.pageIndex,Ve=U.plugins,rt=U.rotation,Ze=U.scale,Le=U.onExecuteNamedAction,tt=U.onJumpFromLinkAnnotation,et=U.onJumpToDest;return B.createElement(qa,{page:Fe,renderAnnotations:function(Et){return B.createElement(Ir,{annotations:Et,doc:pe,outlines:Re,page:Fe,pageIndex:Be,plugins:Ve,rotation:rt,scale:Ze,onExecuteNamedAction:Le,onJumpFromLinkAnnotation:tt,onJumpToDest:et})}})},Fr=function(U,pe){var Re=U%pe;return Re===0?U:Math.floor(U-Re)},Ka=function(U){var pe=U.canvasLayerRef,Re=U.height,Fe=U.page,Be=U.pageIndex,Ve=U.plugins,rt=U.rotation,Ze=U.scale,Le=U.width,tt=U.onRenderCanvasCompleted,et=B.useRef();return ie(function(){var Et=et.current;Et&&Et.cancel();var _t=pe.current;_t.removeAttribute("data-testid"),Ve.forEach(function(en){en.onCanvasLayerRender&&en.onCanvasLayerRender({ele:_t,pageIndex:Be,rotation:rt,scale:Ze,status:A.LayerRenderStatus.PreRender})});var bt=Fe.getViewport({rotation:rt,scale:Ze}),Mt=window.devicePixelRatio||1,kt=Math.sqrt(16777216/(bt.width*bt.height)),Ct=Mt>kt;Ct?_t.style.transform="scale(1, 1)":_t.style.removeProperty("transform");var pn=Math.min(kt,Mt),Kt=function(en,yn){var En,Sn;if(Math.floor(en)===en)return[en,1];var wn=1/en;if(wn>yn)return[1,yn];if(Math.floor(wn)===wn)return[1,wn];for(var Pn=en>1?wn:en,zn=0,Fn=1,Hn=1,On=1;;){var Bn=zn+Hn,jn=Fn+On;if(jn>yn)break;Pn<=Bn/jn?(Hn=(En=[Bn,jn])[0],On=En[1]):(zn=(Sn=[Bn,jn])[0],Fn=Sn[1])}return Pn<(zn/Fn+Hn/On)/2?Pn===en?[zn,Fn]:[Fn,zn]:Pn===en?[Hn,On]:[On,Hn]}(pn,8),Jt=Kt[0],rn=Kt[1];_t.width=Fr(bt.width*pn,Jt),_t.height=Fr(bt.height*pn,Jt),_t.style.width="".concat(Fr(bt.width,rn),"px"),_t.style.height="".concat(Fr(bt.height,rn),"px"),_t.hidden=!0;var Ht=_t.getContext("2d",{alpha:!1}),on=Ct||Mt!==1?[pn,0,0,pn,0,0]:null;return et.current=Fe.render({canvasContext:Ht,transform:on,viewport:bt}),et.current.promise.then(function(){_t.hidden=!1,_t.setAttribute("data-testid","core__canvas-layer-".concat(Be)),Ve.forEach(function(en){en.onCanvasLayerRender&&en.onCanvasLayerRender({ele:_t,pageIndex:Be,rotation:rt,scale:Ze,status:A.LayerRenderStatus.DidRender})}),tt()},function(){tt()}),function(){_t&&(_t.width=0,_t.height=0)}},[]),B.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(Re,"px"),width:"".concat(Le,"px")}},B.createElement("canvas",{ref:pe}))},Ya=function(U){var pe=U.height,Re=U.page,Fe=U.rotation,Be=U.scale,Ve=U.width,rt=B.useRef();return ie(function(){var Ze=rt.current,Le=Re.getViewport({rotation:Fe,scale:Be});Re.getOperatorList().then(function(tt){(function(){var et=rt.current;et&&(et.innerHTML="")})(),new Y.SVGGraphics(Re.commonObjs,Re.objs).getSVG(tt,Le).then(function(et){et.style.height="".concat(pe,"px"),et.style.width="".concat(Ve,"px"),Ze.appendChild(et)})})},[]),B.createElement("div",{className:"rpv-core__svg-layer",ref:rt})},Za=function(U){var pe=U.containerRef,Re=U.page,Fe=U.pageIndex,Be=U.plugins,Ve=U.rotation,rt=U.scale,Ze=U.onRenderTextCompleted,Le=B.useRef(),tt=function(){var et=pe.current;et&&([].slice.call(et.querySelectorAll(".rpv-core__text-layer-text")).forEach(function(Et){return et.removeChild(Et)}),[].slice.call(et.querySelectorAll('br[role="presentation"]')).forEach(function(Et){return et.removeChild(Et)}))};return ie(function(){var et=Le.current;et&&et.cancel();var Et=pe.current;if(Et){Et.removeAttribute("data-testid");var _t=Re.getViewport({rotation:Ve,scale:rt});return Be.forEach(function(bt){bt.onTextLayerRender&&bt.onTextLayerRender({ele:Et,pageIndex:Fe,scale:rt,status:A.LayerRenderStatus.PreRender})}),Re.getTextContent().then(function(bt){tt(),Le.current=Y.renderTextLayer({container:Et,textContent:bt,textContentSource:bt,viewport:_t}),Le.current.promise.then(function(){Et.setAttribute("data-testid","core__text-layer-".concat(Fe)),[].slice.call(Et.children).forEach(function(Mt){Mt.classList.contains("rpv-core__text-layer-text--not")||Mt.classList.add("rpv-core__text-layer-text")}),Be.forEach(function(Mt){Mt.onTextLayerRender&&Mt.onTextLayerRender({ele:Et,pageIndex:Fe,scale:rt,status:A.LayerRenderStatus.DidRender})}),Ze()},function(){Et.removeAttribute("data-testid"),Ze()})}),function(){var bt;tt(),(bt=Le.current)===null||bt===void 0||bt.cancel()}}},[]),B.createElement("div",{className:"rpv-core__text-layer",ref:pe})},Ja=function(U){var pe=U.doc,Re=U.measureRef,Fe=U.outlines,Be=U.pageIndex,Ve=U.pageRotation,rt=U.pageSize,Ze=U.plugins,Le=U.renderPage,tt=U.renderQueueKey,et=U.rotation,Et=U.scale,_t=U.shouldRender,bt=U.viewMode,Mt=U.onExecuteNamedAction,kt=U.onJumpFromLinkAnnotation,Ct=U.onJumpToDest,pn=U.onRenderCompleted,Kt=U.onRotatePage,Jt=Me(),rn=B.useState(null),Ht=rn[0],on=rn[1],en=B.useState(!1),yn=en[0],En=en[1],Sn=B.useState(!1),wn=Sn[0],Pn=Sn[1],zn=B.useRef(),Fn=B.useRef(),Hn=Math.abs(et+Ve)%180==0,On=rt.pageWidth*Et,Bn=rt.pageHeight*Et,jn=Hn?On:Bn,Nn=Hn?Bn:On,Kn=(rt.rotation+et+Ve)%360,ir=B.useRef(0),tr=Le||function(Gn){return B.createElement(B.Fragment,null,Gn.canvasLayer.children,Gn.textLayer.children,Gn.annotationLayer.children)};return B.useEffect(function(){on(null),En(!1),Pn(!1)},[Ve,et,Et]),B.useEffect(function(){_t&&Jt.current&&!Ht&&Rt(pe,Be).then(function(Gn){Jt.current&&(ir.current=tt,on(Gn))})},[_t,Ht]),B.useEffect(function(){yn&&wn&&(tt!==ir.current?(on(null),En(!1),Pn(!1)):pn(Be))},[yn,wn]),B.createElement("div",{className:Q({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":bt===A.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":bt===A.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":bt===A.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(Be),ref:Re,style:{height:"".concat(Nn,"px"),width:"".concat(jn,"px")}},Ht?B.createElement(B.Fragment,null,tr({annotationLayer:{attrs:{},children:B.createElement(Xa,{doc:pe,outlines:Fe,page:Ht,pageIndex:Be,plugins:Ze,rotation:Kn,scale:Et,onExecuteNamedAction:Mt,onJumpFromLinkAnnotation:kt,onJumpToDest:Ct})},canvasLayer:{attrs:{},children:B.createElement(Ka,{canvasLayerRef:zn,height:Nn,page:Ht,pageIndex:Be,plugins:Ze,rotation:Kn,scale:Et,width:jn,onRenderCanvasCompleted:function(){Jt.current&&En(!0)}})},canvasLayerRendered:yn,doc:pe,height:Nn,pageIndex:Be,rotation:Kn,scale:Et,svgLayer:{attrs:{},children:B.createElement(Ya,{height:Nn,page:Ht,rotation:Kn,scale:Et,width:jn})},textLayer:{attrs:{},children:B.createElement(Za,{containerRef:Fn,page:Ht,pageIndex:Be,plugins:Ze,rotation:Kn,scale:Et,onRenderTextCompleted:function(){Jt.current&&Pn(!0)}})},textLayerRendered:wn,width:jn,markRendered:pn,onRotatePage:function(Gn){return Kt(Be,Gn)}}),Ze.map(function(Gn,Yn){return Gn.renderPageLayer?B.createElement(B.Fragment,{key:Yn},Gn.renderPageLayer({canvasLayerRef:zn,canvasLayerRendered:yn,doc:pe,height:Nn,pageIndex:Be,rotation:Kn,scale:Et,textLayerRef:Fn,textLayerRendered:wn,width:jn})):B.createElement(B.Fragment,{key:Yn})})):B.createElement(fe,{testId:"core__page-layer-loading-".concat(Be)}))},Qa=function(U,pe){var Re=pe.rect;return U.height!==Re.height||U.width!==Re.width?Re:U};(function(U){U.Horizontal="Horizontal",U.Vertical="Vertical",U.Both="Both"})(Lt||(Lt={}));var eo=function(U){return 1-Math.pow(1-U,4)},Lr=1e-4,Xi={left:0,top:0},Ki={capture:!1,passive:!0},to=function(U){var pe=U.elementRef,Re=U.enableSmoothScroll,Fe=U.isRtl,Be=U.scrollDirection,Ve=U.onSmoothScroll,rt=B.useState(Xi),Ze=rt[0],Le=rt[1],tt=B.useState(pe.current),et=tt[0],Et=tt[1],_t=Fe?-1:1,bt=B.useRef(Be);bt.current=Be;var Mt=B.useRef(Xi),kt=B.useRef(!0),Ct=B.useCallback(function(){kt.current=!0,Re&&Le(Mt.current),Ve(!1)},[]),pn=B.useCallback(function(){if(et){switch(bt.current){case Lt.Horizontal:Mt.current={left:_t*et.scrollLeft,top:0};break;case Lt.Both:Mt.current={left:_t*et.scrollLeft,top:et.scrollTop};break;case Lt.Vertical:default:Mt.current={left:0,top:et.scrollTop}}Re&&!kt.current||Le(Mt.current)}},[et]);ie(function(){Et(pe.current)}),ie(function(){if(et)return et.addEventListener("scroll",pn,Ki),function(){et.removeEventListener("scroll",pn,Ki)}},[et]);var Kt=B.useCallback(function(Jt,rn){var Ht=pe.current;if(!Ht)return Promise.resolve();var on={left:0,top:0};switch(bt.current){case Lt.Horizontal:on.left=_t*Jt.left;break;case Lt.Both:on.left=_t*Jt.left,on.top=Jt.top;break;case Lt.Vertical:default:on.top=Jt.top}return rn?(kt.current=!1,Ve(!0),new Promise(function(en,yn){(function(En,Sn,wn,Pn,zn,Fn){zn===void 0&&(zn=function(Yn){return Yn}),Fn===void 0&&(Fn=function(){});var Hn=0,On=0,Bn=!1;switch(Sn){case Lt.Horizontal:On=En.scrollLeft,Hn=0;case Lt.Both:On=En.scrollLeft,Hn=En.scrollTop;break;case Lt.Vertical:default:On=0,Hn=En.scrollTop}var jn=function(){Bn||(Bn=!0,En.scrollLeft=wn.left,En.scrollTop=wn.top,Fn())};if(Math.abs(Hn-wn.top)<=Lr&&Sn===Lt.Vertical)jn();else if(Math.abs(On-wn.left)<=Lr&&Sn===Lt.Horizontal)jn();else{var Nn,Kn=-1,ir=On-wn.left,tr=Hn-wn.top,Gn=function(Yn){Kn===-1&&(Kn=Yn);var ar=Yn-Kn,tn=Math.min(ar/Pn,1),Qt=zn(tn),Vt={left:On-ir*Qt,top:Hn-tr*Qt};switch(Sn){case Lt.Horizontal:En.scrollLeft=Vt.left;break;case Lt.Both:En.scrollLeft=Vt.left,En.scrollTop=Vt.top;break;case Lt.Vertical:default:En.scrollTop=Vt.top}Math.abs(Vt.top-wn.top)<=Lr&&Math.abs(Vt.left-wn.left)<=Lr&&!Bn&&(window.cancelAnimationFrame(Nn),jn()),ar<Pn?Nn=window.requestAnimationFrame(Gn):window.cancelAnimationFrame(Nn)};Nn=window.requestAnimationFrame(Gn)}})(Ht,bt.current,on,400,eo,function(){Ct(),en()})})):new Promise(function(en,yn){switch(bt.current){case Lt.Horizontal:Ht.scrollLeft=on.left;break;case Lt.Both:Ht.scrollLeft=on.left,Ht.scrollTop=on.top;break;case Lt.Vertical:default:Ht.scrollTop=on.top}en()})},[pe]);return{scrollOffset:Ze,scrollTo:Kt}},wr=function(U,pe,Re){return Math.max(U,Math.min(Re,pe))},no=function(U,pe){if(pe!==A.ViewMode.DualPageWithCover)return 0;if(!function(Be){var Ve=Be.length;if(Ve===1)return!1;for(var rt=1;rt<Ve;rt++)if(Be[rt].height!==Be[0].height||Be[rt].width!==Be[0].width)return!0;return!1}(U))return 2*U[0].width;var Re=We(U.slice(1),2).map(function(Be){return Be.length===2?Be[0].width+Be[1].width:Be[0].width}),Fe=[U[0].width].concat(Re);return Math.max.apply(Math,Fe)},ro={left:0,top:0},io={left:0,top:0},ti={left:0,top:0},ao={left:0,top:0},oo={height:0,width:0},Yi={left:0,top:0},Zi="data-virtual-index",so=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],co=function(U){var pe=U.enableSmoothScroll,Re=U.isRtl,Fe=U.numberOfItems,Be=U.parentRef,Ve=U.setRenderRange,rt=U.sizes,Ze=U.scrollMode,Le=U.viewMode,tt=B.useState(!1),et=tt[0],Et=tt[1],_t=B.useCallback(function(tn){return Et(tn)},[]),bt=B.useRef(Ze);bt.current=Ze;var Mt=B.useRef(Le);Mt.current=Le;var kt=Ze===A.ScrollMode.Wrapped||Le===A.ViewMode.DualPageWithCover||Le===A.ViewMode.DualPage?Lt.Both:Ze===A.ScrollMode.Horizontal?Lt.Horizontal:Lt.Vertical,Ct=to({elementRef:Be,enableSmoothScroll:pe,isRtl:Re,scrollDirection:kt,onSmoothScroll:_t}),pn=Ct.scrollOffset,Kt=Ct.scrollTo,Jt=function(tn){var Qt=tn.elementRef,Vt=B.useState(Qt.current),qt=Vt[0],Wt=Vt[1],sn=B.useRef(!1),ln=B.useReducer(Qa,{height:0,width:0}),Xt=ln[0],Nt=ln[1];return ie(function(){Qt.current!==qt&&Wt(Qt.current)}),ie(function(){if(qt&&!sn.current){sn.current=!0;var hn=qt.getBoundingClientRect(),mn=hn.height,Rn=hn.width;Nt({rect:{height:mn,width:Rn}})}},[qt]),B.useEffect(function(){if(qt){var hn=new ResizeObserver(function(mn,Rn){mn.forEach(function(Mn){if(Mn.target===qt){var qn=Mn.contentRect,Zn=qn.height,fn=qn.width;Nt({rect:{height:Zn,width:fn}})}})});return hn.observe(qt),function(){hn.unobserve(qt)}}},[qt]),Xt}({elementRef:Be}),rn=B.useRef({scrollOffset:Yi,measurements:[]});rn.current.scrollOffset=pn;var Ht=B.useMemo(function(){return Array(Fe).fill(-1)},[]),on=B.useState(Ht),en=on[0],yn=on[1],En=B.useMemo(function(){var tn=new IntersectionObserver(function(Qt){Qt.forEach(function(Vt){var qt=Vt.isIntersecting?Vt.intersectionRatio:-1,Wt=Vt.target.getAttribute(Zi);if(Wt){var sn=parseInt(Wt,10);0<=sn&&sn<Fe&&yn(function(ln){return ln[sn]=qt,function(Xt,Nt,hn){for(var mn,Rn=0,Mn=Nt.length;Rn<Mn;Rn++)!mn&&Rn in Nt||(mn||(mn=Array.prototype.slice.call(Nt,0,Rn)),mn[Rn]=Nt[Rn]);return Xt.concat(mn||Array.prototype.slice.call(Nt))}([],ln)})}})},{threshold:so});return tn},[]),Sn=B.useMemo(function(){return Ze===A.ScrollMode.Page&&Le===A.ViewMode.SinglePage?function(tn,Qt,Vt){for(var qt=[],Wt=0;Wt<tn;Wt++){var sn={height:Math.max(Qt.height,Vt[Wt].height),width:Math.max(Qt.width,Vt[Wt].width)},ln=Wt===0?ao:qt[Wt-1].end,Xt={left:ln.left+sn.width,top:ln.top+sn.height};qt[Wt]={index:Wt,start:ln,size:sn,end:Xt,visibility:-1}}return qt}(Fe,Jt,rt):Le===A.ViewMode.DualPageWithCover?function(tn,Qt,Vt,qt){for(var Wt=[],sn=0,ln=0,Xt=ti,Nt=0;Nt<tn;Nt++){var hn=Nt===0?{height:qt===A.ScrollMode.Page?Math.max(Qt.height,Vt[Nt].height):Vt[Nt].height,width:qt===A.ScrollMode.Page?Math.max(Qt.width,Vt[Nt].width):Vt[Nt].width}:{height:qt===A.ScrollMode.Page?Math.max(Qt.height,Vt[Nt].height):Vt[Nt].height,width:Math.max(Qt.width/2,Vt[Nt].width)};qt===A.ScrollMode.Page?Xt=Nt===0?ti:{left:Nt%2==0?hn.width:0,top:Math.floor((Nt-1)/2)*hn.height+Wt[0].end.top}:Nt===0?(Xt=ti,sn=Vt[0].height,ln=0):Nt%2==1?(Xt={left:0,top:sn+=ln},ln=Nt===tn-1?Vt[Nt].height:Math.max(Vt[Nt].height,Vt[Nt+1].height)):Xt={left:Wt[Nt-1].end.left,top:sn};var mn={left:Xt.left+hn.width,top:Xt.top+hn.height};Wt[Nt]={index:Nt,start:Xt,size:hn,end:mn,visibility:-1}}return Wt}(Fe,Jt,rt,Ze):Le===A.ViewMode.DualPage?function(tn,Qt,Vt,qt){for(var Wt=[],sn=0,ln=0,Xt=io,Nt=0;Nt<tn;Nt++){var hn={height:qt===A.ScrollMode.Page?Math.max(Qt.height,Vt[Nt].height):Vt[Nt].height,width:Math.max(Qt.width/2,Vt[Nt].width)};qt===A.ScrollMode.Page?Xt={left:Nt%2==0?0:hn.width,top:Math.floor(Nt/2)*hn.height}:Nt%2==0?(Xt={left:0,top:sn+=ln},ln=Nt===tn-1?Vt[Nt].height:Math.max(Vt[Nt].height,Vt[Nt+1].height)):Xt={left:Wt[Nt-1].end.left,top:sn};var mn={left:Xt.left+hn.width,top:Xt.top+hn.height};Wt[Nt]={index:Nt,start:Xt,size:hn,end:mn,visibility:-1}}return Wt}(Fe,Jt,rt,Ze):function(tn,Qt,Vt,qt){for(var Wt=[],sn=0,ln={left:0,top:0},Xt=0,Nt=ro,hn=0;hn<tn;hn++){var mn=Vt[hn];if(hn===0)sn=mn.width,ln={left:0,top:0},Xt=mn.height;else switch(qt){case A.ScrollMode.Wrapped:(sn+=mn.width)<Qt.width?(Nt={left:Wt[hn-1].end.left,top:ln.top},Xt=Math.max(Xt,mn.height)):(sn=mn.width,ln={left:(Nt={left:ln.left,top:ln.top+Xt}).left,top:Nt.top},Xt=mn.height);break;case A.ScrollMode.Horizontal:case A.ScrollMode.Vertical:default:Nt=Wt[hn-1].end}var Rn={left:Nt.left+mn.width,top:Nt.top+mn.height};Wt[hn]={index:hn,start:Nt,size:mn,end:Rn,visibility:-1}}return Wt}(Fe,Jt,rt,Ze)},[Ze,rt,Le,Jt]),wn=Sn[Fe-1]?{height:Sn[Fe-1].end.top,width:Sn[Fe-1].end.left}:oo;rn.current.measurements=Sn;var Pn=B.useMemo(function(){var tn=function(hn,mn,Rn,Mn){var qn=0;switch(hn){case Lt.Horizontal:qn=Mn.left;break;case Lt.Vertical:default:qn=Mn.top}var Zn=mn.length-1,fn=function(xn,sr,gr,Or){for(;xn<=sr;){var hr=(xn+sr)/2|0,Ar=Or(hr);if(Ar<gr)xn=hr+1;else{if(!(Ar>gr))return hr;sr=hr-1}}return xn>0?xn-1:0}(0,Zn,qn,function(xn){switch(hn){case Lt.Horizontal:return mn[xn].start.left;case Lt.Both:case Lt.Vertical:default:return mn[xn].start.top}});if(hn===Lt.Both)for(var Xn=mn[fn].start.top;fn-1>=0&&mn[fn-1].start.top===Xn&&mn[fn-1].start.left>=Mn.left;)fn--;for(var In=fn;In<=Zn;){var Ln={top:mn[In].start.top-Mn.top,left:mn[In].start.left-Mn.left},Wn={height:Rn.height-Ln.top,width:Rn.width-Ln.left};if(hn===Lt.Horizontal&&Wn.width<0||hn===Lt.Vertical&&Wn.height<0||hn===Lt.Both&&(Wn.width<0||Wn.height<0))break;In++}return{start:fn,end:In}}(kt,Sn,Jt,pn),Qt=tn.start,Vt=tn.end,qt=en.slice(wr(0,Fe,Qt),wr(0,Fe,Vt)),Wt=Qt+qt.reduce(function(hn,mn,Rn,Mn){return mn>Mn[hn]?Rn:hn},0),sn=Wt=wr(0,Fe-1,Wt),ln=Ve({endPage:Vt,numPages:Fe,startPage:Qt}),Xt=ln.startPage,Nt=ln.endPage;switch(Xt=Math.max(Xt,0),Nt=Math.min(Nt,Fe-1),Le){case A.ViewMode.DualPageWithCover:Wt>0&&(sn=Wt%2==1?Wt:Wt-1),Xt=Xt===0?0:Xt%2==1?Xt:Xt-1,Fe-(Nt=Nt%2==1?Nt-1:Nt)<=2&&(Nt=Fe-1);break;case A.ViewMode.DualPage:sn=Wt%2==0?Wt:Wt-1,Xt=Xt%2==0?Xt:Xt-1,Nt=Nt%2==1?Nt:Nt-1;break;case A.ViewMode.SinglePage:default:sn=Wt}return{startPage:Xt,endPage:Nt,maxVisbilityIndex:sn}},[Sn,Jt,pn,Le,en]),zn=Pn.startPage,Fn=Pn.endPage,Hn=Pn.maxVisbilityIndex,On=B.useMemo(function(){for(var tn=[],Qt=function(qt){var Wt=Sn[qt],sn=W(W({},Wt),{visibility:en[qt]!==void 0?en[qt]:-1,measureRef:function(ln){ln&&(ln.setAttribute(Zi,"".concat(qt)),En.observe(ln))}});tn.push(sn)},Vt=zn;Vt<=Fn;Vt++)Qt(Vt);return tn},[zn,Fn,en,Sn]),Bn=B.useCallback(function(tn,Qt){var Vt=rn.current.measurements[wr(0,Fe-1,tn)],qt=bt.current===A.ScrollMode.Page?Yi:Qt;return Vt?Kt({left:qt.left+Vt.start.left,top:qt.top+Vt.start.top},pe):Promise.resolve()},[Kt,pe]),jn=B.useCallback(function(tn,Qt){var Vt=rn.current.measurements,qt=Vt[tn].start,Wt=Vt.find(function(ln){return ln.start.top-qt.top>1e-12});if(!Wt)return Promise.resolve();var sn=Wt.index;switch(Mt.current){case A.ViewMode.DualPage:sn=sn%2==0?sn:sn+1;break;case A.ViewMode.DualPageWithCover:sn=sn%2==1?sn:sn+1}return Bn(sn,Qt)},[]),Nn=B.useCallback(function(tn,Qt){for(var Vt=rn.current.measurements,qt=Vt[tn].start,Wt=tn,sn=!1,ln=Fe-1;ln>=0;ln--)if(qt.top-Vt[ln].start.top>1e-12){sn=!0,Wt=Vt[ln].index;break}if(!sn)return Promise.resolve();switch(Mt.current){case A.ViewMode.DualPage:Wt=Wt%2==0?Wt:Wt-1;break;case A.ViewMode.DualPageWithCover:Wt=Wt%2==0?Wt-1:Wt}return Wt===tn&&(Wt=tn-1),Bn(Wt,Qt)},[]),Kn=B.useCallback(function(tn,Qt){if(Mt.current===A.ViewMode.DualPageWithCover||Mt.current===A.ViewMode.DualPage)return jn(tn,Qt);switch(bt.current){case A.ScrollMode.Wrapped:return jn(tn,Qt);case A.ScrollMode.Horizontal:case A.ScrollMode.Vertical:default:return Bn(tn+1,Qt)}},[]),ir=B.useCallback(function(tn,Qt){if(Mt.current===A.ViewMode.DualPageWithCover||Mt.current===A.ViewMode.DualPage)return Nn(tn,Qt);switch(bt.current){case A.ScrollMode.Wrapped:return Nn(tn,Qt);case A.ScrollMode.Horizontal:case A.ScrollMode.Vertical:default:return Bn(tn-1,Qt)}},[]),tr=B.useCallback(function(){return function(tn,Qt){switch(Qt){case A.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(tn.width,"px")};case A.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(tn.height,"px"),width:"100%"}}}(wn,bt.current)},[wn]),Gn=B.useCallback(function(tn){return function(Qt,Vt,qt){return qt!==A.ScrollMode.Page?{}:{height:"".concat(Vt.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(Qt.start.top,"px)")}}(tn,Jt,bt.current)},[Jt]),Yn=B.useCallback(function(tn){return function(Qt,Vt,qt,Wt,sn){var ln,Xt,Nt,hn,mn,Rn,Mn,qn=Vt?"right":"left",Zn=Vt?-1:1,fn=qt.length,Xn=Qt.start.left*Zn,In=Qt.size,Ln=In.height,Wn=In.width;if(Wt===A.ViewMode.DualPageWithCover){var xn=sn===A.ScrollMode.Page?0:Qt.start.top;return Qt.index===0||fn%2==0&&Qt.index===fn-1?((ln={height:"".concat(Ln,"px"),minWidth:"".concat(no(qt,Wt),"px"),width:"100%"})[qn]=0,ln.position="absolute",ln.top=0,ln.transform="translate(".concat(Xn,"px, ").concat(xn,"px)"),ln):((Xt={height:"".concat(Ln,"px"),width:"".concat(Wn,"px")})[qn]=0,Xt.position="absolute",Xt.top=0,Xt.transform="translate(".concat(Xn,"px, ").concat(xn,"px)"),Xt)}if(Wt===A.ViewMode.DualPage)return(Nt={height:"".concat(Ln,"px"),width:"".concat(Wn,"px")})[qn]=0,Nt.position="absolute",Nt.top=0,Nt.transform="translate(".concat(Xn,"px, ").concat(sn===A.ScrollMode.Page?0:Qt.start.top,"px)"),Nt;switch(sn){case A.ScrollMode.Horizontal:return(hn={height:"100%",width:"".concat(Wn,"px")})[qn]=0,hn.position="absolute",hn.top=0,hn.transform="translateX(".concat(Xn,"px)"),hn;case A.ScrollMode.Page:return(mn={height:"".concat(Ln,"px"),width:"".concat(Wn,"px")})[qn]=0,mn.position="absolute",mn.top=0,mn;case A.ScrollMode.Wrapped:return(Rn={height:"".concat(Ln,"px"),width:"".concat(Wn,"px")})[qn]=0,Rn.position="absolute",Rn.top=0,Rn.transform="translate(".concat(Xn,"px, ").concat(Qt.start.top,"px)"),Rn;case A.ScrollMode.Vertical:default:return(Mn={height:"".concat(Ln,"px"),width:"100%"})[qn]=0,Mn.position="absolute",Mn.top=0,Mn.transform="translateY(".concat(Qt.start.top,"px)"),Mn}}(tn,Re,rt,Mt.current,bt.current)},[Re,rt]),ar=B.useCallback(function(tn,Qt){var Vt=rn.current,qt=Vt.measurements,Wt=Vt.scrollOffset,sn=qt[wr(0,Fe-1,Qt)];if(sn){var ln=bt.current===A.ScrollMode.Page?{left:sn.start.left,top:sn.start.top}:{left:Wt.left*tn,top:Wt.top*tn};return Kt(ln,!1)}return Promise.resolve()},[]);return B.useEffect(function(){return function(){En.disconnect()}},[]),{boundingClientRect:Jt,isSmoothScrolling:et,startPage:zn,endPage:Fn,maxVisbilityIndex:Hn,virtualItems:On,getContainerStyles:tr,getItemContainerStyles:Gn,getItemStyles:Yn,scrollToItem:Bn,scrollToNextItem:Kn,scrollToPreviousItem:ir,zoom:ar}},ni=function(U,pe,Re,Fe,Be,Ve){var rt=Re;switch(!0){case(Be===A.ViewMode.DualPageWithCover&&Ve>=3):case(Be===A.ViewMode.DualPage&&Ve>=3):rt=2*Re;break;default:rt=Re}switch(Fe){case A.SpecialZoomLevel.ActualSize:return 1;case A.SpecialZoomLevel.PageFit:return Math.min((U.clientWidth-17)/rt,(U.clientHeight-16)/pe);case A.SpecialZoomLevel.PageWidth:return(U.clientWidth-17)/rt}},lo=function(U){var pe,Re,Fe=U.getCurrentPage,Be=(pe=50,Re=B.useRef([]),B.useEffect(function(){return function(){Re.current=[]}},[]),{push:function(tt){var et=Re.current;et.length+1>pe&&et.shift(),et.push(tt),Re.current=et},map:function(tt){return Re.current.map(function(et){return tt(et)})},pop:function(){var tt=Re.current;if(tt.length===0)return null;var et=tt.pop();return Re.current=tt,et}}),Ve=function(tt){var et=B.useRef([]);return B.useEffect(function(){return function(){et.current=[]}},[]),{dequeue:function(){var Et=et.current;if(Et.length===0)return null;var _t=Et.shift();return et.current=Et,_t||null},enqueue:function(Et){var _t=et.current;_t.length+1>tt&&_t.pop(),et.current=[Et].concat(_t)},map:function(Et){return et.current.map(function(_t){return Et(_t)})}}}(50),rt=function(){var tt=Ve.dequeue();return tt&&Be.push(tt),tt&&tt.pageIndex===Fe()?rt():tt},Ze=function(){var tt=Be.pop();return tt&&Ve.enqueue(tt),tt&&tt.pageIndex===Fe()?Ze():tt},Le=B.useCallback(function(tt){Be.push(tt)},[]);return{getNextDestination:rt,getPreviousDestination:Ze,markVisitedDestination:Le}},Ji=function(U){var pe=[];return U.map(function(Re){pe=pe.concat(Re).concat(function(Fe){var Be=[];return Fe.items&&Fe.items.length>0&&(Be=Be.concat(Ji(Fe.items))),Be}(Re))}),pe},Qi={capture:!1,passive:!0},uo={height:0,width:0},ri={height:0,width:0},ho=function(U){var pe=U.getCurrentPage,Re=U.getCurrentScrollMode,Fe=U.jumpToPage,Be=U.targetRef,Ve=B.useState(A.FullScreenMode.Normal),rt=Ve[0],Ze=Ve[1],Le=function(){var en=B.useState(uo),yn=en[0],En=en[1],Sn=De(function(){En({height:window.innerHeight,width:window.innerWidth})},100);return ie(function(){return window.addEventListener("resize",Sn,Qi),function(){window.removeEventListener("resize",Sn,Qi)}},[]),yn}(),tt=B.useState(ri),et=tt[0],Et=tt[1],_t=B.useRef(ri),bt=B.useRef(pe()),Mt=B.useRef(ri),kt=B.useState(Be.current),Ct=kt[0],pn=kt[1],Kt=B.useRef();ie(function(){Be.current!==Ct&&pn(Be.current)},[]),ie(function(){if(Ct){var en=new ResizeObserver(function(yn){yn.forEach(function(En){var Sn=En.target.getBoundingClientRect(),wn=Sn.height,Pn=Sn.width;Et({height:wn,width:Pn})})});return en.observe(Ct),function(){en.unobserve(Ct),en.disconnect()}}},[Ct]);var Jt=B.useCallback(function(en){var yn=Ce();return yn&&yn!==en?(Ze(A.FullScreenMode.Normal),ve(yn)):Promise.resolve()},[]),rn=B.useCallback(function(en){en&&J()&&(pn(en),Jt(en).then(function(){Kt.current=en,Ze(A.FullScreenMode.Entering),function(yn){oe&&yn[Ee.RequestFullScreen]()}(en)}))},[]),Ht=B.useCallback(function(){Ce()&&(Ze(A.FullScreenMode.Exitting),ve(document))},[]),on=B.useCallback(function(){Ct&&Ce()!==Ct&&Ze(A.FullScreenMode.Exitting)},[Ct]);return B.useEffect(function(){switch(rt){case A.FullScreenMode.Entering:Kt.current&&(Kt.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),bt.current=pe(),_t.current={height:window.innerHeight,width:window.innerWidth};break;case A.FullScreenMode.Entered:Re()===A.ScrollMode.Page?Fe(bt.current).then(function(){Ze(A.FullScreenMode.EnteredCompletely)}):Ze(A.FullScreenMode.EnteredCompletely);break;case A.FullScreenMode.Exitting:Kt.current&&(Kt.current.style.backgroundColor="",Kt.current=null),bt.current=pe();break;case A.FullScreenMode.Exited:Ze(A.FullScreenMode.Normal),Re()===A.ScrollMode.Page&&Fe(bt.current)}},[rt]),B.useEffect(function(){if(rt!==A.FullScreenMode.Normal)return rt===A.FullScreenMode.Entering&&Le.height===et.height&&Le.width===et.width&&Le.height>0&&Le.width>0&&(Mt.current.height===0||Le.height==Mt.current.height)?(Mt.current={height:window.innerHeight,width:window.innerWidth},void Ze(A.FullScreenMode.Entered)):void(rt===A.FullScreenMode.Exitting&&_t.current.height===Le.height&&_t.current.width===Le.width&&Le.height>0&&Le.width>0&&Ze(A.FullScreenMode.Exited))},[rt,Le,et]),B.useEffect(function(){var en;return en=on,oe&&document.addEventListener(Ee.FullScreenChange,en),function(){(function(yn){oe&&document.removeEventListener(Ee.FullScreenChange,yn)})(on)}},[Ct]),{enterFullScreenMode:rn,exitFullScreenMode:Ht,fullScreenMode:rt}},fo={buildPageStyles:function(){return{}},transformSize:function(U){return U.size}},mr={left:0,top:0},po=function(U){var pe=U.currentFile,Re=U.defaultScale,Fe=U.doc,Be=U.enableSmoothScroll,Ve=U.initialPage,rt=U.initialRotation,Ze=U.initialScale,Le=U.pageLayout,tt=U.pageSizes,et=U.plugins,Et=U.renderPage,_t=U.scrollMode,bt=U.setRenderRange,Mt=U.viewMode,kt=U.viewerState,Ct=U.onDocumentLoad,pn=U.onOpenFile,Kt=U.onPageChange,Jt=U.onRotate,rn=U.onRotatePage,Ht=U.onZoom,on=Fe.numPages,en=Fe.loadingTask.docId,yn=B.useContext(He).l10n,En=B.useContext(ce),Sn=En.direction===A.TextDirection.RightToLeft,wn=B.useRef(),Pn=B.useRef(),zn=B.useState(Ve),Fn=zn[0],Hn=zn[1],On=B.useRef(null),Bn=lo({getCurrentPage:function(){return fn.current.pageIndex}}),jn=B.useState(rt),Nn=jn[0],Kn=jn[1],ir=Ne(Nn),tr=B.useState(!1),Gn=tr[0],Yn=tr[1],ar=B.useState(new Map),tn=ar[0],Qt=ar[1],Vt=B.useState(_t),qt=Vt[0],Wt=Vt[1],sn=Ne(qt),ln=B.useState(Mt),Xt=ln[0],Nt=ln[1],hn=Ne(Xt),mn=function(At){var un=Me(),vn=B.useState([]),kn=vn[0],An=vn[1];return B.useEffect(function(){At.getOutline().then(function(bn){if(un.current&&bn!==null){var Un=Ji(bn);An(Un)}})},[]),kn}(Fe),Rn=B.useState(Ze),Mn=Rn[0],qn=Rn[1],Zn=Ne(Mn),fn=B.useRef(kt),Xn=B.useRef(typeof Re=="string"?Re:null),In=B.useRef(-1),Ln=B.useRef(-1),Wn=B.useRef(Ve),xn=ho({getCurrentPage:function(){return fn.current.pageIndex},getCurrentScrollMode:function(){return fn.current.scrollMode},jumpToPage:function(At){return lr(At)},targetRef:Pn}),sr=B.useState(-1),gr=sr[0],Or=sr[1],hr=B.useState(0),Ar=hr[0],Eo=hr[1],Jn=Se({doc:Fe});B.useEffect(function(){return function(){St.clear(),Yt.clear()}},[en]);var ra=B.useMemo(function(){return Object.assign({},fo,Le)},[]),yo=B.useMemo(function(){return Array(on).fill(0).map(function(At,un){var vn=[tt[un].pageHeight,tt[un].pageWidth],kn=Math.abs(Nn)%180==0?{height:vn[0],width:vn[1]}:{height:vn[1],width:vn[0]},An={height:kn.height*Mn,width:kn.width*Mn};return ra.transformSize({numPages:on,pageIndex:un,size:An})})},[Nn,Mn]),Tn=co({enableSmoothScroll:Be,isRtl:Sn,numberOfItems:on,parentRef:Pn,scrollMode:qt,setRenderRange:bt,sizes:yo,viewMode:Xt}),So=De(function(){!Xn.current||fn.current.fullScreenMode!==A.FullScreenMode.Normal||Ve>0&&Wn.current===Ve||fr(Xn.current)},200);(function(At){var un=At.targetRef,vn=At.onResize;ie(function(){var kn=new ResizeObserver(function(bn){bn.forEach(function(Un){vn(Un.target)})}),An=un.current;if(An)return kn.observe(An),function(){kn.unobserve(An)}},[])})({targetRef:Pn,onResize:So});var cr=function(At){var un=At;et.forEach(function(vn){vn.onViewerStateChange&&(un=vn.onViewerStateChange(un))}),fn.current=un},wo=function(){return Pn.current},Ao=function(){return fn.current},Co=B.useCallback(function(At){Bn.markVisitedDestination(At)},[]),oi=B.useCallback(function(At){var un=At.pageIndex,vn=At.bottomOffset,kn=At.leftOffset,An=At.scaleTo,bn=Pn.current,Un=fn.current;return bn&&Un?new Promise(function(ur,hi){Rt(Fe,un).then(function(Nr){var dr=Nr.getViewport({scale:1}),Br=0,da=(typeof vn=="function"?vn(dr.width,dr.height):vn)||0,jr=(typeof kn=="function"?kn(dr.width,dr.height):kn)||0,vr=Un.scale;switch(An){case A.SpecialZoomLevel.PageFit:Br=0,jr=0,fr(A.SpecialZoomLevel.PageFit);break;case A.SpecialZoomLevel.PageWidth:vr=ni(bn,tt[un].pageHeight,tt[un].pageWidth,A.SpecialZoomLevel.PageWidth,Mt,on),Br=(dr.height-da)*vr,jr*=vr,fr(vr);break;default:Br=(dr.height-da)*vr,jr*=vr}switch(Un.scrollMode){case A.ScrollMode.Horizontal:Tn.scrollToItem(un,{left:jr,top:0}).then(function(){ur()});break;case A.ScrollMode.Vertical:default:Tn.scrollToItem(un,{left:0,top:Br}).then(function(){ur()})}})}):Promise.resolve()},[]),ia=B.useCallback(function(At){return Bn.markVisitedDestination(At),oi(At)},[]),Po=B.useCallback(function(){var At=Bn.getNextDestination();return At?oi(At):Promise.resolve()},[]),ko=B.useCallback(function(){var At=Bn.getPreviousDestination();return At?oi(At):Promise.resolve()},[]),xo=B.useCallback(function(){return Tn.scrollToNextItem(fn.current.pageIndex,mr)},[]),lr=B.useCallback(function(At){return 0<=At&&At<on?Tn.scrollToItem(At,mr):Promise.resolve()},[]),Mo=B.useCallback(function(){return Tn.scrollToPreviousItem(fn.current.pageIndex,mr)},[]),aa=B.useCallback(function(At){var un,vn;(un=At.name,vn=un.split(/\./).pop(),vn?vn.toLowerCase():"").toLowerCase()==="pdf"&&new Promise(function(kn){var An=new FileReader;An.readAsArrayBuffer(At),An.onload=function(){var bn=new Uint8Array(An.result);kn(bn)}}).then(function(kn){pn(At.name,kn)})},[pn]),oa=B.useCallback(function(At){var un=At===A.RotateDirection.Backward?-90:90,vn=fn.current.rotation,kn=vn===360||vn===-360?un:vn+un;Jn.markNotRendered(),Kn(kn),cr(W(W({},fn.current),{rotation:kn})),Jt({direction:At,doc:Fe,rotation:kn})},[]),si=B.useCallback(function(At,un){var vn=un===A.RotateDirection.Backward?-90:90,kn=fn.current.pagesRotation,An=(kn.has(At)?kn.get(At):rt)+vn,bn=kn.set(At,An);Qt(bn),Yn(function(Un){return!Un}),cr(W(W({},fn.current),{pagesRotation:bn,rotatedPage:At})),rn({direction:un,doc:Fe,pageIndex:At,rotation:An}),Jn.markRendering(At),Or(At)},[]),sa=B.useCallback(function(At){cr(W(W({},fn.current),{scrollMode:At})),Wt(At)},[]),ca=B.useCallback(function(At){cr(W(W({},fn.current),{viewMode:At})),Nt(At)},[]),fr=B.useCallback(function(At){var un=Pn.current,vn=fn.current.pageIndex;if(!(vn<0||vn>=on)){var kn=tt[vn].pageHeight,An=tt[vn].pageWidth,bn=un?typeof At=="string"?ni(un,kn,An,At,fn.current.viewMode,on):At:1;Xn.current=typeof At=="string"?At:null,bn!==fn.current.scale&&(Eo(function(Un){return Un+1}),Jn.markNotRendered(),qn(bn),Ht({doc:Fe,scale:bn}),cr(W(W({},fn.current),{scale:bn})))}},[]),To=B.useCallback(function(At){xn.enterFullScreenMode(At)},[]),$o=B.useCallback(function(){xn.exitFullScreenMode()},[]);B.useEffect(function(){cr(W(W({},fn.current),{fullScreenMode:xn.fullScreenMode}))},[xn.fullScreenMode]),B.useEffect(function(){var At={enterFullScreenMode:To,exitFullScreenMode:$o,getPagesContainer:wo,getViewerState:Ao,jumpToDestination:ia,jumpToNextDestination:Po,jumpToPreviousDestination:ko,jumpToNextPage:xo,jumpToPreviousPage:Mo,jumpToPage:lr,openFile:aa,rotate:oa,rotatePage:si,setViewerState:cr,switchScrollMode:sa,switchViewMode:ca,zoom:fr};return et.forEach(function(un){un.install&&un.install(At)}),function(){et.forEach(function(un){un.uninstall&&un.uninstall(At)})}},[en]),B.useEffect(function(){Ct({doc:Fe,file:pe}),et.forEach(function(At){At.onDocumentLoad&&At.onDocumentLoad({doc:Fe,file:pe})})},[en]);var ci,li,ui,la=Tn.boundingClientRect;ci=function(){Ve&&lr(Ve)},li=la.height>0&&la.width>0,ui=B.useRef(!1),ie(function(){li&&!ui.current&&(ui.current=!0,ci())},[ci,li]),ie(function(){var At=fn.current.pageIndex;At>-1&&sn!==qt&&Tn.scrollToItem(At,mr).then(function(){xn.fullScreenMode===A.FullScreenMode.EnteredCompletely&&(Be||Jn.markNotRendered(),In.current=-1)})},[qt]),ie(function(){var At=fn.current.pageIndex;At>-1&&ir!==Nn&&Tn.scrollToItem(At,mr)},[Nn]),ie(function(){Zn!=0&&Zn!=fn.current.scale&&Tn.zoom(fn.current.scale/Zn,fn.current.pageIndex).then(function(){xn.fullScreenMode===A.FullScreenMode.EnteredCompletely&&(Ln.current=-1)})},[Mn]),ie(function(){if(hn!==fn.current.viewMode){var At=Tn.startPage,un=Tn.endPage,vn=Tn.virtualItems;Jn.markNotRendered(),Jn.setRange(At,un);for(var kn=function(bn){var Un=vn.find(function(ur){return ur.index===bn});Un&&Jn.setVisibility(bn,Un.visibility)},An=At;An<=un;An++)kn(An);di()}},[Xt]),ie(function(){var At=fn.current.pageIndex;At>-1&&hn!==Xt&&Tn.scrollToItem(At,mr)},[Xt]),ie(function(){var At=fn.current.pageIndex;At>0&&At===Ve&&Wn.current===Ve&&Xn.current&&(Wn.current=-1,fr(Xn.current))},[Fn]),B.useEffect(function(){Tn.isSmoothScrolling||On.current!==null&&On.current===Fn||(On.current=Fn,Kt({currentPage:Fn,doc:Fe}))},[Fn,Tn.isSmoothScrolling]),B.useEffect(function(){xn.fullScreenMode===A.FullScreenMode.Entering&&fn.current.scrollMode===A.ScrollMode.Page&&(In.current=fn.current.pageIndex),xn.fullScreenMode===A.FullScreenMode.EnteredCompletely&&fn.current.scrollMode===A.ScrollMode.Page&&Be&&(In.current=-1),xn.fullScreenMode===A.FullScreenMode.EnteredCompletely&&Xn.current&&(Ln.current=fn.current.pageIndex,fr(Xn.current))},[xn.fullScreenMode]),B.useEffect(function(){if(xn.fullScreenMode!==A.FullScreenMode.Entering&&xn.fullScreenMode!==A.FullScreenMode.Exitting&&!Tn.isSmoothScrolling){var At=Tn.startPage,un=Tn.endPage,vn=Tn.maxVisbilityIndex,kn=Tn.virtualItems,An=vn,bn=xn.fullScreenMode===A.FullScreenMode.Entered||xn.fullScreenMode===A.FullScreenMode.EnteredCompletely;if(!(bn&&An!==In.current&&In.current>-1||bn&&An!==Ln.current&&Ln.current>-1)){Hn(An),cr(W(W({},fn.current),{pageIndex:An})),Jn.setRange(At,un);for(var Un=function(hi){var Nr=kn.find(function(dr){return dr.index===hi});Nr&&Jn.setVisibility(hi,Nr.visibility)},ur=At;ur<=un;ur++)Un(ur);di()}}},[Tn.startPage,Tn.endPage,Tn.isSmoothScrolling,Tn.maxVisbilityIndex,xn.fullScreenMode,Gn,Nn,Mn]);var Ro=B.useCallback(function(At){Jn.markRendered(At),di()},[Ar]),di=function(){var At=Jn.getHighestPriorityPage();At>-1&&Jn.isInRange(At)&&(Jn.markRendering(At),Or(At))},Io=function(At){var un=Fn-1,vn=Fn+1;switch(At){case"FirstPage":lr(0);break;case"LastPage":lr(on-1);break;case"NextPage":vn<on&&lr(vn);break;case"PrevPage":un>=0&&lr(un)}},Fo=B.useCallback(function(){var At=Tn.virtualItems,un=[];switch(Xt){case A.ViewMode.DualPage:un=We(At,2);break;case A.ViewMode.DualPageWithCover:At.length&&(un=At[0].index===0?[[At[0]]].concat(We(At.slice(1),2)):We(At,2));break;case A.ViewMode.SinglePage:default:un=We(At,1)}var vn=yn&&yn.core?yn.core.pageLabel:"Page {{pageIndex}}",kn={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:wn,style:{height:"100%"}},children:B.createElement(B.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:Q({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":qt===A.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":Sn,"rpv-core__inner-pages--single":qt===A.ScrollMode.Page,"rpv-core__inner-pages--vertical":qt===A.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":qt===A.ScrollMode.Wrapped}),ref:Pn,style:{height:"100%",position:"relative"}},children:B.createElement("div",{"data-testid":"core__inner-current-page-".concat(Fn),style:Object.assign({"--scale-factor":Mn},Tn.getContainerStyles())},un.map(function(An){return B.createElement("div",{className:Q({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":qt===A.ScrollMode.Page}),style:Tn.getItemContainerStyles(An[0]),key:"".concat(An[0].index,"-").concat(Xt)},An.map(function(bn){var Un=Xt===A.ViewMode.DualPageWithCover&&(bn.index===0||on%2==0&&bn.index===on-1);return B.createElement("div",{"aria-label":vn.replace("{{pageIndex}}","".concat(bn.index+1)),className:Q({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":Xt===A.ViewMode.DualPage&&bn.index%2==0,"rpv-core__inner-page--dual-odd":Xt===A.ViewMode.DualPage&&bn.index%2==1,"rpv-core__inner-page--dual-cover":Un,"rpv-core__inner-page--dual-cover-even":Xt===A.ViewMode.DualPageWithCover&&!Un&&bn.index%2==0,"rpv-core__inner-page--dual-cover-odd":Xt===A.ViewMode.DualPageWithCover&&!Un&&bn.index%2==1,"rpv-core__inner-page--single":Xt===A.ViewMode.SinglePage&&qt===A.ScrollMode.Page}),role:"region",key:"".concat(bn.index,"-").concat(Xt),style:Object.assign({},Tn.getItemStyles(bn),ra.buildPageStyles({numPages:on,pageIndex:bn.index,scrollMode:qt,viewMode:Xt}))},B.createElement(Ja,{doc:Fe,measureRef:bn.measureRef,outlines:mn,pageIndex:bn.index,pageRotation:tn.has(bn.index)?tn.get(bn.index):0,pageSize:tt[bn.index],plugins:et,renderPage:Et,renderQueueKey:Ar,rotation:Nn,scale:Mn,shouldRender:gr===bn.index,viewMode:Xt,onExecuteNamedAction:Io,onJumpFromLinkAnnotation:Co,onJumpToDest:ia,onRenderCompleted:Ro,onRotatePage:si}))}))}))}};return et.forEach(function(An){An.renderViewer&&(kn=An.renderViewer({containerRef:wn,doc:Fe,pagesContainerRef:Pn,pagesRotation:tn,pageSizes:tt,rotation:Nn,slot:kn,themeContext:En,jumpToPage:lr,openFile:aa,rotate:oa,rotatePage:si,switchScrollMode:sa,switchViewMode:ca,zoom:fr}))}),kn},[et,Tn]),ua=B.useCallback(function(At){return B.createElement("div",W({},At.attrs,{style:At.attrs&&At.attrs.style?At.attrs.style:{}}),At.children,At.subSlot&&ua(At.subSlot))},[]);return ua(Fo())},ea=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],mo=function(U){var pe=U.defaultScale,Re=U.doc,Fe=U.render,Be=U.scrollMode,Ve=U.viewMode,rt=B.useRef(),Ze=B.useState({pageSizes:[],scale:0}),Le=Ze[0],tt=Ze[1];return B.useLayoutEffect(function(){var et=Array(Re.numPages).fill(0).map(function(Et,_t){return new Promise(function(bt,Mt){Rt(Re,_t).then(function(kt){var Ct=kt.getViewport({scale:1});bt({pageHeight:Ct.height,pageWidth:Ct.width,rotation:Ct.rotation})})})});Promise.all(et).then(function(Et){var _t=rt.current;if(_t&&Et.length!==0){var bt=Et[0].pageWidth,Mt=Et[0].pageHeight,kt=_t.parentElement,Ct=(kt.clientWidth-45)/bt,pn=(kt.clientHeight-45)/Mt,Kt=Ct;switch(Be){case A.ScrollMode.Horizontal:Kt=Math.min(Ct,pn);break;case A.ScrollMode.Vertical:default:Kt=Ct}var Jt,rn,Ht=pe?typeof pe=="string"?ni(kt,Mt,bt,pe,Ve,Re.numPages):pe:(Jt=Kt,(rn=ea.findIndex(function(on){return on>=Jt}))===-1||rn===0?Jt:ea[rn-1]);tt({pageSizes:Et,scale:Ht})}})},[Re.loadingTask.docId]),Le.pageSizes.length===0||Le.scale===0?B.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:rt},B.createElement(fe,null)):Fe(Le.pageSizes,Le.scale)},Dr=function(){},ii=function(U){function pe(Re,Fe){var Be=U.call(this)||this;return Be.verifyPassword=Re,Be.passwordStatus=Fe,Be}return ue(pe,U),pe}(Dr),go=function(U){var pe=U.passwordStatus,Re=U.renderProtectedView,Fe=U.verifyPassword,Be=U.onDocumentAskPassword,Ve=B.useContext(He).l10n,rt=B.useState(""),Ze=rt[0],Le=rt[1],tt=B.useContext(ce).direction===A.TextDirection.RightToLeft,et=function(){return Fe(Ze)};return B.useEffect(function(){Be&&Be({verifyPassword:Fe})},[]),Re?Re({passwordStatus:pe,verifyPassword:Fe}):B.createElement("div",{className:"rpv-core__asking-password-wrapper"},B.createElement("div",{className:Q({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":tt})},B.createElement("div",{className:"rpv-core__asking-password-message"},pe===A.PasswordStatus.RequiredPassword&&Ve.core.askingPassword.requirePasswordToOpen,pe===A.PasswordStatus.WrongPassword&&Ve.core.wrongPassword.tryAgain),B.createElement("div",{className:"rpv-core__asking-password-body"},B.createElement("div",{className:Q({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!tt,"rpv-core__asking-password-input--rtl":tt})},B.createElement(de,{testId:"core__asking-password-input",type:"password",value:Ze,onChange:Le,onKeyDown:function(Et){Et.key==="Enter"&&et()}})),B.createElement(ne,{onClick:et},Ve.core.askingPassword.submit))))},ta=function(U){function pe(Re){var Fe=U.call(this)||this;return Fe.doc=Re,Fe}return ue(pe,U),pe}(Dr),na=function(U){function pe(Re){var Fe=U.call(this)||this;return Fe.error=Re,Fe}return ue(pe,U),pe}(Dr),ai=function(U){function pe(Re){var Fe=U.call(this)||this;return Fe.percentages=Re,Fe}return ue(pe,U),pe}(Dr),vo=function(U){var pe=U.characterMap,Re=U.file,Fe=U.httpHeaders,Be=U.render,Ve=U.renderError,rt=U.renderLoader,Ze=U.renderProtectedView,Le=U.transformGetDocumentParams,tt=U.withCredentials,et=U.onDocumentAskPassword,Et=B.useContext(ce).direction===A.TextDirection.RightToLeft,_t=B.useState(new ai(0)),bt=_t[0],Mt=_t[1],kt=B.useRef(""),Ct=Me();return B.useEffect(function(){kt.current="",Mt(new ai(0));var pn=new Y.PDFWorker({name:"PDFWorker_".concat(Date.now())}),Kt=Object.assign({httpHeaders:Fe,withCredentials:tt,worker:pn},typeof Re=="string"?{url:Re}:{data:Re},pe?{cMapUrl:pe.url,cMapPacked:pe.isCompressed}:{}),Jt=Le?Le(Kt):Kt,rn=Y.getDocument(Jt);return rn.onPassword=function(Ht,on){switch(on){case Y.PasswordResponses.NEED_PASSWORD:Ct.current&&Mt(new ii(Ht,A.PasswordStatus.RequiredPassword));break;case Y.PasswordResponses.INCORRECT_PASSWORD:Ct.current&&Mt(new ii(Ht,A.PasswordStatus.WrongPassword))}},rn.onProgress=function(Ht){var on=Ht.total>0?Math.min(100,100*Ht.loaded/Ht.total):100;Ct.current&&kt.current===""&&Mt(new ai(on))},rn.promise.then(function(Ht){kt.current=Ht.loadingTask.docId,Ct.current&&Mt(new ta(Ht))},function(Ht){return Ct.current&&!pn.destroyed&&Mt(new na({message:Ht.message||"Cannot load document",name:Ht.name}))}),function(){rn.destroy(),pn.destroy()}},[Re]),bt instanceof ii?B.createElement(go,{passwordStatus:bt.passwordStatus,renderProtectedView:Ze,verifyPassword:bt.verifyPassword,onDocumentAskPassword:et}):bt instanceof ta?Be(bt.doc):bt instanceof na?Ve?Ve(bt.error):B.createElement("div",{className:Q({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":Et})},B.createElement("div",{className:"rpv-core__doc-error-text"},bt.error.message)):B.createElement("div",{"data-testid":"core__doc-loading",className:Q({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":Et})},rt?rt(bt.percentages):B.createElement(fe,null))},bo=function(U,pe){var Re=B.useMemo(function(){return U==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":U},[]),Fe=B.useState(Re),Be=Fe[0],Ve=Fe[1],rt=Ne(Be);return B.useEffect(function(){if(U==="auto"){var Ze=window.matchMedia("(prefers-color-scheme: dark)"),Le=function(tt){Ve(tt.matches?"dark":"light")};return Ze.addEventListener("change",Le),function(){return Ze.removeEventListener("change",Le)}}},[]),B.useEffect(function(){Be!==rt&&pe&&pe(Be)},[Be]),B.useEffect(function(){U!==Be&&Ve(U)},[U]),{currentTheme:Be,setCurrentTheme:Ve}},_o=function(U){return{startPage:U.startPage-3,endPage:U.endPage+3}};A.Button=function(U){var pe=U.children,Re=U.testId,Fe=U.onClick,Be=B.useContext(ce).direction===A.TextDirection.RightToLeft,Ve=Re?{"data-testid":Re}:{};return B.createElement("button",W({className:Q({"rpv-core__button":!0,"rpv-core__button--rtl":Be}),type:"button",onClick:Fe},Ve),pe)},A.Icon=q,A.LazyRender=function(U){var pe=U.attrs,Re=U.children,Fe=U.testId,Be=B.useState(!1),Ve=Be[0],rt=Be[1],Ze=Fe?W(W({},pe),{"data-testid":Fe}):pe,Le=ee({once:!0,onVisibilityChanged:function(tt){tt.isVisible&&rt(!0)}});return B.createElement("div",W({ref:Le},Ze),Ve&&Re)},A.LocalizationContext=He,A.Menu=function(U){var pe=U.children,Re=B.useRef(),Fe=B.useRef([]),Be=B.useContext(ce).direction===A.TextDirection.RightToLeft,Ve=function(Ze){if(Re.current)switch(Ze.key){case"Tab":Ze.preventDefault();break;case"ArrowDown":Ze.preventDefault(),rt(function(Le,tt){return tt+1});break;case"ArrowUp":Ze.preventDefault(),rt(function(Le,tt){return tt-1});break;case"End":Ze.preventDefault(),rt(function(Le,tt){return Le.length-1});break;case"Home":Ze.preventDefault(),rt(function(Le,tt){return 0})}},rt=function(Ze){if(Re.current){var Le=Fe.current,tt=Le.findIndex(function(Et){return Et.getAttribute("tabindex")==="0"}),et=Math.min(Le.length-1,Math.max(0,Ze(Le,tt)));tt>=0&&tt<=Le.length-1&&Le[tt].setAttribute("tabindex","-1"),Le[et].setAttribute("tabindex","0"),Le[et].focus()}};return ie(function(){var Ze=Re.current;if(Ze){var Le=function(tt){var et=[];return tt.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach(function(Et){if(Et instanceof HTMLElement){var _t=Et.parentElement;(_t===tt||window.getComputedStyle(_t).display!=="none")&&et.push(Et)}}),et}(Ze);Fe.current=Le}},[]),ie(function(){return document.addEventListener("keydown",Ve),function(){document.removeEventListener("keydown",Ve)}},[]),B.createElement("div",{ref:Re,"aria-orientation":"vertical",className:Q({"rpv-core__menu":!0,"rpv-core__menu--rtl":Be}),role:"menu",tabIndex:0},pe)},A.MenuDivider=function(){return B.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},A.MenuItem=function(U){var pe=U.checked,Re=pe!==void 0&&pe,Fe=U.children,Be=U.icon,Ve=Be===void 0?null:Be,rt=U.isDisabled,Ze=rt!==void 0&&rt,Le=U.testId,tt=U.onClick,et=B.useContext(ce).direction===A.TextDirection.RightToLeft,Et=Le?{"data-testid":Le}:{};return B.createElement("button",W({className:Q({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":Ze,"rpv-core__menu-item--ltr":!et,"rpv-core__menu-item--rtl":et}),role:"menuitem",tabIndex:-1,type:"button",onClick:tt},Et),B.createElement("div",{className:Q({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!et,"rpv-core__menu-item-icon--rtl":et})},Ve),B.createElement("div",{className:Q({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!et,"rpv-core__menu-item-label--rtl":et})},Fe),B.createElement("div",{className:Q({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!et,"rpv-core__menu-item-check--rtl":et})},Re&&B.createElement(K,null)))},A.MinimalButton=function(U){var pe=U.ariaLabel,Re=pe===void 0?"":pe,Fe=U.ariaKeyShortcuts,Be=Fe===void 0?"":Fe,Ve=U.children,rt=U.isDisabled,Ze=rt!==void 0&&rt,Le=U.isSelected,tt=Le!==void 0&&Le,et=U.testId,Et=U.onClick,_t=B.useContext(ce).direction===A.TextDirection.RightToLeft,bt=et?{"data-testid":et}:{};return B.createElement("button",W({"aria-label":Re},Be&&{"aria-keyshortcuts":Be},Ze&&{"aria-disabled":!0},{className:Q({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":Ze,"rpv-core__minimal-button--rtl":_t,"rpv-core__minimal-button--selected":tt}),type:"button",onClick:Et},bt),Ve)},A.Modal=function(U){var pe=U.ariaControlsSuffix,Re=U.closeOnClickOutside,Fe=U.closeOnEscape,Be=U.content,Ve=U.isOpened,rt=Ve!==void 0&&Ve,Ze=U.target,Le=pe||"".concat(G());return B.createElement(Qe,{target:Ze?function(tt,et){return B.createElement("div",{"aria-expanded":et?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(Le)},Ze(tt,et))}:null,content:function(tt){return B.createElement(Ae,null,B.createElement(Pe,{ariaControlsSuffix:Le,closeOnClickOutside:Re,closeOnEscape:Fe,onToggle:tt},Be(tt)))},isOpened:rt})},A.Popover=function(U){var pe=U.ariaHasPopup,Re=pe===void 0?"dialog":pe,Fe=U.ariaControlsSuffix,Be=U.closeOnClickOutside,Ve=U.closeOnEscape,rt=U.content,Ze=U.lockScroll,Le=Ze===void 0||Ze,tt=U.offset,et=U.position,Et=U.target,_t=Oe(!1),bt=_t.opened,Mt=_t.toggle,kt=B.useRef(),Ct=B.useMemo(function(){return Fe||"".concat(G())},[]);return B.createElement("div",{ref:kt,"aria-expanded":bt?"true":"false","aria-haspopup":Re,"aria-controls":"rpv-core__popver-body-".concat(Ct)},Et(Mt,bt),bt&&B.createElement(B.Fragment,null,Le&&B.createElement(nt,{closeOnEscape:Ve,onClose:Mt}),B.createElement(Ke,{ariaControlsSuffix:Ct,closeOnClickOutside:Be,offset:tt,position:et,targetRef:kt,onClose:Mt},rt(Mt))))},A.PrimaryButton=ne,A.ProgressBar=function(U){var pe=U.progress,Re=B.useContext(ce).direction===A.TextDirection.RightToLeft;return B.createElement("div",{className:Q({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":Re})},B.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(pe,"%")}},pe,"%"))},A.Separator=function(){return B.createElement("div",{className:"rpv-core__separator"})},A.Spinner=fe,A.Splitter=function(U){var pe=U.constrain,Re=B.useContext(ce).direction===A.TextDirection.RightToLeft,Fe=B.useRef(),Be=B.useRef(),Ve=B.useRef(),rt=B.useRef(0),Ze=B.useRef(0),Le=B.useRef(0),tt=B.useRef(0),et={capture:!0},Et=function(bt){var Mt=Fe.current,kt=Be.current,Ct=Ve.current;if(Mt&&kt&&Ct){var pn=tt.current,Kt=bt.clientX-rt.current,Jt=Le.current+(Re?-Kt:Kt),rn=Mt.parentElement.getBoundingClientRect().width,Ht=100*Jt/rn;if(Mt.classList.add("rpv-core__splitter--resizing"),pe){var on=rn-Jt-pn;if(!pe({firstHalfPercentage:Ht,firstHalfSize:Jt,secondHalfPercentage:100*on/rn,secondHalfSize:on}))return}kt.style.width="".concat(Ht,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),kt.classList.add("rpv-core__splitter-sibling--resizing"),Ct.classList.add("rpv-core__splitter-sibling--resizing")}},_t=function(bt){var Mt=Fe.current,kt=Be.current,Ct=Ve.current;Mt&&kt&&Ct&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),Mt.classList.remove("rpv-core__splitter--resizing"),kt.classList.remove("rpv-core__splitter-sibling--resizing"),Ct.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",Et,et),document.removeEventListener("mouseup",_t,et))};return B.useEffect(function(){var bt=Fe.current;bt&&(tt.current=bt.getBoundingClientRect().width,Be.current=bt.previousElementSibling,Ve.current=bt.nextElementSibling)},[]),B.createElement("div",{ref:Fe,className:"rpv-core__splitter",onMouseDown:function(bt){var Mt=Be.current;Mt&&(rt.current=bt.clientX,Ze.current=bt.clientY,Le.current=Mt.getBoundingClientRect().width,document.addEventListener("mousemove",Et,et),document.addEventListener("mouseup",_t,et))}})},A.TextBox=de,A.ThemeContext=ce,A.Tooltip=function(U){var pe=U.ariaControlsSuffix,Re=U.content,Fe=U.offset,Be=U.position,Ve=U.target,rt=Oe(!1),Ze=rt.opened,Le=rt.toggle,tt=B.useRef(),et=B.useRef(),Et=B.useMemo(function(){return pe||"".concat(G())},[]);ge(function(){tt.current&&document.activeElement&&tt.current.contains(document.activeElement)&&bt()});var _t=function(){Le(A.ToggleStatus.Open)},bt=function(){Le(A.ToggleStatus.Close)};return B.createElement(B.Fragment,null,B.createElement("div",{ref:tt,"aria-describedby":"rpv-core__tooltip-body-".concat(Et),onBlur:function(Mt){Mt.relatedTarget instanceof HTMLElement&&Mt.currentTarget.parentElement&&Mt.currentTarget.parentElement.contains(Mt.relatedTarget)?et.current&&(et.current.style.display="none"):bt()},onFocus:_t,onMouseEnter:_t,onMouseLeave:bt},Ve),Ze&&B.createElement(pt,{ariaControlsSuffix:Et,contentRef:et,offset:Fe,position:Be,targetRef:tt},Re()))},A.Viewer=function(U){var pe=U.characterMap,Re=U.defaultScale,Fe=U.enableSmoothScroll,Be=Fe===void 0||Fe,Ve=U.fileUrl,rt=U.httpHeaders,Ze=rt===void 0?{}:rt,Le=U.initialPage,tt=Le===void 0?0:Le,et=U.pageLayout,Et=U.initialRotation,_t=Et===void 0?0:Et,bt=U.localization,Mt=U.plugins,kt=Mt===void 0?[]:Mt,Ct=U.renderError,pn=U.renderLoader,Kt=U.renderPage,Jt=U.renderProtectedView,rn=U.scrollMode,Ht=rn===void 0?A.ScrollMode.Vertical:rn,on=U.setRenderRange,en=on===void 0?_o:on,yn=U.transformGetDocumentParams,En=U.theme,Sn=En===void 0?{direction:A.TextDirection.LeftToRight,theme:"light"}:En,wn=U.viewMode,Pn=wn===void 0?A.ViewMode.SinglePage:wn,zn=U.withCredentials,Fn=zn!==void 0&&zn,Hn=U.onDocumentAskPassword,On=U.onDocumentLoad,Bn=On===void 0?function(){}:On,jn=U.onPageChange,Nn=jn===void 0?function(){}:jn,Kn=U.onRotate,ir=Kn===void 0?function(){}:Kn,tr=U.onRotatePage,Gn=tr===void 0?function(){}:tr,Yn=U.onSwitchTheme,ar=Yn===void 0?function(){}:Yn,tn=U.onZoom,Qt=tn===void 0?function(){}:tn,Vt=B.useState({data:Ve,name:typeof Ve=="string"?Ve:"",shouldLoad:!1}),qt=Vt[0],Wt=Vt[1],sn=function(In,Ln){Wt({data:Ln,name:In,shouldLoad:!0})},ln=B.useState(!1),Xt=ln[0],Nt=ln[1],hn=Ne(qt);B.useEffect(function(){var In,Ln,Wn,xn;In=hn.data,xn=typeof(Ln=Ve),(Wn=typeof In)=="string"&&xn==="string"&&In===Ln||Wn==="object"&&xn==="object"&&In.length===Ln.length&&In.every(function(sr,gr){return sr===Ln[gr]})||Wt({data:Ve,name:typeof Ve=="string"?Ve:"",shouldLoad:Xt})},[Ve,Xt]);var mn=ee({onVisibilityChanged:function(In){Nt(In.isVisible),In.isVisible&&Wt(function(Ln){return Object.assign({},Ln,{shouldLoad:!0})})}}),Rn=typeof Sn=="string"?{direction:A.TextDirection.LeftToRight,theme:Sn}:Sn,Mn=B.useState(bt||Te),qn=Mn[0],Zn=Mn[1],fn={l10n:qn,setL10n:Zn},Xn=Object.assign({},{direction:Rn.direction},bo(Rn.theme||"light",ar));return B.useEffect(function(){bt&&Zn(bt)},[bt]),B.createElement(He.Provider,{value:fn},B.createElement(ce.Provider,{value:Xn},B.createElement("div",{ref:mn,className:"rpv-core__viewer rpv-core__viewer--".concat(Xn.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},qt.shouldLoad&&B.createElement(vo,{characterMap:pe,file:qt.data,httpHeaders:Ze,render:function(In){return B.createElement(mo,{defaultScale:Re,doc:In,render:function(Ln,Wn){return B.createElement(po,{currentFile:{data:qt.data,name:qt.name},defaultScale:Re,doc:In,enableSmoothScroll:Be,initialPage:tt,initialRotation:_t,initialScale:Wn,pageLayout:et,pageSizes:Ln,plugins:kt,renderPage:Kt,scrollMode:Ht,setRenderRange:en,viewMode:Pn,viewerState:{file:qt,fullScreenMode:A.FullScreenMode.Normal,pageIndex:-1,pageHeight:Ln[0].pageHeight,pageWidth:Ln[0].pageWidth,pagesRotation:new Map,rotation:_t,scale:Wn,scrollMode:Ht,viewMode:Pn},onDocumentLoad:Bn,onOpenFile:sn,onPageChange:Nn,onRotate:ir,onRotatePage:Gn,onZoom:Qt})},scrollMode:Ht,viewMode:Pn})},renderError:Ct,renderLoader:pn,renderProtectedView:Jt,transformGetDocumentParams:yn,withCredentials:Fn,onDocumentAskPassword:Hn}))))},A.Worker=function(U){var pe=U.children,Re=U.workerUrl;return Y.GlobalWorkerOptions.workerSrc=Re,B.createElement(B.Fragment,null,pe)},A.chunk=We,A.classNames=Q,A.createStore=function(U){var pe=U||{},Re={},Fe=function(Ve,rt){var Ze;pe=W(W({},pe),((Ze={})[Ve]=rt,Ze)),(Re[Ve]||[]).forEach(function(Le){return Le(pe[Ve])})},Be=function(Ve){return pe[Ve]};return{subscribe:function(Ve,rt){Re[Ve]=(Re[Ve]||[]).concat(rt)},unsubscribe:function(Ve,rt){Re[Ve]=(Re[Ve]||[]).filter(function(Ze){return Ze!==rt})},update:function(Ve,rt){Fe(Ve,rt)},updateCurrentValue:function(Ve,rt){var Ze=Be(Ve);Ze!==void 0&&Fe(Ve,rt(Ze))},get:function(Ve){return Be(Ve)}}},A.getDestination=zt,A.getPage=Rt,A.isFullScreenEnabled=J,A.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},A.useDebounceCallback=De,A.useIntersectionObserver=ee,A.useIsMounted=Me,A.useIsomorphicLayoutEffect=ie,A.usePrevious=Ne,A.useRenderQueue=Se})(core_min);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$g.exports=core_min;var libExports$h=lib$g.exports,lib$f={exports:{}},attachment_min={},e$e=libExports$h;function t$e(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(H){if(H!=="default"){var O=Object.getOwnPropertyDescriptor(A,H);Object.defineProperty($,H,O.get?O:{enumerable:!0,get:function(){return A[H]}})}}),$.default=A,Object.freeze($)}var n$e=t$e(reactExports),a$e=function(A){var $=A.files,H=n$e.useRef(),O=n$e.useContext(e$e.LocalizationContext).l10n,R=n$e.useContext(e$e.ThemeContext).direction===e$e.TextDirection.RightToLeft,B=n$e.useRef([]),Y=O&&O.attachment?O.attachment.clickToDownload:"Click to download",he=function(ue){var le=H.current,W=[].slice.call(le.getElementsByClassName("rpv-attachment__item"));if(W.length!==0){W.forEach(function(Q){return Q.setAttribute("tabindex","-1")});var be=document.activeElement,ce=W[Math.min(W.length-1,Math.max(0,ue(W,be)))];ce.setAttribute("tabindex","0"),ce.focus()}};return e$e.useIsomorphicLayoutEffect(function(){var ue=H.current;if(ue){var le=[].slice.call(ue.getElementsByClassName("rpv-attachment__item"));if(B.current=le,le.length>0){var W=le[0];W.focus(),W.setAttribute("tabindex","0")}}},[]),n$e.createElement("div",{"data-testid":"attachment__list",className:e$e.classNames({"rpv-attachment__list":!0,"rpv-attachment__list--rtl":R}),ref:H,tabIndex:-1,onKeyDown:function(ue){switch(ue.key){case"ArrowDown":ue.preventDefault(),he(function(le,W){return le.indexOf(W)+1});break;case"ArrowUp":ue.preventDefault(),he(function(le,W){return le.indexOf(W)-1});break;case"End":ue.preventDefault(),he(function(le,W){return le.length-1});break;case"Home":ue.preventDefault(),he(function(le,W){return 0})}}},$.map(function(ue){return n$e.createElement("button",{className:"rpv-attachment__item",key:ue.fileName,tabIndex:-1,title:Y,type:"button",onClick:function(){return le=ue.fileName,W=ue.data,be=typeof W=="string"?"":URL.createObjectURL(new Blob([W],{type:""})),(ce=document.createElement("a")).style.display="none",ce.href=be||le,ce.setAttribute("download",function(Q){var ie=Q.split("/").pop();return ie?ie.split("#")[0].split("?")[0]:Q}(le)),document.body.appendChild(ce),ce.click(),document.body.removeChild(ce),void(be&&URL.revokeObjectURL(be));var le,W,be,ce}},ue.fileName)}))},r$e=function(A){var $=A.doc,H=n$e.useContext(e$e.LocalizationContext).l10n,O=n$e.useContext(e$e.ThemeContext).direction===e$e.TextDirection.RightToLeft,R=H&&H.attachment?H.attachment.noAttachment:"There is no attachment",B=n$e.useState({files:[],isLoaded:!1}),Y=B[0],he=B[1];return n$e.useEffect(function(){$.getAttachments().then(function(ue){var le=ue?Object.keys(ue).map(function(W){return{data:ue[W].content,fileName:ue[W].filename}}):[];he({files:le,isLoaded:!0})})},[$]),Y.isLoaded?Y.files.length===0?n$e.createElement("div",{"data-testid":"attachment__empty",className:e$e.classNames({"rpv-attachment__empty":!0,"rpv-attachment__empty--rtl":O})},R):n$e.createElement(a$e,{files:Y.files}):n$e.createElement(e$e.Spinner,null)},c$e=function(A){var $=A.store,H=n$e.useState($.get("doc")),O=H[0],R=H[1],B=function(Y){R(Y)};return n$e.useEffect(function(){return $.subscribe("doc",B),function(){$.unsubscribe("doc",B)}},[]),O?n$e.createElement(r$e,{doc:O}):n$e.createElement("div",{className:"rpv-attachment__loader"},n$e.createElement(e$e.Spinner,null))};attachment_min.attachmentPlugin=function(){var A=n$e.useMemo(function(){return e$e.createStore({})},[]);return{onDocumentLoad:function($){A.update("doc",$.doc)},Attachments:function(){return n$e.createElement(c$e,{store:A})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$f.exports=attachment_min;var libExports$g=lib$f.exports,lib$e={exports:{}},bookmark_min={},e$d=libExports$h;function t$d(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(H){if(H!=="default"){var O=Object.getOwnPropertyDescriptor(A,H);Object.defineProperty($,H,O.get?O:{enumerable:!0,get:function(){return A[H]}})}}),$.default=A,Object.freeze($)}var r$d,o$d=t$d(reactExports),n$d=function(){return n$d=Object.assign||function(A){for(var $,H=1,O=arguments.length;H<O;H++)for(var R in $=arguments[H])Object.prototype.hasOwnProperty.call($,R)&&(A[R]=$[R]);return A},n$d.apply(this,arguments)},a$d=function(){return o$d.createElement(e$d.Icon,{size:16},o$d.createElement("path",{d:"M6.427,8.245A.5.5,0,0,1,6.862,7.5H17.138a.5.5,0,0,1,.435.749l-5.139,9a.5.5,0,0,1-.868,0Z"}))},i$d=function(){return o$d.createElement(e$d.Icon,{size:16},o$d.createElement("path",{d:"M9.248,17.572a.5.5,0,0,1-.748-.434V6.862a.5.5,0,0,1,.748-.434l8.992,5.138a.5.5,0,0,1,0,.868Z"}))},c$d=function(A){var $=A.bookmark,H=A.depth,O=A.doc,R=A.index,B=A.isBookmarkExpanded,Y=A.numberOfSiblings,he=A.pathFromRoot,ue=A.renderBookmarkItem,le=A.store,W=he?"".concat(he,".").concat(R):"".concat(R),be=o$d.useMemo(function(){return function(oe){var Ee=oe.count,J=oe.items;if(Ee>=0)return!1;var ve=J.length;if(ve===0)return!1;for(var Ce=J.concat([]);Ce.length>0;){var De=Ce.shift(),Me=De.items;De.count&&Me&&De.count>0&&Me.length>0&&(ve+=Me.length,Ce=Ce.concat(Me))}return Math.abs(Ee)===ve}($)},[$]),ce=le.get("bookmarkExpandedMap"),Q=B?B({bookmark:$,doc:O,depth:H,index:R}):ce.has(W)?ce.get(W):!be,ie=o$d.useState(Q),ee=ie[0],q=ie[1],K=$.items&&$.items.length>0,ne=function(){var oe=!ee;le.updateCurrentValue("bookmarkExpandedMap",function(Ee){return Ee.set(W,oe)}),q(oe)},fe=function(){var oe=$.dest,Ee=le.get("jumpToDestination");e$d.getDestination(O,oe).then(function(J){Ee&&Ee(n$d({label:$.title},J))})},de=function(){K&&$.dest&&fe()},te=function(){!K&&$.dest&&fe()},se=function(oe,Ee){return o$d.createElement("div",{className:"rpv-bookmark__item",style:{paddingLeft:"".concat(1.25*H,"rem")},onClick:oe},Ee)},re=function(oe,Ee){return K?o$d.createElement("span",{className:"rpv-bookmark__toggle","data-testid":"bookmark__toggle-".concat(H,"-").concat(R),onClick:ne},ee?oe:Ee):o$d.createElement("span",{className:"rpv-bookmark__toggle"})},ae=function(oe){return $.url?o$d.createElement("a",{className:"rpv-bookmark__title",href:$.url,rel:"noopener noreferrer nofollow",target:$.newWindow?"_blank":""},$.title):o$d.createElement("div",{className:"rpv-bookmark__title","aria-label":$.title,onClick:oe},$.title)};return o$d.createElement("li",{"aria-expanded":ee?"true":"false","aria-label":$.title,"aria-level":H+1,"aria-posinset":R+1,"aria-setsize":Y,role:"treeitem",tabIndex:-1},ue?ue({bookmark:$,depth:H,hasSubItems:K,index:R,isExpanded:ee,path:W,defaultRenderItem:se,defaultRenderTitle:ae,defaultRenderToggle:re,onClickItem:te,onClickTitle:de,onToggleSubItems:ne}):se(te,o$d.createElement(o$d.Fragment,null,re(o$d.createElement(a$d,null),o$d.createElement(i$d,null)),ae(de))),K&&ee&&o$d.createElement(m$9,{bookmarks:$.items,depth:H+1,doc:O,isBookmarkExpanded:B,isRoot:!1,pathFromRoot:W,renderBookmarkItem:ue,store:le}))},m$9=function(A){var $=A.bookmarks,H=A.depth,O=H===void 0?0:H,R=A.doc,B=A.isBookmarkExpanded,Y=A.isRoot,he=A.pathFromRoot,ue=A.renderBookmarkItem,le=A.store;return o$d.createElement("ul",{className:"rpv-bookmark__list",role:Y?"tree":"group",tabIndex:-1},$.map(function(W,be){return o$d.createElement(c$d,{bookmark:W,depth:O,doc:R,index:be,isBookmarkExpanded:B,key:be,numberOfSiblings:$.length,pathFromRoot:he,renderBookmarkItem:ue,store:le})}))};(function(A){A[A.Collapse=0]="Collapse",A[A.Expand=1]="Expand"})(r$d||(r$d={}));var l$d=function(A){var $=A.bookmarks,H=A.doc,O=A.isBookmarkExpanded,R=A.renderBookmarkItem,B=A.store,Y=o$d.useRef(),he=function(be){var ce=Y.current;if(ce&&be.target instanceof HTMLElement&&ce.contains(be.target))switch(be.key){case"ArrowDown":be.preventDefault(),le(function(Q,ie){return Q.indexOf(ie)+1});break;case"ArrowLeft":be.preventDefault(),W(r$d.Collapse);break;case"ArrowRight":be.preventDefault(),W(r$d.Expand);break;case"ArrowUp":be.preventDefault,le(function(Q,ie){return Q.indexOf(ie)-1});break;case"End":be.preventDefault(),le(function(Q,ie){return Q.length-1});break;case" ":case"Enter":case"Space":be.preventDefault(),ue();break;case"Home":be.preventDefault(),le(function(Q,ie){return 0})}},ue=function(){var be=document.activeElement.closest(".rpv-bookmark__item").querySelector(".rpv-bookmark__title");be&&be.click()},le=function(be){var ce=Y.current,Q=[].slice.call(ce.getElementsByClassName("rpv-bookmark__item"));if(Q.length!==0){var ie=document.activeElement,ee=Q[Math.min(Q.length-1,Math.max(0,be(Q,ie)))];ie.setAttribute("tabindex","-1"),ee.setAttribute("tabindex","0"),ee.focus()}},W=function(be){var ce=Y.current;if([].slice.call(ce.getElementsByClassName("rpv-bookmark__item")).length!==0){var Q=document.activeElement.closest(".rpv-bookmark__item"),ie=be===r$d.Collapse?"true":"false";if(Q&&Q.parentElement.getAttribute("aria-expanded")===ie){var ee=Q.querySelector(".rpv-bookmark__toggle");ee&&ee.click()}}};return o$d.useEffect(function(){return document.addEventListener("keydown",he),function(){document.removeEventListener("keydown",he)}},[]),o$d.useEffect(function(){var be=Y.current;if(be){var ce=[].slice.call(be.getElementsByClassName("rpv-bookmark__item"));ce.length>0&&(ce[0].focus(),ce[0].setAttribute("tabindex","0"))}},[]),o$d.createElement("div",{ref:Y},o$d.createElement(m$9,{bookmarks:$,depth:0,doc:H,isBookmarkExpanded:O,isRoot:!0,pathFromRoot:"",renderBookmarkItem:R,store:B}))},s$9=function(A){var $=A.doc,H=A.isBookmarkExpanded,O=A.renderBookmarkItem,R=A.store,B=o$d.useContext(e$d.LocalizationContext).l10n,Y=o$d.useContext(e$d.ThemeContext).direction===e$d.TextDirection.RightToLeft,he=o$d.useState({isLoaded:!1,items:[]}),ue=he[0],le=he[1];return o$d.useEffect(function(){le({isLoaded:!1,items:[]}),$.getOutline().then(function(W){le({isLoaded:!0,items:W||[]})})},[$]),ue.isLoaded?ue.items.length===0?o$d.createElement("div",{"data-testid":"bookmark__empty",className:e$d.classNames({"rpv-bookmark__empty":!0,"rpv-bookmark__empty--rtl":Y})},B&&B.bookmark?B.bookmark.noBookmark:"There is no bookmark"):o$d.createElement("div",{"data-testid":"bookmark__container",className:e$d.classNames({"rpv-bookmark__container":!0,"rpv-bookmark__container--rtl":Y})},o$d.createElement(l$d,{bookmarks:ue.items,doc:$,isBookmarkExpanded:H,renderBookmarkItem:O,store:R})):o$d.createElement("div",{className:"rpv-bookmark__loader"},o$d.createElement(e$d.Spinner,null))},u$d=function(A){var $=A.isBookmarkExpanded,H=A.renderBookmarkItem,O=A.store,R=o$d.useState(O.get("doc")),B=R[0],Y=R[1],he=function(ue){Y(ue)};return o$d.useEffect(function(){return O.subscribe("doc",he),function(){O.unsubscribe("doc",he)}},[]),B?o$d.createElement(s$9,{doc:B,isBookmarkExpanded:$,renderBookmarkItem:H,store:O}):o$d.createElement("div",{className:"rpv-bookmark__loader"},o$d.createElement(e$d.Spinner,null))};bookmark_min.DownArrowIcon=a$d,bookmark_min.RightArrowIcon=i$d,bookmark_min.bookmarkPlugin=function(){var A=o$d.useMemo(function(){return e$d.createStore({bookmarkExpandedMap:new Map})},[]);return{install:function($){A.update("jumpToDestination",$.jumpToDestination)},onDocumentLoad:function($){A.update("doc",$.doc)},Bookmarks:function($){return o$d.createElement(u$d,{isBookmarkExpanded:$==null?void 0:$.isBookmarkExpanded,renderBookmarkItem:$==null?void 0:$.renderBookmarkItem,store:A})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$e.exports=bookmark_min;var libExports$f=lib$e.exports,lib$d={exports:{}},thumbnail_min={};(function(A){var $=libExports$h;function H(ee){var q=Object.create(null);return ee&&Object.keys(ee).forEach(function(K){if(K!=="default"){var ne=Object.getOwnPropertyDescriptor(ee,K);Object.defineProperty(q,K,ne.get?ne:{enumerable:!0,get:function(){return ee[K]}})}}),q.default=ee,Object.freeze(q)}var O,R=H(reactExports);A.ThumbnailDirection=void 0,(O=A.ThumbnailDirection||(A.ThumbnailDirection={})).Horizontal="Horizontal",O.Vertical="Vertical";var B=function(){return B=Object.assign||function(ee){for(var q,K=1,ne=arguments.length;K<ne;K++)for(var fe in q=arguments[K])Object.prototype.hasOwnProperty.call(q,fe)&&(ee[fe]=q[fe]);return ee},B.apply(this,arguments)},Y=function(ee){var q=ee.doc,K=ee.getPageIndex,ne=ee.renderSpinner,fe=ee.store,de=ee.width,te=q.numPages,se=K?K({numPages:te}):0,re=Math.max(0,Math.min(se,te-1)),ae=fe.get("pagesRotation")||new Map,oe=ae.has(re)?ae.get(re):0,Ee=R.useState(""),J=Ee[0],ve=Ee[1],Ce=$.useIsMounted(),De=R.useRef(),Me=R.useState(fe.get("rotation")||0),Ne=Me[0],Ie=Me[1],qe=R.useState(oe),Se=qe[0],Te=qe[1],He=R.useState(!1),_e=He[0],G=He[1],X=function(Ae){var ke=Ae.has(re)?Ae.get(re):0;Te(ke)},ge=function(Ae){Ie(Ae)},Pe=$.useIntersectionObserver({onVisibilityChanged:function(Ae){G(Ae.isVisible)}});return R.useEffect(function(){if(_e){var Ae=Pe.current;Ae&&(ve(""),$.getPage(q,re).then(function(ke){var Oe=ke.getViewport({scale:1}),Qe=(Oe.rotation+Ne+Se)%360,ot=Math.abs(Ne+Se)%180==0,st=ot?Oe.width:Oe.height,ut=ot?Oe.height:Oe.width,dt=document.createElement("canvas"),mt=dt.getContext("2d",{alpha:!1}),Ge=Ae.clientWidth,Xe=Ae.clientHeight,me=de?de/st:Math.min(Ge/st,Xe/ut),ye=me*st,je=me*ut;dt.height=je,dt.width=ye,dt.style.opacity="0";var Ke=ke.getViewport({rotation:Qe,scale:me});De.current=ke.render({canvasContext:mt,viewport:Ke}),De.current.promise.then(function(){Ce.current&&ve(dt.toDataURL()),dt.width=0,dt.height=0},function(){})}))}},[Se,_e]),R.useEffect(function(){return fe.subscribe("pagesRotation",X),fe.subscribe("rotation",ge),function(){fe.unsubscribe("pagesRotation",X),fe.unsubscribe("rotation",ge)}},[]),R.useEffect(function(){return function(){var Ae;(Ae=De.current)===null||Ae===void 0||Ae.cancel()}},[]),R.createElement("div",{ref:Pe,className:"rpv-thumbnail__cover-inner","data-testid":"thumbnail__cover-inner"},J?R.createElement("img",{className:"rpv-thumbnail__cover-image","data-testid":"thumbnail__cover-image",src:J}):R.createElement("div",{className:"rpv-thumbnail__cover-loader","data-testid":"thumbnail__cover-loader"},ne?ne():R.createElement($.Spinner,null)))},he=function(ee){var q=ee.getPageIndex,K=ee.renderSpinner,ne=ee.store,fe=ee.width,de=R.useState(ne.get("doc")),te=de[0],se=de[1],re=function(ae){se(ae)};return R.useEffect(function(){return ne.subscribe("doc",re),function(){ne.unsubscribe("doc",re)}},[]),R.createElement("div",{className:"rpv-thumbnail__cover"},te?R.createElement(Y,{doc:te,getPageIndex:q,renderSpinner:K,store:ne,width:fe}):R.createElement("div",{className:"rpv-thumbnail__cover-loader"},K?K():R.createElement($.Spinner,null)))},ue=function(){return R.createElement($.Spinner,null)},le=R.createContext({renderSpinner:ue}),W=function(ee){var q=ee.children,K=ee.doc,ne=$.useIsMounted(),fe=R.useState({loading:!0,labels:[]}),de=fe[0],te=fe[1];return R.useEffect(function(){K.getPageLabels().then(function(se){ne.current&&te({loading:!1,labels:se||[]})})},[K.loadingTask.docId]),de.loading?R.createElement(R.Fragment,null):q(de.labels)},be=function(ee){var q=ee.page,K=ee.pageHeight,ne=ee.pageIndex,fe=ee.pageWidth,de=ee.rotation,te=ee.thumbnailHeight,se=ee.thumbnailWidth,re=ee.onRenderCompleted,ae=R.useContext($.LocalizationContext).l10n,oe=R.useRef(),Ee=R.useState(""),J=Ee[0],ve=Ee[1],Ce=ae&&ae.thumbnail?ae.thumbnail.thumbnailLabel:"Thumbnail of page {{pageIndex}}";return R.useEffect(function(){var De=oe.current;De&&De.cancel();var Me=document.createElement("canvas"),Ne=Me.getContext("2d",{alpha:!1}),Ie=se,qe=Ie/(fe/K),Se=Ie/fe;Me.height=qe,Me.width=Ie,Me.style.height="".concat(qe,"px"),Me.style.width="".concat(Ie,"px");var Te=q.getViewport({rotation:de,scale:Se});return oe.current=q.render({canvasContext:Ne,viewport:Te}),oe.current.promise.then(function(){ve(Me.toDataURL()),re(ne)},function(){re(ne)}),function(){var He;(He=oe.current)===null||He===void 0||He.cancel()}},[de]),J?R.createElement("img",{"aria-label":Ce.replace("{{pageIndex}}","".concat(ne+1)),src:J,height:"".concat(te,"px"),width:"".concat(se,"px")}):R.useContext(le).renderSpinner()},ce=function(ee){var q=ee.doc,K=ee.pageHeight,ne=ee.pageIndex,fe=ee.pageRotation,de=ee.pageWidth,te=ee.rotation,se=ee.shouldRender,re=ee.thumbnailWidth,ae=ee.onRenderCompleted,oe=ee.onVisibilityChanged,Ee=$.useIsMounted(),J=R.useState({height:K,page:null,viewportRotation:0,width:de}),ve=J[0],Ce=J[1],De=ve.page,Me=ve.height,Ne=ve.width,Ie=Ne/Me,qe=Math.abs(te+fe)%180==0,Se=qe?re:re/Ie,Te=qe?re/Ie:re;R.useEffect(function(){se&&$.getPage(q,ne).then(function(G){var X=G.getViewport({scale:1});Ee.current&&Ce({height:X.height,page:G,viewportRotation:X.rotation,width:X.width})})},[se]);var He=(ve.viewportRotation+te+fe)%360,_e=$.useIntersectionObserver({onVisibilityChanged:function(G){oe(ne,G)}});return R.createElement("div",{className:"rpv-thumbnail__container","data-testid":"thumbnail__container-".concat(ne),ref:_e,style:{height:"".concat(Te,"px"),width:"".concat(Se,"px")}},De?R.createElement(be,{page:De,pageHeight:qe?Me:Ne,pageIndex:ne,pageWidth:qe?Ne:Me,rotation:He,thumbnailHeight:Te,thumbnailWidth:Se,onRenderCompleted:ae}):R.useContext(le).renderSpinner())},Q=function(ee){var q=ee.currentPage,K=ee.doc,ne=ee.labels,fe=ee.pagesRotation,de=ee.pageHeight,te=ee.pageWidth,se=ee.renderCurrentPageLabel,re=ee.renderThumbnailItem,ae=ee.rotatedPage,oe=ee.rotation,Ee=ee.thumbnailDirection,J=ee.thumbnailWidth,ve=ee.viewMode,Ce=ee.onJumpToPage,De=ee.onRotatePage,Me=K.numPages,Ne=K.loadingTask.docId,Ie=R.useRef(null),qe=R.useRef([]),Se=R.useState(q),Te=Se[0],He=Se[1],_e=R.useContext($.ThemeContext).direction===$.TextDirection.RightToLeft,G=R.useState(-1),X=G[0],ge=G[1],Pe=$.useIsMounted(),Ae=$.usePrevious(ve),ke=R.useRef(!1),Oe=$.useRenderQueue({doc:K}),Qe=R.useMemo(function(){return Array(Me).fill(0).map(function(me,ye){return ye})},[Ne]),ot=R.useMemo(function(){switch(ve){case $.ViewMode.DualPage:return $.chunk(Qe,2);case $.ViewMode.DualPageWithCover:return[[Qe[0]]].concat($.chunk(Qe.slice(1),2));case $.ViewMode.SinglePage:default:return $.chunk(Qe,1)}},[Ne,ve]),st=function(){if(Ie.current){var me=qe.current,ye=Te+1;ye<me.length&&(Te>=0&&me[Te].setAttribute("tabindex","-1"),He(ye))}},ut=function(){if(Ie.current){var me=qe.current,ye=Te-1;ye>=0&&(Te>=0&&me[Te].setAttribute("tabindex","-1"),He(ye))}},dt=function(){Te>=0&&Te<Me&&Ce(Te)};$.useIsomorphicLayoutEffect(function(){var me=Ie.current;me&&(qe.current=Array.from(me.querySelectorAll(".rpv-thumbnail__item")))},[ve]),R.useEffect(function(){var me=qe.current;if(!(me.length===0||Te<0||Te>me.length)){var ye=me[Te];ye.setAttribute("tabindex","0"),ye.focus()}},[Te]),$.useIsomorphicLayoutEffect(function(){var me=Ie.current,ye=qe.current;if(!(!me||ye.length===0||q<0||q>ye.length)){var je=ye[q].closest(".rpv-thumbnail__items");je&&(Ee===A.ThumbnailDirection.Vertical?function(Ke,nt){var pt=Ke.getBoundingClientRect().top-nt.getBoundingClientRect().top,ht=Ke.clientHeight,We=nt.clientHeight;pt<0?nt.scrollTop+=pt:pt+ht<=We||(nt.scrollTop+=pt+ht-We)}(je,me):function(Ke,nt){var pt=Ke.getBoundingClientRect().left-nt.getBoundingClientRect().left,ht=Ke.clientWidth,We=nt.clientWidth;pt<0?nt.scrollLeft+=pt:pt+ht<=We||(nt.scrollLeft+=pt+ht-We)}(je,me))}},[q,Ee]);var mt=R.useCallback(function(me){Pe.current&&(Oe.markRendered(me),ke.current=!1,Xe())},[Ne]),Ge=R.useCallback(function(me,ye){ye.isVisible?Oe.setVisibility(me,ye.ratio):Oe.setOutOfRange(me),Xe()},[Ne]),Xe=R.useCallback(function(){if(!ke.current){var me=Oe.getHighestPriorityPage();me>-1&&(Oe.markRendering(me),ke.current=!0,ge(me))}},[Ne]);return R.useEffect(function(){ae>=0&&(Oe.markRendering(ae),ke.current=!0,ge(ae))},[Ne,ae]),$.useIsomorphicLayoutEffect(function(){Ae!==ve&&(Oe.markNotRendered(),Xe())},[ve]),R.createElement("div",{ref:Ie,"data-testid":"thumbnail__list",className:$.classNames({"rpv-thumbnail__list":!0,"rpv-thumbnail__list--horizontal":Ee===A.ThumbnailDirection.Horizontal,"rpv-thumbnail__list--rtl":_e,"rpv-thumbnail__list--vertical":Ee===A.ThumbnailDirection.Vertical}),onKeyDown:function(me){switch(me.key){case"ArrowDown":st();break;case"ArrowUp":ut();break;case"Enter":dt()}}},ot.map(function(me,ye){var je=!1;switch(ve){case $.ViewMode.DualPage:je=q===2*ye||q===2*ye+1;break;case $.ViewMode.DualPageWithCover:je=q===0&&ye===0||ye>0&&q===2*ye-1||ye>0&&q===2*ye;break;case $.ViewMode.SinglePage:default:je=q===ye}return R.createElement("div",{className:$.classNames({"rpv-thumbnail__items":!0,"rpv-thumbnail__items--dual":ve===$.ViewMode.DualPage,"rpv-thumbnail__items--dual-cover":ve===$.ViewMode.DualPageWithCover,"rpv-thumbnail__items--single":ve===$.ViewMode.SinglePage,"rpv-thumbnail__items--selected":je}),key:"".concat(ye,"___").concat(ve)},me.map(function(Ke){return function(nt){var pt=ve===$.ViewMode.DualPageWithCover&&(nt===0||Me%2==0&&nt===Me-1),ht="".concat(K.loadingTask.docId,"___").concat(nt),We=ne.length===Me?ne[nt]:"".concat(nt+1),wt=se?se({currentPage:q,pageIndex:nt,numPages:Me,pageLabel:We}):We,St=fe.has(nt)?fe.get(nt):0,Yt=R.createElement(ce,{doc:K,pageHeight:de,pageIndex:nt,pageRotation:St,pageWidth:te,rotation:oe,shouldRender:X===nt,thumbnailWidth:J,onRenderCompleted:mt,onVisibilityChanged:Ge});return re?re({currentPage:q,key:ht,numPages:Me,pageIndex:nt,renderPageLabel:R.createElement(R.Fragment,null,wt),renderPageThumbnail:Yt,onJumpToPage:function(){return Ce(nt)},onRotatePage:function(Ut){return De(nt,Ut)}}):R.createElement("div",{key:ht},R.createElement("div",{className:$.classNames({"rpv-thumbnail__item":!0,"rpv-thumbnail__item--dual-even":ve===$.ViewMode.DualPage&&nt%2==0,"rpv-thumbnail__item--dual-odd":ve===$.ViewMode.DualPage&&nt%2==1,"rpv-thumbnail__item--dual-cover":pt,"rpv-thumbnail__item--dual-cover-even":ve===$.ViewMode.DualPageWithCover&&!pt&&nt%2==0,"rpv-thumbnail__item--dual-cover-odd":ve===$.ViewMode.DualPageWithCover&&!pt&&nt%2==1,"rpv-thumbnail__item--single":ve===$.ViewMode.SinglePage,"rpv-thumbnail__item--selected":q===nt}),role:"button",tabIndex:q===nt?0:-1,onClick:function(){return Ce(nt)}},Yt),R.createElement("div",{"data-testid":"thumbnail__label-".concat(nt),className:"rpv-thumbnail__label"},wt))}(Ke)}))}))},ie=function(ee){var q=ee.renderCurrentPageLabel,K=ee.renderThumbnailItem,ne=ee.store,fe=ee.thumbnailDirection,de=ee.thumbnailWidth,te=R.useState(ne.get("doc")),se=te[0],re=te[1],ae=R.useState(ne.get("currentPage")||0),oe=ae[0],Ee=ae[1],J=R.useState(ne.get("pageHeight")||0),ve=J[0],Ce=J[1],De=R.useState(ne.get("pageWidth")||0),Me=De[0],Ne=De[1],Ie=R.useState(ne.get("rotation")||0),qe=Ie[0],Se=Ie[1],Te=R.useState(ne.get("pagesRotation")||new Map),He=Te[0],_e=Te[1],G=R.useState(ne.get("rotatedPage")||-1),X=G[0],ge=G[1],Pe=R.useState(ne.get("viewMode")),Ae=Pe[0],ke=Pe[1],Oe=function(ye){Ee(ye)},Qe=function(ye){re(ye)},ot=function(ye){Ce(ye)},st=function(ye){Ne(ye)},ut=function(ye){Se(ye)},dt=function(ye){_e(ye)},mt=function(ye){ge(ye)},Ge=function(ye){ke(ye)},Xe=function(ye){var je=ne.get("jumpToPage");je&&je(ye)},me=function(ye,je){ne.get("rotatePage")(ye,je)};return R.useEffect(function(){return ne.subscribe("doc",Qe),ne.subscribe("pageHeight",ot),ne.subscribe("pageWidth",st),ne.subscribe("rotatedPage",mt),ne.subscribe("rotation",ut),ne.subscribe("pagesRotation",dt),ne.subscribe("viewMode",Ge),function(){ne.unsubscribe("doc",Qe),ne.unsubscribe("pageHeight",ot),ne.unsubscribe("pageWidth",st),ne.unsubscribe("rotatedPage",mt),ne.unsubscribe("rotation",ut),ne.unsubscribe("pagesRotation",dt),ne.unsubscribe("viewMode",Ge)}},[]),$.useIsomorphicLayoutEffect(function(){return ne.subscribe("currentPage",Oe),function(){ne.unsubscribe("currentPage",Oe)}},[]),se?R.createElement($.LazyRender,{testId:"thumbnail__list-container",attrs:{className:"rpv-thumbnail__list-container"}},R.createElement(W,{doc:se},function(ye){return R.createElement(Q,{currentPage:oe,doc:se,labels:ye,pagesRotation:He,pageHeight:ve,pageWidth:Me,renderCurrentPageLabel:q,renderThumbnailItem:K,rotatedPage:X,rotation:qe,thumbnailDirection:fe,thumbnailWidth:de,viewMode:Ae,onJumpToPage:Xe,onRotatePage:me})})):R.createElement("div",{"data-testid":"thumbnail-list__loader",className:"rpv-thumbnail__loader"},R.useContext(le).renderSpinner())};A.thumbnailPlugin=function(ee){var q=R.useMemo(function(){return $.createStore({rotatePage:function(){},viewMode:$.ViewMode.SinglePage})},[]),K=R.useState(""),ne=K[0],fe=K[1];return{install:function(de){q.update("jumpToPage",de.jumpToPage),q.update("rotatePage",de.rotatePage)},onDocumentLoad:function(de){fe(de.doc.loadingTask.docId),q.update("doc",de.doc)},onViewerStateChange:function(de){return q.update("currentPage",de.pageIndex),q.update("pagesRotation",de.pagesRotation),q.update("pageHeight",de.pageHeight),q.update("pageWidth",de.pageWidth),q.update("rotation",de.rotation),q.update("rotatedPage",de.rotatedPage),q.update("viewMode",de.viewMode),de},Cover:function(de){return R.createElement(he,B({},de,{renderSpinner:ee==null?void 0:ee.renderSpinner,store:q}))},Thumbnails:R.useCallback(function(de){return R.createElement(le.Provider,{value:{renderSpinner:(ee==null?void 0:ee.renderSpinner)||ue}},R.createElement(ie,{renderCurrentPageLabel:ee==null?void 0:ee.renderCurrentPageLabel,renderThumbnailItem:de==null?void 0:de.renderThumbnailItem,store:q,thumbnailDirection:(de==null?void 0:de.thumbnailDirection)||A.ThumbnailDirection.Vertical,thumbnailWidth:(ee==null?void 0:ee.thumbnailWidth)||100}))},[ne])}}})(thumbnail_min);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$d.exports=thumbnail_min;var libExports$e=lib$d.exports,lib$c={exports:{}},toolbar_min={},lib$b={exports:{}},selectionMode_min={};(function(A){var $=libExports$h;function H(ie){var ee=Object.create(null);return ie&&Object.keys(ie).forEach(function(q){if(q!=="default"){var K=Object.getOwnPropertyDescriptor(ie,q);Object.defineProperty(ee,q,K.get?K:{enumerable:!0,get:function(){return ie[q]}})}}),ee.default=ie,Object.freeze(ee)}var O,R=H(reactExports),B=function(){return R.createElement($.Icon,{size:16},R.createElement("path",{d:`M11.5,5.5v-2C11.5,2.672,12.172,2,13,2s1.5,0.672,1.5,1.5v2 M14.5,11.5v-6C14.5,4.672,15.172,4,16,4
            c0.828,0,1.5,0.672,1.5,1.5v3 M17.5,13V8.5C17.5,7.672,18.172,7,19,7s1.5,0.672,1.5,1.5v10c0,2.761-2.239,5-5,5h-3.335
            c-1.712-0.001-3.305-0.876-4.223-2.321C6.22,18.467,4.083,14,4.083,14c-0.378-0.545-0.242-1.292,0.303-1.67
            c0.446-0.309,1.044-0.281,1.458,0.07L8.5,15.5v-10C8.5,4.672,9.172,4,10,4s1.5,0.672,1.5,1.5v6`}))},Y=function(){return Y=Object.assign||function(ie){for(var ee,q=1,K=arguments.length;q<K;q++)for(var ne in ee=arguments[q])Object.prototype.hasOwnProperty.call(ee,ne)&&(ie[ne]=ee[ne]);return ie},Y.apply(this,arguments)};A.SelectionMode=void 0,(O=A.SelectionMode||(A.SelectionMode={})).Hand="Hand",O.Text="Text";var he=function(){return R.createElement($.Icon,{size:16},R.createElement("path",{d:`M13.675,11.671l2.941-2.941c0.195-0.196,0.195-0.512-0.001-0.707C16.563,7.971,16.5,7.931,16.43,7.906
            L4.168,3.527C3.908,3.434,3.622,3.57,3.529,3.83c-0.039,0.109-0.039,0.228,0,0.336l4.379,12.262
            c0.093,0.26,0.379,0.396,0.639,0.303c0.07-0.025,0.133-0.065,0.185-0.117l2.943-2.943l6.146,6.146c0.195,0.195,0.512,0.195,0.707,0
            l1.293-1.293c0.195-0.195,0.195-0.512,0-0.707L13.675,11.671z`}))},ue=function(ie){var ee=ie.children,q=ie.mode,K=ie.onClick,ne=R.useContext($.LocalizationContext).l10n,fe="",de=R.createElement(he,null);switch(q){case A.SelectionMode.Hand:fe=ne&&ne.selectionMode?ne.selectionMode.handTool:"Hand tool",de=R.createElement(B,null);break;case A.SelectionMode.Text:default:fe=ne&&ne.selectionMode?ne.selectionMode.textSelectionTool:"Text selection tool",de=R.createElement(he,null)}return ee({icon:de,label:fe,onClick:K})},le={left:0,top:8},W=function(ie){var ee=ie.isSelected,q=ie.mode,K=ie.onClick,ne="";switch(q){case A.SelectionMode.Hand:ne="selection-mode__hand-button";break;case A.SelectionMode.Text:default:ne="selection-mode__text-button"}return R.createElement(ue,{mode:q,onClick:K},function(fe){return R.createElement($.Tooltip,{ariaControlsSuffix:"selection-mode-switch",position:$.Position.BottomCenter,target:R.createElement($.MinimalButton,{ariaLabel:fe.label,isSelected:ee,testId:ne,onClick:fe.onClick},fe.icon),content:function(){return fe.label},offset:le})})},be=function(ie){var ee=ie.children,q=ie.mode,K=ie.store,ne=q===K.get("selectionMode");return(ee||function(fe){return R.createElement(W,{isSelected:ne,mode:fe.mode,onClick:fe.onClick})})({isSelected:ne,mode:q,onClick:function(){return K.update("selectionMode",q)}})},ce=function(ie){var ee=ie.isSelected,q=ie.mode,K=ie.onClick,ne="";switch(q){case A.SelectionMode.Hand:ne="selection-mode__hand-menu";break;case A.SelectionMode.Text:default:ne="selection-mode__text-menu"}return R.createElement(ue,{mode:q,onClick:K},function(fe){return R.createElement($.MenuItem,{checked:ee,icon:fe.icon,testId:ne,onClick:fe.onClick},fe.label)})},Q=function(ie){var ee=ie.store,q=R.useRef(null),K=R.useState(A.SelectionMode.Text),ne=K[0],fe=K[1],de=R.useRef({top:0,left:0,x:0,y:0}),te=function(Ee){var J=q.current;J&&(J.scrollTop=de.current.top-(Ee.clientY-de.current.y),J.scrollLeft=de.current.left-(Ee.clientX-de.current.x))},se=function(){var Ee=q.current;Ee&&(Ee.classList.add("rpv-selection-mode__grab"),Ee.classList.remove("rpv-selection-mode__grabbing"),document.removeEventListener("mousemove",te),document.removeEventListener("mouseup",se))},re=function(Ee){var J=q.current;J&&ne!==A.SelectionMode.Text&&(J.classList.remove("rpv-selection-mode__grab"),J.classList.add("rpv-selection-mode__grabbing"),Ee.preventDefault(),Ee.stopPropagation(),de.current={left:J.scrollLeft,top:J.scrollTop,x:Ee.clientX,y:Ee.clientY},document.addEventListener("mousemove",te),document.addEventListener("mouseup",se))},ae=function(Ee){q.current=Ee()},oe=function(Ee){fe(Ee)};return R.useEffect(function(){var Ee=q.current;if(Ee)return ne===A.SelectionMode.Hand?Ee.classList.add("rpv-selection-mode__grab"):Ee.classList.remove("rpv-selection-mode__grab"),Ee.addEventListener("mousedown",re),function(){Ee.removeEventListener("mousedown",re)}},[ne]),R.useEffect(function(){return ee.subscribe("getPagesContainer",ae),ee.subscribe("selectionMode",oe),function(){ee.unsubscribe("getPagesContainer",ae),ee.unsubscribe("selectionMode",oe)}},[]),R.createElement(R.Fragment,null)};A.HandToolIcon=B,A.TextSelectionIcon=he,A.selectionModePlugin=function(ie){var ee=R.useMemo(function(){return $.createStore()},[]),q=function(K){return R.createElement(be,Y({},K,{store:ee}))};return{install:function(K){ee.update("selectionMode",ie&&ie.selectionMode?ie.selectionMode:A.SelectionMode.Text),ee.update("getPagesContainer",K.getPagesContainer)},renderViewer:function(K){var ne=K.slot;return ne.subSlot&&ne.subSlot.children&&(ne.subSlot.children=R.createElement(R.Fragment,null,R.createElement(Q,{store:ee}),ne.subSlot.children)),ne},SwitchSelectionMode:q,SwitchSelectionModeButton:function(K){return R.createElement(q,{mode:K.mode},function(ne){return R.createElement(W,{isSelected:ne.isSelected,mode:ne.mode,onClick:function(){ne.onClick()}})})},SwitchSelectionModeMenuItem:function(K){return R.createElement(q,{mode:K.mode},function(ne){return R.createElement(ce,{isSelected:ne.isSelected,mode:ne.mode,onClick:function(){ne.onClick(),K.onClick()}})})}}}})(selectionMode_min);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$b.exports=selectionMode_min;var libExports$d=lib$b.exports,lib$a={exports:{}},fullScreen_min={},e$c=libExports$h;function t$c(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(H){if(H!=="default"){var O=Object.getOwnPropertyDescriptor(A,H);Object.defineProperty($,H,O.get?O:{enumerable:!0,get:function(){return A[H]}})}}),$.default=A,Object.freeze($)}var n$c=t$c(reactExports),r$c=function(){return n$c.createElement(e$c.Icon,{size:16},n$c.createElement("path",{d:"M11.5 23.499L11.5 14.499"}),n$c.createElement("path",{d:"M7.5 18.499L11.5 14.499 15.5 18.499"}),n$c.createElement("path",{d:"M11.5 1.499L11.5 10.499"}),n$c.createElement("path",{d:"M7.5 6.499L11.5 10.499 15.5 6.499"}),n$c.createElement("path",{d:"M20.5 12.499L1.5 12.499"}))},l$c=function(){return n$c.createElement(e$c.Icon,{size:16},n$c.createElement("path",{d:"M0.5 12L23.5 12"}),n$c.createElement("path",{d:"M11.5 1L11.5 23"}),n$c.createElement("path",{d:"M8.5 4L11.5 1 14.5 4"}),n$c.createElement("path",{d:"M20.5 9L23.5 12 20.5 15"}),n$c.createElement("path",{d:"M3.5 15L0.5 12 3.5 9"}),n$c.createElement("path",{d:"M14.5 20L11.5 23 8.5 20"}))},c$c=function(){return c$c=Object.assign||function(A){for(var $,H=1,O=arguments.length;H<O;H++)for(var R in $=arguments[H])Object.prototype.hasOwnProperty.call($,R)&&(A[R]=$[R]);return A},c$c.apply(this,arguments)},u$c={left:0,top:8},o$c=function(A){var $=A.enableShortcuts,H=A.onClick,O=n$c.useContext(e$c.LocalizationContext).l10n,R=O&&O.fullScreen?O.fullScreen.enterFullScreen:"Full screen",B=$?e$c.isMac()?"Meta+Ctrl+F":"F11":"";return n$c.createElement(e$c.Tooltip,{ariaControlsSuffix:"full-screen-enter",position:e$c.Position.BottomCenter,target:n$c.createElement(e$c.MinimalButton,{ariaKeyShortcuts:B,ariaLabel:R,isDisabled:!e$c.isFullScreenEnabled(),testId:"full-screen__enter-button",onClick:H},n$c.createElement(l$c,null)),content:function(){return R},offset:u$c})},i$c={left:0,top:8},a$c=function(A){var $=A.onClick,H=n$c.useContext(e$c.LocalizationContext).l10n,O=H&&H.fullScreen?H.fullScreen.exitFullScreen:"Exit full screen";return n$c.createElement(e$c.Tooltip,{ariaControlsSuffix:"full-screen-exit",position:e$c.Position.BottomCenter,target:n$c.createElement(e$c.MinimalButton,{ariaKeyShortcuts:"Esc",ariaLabel:O,testId:"full-screen__exit-button-with-tooltip",onClick:$},n$c.createElement(r$c,null)),content:function(){return O},offset:i$c})},f$9=function(A,$){var H=n$c.useState($.get("fullScreenMode")),O=H[0],R=H[1],B=n$c.useCallback(function(Y){R(Y)},[]);return n$c.useEffect(function(){return $.subscribe("fullScreenMode",B),function(){$.unsubscribe("fullScreenMode",B)}},[]),{enterFullScreen:function(){var Y=$.get("getPagesContainer");if(Y){var he=A(Y());$.get("enterFullScreenMode")(he)}},exitFullScreen:function(){$.get("exitFullScreenMode")()},isFullScreen:O===e$c.FullScreenMode.Entering||O===e$c.FullScreenMode.EnteredCompletely}},s$8=function(A){var $=A.children,H=A.enableShortcuts,O=A.getFullScreenTarget,R=A.store,B=f$9(O,R),Y=B.enterFullScreen,he=B.exitFullScreen,ue=B.isFullScreen;return($||function(le){return ue?n$c.createElement(a$c,{onClick:le.onClick}):n$c.createElement(o$c,{enableShortcuts:H,onClick:le.onClick})})({onClick:ue?he:Y})},S$4=function(A){var $=A.onClick,H=n$c.useContext(e$c.LocalizationContext).l10n,O=H&&H.fullScreen?H.fullScreen.enterFullScreen:"Full screen";return n$c.createElement(e$c.MenuItem,{icon:n$c.createElement(l$c,null),isDisabled:!e$c.isFullScreenEnabled(),testId:"full-screen__enter-menu",onClick:$},O)},d$9=function(A){var $=A.onClick,H=n$c.useContext(e$c.LocalizationContext).l10n,O=n$c.useContext(e$c.ThemeContext).direction===e$c.TextDirection.RightToLeft,R=H&&H.fullScreen?H.fullScreen.exitFullScreen:"Exit full screen";return n$c.createElement("div",{className:e$c.classNames({"rpv-full-screen__exit-button":!0,"rpv-full-screen__exit-button--ltr":!O,"rpv-full-screen__exit-button--rtl":O})},n$c.createElement(e$c.MinimalButton,{ariaLabel:R,testId:"full-screen__exit-button",onClick:$},n$c.createElement(r$c,null)))},m$8=function(A){var $=A.children,H=A.getFullScreenTarget,O=A.store,R=f$9(H,O),B=R.enterFullScreen,Y=R.exitFullScreen,he=R.isFullScreen;return he&&($||function(ue){return n$c.createElement(d$9,{onClick:ue.onClick})})({onClick:he?Y:B})},E$5=function(A){var $=A.store,H=A.onEnterFullScreen,O=A.onExitFullScreen,R=n$c.useState($.get("fullScreenMode")),B=R[0],Y=R[1],he=n$c.useCallback(function(ue){Y(ue)},[]);return n$c.useEffect(function(){switch(B){case e$c.FullScreenMode.EnteredCompletely:H($.get("zoom"));break;case e$c.FullScreenMode.Exited:O($.get("zoom"))}},[B]),n$c.useEffect(function(){return $.subscribe("fullScreenMode",he),function(){$.unsubscribe("fullScreenMode",he)}},[]),(B===e$c.FullScreenMode.Entering||B===e$c.FullScreenMode.Entered)&&n$c.createElement("div",{className:"rpv-full-screen__overlay"},n$c.createElement(e$c.Spinner,null))},F=function(A){var $=A.containerRef,H=A.getFullScreenTarget,O=A.store,R=f$9(H,O).enterFullScreen,B=function(Y){if(!Y.shiftKey&&!Y.altKey&&(e$c.isMac()?Y.metaKey&&Y.ctrlKey&&Y.key==="f":Y.key==="F11")){var he=$.current;he&&document.activeElement&&he.contains(document.activeElement)&&(Y.preventDefault(),R())}};return n$c.useEffect(function(){if($.current)return document.addEventListener("keydown",B),function(){document.removeEventListener("keydown",B)}},[$.current]),n$c.createElement(n$c.Fragment,null)};fullScreen_min.ExitFullScreenIcon=r$c,fullScreen_min.FullScreenIcon=l$c,fullScreen_min.fullScreenPlugin=function(A){var $=(A==null?void 0:A.getFullScreenTarget)||function(Y){return Y},H=n$c.useMemo(function(){return Object.assign({},{enableShortcuts:!0,onEnterFullScreen:function(){},onExitFullScreen:function(){}},A)},[]),O=n$c.useMemo(function(){return e$c.createStore({enterFullScreenMode:function(){},exitFullScreenMode:function(){},fullScreenMode:e$c.FullScreenMode.Normal,zoom:function(){}})},[]),R=function(Y){return n$c.createElement(s$8,c$c({},Y,{enableShortcuts:H.enableShortcuts,getFullScreenTarget:$,store:O}))},B=function(){return n$c.createElement(m$8,{getFullScreenTarget:$,store:O},A==null?void 0:A.renderExitFullScreenButton)};return{install:function(Y){O.update("enterFullScreenMode",Y.enterFullScreenMode),O.update("exitFullScreenMode",Y.exitFullScreenMode),O.update("getPagesContainer",Y.getPagesContainer),O.update("zoom",Y.zoom)},onViewerStateChange:function(Y){return O.update("fullScreenMode",Y.fullScreenMode),Y},renderViewer:function(Y){var he=Y.slot;return he.subSlot&&(he.subSlot.children=n$c.createElement(n$c.Fragment,null,H.enableShortcuts&&n$c.createElement(F,{containerRef:Y.containerRef,getFullScreenTarget:$,store:O}),n$c.createElement(E$5,{store:O,onEnterFullScreen:H.onEnterFullScreen,onExitFullScreen:H.onExitFullScreen}),n$c.createElement(B,null),he.subSlot.children)),he},EnterFullScreen:R,EnterFullScreenButton:function(){return n$c.createElement(R,null,function(Y){return n$c.createElement(o$c,c$c({enableShortcuts:H.enableShortcuts},Y))})},EnterFullScreenMenuItem:function(Y){return n$c.createElement(R,null,function(he){return n$c.createElement(S$4,{onClick:function(){he.onClick(),Y.onClick()}})})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$a.exports=fullScreen_min;var libExports$c=lib$a.exports,lib$9={exports:{}},getFile_min={},e$b=libExports$h;function t$b(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(H){if(H!=="default"){var O=Object.getOwnPropertyDescriptor(A,H);Object.defineProperty($,H,O.get?O:{enumerable:!0,get:function(){return A[H]}})}}),$.default=A,Object.freeze($)}var n$b=t$b(reactExports),o$b=function(){return n$b.createElement(e$b.Icon,{size:16},n$b.createElement("path",{d:"M5.5,11.5c-.275,0-.341.159-.146.354l6.292,6.293a.5.5,0,0,0,.709,0l6.311-6.275c.2-.193.13-.353-.145-.355L15.5,11.5V1.5a1,1,0,0,0-1-1h-5a1,1,0,0,0-1,1V11a.5.5,0,0,1-.5.5Z"}),n$b.createElement("path",{d:"M23.5,18.5v4a1,1,0,0,1-1,1H1.5a1,1,0,0,1-1-1v-4"}))},r$b=function(){return r$b=Object.assign||function(A){for(var $,H=1,O=arguments.length;H<O;H++)for(var R in $=arguments[H])Object.prototype.hasOwnProperty.call($,R)&&(A[R]=$[R]);return A},r$b.apply(this,arguments)},i$b={left:0,top:8},a$b=function(A){var $=A.onClick,H=n$b.useContext(e$b.LocalizationContext).l10n,O=H&&H.download?H.download.download:"Download";return n$b.createElement(e$b.Tooltip,{ariaControlsSuffix:"get-file",position:e$b.Position.BottomCenter,target:n$b.createElement(e$b.MinimalButton,{ariaLabel:O,testId:"get-file__download-button",onClick:$},n$b.createElement(o$b,null)),content:function(){return O},offset:i$b})},c$b=function(A,$){var H=document.createElement("a");H.style.display="none",H.href=A,H.setAttribute("download",$),document.body.appendChild(H),H.click(),document.body.removeChild(H)},l$b=function(A,$,H){var O=URL.createObjectURL(new Blob([A],{type:H}));c$b(O,$),O&&URL.revokeObjectURL(O)},u$b=function(A,$){A.getData().then(function(H){/iphone|ipod|ipad/i.test(navigator.userAgent)&&!/CriOS/i.test(navigator.userAgent)?l$b(H,$,"application/octet-stream"):/iphone|ipod|ipad/i.test(navigator.userAgent)&&/CriOS/i.test(navigator.userAgent)?c$b("data:application/pdf;base64,".concat(function(O){return btoa(Array(O.length).fill("").map(function(R,B){return String.fromCharCode(O[B])}).join(""))}(H)),$):l$b(H,$,"application/pdf")})},f$8=function(A){var $=A.children,H=A.fileNameGenerator,O=A.store,R=n$b.useState(O.get("file")),B=R[0],Y=R[1],he=n$b.useState(O.get("doc")),ue=he[0],le=he[1],W=function(ce){le(ce)},be=function(ce){Y(ce)};return n$b.useEffect(function(){return O.subscribe("doc",W),O.subscribe("file",be),function(){O.subscribe("doc",W),O.unsubscribe("file",be)}},[]),($||function(ce){return n$b.createElement(a$b,{onClick:ce.onClick})})({onClick:function(){ue&&B&&u$b(ue,H(B))}})},d$8=function(A){var $=A.onClick,H=n$b.useContext(e$b.LocalizationContext).l10n,O=H&&H.download?H.download.download:"Download";return n$b.createElement(e$b.MenuItem,{icon:n$b.createElement(o$b,null),testId:"get-file__download-menu",onClick:$},O)};getFile_min.DownloadIcon=o$b,getFile_min.getFilePlugin=function(A){var $=n$b.useMemo(function(){return e$b.createStore({})},[]),H=function(R){return R.name?(B=R.name,(Y=B.split("/").pop())?Y.split("#")[0].split("?")[0]:B):"document.pdf";var B,Y},O=function(R){return n$b.createElement(f$8,r$b({},R,{fileNameGenerator:A&&A.fileNameGenerator||H,store:$}))};return{onDocumentLoad:function(R){$.update("doc",R.doc),$.update("file",R.file)},Download:O,DownloadButton:function(){return n$b.createElement(O,null,function(R){return n$b.createElement(a$b,r$b({},R))})},DownloadMenuItem:function(R){return n$b.createElement(O,null,function(B){return n$b.createElement(d$8,{onClick:function(){B.onClick(),R.onClick()}})})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$9.exports=getFile_min;var libExports$b=lib$9.exports,lib$8={exports:{}},open_min={},e$a=libExports$h;function t$a(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(H){if(H!=="default"){var O=Object.getOwnPropertyDescriptor(A,H);Object.defineProperty($,H,O.get?O:{enumerable:!0,get:function(){return A[H]}})}}),$.default=A,Object.freeze($)}var n$a=t$a(reactExports),r$a=function(){return n$a.createElement(e$a.Icon,{size:16},n$a.createElement("path",{d:"M18.5,7.5c.275,0,.341-.159.146-.354L12.354.854a.5.5,0,0,0-.708,0L5.354,7.147c-.2.195-.129.354.146.354h3v10a1,1,0,0,0,1,1h5a1,1,0,0,0,1-1V7.5Z"}),n$a.createElement("path",{d:"M23.5,18.5v4a1,1,0,0,1-1,1H1.5a1,1,0,0,1-1-1v-4"}))},o$a=function(){return o$a=Object.assign||function(A){for(var $,H=1,O=arguments.length;H<O;H++)for(var R in $=arguments[H])Object.prototype.hasOwnProperty.call($,R)&&(A[R]=$[R]);return A},o$a.apply(this,arguments)},i$a=function(A){var $=n$a.useRef(),H=function(){var R=$.current;R&&(R.click(),A.get("triggerOpenFile")&&A.update("triggerOpenFile",!1))},O=function(R){R&&H()};return n$a.useEffect(function(){return A.subscribe("triggerOpenFile",O),function(){A.unsubscribe("triggerOpenFile",O)}},[]),{inputRef:$,openFile:H}},c$a={left:0,top:8},u$a=function(A){var $=A.enableShortcuts,H=A.store,O=A.onClick,R=n$a.useContext(e$a.LocalizationContext).l10n,B=R&&R.open?R.open.openFile:"Open file",Y=i$a(H),he=Y.inputRef,ue=Y.openFile,le=$?e$a.isMac()?"Meta+O":"Ctrl+O":"";return n$a.createElement(e$a.Tooltip,{ariaControlsSuffix:"open",position:e$a.Position.BottomCenter,target:n$a.createElement("div",{className:"rpv-open__input-wrapper"},n$a.createElement("input",{accept:".pdf",ref:he,className:"rpv-open__input",multiple:!1,tabIndex:-1,title:"",type:"file",onChange:O}),n$a.createElement(e$a.MinimalButton,{ariaKeyShortcuts:le,ariaLabel:B,testId:"open__button",onClick:ue},n$a.createElement(r$a,null))),content:function(){return B},offset:c$a})},a$a=function(A){var $=A.children,H=A.enableShortcuts,O=A.store;return($||function(R){return n$a.createElement(u$a,{enableShortcuts:H,store:O,onClick:R.onClick})})({onClick:function(R){var B=R.target.files;if(B&&B.length){var Y=O.get("openFile");Y&&Y(B[0])}}})},l$a=function(A){var $=A.store,H=A.onClick,O=n$a.useContext(e$a.LocalizationContext).l10n,R=O&&O.open?O.open.openFile:"Open file",B=i$a($),Y=B.inputRef,he=B.openFile;return n$a.createElement(e$a.MenuItem,{icon:n$a.createElement(r$a,null),testId:"open__menu",onClick:he},n$a.createElement("div",{className:"rpv-open__input-wrapper"},n$a.createElement("input",{accept:".pdf",ref:Y,className:"rpv-open__input",multiple:!1,tabIndex:-1,title:"",type:"file",onChange:H}),R))},p$7=function(A){var $=A.containerRef,H=A.store,O=function(R){if(!R.shiftKey&&!R.altKey&&R.key==="o"&&(e$a.isMac()?R.metaKey:R.ctrlKey)){var B=$.current;B&&document.activeElement&&B.contains(document.activeElement)&&(R.preventDefault(),H.update("triggerOpenFile",!0))}};return n$a.useEffect(function(){if($.current)return document.addEventListener("keydown",O),function(){document.removeEventListener("keydown",O)}},[$.current]),n$a.createElement(n$a.Fragment,null)};open_min.OpenFileIcon=r$a,open_min.openPlugin=function(A){var $=n$a.useMemo(function(){return Object.assign({},{enableShortcuts:!0},A)},[]),H=n$a.useMemo(function(){return e$a.createStore({})},[]),O=function(R){return n$a.createElement(a$a,o$a({enableShortcuts:$.enableShortcuts},R,{store:H}))};return{install:function(R){H.update("openFile",R.openFile)},renderViewer:function(R){var B=R.slot,Y={children:n$a.createElement(n$a.Fragment,null,$.enableShortcuts&&n$a.createElement(p$7,{containerRef:R.containerRef,store:H}),B.children)};return o$a(o$a({},B),Y)},Open:O,OpenButton:function(){return n$a.createElement(O,null)},OpenMenuItem:function(){return n$a.createElement(O,null,function(R){return n$a.createElement(l$a,{store:H,onClick:R.onClick})})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$8.exports=open_min;var libExports$a=lib$8.exports,lib$7={exports:{}},pageNavigation_min={},e$9=libExports$h;function t$9(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(H){if(H!=="default"){var O=Object.getOwnPropertyDescriptor(A,H);Object.defineProperty($,H,O.get?O:{enumerable:!0,get:function(){return A[H]}})}}),$.default=A,Object.freeze($)}var n$9=t$9(reactExports),a$9=function(){return n$9.createElement(e$9.Icon,{size:16},n$9.createElement("path",{d:`M2.32,2.966h19.452c0.552,0.001,1,0.449,0.999,1.001c0,0.182-0.05,0.36-0.144,0.516L12.9,20.552
            c-0.286,0.472-0.901,0.624-1.373,0.338c-0.138-0.084-0.254-0.2-0.338-0.338L1.465,4.483C1.179,4.01,1.331,3.396,1.804,3.11
            C1.96,3.016,2.138,2.966,2.32,2.966z`}))},r$9=function(){return n$9.createElement(e$9.Icon,{size:16},n$9.createElement("path",{d:`M0.541,5.627L11.666,18.2c0.183,0.207,0.499,0.226,0.706,0.043c0.015-0.014,0.03-0.028,0.043-0.043
            L23.541,5.627`}))},o$9=function(){return o$9=Object.assign||function(A){for(var $,H=1,O=arguments.length;H<O;H++)for(var R in $=arguments[H])Object.prototype.hasOwnProperty.call($,R)&&(A[R]=$[R]);return A},o$9.apply(this,arguments)},i$9=function(A){var $=n$9.useState(A.get("currentPage")||0),H=$[0],O=$[1],R=function(B){O(B)};return e$9.useIsomorphicLayoutEffect(function(){return A.subscribe("currentPage",R),function(){A.unsubscribe("currentPage",R)}},[]),{currentPage:H}},u$9=function(A){var $=n$9.useState(A.get("numberOfPages")||0),H=$[0],O=$[1],R=function(B){O(B)};return n$9.useEffect(function(){return A.subscribe("numberOfPages",R),function(){A.unsubscribe("numberOfPages",R)}},[]),{numberOfPages:H}},c$9=function(A){var $=A.store,H=n$9.useContext(e$9.LocalizationContext).l10n,O=n$9.useState("1"),R=O[0],B=O[1],Y=i$9($).currentPage,he=u$9($).numberOfPages;n$9.useEffect(function(){return B("".concat(Y+1))},[Y]);var ue=function(W){var be=$.get("jumpToPage");be&&be(W)},le=H&&H.pageNavigation?H.pageNavigation.enterPageNumber:"Enter a page number";return n$9.createElement("span",{className:"rpv-page-navigation__current-page-input"},n$9.createElement(e$9.TextBox,{ariaLabel:le,testId:"page-navigation__current-page-input",type:"text",value:R,onChange:B,onKeyDown:function(W){switch(W.key){case"ArrowUp":(Q=Y-1)>=0&&(B("".concat(Q+1)),ue(Q));break;case"ArrowDown":(ce=Y+1)<he&&(B("".concat(ce+1)),ue(ce));break;case"Enter":be=parseInt(R,10),R===""||be<1||be>he?B("".concat(Y+1)):ue(be-1)}var be,ce,Q}}))},l$9=function(A){var $=A.children,H=A.doc,O=e$9.useIsMounted(),R=n$9.useState({loading:!0,labels:[]}),B=R[0],Y=R[1];return n$9.useEffect(function(){H.getPageLabels().then(function(he){O.current&&Y({loading:!1,labels:he||[]})})},[H.loadingTask.docId]),B.loading?n$9.createElement(n$9.Fragment,null):$(B.labels)},s$7=function(A){var $=A.children,H=A.store,O=function(he){var ue=n$9.useState(he.get("doc")),le=ue[0],W=ue[1],be=function(ce){W(ce)};return n$9.useEffect(function(){return he.subscribe("doc",be),function(){he.unsubscribe("doc",be)}},[]),le}(H),R=i$9(H).currentPage,B=u$9(H).numberOfPages,Y=$||function(he){return n$9.createElement(n$9.Fragment,null,he.currentPage+1)};return O?n$9.createElement(l$9,{doc:O},function(he){var ue=he.length===B&&B>0?he[R]:"";return Y({currentPage:R,numberOfPages:B,pageLabel:ue})}):n$9.createElement(n$9.Fragment,null)},g$5=function(){return n$9.createElement(e$9.Icon,{size:16},n$9.createElement("path",{d:`M21.783,21.034H2.332c-0.552,0-1-0.448-1-1c0-0.182,0.05-0.361,0.144-0.517L11.2,3.448
            c0.286-0.472,0.901-0.624,1.373-0.338c0.138,0.084,0.254,0.2,0.338,0.338l9.726,16.069c0.286,0.473,0.134,1.087-0.339,1.373
            C22.143,20.984,21.965,21.034,21.783,21.034z`}))},f$7={left:0,top:8},m$7=function(A){var $=A.isDisabled,H=A.onClick,O=n$9.useContext(e$9.LocalizationContext).l10n,R=O&&O.pageNavigation?O.pageNavigation.goToFirstPage:"First page";return n$9.createElement(e$9.Tooltip,{ariaControlsSuffix:"page-navigation-first",position:e$9.Position.BottomCenter,target:n$9.createElement(e$9.MinimalButton,{ariaLabel:R,isDisabled:$,testId:"page-navigation__first-button",onClick:H},n$9.createElement(g$5,null)),content:function(){return R},offset:f$7})},p$6=function(A){var $=A.children,H=A.store;return($||function(O){return n$9.createElement(m$7,{isDisabled:O.isDisabled,onClick:O.onClick})})({isDisabled:i$9(H).currentPage===0,onClick:function(){var O=H.get("jumpToPage");O&&O(0)}})},v$5=function(A){var $=A.isDisabled,H=A.onClick,O=n$9.useContext(e$9.LocalizationContext).l10n,R=O&&O.pageNavigation?O.pageNavigation.goToFirstPage:"First page";return n$9.createElement(e$9.MenuItem,{icon:n$9.createElement(g$5,null),isDisabled:$,testId:"page-navigation__first-menu",onClick:H},R)},d$7={left:0,top:8},P$2=function(A){var $=A.isDisabled,H=A.onClick,O=n$9.useContext(e$9.LocalizationContext).l10n,R=O&&O.pageNavigation?O.pageNavigation.goToLastPage:"Last page";return n$9.createElement(e$9.Tooltip,{ariaControlsSuffix:"page-navigation-last",position:e$9.Position.BottomCenter,target:n$9.createElement(e$9.MinimalButton,{ariaLabel:R,isDisabled:$,testId:"page-navigation__last-button",onClick:H},n$9.createElement(a$9,null)),content:function(){return R},offset:d$7})},b$4=function(A){var $=A.children,H=A.store,O=i$9(H).currentPage,R=u$9(H).numberOfPages;return($||function(B){return n$9.createElement(P$2,{isDisabled:B.isDisabled,onClick:B.onClick})})({isDisabled:O+1>=R,onClick:function(){var B=H.get("jumpToPage");B&&B(R-1)}})},E$4=function(A){var $=A.isDisabled,H=A.onClick,O=n$9.useContext(e$9.LocalizationContext).l10n,R=O&&O.pageNavigation?O.pageNavigation.goToLastPage:"Last page";return n$9.createElement(e$9.MenuItem,{icon:n$9.createElement(a$9,null),isDisabled:$,testId:"page-navigation__last-menu",onClick:H},R)},C$3={left:0,top:8},D=function(A){var $=A.isDisabled,H=A.onClick,O=n$9.useContext(e$9.LocalizationContext).l10n,R=O&&O.pageNavigation?O.pageNavigation.goToNextPage:"Next page";return n$9.createElement(e$9.Tooltip,{ariaControlsSuffix:"page-navigation-next",position:e$9.Position.BottomCenter,target:n$9.createElement(e$9.MinimalButton,{ariaLabel:R,isDisabled:$,testId:"page-navigation__next-button",onClick:H},n$9.createElement(r$9,null)),content:function(){return R},offset:C$3})},k$3=function(A){var $=A.children,H=A.store;return($||function(O){return n$9.createElement(D,{onClick:O.onClick,isDisabled:O.isDisabled})})({isDisabled:i$9(H).currentPage+1>=u$9(H).numberOfPages,onClick:function(){var O=H.get("jumpToNextPage");O&&O()}})},T=function(A){var $=A.isDisabled,H=A.onClick,O=n$9.useContext(e$9.LocalizationContext).l10n,R=O&&O.pageNavigation?O.pageNavigation.goToNextPage:"Next page";return n$9.createElement(e$9.MenuItem,{icon:n$9.createElement(r$9,null),isDisabled:$,testId:"page-navigation__next-menu",onClick:H},R)},x$1=function(){return n$9.createElement(e$9.Icon,{size:16},n$9.createElement("path",{d:`M23.535,18.373L12.409,5.8c-0.183-0.207-0.499-0.226-0.706-0.043C11.688,5.77,11.674,5.785,11.66,5.8
            L0.535,18.373`}))},L={left:0,top:8},N=function(A){var $=A.isDisabled,H=A.onClick,O=n$9.useContext(e$9.LocalizationContext).l10n,R=O&&O.pageNavigation?O.pageNavigation.goToPreviousPage:"Previous page";return n$9.createElement(e$9.Tooltip,{ariaControlsSuffix:"page-navigation-previous",position:e$9.Position.BottomCenter,target:n$9.createElement(e$9.MinimalButton,{ariaLabel:R,isDisabled:$,testId:"page-navigation__previous-button",onClick:H},n$9.createElement(x$1,null)),content:function(){return R},offset:L})},j=function(A){var $=A.store;return(A.children||function(H){return n$9.createElement(N,{isDisabled:H.isDisabled,onClick:H.onClick})})({isDisabled:i$9($).currentPage<=0,onClick:function(){var H=$.get("jumpToPreviousPage");H&&H()}})},I$2=function(A){var $=A.isDisabled,H=A.onClick,O=n$9.useContext(e$9.LocalizationContext).l10n,R=O&&O.pageNavigation?O.pageNavigation.goToPreviousPage:"Previous page";return n$9.createElement(e$9.MenuItem,{icon:n$9.createElement(x$1,null),isDisabled:$,testId:"page-navigation__previous-menu",onClick:H},R)},h$5=function(A){var $=A.children,H=A.store,O=u$9(H).numberOfPages;return $?$({numberOfPages:O}):n$9.createElement(n$9.Fragment,null,O)},y$1=function(A){var $=A.containerRef,H=A.numPages,O=A.store,R=i$9(O).currentPage,B=n$9.useRef(R);B.current=R;var Y=n$9.useRef(!1),he=function(){Y.current=!0},ue=function(){Y.current=!1},le=function(W){var be=$.current,ce=Y.current||document.activeElement&&be.contains(document.activeElement);if(be&&ce){var Q,ie,ee=W.altKey&&W.key==="ArrowDown"||!W.shiftKey&&!W.altKey&&W.key==="PageDown",q=W.altKey&&W.key==="ArrowUp"||!W.shiftKey&&!W.altKey&&W.key==="PageUp";if(ee)return W.preventDefault(),Q=O.get("jumpToPage"),ie=B.current+1,void(Q&&ie<H&&Q(ie));if(q)return W.preventDefault(),void function(){var K=O.get("jumpToPage"),ne=B.current-1;K&&ne>=0&&K(ne)}();if(e$9.isMac()?W.metaKey&&!W.ctrlKey:W.altKey)switch(W.key){case"ArrowLeft":W.preventDefault(),function(){var K=O.get("jumpToPreviousDestination");K&&K()}();break;case"ArrowRight":W.preventDefault(),function(){var K=O.get("jumpToNextDestination");K&&K()}()}}};return n$9.useEffect(function(){var W=$.current;if(W)return document.addEventListener("keydown",le),W.addEventListener("mouseenter",he),W.addEventListener("mouseleave",ue),function(){document.removeEventListener("keydown",le),W.removeEventListener("mouseenter",he),W.removeEventListener("mouseleave",ue)}},[$.current]),n$9.createElement(n$9.Fragment,null)};pageNavigation_min.DownArrowIcon=a$9,pageNavigation_min.NextIcon=r$9,pageNavigation_min.PreviousIcon=x$1,pageNavigation_min.UpArrowIcon=g$5,pageNavigation_min.pageNavigationPlugin=function(A){var $=n$9.useMemo(function(){return Object.assign({},{enableShortcuts:!0},A)},[]),H=n$9.useMemo(function(){return e$9.createStore()},[]),O=function(he){return n$9.createElement(p$6,o$9({},he,{store:H}))},R=function(he){return n$9.createElement(b$4,o$9({},he,{store:H}))},B=function(he){return n$9.createElement(k$3,o$9({},he,{store:H}))},Y=function(he){return n$9.createElement(j,o$9({},he,{store:H}))};return{install:function(he){H.update("jumpToDestination",he.jumpToDestination),H.update("jumpToNextDestination",he.jumpToNextDestination),H.update("jumpToNextPage",he.jumpToNextPage),H.update("jumpToPage",he.jumpToPage),H.update("jumpToPreviousDestination",he.jumpToPreviousDestination),H.update("jumpToPreviousPage",he.jumpToPreviousPage)},renderViewer:function(he){var ue=he.slot;if(!$.enableShortcuts)return ue;var le={children:n$9.createElement(n$9.Fragment,null,n$9.createElement(y$1,{containerRef:he.containerRef,numPages:he.doc.numPages,store:H}),ue.children)};return o$9(o$9({},ue),le)},onDocumentLoad:function(he){H.update("doc",he.doc),H.update("numberOfPages",he.doc.numPages)},onViewerStateChange:function(he){return H.update("currentPage",he.pageIndex),he},jumpToNextPage:function(){var he=H.get("jumpToNextPage");he&&he()},jumpToPage:function(he){var ue=H.get("jumpToPage");ue&&ue(he)},jumpToPreviousPage:function(){var he=H.get("jumpToPreviousPage");he&&he()},CurrentPageInput:function(){return n$9.createElement(c$9,{store:H})},CurrentPageLabel:function(he){return n$9.createElement(s$7,o$9({},he,{store:H}))},GoToFirstPage:O,GoToFirstPageButton:function(){return n$9.createElement(O,null,function(he){return n$9.createElement(m$7,o$9({},he))})},GoToFirstPageMenuItem:function(he){return n$9.createElement(O,null,function(ue){return n$9.createElement(v$5,{isDisabled:ue.isDisabled,onClick:function(){ue.onClick(),he.onClick()}})})},GoToLastPage:R,GoToLastPageButton:function(){return n$9.createElement(R,null,function(he){return n$9.createElement(P$2,o$9({},he))})},GoToLastPageMenuItem:function(he){return n$9.createElement(R,null,function(ue){return n$9.createElement(E$4,{isDisabled:ue.isDisabled,onClick:function(){ue.onClick(),he.onClick()}})})},GoToNextPage:B,GoToNextPageButton:function(){return n$9.createElement(B,null,function(he){return n$9.createElement(D,o$9({},he))})},GoToNextPageMenuItem:function(he){return n$9.createElement(B,null,function(ue){return n$9.createElement(T,{isDisabled:ue.isDisabled,onClick:function(){ue.onClick(),he.onClick()}})})},GoToPreviousPage:Y,GoToPreviousPageButton:function(){return n$9.createElement(Y,null,function(he){return n$9.createElement(N,o$9({},he))})},GoToPreviousPageMenuItem:function(he){return n$9.createElement(Y,null,function(ue){return n$9.createElement(I$2,{isDisabled:ue.isDisabled,onClick:function(){ue.onClick(),he.onClick()}})})},NumberOfPages:function(he){return n$9.createElement(h$5,o$9({},he,{store:H}))}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$7.exports=pageNavigation_min;var libExports$9=lib$7.exports,lib$6={exports:{}},print_min={},define_process_env_default={},e$8=libExports$h,t$8=reactExports,n$8=reactDomExports;function r$8(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(H){if(H!=="default"){var O=Object.getOwnPropertyDescriptor(A,H);Object.defineProperty($,H,O.get?O:{enumerable:!0,get:function(){return A[H]}})}}),$.default=A,Object.freeze($)}var o$8,a$8=r$8(t$8),i$8=function(){return a$8.createElement(e$8.Icon,{size:16},a$8.createElement("path",{d:`M7.5,19.499h9 M7.5,16.499h9 M5.5,16.5h-3c-1.103-0.003-1.997-0.897-2-2v-6c0.003-1.103,0.897-1.997,2-2h19
            c1.103,0.003,1.997,0.897,2,2v6c-0.003,1.103-0.897,1.997-2,2h-3
            M5.5,4.5v-4h9.586c0.265,0,0.52,0.105,0.707,0.293l2.414,2.414
            C18.395,3.394,18.5,3.649,18.5,3.914V4.5
            M18.5,22.5c0,0.552-0.448,1-1,1h-11c-0.552,0-1-0.448-1-1v-9h13V22.5z
            M3.5,8.499
            c0.552,0,1,0.448,1,1s-0.448,1-1,1s-1-0.448-1-1S2.948,8.499,3.5,8.499z
            M14.5,0.499v4h4`}))},c$8=function(){return c$8=Object.assign||function(A){for(var $,H=1,O=arguments.length;H<O;H++)for(var R in $=arguments[H])Object.prototype.hasOwnProperty.call($,R)&&(A[R]=$[R]);return A},c$8.apply(this,arguments)},u$8={left:0,top:8},s$6=function(A){var $=A.enableShortcuts,H=A.onClick,O=a$8.useContext(e$8.LocalizationContext).l10n,R=O&&O.print?O.print.print:"Print",B=$?e$8.isMac()?"Meta+P":"Ctrl+P":"";return a$8.createElement(e$8.Tooltip,{ariaControlsSuffix:"print",position:e$8.Position.BottomCenter,target:a$8.createElement(e$8.MinimalButton,{ariaKeyShortcuts:B,ariaLabel:R,testId:"print__button",onClick:H},a$8.createElement(i$8,null)),content:function(){return R},offset:u$8})};(function(A){A.CheckingPermission="CheckingPermission",A.Inactive="Inactive",A.Preparing="Preparing",A.Cancelled="Cancelled",A.Ready="Ready"})(o$8||(o$8={}));var l$8=function(A){var $=A.children,H=A.enableShortcuts,O=A.store;return($||s$6)({enableShortcuts:H,onClick:function(){O.update("printStatus",o$8.CheckingPermission)}})},p$5=function(A){var $=A.doc,H=A.store,O=a$8.useContext(e$8.LocalizationContext).l10n,R=a$8.useState(!0),B=R[0],Y=R[1];return a$8.useEffect(function(){$.getPermissions().then(function(he){he===null||he.includes(4)||he.includes(2048)?H.update("printStatus",o$8.Preparing):Y(!1)})},[]),B?a$8.createElement(a$8.Fragment,null):a$8.createElement(e$8.Modal,{ariaControlsSuffix:"print-permission",closeOnClickOutside:!1,closeOnEscape:!1,content:function(he){return a$8.createElement(a$8.Fragment,null,a$8.createElement("div",{className:"rpv-print__permission-body"},O&&O.print?O.print.disallowPrint:"The document does not allow to print"),a$8.createElement("div",{className:"rpv-print__permission-footer"},a$8.createElement(e$8.Button,{onClick:function(){he(),H.update("printStatus",o$8.Cancelled)}},O&&O.print?O.print.close:"Close")))},isOpened:!0})},m$6=function(A){var $=A.numLoadedPages,H=A.numPages,O=A.onCancel,R=a$8.useContext(e$8.LocalizationContext).l10n,B=a$8.useContext(e$8.ThemeContext).direction===e$8.TextDirection.RightToLeft,Y=Math.floor(100*$/H);return a$8.createElement("div",{className:"rpv-print__progress"},a$8.createElement("div",{className:e$8.classNames({"rpv-print__progress-body":!0,"rpv-print__progress-body--rtl":B})},a$8.createElement("div",{className:"rpv-print__progress-message"},R&&R.print?R.print.preparingDocument:"Preparing document ..."),a$8.createElement("div",{className:"rpv-print__progress-bar"},a$8.createElement(e$8.ProgressBar,{progress:Y})),a$8.createElement(e$8.Button,{onClick:O},R&&R.print?R.print.cancel:"Cancel")))},d$6=function(A){var $=A.canvas,H=A.page,O=A.pageHeight,R=A.pageIndex,B=A.pageWidth,Y=A.rotation,he=A.onLoad,ue=e$8.useIsMounted(),le=a$8.useRef(),W=a$8.useState(""),be=W[0],ce=W[1],Q=a$8.useMemo(function(){return typeof process<"u"&&define_process_env_default.JEST_WORKER_ID!==void 0},[]);return a$8.useEffect(function(){var ie=le.current;ie&&ie.cancel();var ee=150/72;$.height=Math.floor(O*ee),$.width=Math.floor(B*ee);var q=$.getContext("2d");q.save(),q.fillStyle="rgb(255, 255, 255)",q.fillRect(0,0,$.width,$.height),q.restore();var K=H.getViewport({rotation:Y,scale:1});le.current=H.render({canvasContext:q,intent:"print",transform:[ee,0,0,ee,0,0],viewport:K}),le.current.promise.then(function(){"toBlob"in $&&"createObjectURL"in URL?$.toBlob(function(ne){ue.current&&ce(URL.createObjectURL(ne)),Q&&he()}):(ue.current&&ce($.toDataURL()),Q&&he())},function(){})},[]),be&&a$8.createElement("div",{className:"rpv-print__page"},a$8.createElement("img",{"data-testid":"print__thumbnail-".concat(R),src:be,onLoad:function(){Q||he()}}))},f$6=function(A){var $=A.canvas,H=A.doc,O=A.pageIndex,R=A.pageRotation,B=A.pageSize,Y=A.rotation,he=A.shouldRender,ue=A.onLoad,le=e$8.useIsMounted(),W=a$8.useState(null),be=W[0],ce=W[1],Q=Math.abs(Y+R)%180==0;a$8.useEffect(function(){he&&e$8.getPage(H,O).then(function(ee){le.current&&ce(ee)})},[he]);var ie=(B.rotation+Y+R)%360;return be&&a$8.createElement(d$6,{canvas:$,page:be,pageHeight:Q?B.pageHeight:B.pageWidth,pageIndex:O,pageWidth:Q?B.pageWidth:B.pageHeight,rotation:ie,onLoad:ue})},g$4=function(A){var $=A.doc,H=A.numLoadedPages,O=A.pagesRotation,R=A.pageSizes,B=A.printPages,Y=A.printStatus,he=A.rotation,ue=A.onCancel,le=A.onLoad,W=a$8.useMemo(function(){return document.createElement("canvas")},[]),be=a$8.useMemo(function(){var ie=document.querySelector(".rpv-print__zone");if(ie)return ie;var ee=document.createElement("div");return ee.classList.add("rpv-print__zone"),ee.setAttribute("data-testid","print__zone"),document.body.appendChild(ee),ee},[]);a$8.useEffect(function(){Y===o$8.Ready&&(document.documentElement.classList.add("rpv-print__html-printing"),document.body.classList.add("rpv-print__body-printing"),window.print());var ie=function(){if(Y===o$8.Ready){document.documentElement.classList.remove("rpv-print__html-printing"),document.body.classList.remove("rpv-print__body-printing");var ee=document.querySelectorAll(".rpv-print__zone");ee&&ee.forEach(function(q){q.parentElement.removeChild(q)}),W.height=0,W.width=0,document.removeEventListener("mousemove",ie),ue()}};return document.addEventListener("mousemove",ie),function(){return document.removeEventListener("mousemove",ie)}},[Y]);var ce=R[0].pageHeight,Q=R[0].pageWidth;return n$8.createPortal(a$8.createElement(a$8.Fragment,null,B.map(function(ie,ee){return a$8.createElement(f$6,{key:ie,canvas:W,doc:$,pageIndex:ie,pageRotation:O.has(ie)?O.get(ie):0,pageSize:R[ie],rotation:he,shouldRender:ee===H,onLoad:le})}),a$8.createElement("style",{dangerouslySetInnerHTML:{__html:"@page { size: ".concat(Q,"pt ").concat(ce,"pt }")}})),be)},v$4=function(A){var $=A.doc,H=A.pagesRotation,O=A.pageSizes,R=A.renderProgressBar,B=A.rotation,Y=A.setPages,he=A.store,ue=a$8.useState(o$8.Inactive),le=ue[0],W=ue[1],be=a$8.useState(0),ce=be[0],Q=be[1],ie=a$8.useMemo(function(){var ne=$.numPages;return Y($).filter(function(fe){return fe>=0&&fe<ne})},[$,Y]),ee=ie.length,q=function(){Q(0),W(o$8.Inactive)},K=function(ne){return W(ne)};return a$8.useEffect(function(){return he.subscribe("printStatus",K),function(){he.unsubscribe("printStatus",K)}},[]),a$8.createElement(a$8.Fragment,null,le===o$8.CheckingPermission&&a$8.createElement(p$5,{doc:$,store:he}),le===o$8.Preparing&&(R?R(ce,ee,q):a$8.createElement(m$6,{numLoadedPages:ce,numPages:ee,onCancel:q})),(le===o$8.Preparing||le===o$8.Ready)&&ce<=ee&&a$8.createElement(g$4,{doc:$,numLoadedPages:ce,pagesRotation:H,pageSizes:O,printPages:ie,printStatus:le,rotation:B,onCancel:q,onLoad:function(){var ne=ce+1;ne<=ee&&(Q(ne),ne===ee&&W(o$8.Ready))}}))},h$4=function(A){var $=A.onClick,H=a$8.useContext(e$8.LocalizationContext).l10n,O=H&&H.print?H.print.print:"Print";return a$8.createElement(e$8.MenuItem,{icon:a$8.createElement(i$8,null),testId:"print__menu",onClick:$},O)},E$3=function(A){var $=A.containerRef,H=A.store,O=function(R){if(!R.shiftKey&&!R.altKey&&R.key==="p"&&(e$8.isMac()?R.metaKey:R.ctrlKey)){var B=$.current;B&&document.activeElement&&B.contains(document.activeElement)&&(R.preventDefault(),H.update("printStatus",o$8.Preparing))}};return a$8.useEffect(function(){if($.current)return document.addEventListener("keydown",O),function(){document.removeEventListener("keydown",O)}},[$.current]),a$8.createElement(a$8.Fragment,null)};print_min.PrintIcon=i$8,print_min.getAllPagesNumbers=function(A){return Array(A.numPages).fill(0).map(function($,H){return H})},print_min.getCustomPagesNumbers=function(A){return function($){var H,O=[];return A.replace(/\s+/g,"").split(",").forEach(function(R){var B,Y,he=R.split("-").map(function(ue){return parseInt(ue,10)}).filter(function(ue){return Number.isInteger(ue)});he.length===1?O.push(he[0]-1):he.length===2&&O.push.apply(O,(B=he[0]-1,Y=he[1]-1,Array(Y-B+1).fill(0).map(function(ue,le){return B+le})))}),(H=O,H.filter(function(R){return H.indexOf(R)===H.lastIndexOf(R)})).filter(function(R){return R>=0&&R<$.numPages})}},print_min.getEvenPagesNumbers=function(A){return Array(A.numPages).fill(0).map(function($,H){return H}).filter(function($){return($+1)%2==0})},print_min.getOddPagesNumbers=function(A){return Array(A.numPages).fill(0).map(function($,H){return H}).filter(function($){return($+1)%2==1})},print_min.printPlugin=function(A){var $=a$8.useMemo(function(){return Object.assign({},{enableShortcuts:!0,setPages:function(R){return Array(R.numPages).fill(0).map(function(B,Y){return Y})}},A)},[]),H=a$8.useMemo(function(){return e$8.createStore({printStatus:o$8.Inactive})},[]),O=function(R){return a$8.createElement(l$8,c$8({enableShortcuts:$.enableShortcuts},R,{store:H}))};return{print:function(){H.update("printStatus",o$8.CheckingPermission)},renderViewer:function(R){var B=R.slot,Y={children:a$8.createElement(a$8.Fragment,null,$.enableShortcuts&&a$8.createElement(E$3,{containerRef:R.containerRef,store:H}),a$8.createElement(v$4,{doc:R.doc,pagesRotation:R.pagesRotation,pageSizes:R.pageSizes,renderProgressBar:A==null?void 0:A.renderProgressBar,rotation:R.rotation,setPages:$.setPages,store:H}),B.children)};return c$8(c$8({},B),Y)},Print:O,PrintButton:function(){return a$8.createElement(O,null,function(R){return a$8.createElement(s$6,c$8({},R))})},PrintMenuItem:function(R){return a$8.createElement(O,null,function(B){return a$8.createElement(h$4,{onClick:function(){B.onClick(),R.onClick()}})})},setPages:function(R){$.setPages=R}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$6.exports=print_min;var libExports$8=lib$6.exports,lib$5={exports:{}},properties_min={},e$7=libExports$h;function t$7(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(H){if(H!=="default"){var O=Object.getOwnPropertyDescriptor(A,H);Object.defineProperty($,H,O.get?O:{enumerable:!0,get:function(){return A[H]}})}}),$.default=A,Object.freeze($)}var r$7=t$7(reactExports),n$7=function(){return r$7.createElement(e$7.Icon,{size:16},r$7.createElement("path",{d:`M12,1.001c6.075,0,11,4.925,11,11s-4.925,11-11,11s-11-4.925-11-11S5.925,1.001,12,1.001z
            M14.5,17.005H13
            c-0.552,0-1-0.448-1-1v-6.5c0-0.276-0.224-0.5-0.5-0.5H10
            M11.745,6.504L11.745,6.504
            M11.745,6.5c-0.138,0-0.25,0.112-0.25,0.25
            S11.607,7,11.745,7s0.25-0.112,0.25-0.25S11.883,6.5,11.745,6.5`}))},o$7=function(){return o$7=Object.assign||function(A){for(var $,H=1,O=arguments.length;H<O;H++)for(var R in $=arguments[H])Object.prototype.hasOwnProperty.call($,R)&&(A[R]=$[R]);return A},o$7.apply(this,arguments)},a$7=function(A){var $=A.doc,H=A.render,O=r$7.useState(),R=O[0],B=O[1];return r$7.useEffect(function(){$.getMetadata().then(function(Y){return Promise.resolve(Y)}).then(function(Y){return $.getDownloadInfo().then(function(he){return Promise.resolve({fileName:Y.contentDispositionFilename||"",info:Y.info,length:he.length})})}).then(function(Y){B(Y)})},[]),R?H(R):r$7.createElement("div",{className:"rpv-properties__loader"},r$7.createElement(e$7.Spinner,null))},i$7=function(A){var $=A.label,H=A.value,O=r$7.useContext(e$7.ThemeContext).direction===e$7.TextDirection.RightToLeft;return r$7.createElement("dl",{className:e$7.classNames({"rpv-properties__item":!0,"rpv-properties__item--rtl":O})},r$7.createElement("dt",{className:"rpv-properties__item-label"},$,":"),r$7.createElement("dd",{className:"rpv-properties__item-value"},H||"-"))},l$7=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),c$7=function(A,$,H,O){var R=parseInt(A,10);return R>=$&&R<=H?R:O},p$4=function(A){var $=A.doc,H=A.fileName,O=A.onToggle,R=r$7.useContext(e$7.LocalizationContext).l10n,B=function(Y){var he=function(ue){var le=l$7.exec(ue);if(!le)return null;var W=parseInt(le[1],10),be=c$7(le[2],1,12,1)-1,ce=c$7(le[3],1,31,1),Q=c$7(le[4],0,23,0),ie=c$7(le[5],0,59,0),ee=c$7(le[6],0,59,0),q=le[7]||"Z",K=c$7(le[8],0,23,0),ne=c$7(le[9],0,59,0);switch(q){case"-":Q+=K,ie+=ne;break;case"+":Q-=K,ie-=ne}return new Date(Date.UTC(W,be,ce,Q,ie,ee))}(Y);return he?"".concat(he.toLocaleDateString(),", ").concat(he.toLocaleTimeString()):""};return r$7.createElement("div",{className:"rpv-properties__modal"},r$7.createElement(a$7,{doc:$,render:function(Y){return r$7.createElement(r$7.Fragment,null,r$7.createElement("div",{className:"rpv-properties__modal-section"},r$7.createElement(i$7,{label:R&&R.properties?R.properties.fileName:"File name",value:Y.fileName||(le=H,W=le.split("/").pop(),W?W.split("#")[0].split("?")[0]:le)}),r$7.createElement(i$7,{label:R&&R.properties?R.properties.fileSize:"File size",value:(he=Y.length,ue=Math.floor(Math.log(he)/Math.log(1024)),"".concat((he/Math.pow(1024,ue)).toFixed(2)," ").concat(["B","kB","MB","GB","TB"][ue]))})),r$7.createElement(e$7.Separator,null),r$7.createElement("div",{className:"rpv-properties__modal-section"},r$7.createElement(i$7,{label:R&&R.properties?R.properties.title:"Title",value:Y.info.Title}),r$7.createElement(i$7,{label:R&&R.properties?R.properties.author:"Author",value:Y.info.Author}),r$7.createElement(i$7,{label:R&&R.properties?R.properties.subject:"Subject",value:Y.info.Subject}),r$7.createElement(i$7,{label:R&&R.properties?R.properties.keywords:"Keywords",value:Y.info.Keywords}),r$7.createElement(i$7,{label:R&&R.properties?R.properties.creator:"Creator",value:Y.info.Creator}),r$7.createElement(i$7,{label:R&&R.properties?R.properties.creationDate:"Creation date",value:B(Y.info.CreationDate)}),r$7.createElement(i$7,{label:R&&R.properties?R.properties.modificationDate:"Modification date",value:B(Y.info.ModDate)})),r$7.createElement(e$7.Separator,null),r$7.createElement("div",{className:"rpv-properties__modal-section"},r$7.createElement(i$7,{label:R&&R.properties?R.properties.pdfProducer:"PDF producer",value:Y.info.Producer}),r$7.createElement(i$7,{label:R&&R.properties?R.properties.pdfVersion:"PDF version",value:Y.info.PDFFormatVersion}),r$7.createElement(i$7,{label:R&&R.properties?R.properties.pageCount:"Page count",value:"".concat($.numPages)})));var he,ue,le,W}}),r$7.createElement("div",{className:"rpv-properties__modal-footer"},r$7.createElement(e$7.Button,{onClick:O},R&&R.properties?R.properties.close:"Close")))},s$5={left:0,top:8},u$7=function(A){var $=A.onClick,H=r$7.useContext(e$7.LocalizationContext).l10n,O=H&&H.properties?H.properties.showProperties:"Show properties";return r$7.createElement(e$7.Tooltip,{ariaControlsSuffix:"properties",position:e$7.Position.BottomCenter,target:r$7.createElement(e$7.MinimalButton,{ariaLabel:O,testId:"properties__button",onClick:$},r$7.createElement(n$7,null)),content:function(){return O},offset:s$5})},m$5=function(A){var $=A.children,H=A.store,O=function(Y){var he=r$7.useState(Y.get("doc")),ue=he[0],le=he[1],W=function(be){le(be)};return r$7.useEffect(function(){return Y.subscribe("doc",W),function(){Y.unsubscribe("doc",W)}},[]),{currentDoc:ue}}(H).currentDoc,R=H.get("fileName")||"",B=$||function(Y){return r$7.createElement(u$7,o$7({},Y))};return O?r$7.createElement(e$7.Modal,{ariaControlsSuffix:"properties",target:function(Y){return B({onClick:Y})},content:function(Y){return r$7.createElement(p$4,{doc:O,fileName:R,onToggle:Y})},closeOnClickOutside:!0,closeOnEscape:!0}):r$7.createElement(r$7.Fragment,null)},f$5=function(A){var $=A.onClick,H=r$7.useContext(e$7.LocalizationContext).l10n,O=H&&H.properties?H.properties.showProperties:"Show properties";return r$7.createElement(e$7.MenuItem,{icon:r$7.createElement(n$7,null),testId:"properties__menu",onClick:$},O)};properties_min.InfoIcon=n$7,properties_min.propertiesPlugin=function(){var A=r$7.useMemo(function(){return e$7.createStore({fileName:""})},[]),$=function(H){return r$7.createElement(m$5,o$7({},H,{store:A}))};return{onDocumentLoad:function(H){A.update("doc",H.doc)},onViewerStateChange:function(H){return A.update("fileName",H.file.name),H},ShowProperties:$,ShowPropertiesButton:function(){return r$7.createElement(m$5,{store:A})},ShowPropertiesMenuItem:function(H){return r$7.createElement($,null,function(O){return r$7.createElement(f$5,o$7({},O))})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$5.exports=properties_min;var libExports$7=lib$5.exports,lib$4={exports:{}},rotate_min={},t$6=libExports$h;function e$6(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(H){if(H!=="default"){var O=Object.getOwnPropertyDescriptor(A,H);Object.defineProperty($,H,O.get?O:{enumerable:!0,get:function(){return A[H]}})}}),$.default=A,Object.freeze($)}var r$6=e$6(reactExports),n$6=function(){return r$6.createElement(t$6.Icon,{ignoreDirection:!0,size:16},r$6.createElement("path",{d:`M3.434,10.537c0.141-0.438,0.316-0.864,0.523-1.274
            M3.069,14.425C3.023,14.053,3,13.679,3,13.305 c0-0.291,0.014-0.579,0.041-0.863
            M4.389,18.111c-0.341-0.539-0.623-1.112-0.843-1.711
            M7.163,20.9 c-0.543-0.345-1.048-0.747-1.506-1.2
            M10.98,22.248c-0.65-0.074-1.29-0.218-1.909-0.431
            M10,4.25h2 c4.987,0.015,9.017,4.069,9.003,9.055c-0.013,4.581-3.456,8.426-8.008,8.945
            M13.5,1.75L10,4.25l3.5,2.5`}))},o$6=function(){return r$6.createElement(t$6.Icon,{ignoreDirection:!0,size:16},r$6.createElement("path",{d:`M20.566,10.537c-0.141-0.438-0.316-0.864-0.523-1.274
            M20.931,14.425C20.977,14.053,21,13.679,21,13.305 c0-0.291-0.014-0.579-0.041-0.863
            M19.611,18.111c0.341-0.539,0.624-1.114,0.843-1.713
            M16.837,20.9 c0.543-0.345,1.048-0.747,1.506-1.2
            M13.02,22.248c0.65-0.074,1.29-0.218,1.909-0.431
            M14,4.25h-2 c-4.987,0.015-9.017,4.069-9.003,9.055c0.013,4.581,3.456,8.426,8.008,8.945
            M10.5,1.75l3.5,2.5l-3.5,2.5`}))},c$6=function(){return c$6=Object.assign||function(A){for(var $,H=1,O=arguments.length;H<O;H++)for(var R in $=arguments[H])Object.prototype.hasOwnProperty.call($,R)&&(A[R]=$[R]);return A},c$6.apply(this,arguments)},a$6={left:0,top:8},i$6=function(A){var $=A.direction,H=A.onClick,O=r$6.useContext(t$6.LocalizationContext).l10n,R=O&&O.rotate?O.rotate.rotateBackward:"Rotate counterclockwise",B=O&&O.rotate?O.rotate.rotateForward:"Rotate clockwise",Y=$===t$6.RotateDirection.Backward?R:B,he=$===t$6.RotateDirection.Backward?r$6.createElement(n$6,null):r$6.createElement(o$6,null);return r$6.createElement(t$6.Tooltip,{ariaControlsSuffix:"rotate",position:t$6.Position.BottomCenter,target:r$6.createElement(t$6.MinimalButton,{ariaLabel:Y,testId:$===t$6.RotateDirection.Backward?"rotate__backward-button":"rotate__forward-button",onClick:H},he),content:function(){return Y},offset:a$6})},u$6=function(A){var $=A.children,H=A.direction,O=A.store;return($||function(R){return r$6.createElement(i$6,{direction:R.direction,onClick:R.onClick})})({direction:H,onClick:function(){var R=O.get("rotate");R&&R(H)}})},l$6=function(A){var $=A.direction,H=A.onClick,O=r$6.useContext(t$6.LocalizationContext).l10n,R=O&&O.rotate?O.rotate.rotateBackward:"Rotate counterclockwise",B=O&&O.rotate?O.rotate.rotateForward:"Rotate clockwise",Y=$===t$6.RotateDirection.Backward?R:B,he=$===t$6.RotateDirection.Backward?r$6.createElement(n$6,null):r$6.createElement(o$6,null);return r$6.createElement(t$6.MenuItem,{icon:he,testId:$===t$6.RotateDirection.Backward?"rotate__backward-menu":"rotate__forward-menu",onClick:H},Y)},d$5=function(A){var $=A.children,H=A.store;return $({onRotatePage:function(O,R){var B=H.get("rotatePage");B&&B(O,R)}})};rotate_min.RotateBackwardIcon=n$6,rotate_min.RotateForwardIcon=o$6,rotate_min.rotatePlugin=function(){var A=r$6.useMemo(function(){return t$6.createStore()},[]),$=function(H){return r$6.createElement(u$6,c$6({},H,{store:A}))};return{install:function(H){A.update("rotate",H.rotate),A.update("rotatePage",H.rotatePage)},Rotate:$,RotateBackwardButton:function(){return r$6.createElement($,{direction:t$6.RotateDirection.Backward},function(H){return r$6.createElement(i$6,c$6({},H))})},RotateBackwardMenuItem:function(H){return r$6.createElement($,{direction:t$6.RotateDirection.Backward},function(O){return r$6.createElement(l$6,{direction:O.direction,onClick:function(){O.onClick(),H.onClick()}})})},RotateForwardButton:function(){return r$6.createElement($,{direction:t$6.RotateDirection.Forward},function(H){return r$6.createElement(i$6,c$6({},H))})},RotateForwardMenuItem:function(H){return r$6.createElement($,{direction:t$6.RotateDirection.Forward},function(O){return r$6.createElement(l$6,{direction:O.direction,onClick:function(){O.onClick(),H.onClick()}})})},RotatePage:function(H){return r$6.createElement(d$5,c$6({},H,{store:A}))}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$4.exports=rotate_min;var libExports$6=lib$4.exports,lib$3={exports:{}},scrollMode_min={},e$5=libExports$h;function o$5(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(H){if(H!=="default"){var O=Object.getOwnPropertyDescriptor(A,H);Object.defineProperty($,H,O.get?O:{enumerable:!0,get:function(){return A[H]}})}}),$.default=A,Object.freeze($)}var t$5=o$5(reactExports),l$5=function(){return t$5.createElement(e$5.Icon,{size:16},t$5.createElement("rect",{x:"0.5",y:"0.497",width:"22",height:"22",rx:"1",ry:"1"}),t$5.createElement("line",{x1:"0.5",y1:"6.497",x2:"22.5",y2:"6.497"}),t$5.createElement("line",{x1:"11.5",y1:"6.497",x2:"11.5",y2:"22.497"}))},c$5=function(){return t$5.createElement(e$5.Icon,{size:16},t$5.createElement("rect",{x:"0.5",y:"0.497",width:"22",height:"22",rx:"1",ry:"1"}),t$5.createElement("line",{x1:"11.5",y1:"0.497",x2:"11.5",y2:"22.497"}))},n$5=function(){return t$5.createElement(e$5.Icon,{size:16},t$5.createElement("path",{d:`M6.5,21.5c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z
            M14.5,21.5c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z
            M22.5,21.5 c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z`}))},r$5=function(){return t$5.createElement(e$5.Icon,{size:16},t$5.createElement("rect",{x:"0.5",y:"0.497",width:"22",height:"22",rx:"1",ry:"1"}))},i$5=function(){return i$5=Object.assign||function(A){for(var $,H=1,O=arguments.length;H<O;H++)for(var R in $=arguments[H])Object.prototype.hasOwnProperty.call($,R)&&(A[R]=$[R]);return A},i$5.apply(this,arguments)},a$5=function(A,$){A.get("switchScrollMode")($);var H=A.get("viewMode");$!==e$5.ScrollMode.Horizontal&&$!==e$5.ScrollMode.Wrapped||H===e$5.ViewMode.SinglePage||A.get("switchViewMode")(e$5.ViewMode.SinglePage)},d$4=function(){return t$5.createElement(e$5.Icon,{size:16},t$5.createElement("path",{d:`M23.5,5.5c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V5.5z
            M23.5,13.5c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V13.5z
            M23.5,21.5 c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V21.5z`}))},s$4=function(){return t$5.createElement(e$5.Icon,{size:16},t$5.createElement("path",{d:`M10.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z
            M23.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z
            M10.5,22.5 c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z
            M23.5,22.5c0,0.552-0.448,1-1,1 h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z`}))},u$5=function(A){var $=A.children,H=A.mode,O=A.onClick,R=t$5.useContext(e$5.LocalizationContext).l10n,B="",Y=t$5.createElement(d$4,null);switch(H){case e$5.ScrollMode.Horizontal:B=R&&R.scrollMode?R.scrollMode.horizontalScrolling:"Horizontal scrolling",Y=t$5.createElement(n$5,null);break;case e$5.ScrollMode.Page:B=R&&R.scrollMode?R.scrollMode.pageScrolling:"Page scrolling",Y=t$5.createElement(r$5,null);break;case e$5.ScrollMode.Wrapped:B=R&&R.scrollMode?R.scrollMode.wrappedScrolling:"Wrapped scrolling",Y=t$5.createElement(s$4,null);break;case e$5.ScrollMode.Vertical:default:B=R&&R.scrollMode?R.scrollMode.verticalScrolling:"Vertical scrolling",Y=t$5.createElement(d$4,null)}return $({icon:Y,label:B,onClick:O})},m$4={left:0,top:8},M$2=function(A){var $=A.isDisabled,H=A.isSelected,O=A.mode,R=A.onClick,B="";switch(O){case e$5.ScrollMode.Horizontal:B="scroll-mode__horizontal-button";break;case e$5.ScrollMode.Page:B="scroll-mode__page-button";break;case e$5.ScrollMode.Wrapped:B="scroll-mode__wrapped-button";break;case e$5.ScrollMode.Vertical:default:B="scroll-mode__vertical-button"}return t$5.createElement(u$5,{mode:O,onClick:R},function(Y){return t$5.createElement(e$5.Tooltip,{ariaControlsSuffix:"scroll-mode-switch",position:e$5.Position.BottomCenter,target:t$5.createElement(e$5.MinimalButton,{ariaLabel:Y.label,isDisabled:$,isSelected:H,testId:B,onClick:Y.onClick},Y.icon),content:function(){return Y.label},offset:m$4})})},f$4=function(A){var $=t$5.useState(A.get("scrollMode")||e$5.ScrollMode.Vertical),H=$[0],O=$[1],R=function(B){O(B)};return t$5.useEffect(function(){return A.subscribe("scrollMode",R),function(){A.unsubscribe("scrollMode",R)}},[]),{scrollMode:H}},w$1=function(A){var $=t$5.useState(A.get("viewMode")||e$5.ViewMode.SinglePage),H=$[0],O=$[1],R=function(B){O(B)};return t$5.useEffect(function(){return A.subscribe("viewMode",R),function(){A.unsubscribe("viewMode",R)}},[]),{viewMode:H}},S$3=function(A){var $=A.children,H=A.mode,O=A.store,R=w$1(O).viewMode,B=f$4(O).scrollMode===H,Y=(H===e$5.ScrollMode.Horizontal||H===e$5.ScrollMode.Wrapped)&&R!==e$5.ViewMode.SinglePage;return($||function(he){return t$5.createElement(M$2,{isDisabled:Y,isSelected:B,mode:he.mode,onClick:he.onClick})})({isDisabled:Y,isSelected:B,mode:H,onClick:function(){a$5(O,H)}})},g$3=function(A){var $=A.isDisabled,H=A.isSelected,O=A.mode,R=A.onClick,B="";switch(O){case e$5.ScrollMode.Horizontal:B="scroll-mode__horizontal-menu";break;case e$5.ScrollMode.Page:B="scroll-mode__page-menu";break;case e$5.ScrollMode.Wrapped:B="scroll-mode__wrapped-menu";break;case e$5.ScrollMode.Vertical:default:B="scroll-mode__vertical-menu"}return t$5.createElement(u$5,{mode:O,onClick:R},function(Y){return t$5.createElement(e$5.MenuItem,{checked:H,icon:Y.icon,isDisabled:$,testId:B,onClick:Y.onClick},Y.label)})},h$3=function(A,$){A.get("switchViewMode")($);var H=A.get("scrollMode");H!==e$5.ScrollMode.Horizontal&&H!==e$5.ScrollMode.Wrapped||$===e$5.ViewMode.SinglePage||A.get("switchScrollMode")(e$5.ScrollMode.Vertical)},b$3=function(A){var $=A.children,H=A.mode,O=A.onClick,R=t$5.useContext(e$5.LocalizationContext).l10n,B="",Y=t$5.createElement(r$5,null);switch(H){case e$5.ViewMode.DualPage:B=R&&R.scrollMode?R.scrollMode.dualPage:"Dual page",Y=t$5.createElement(c$5,null);break;case e$5.ViewMode.DualPageWithCover:B=R&&R.scrollMode?R.scrollMode.dualPageCover:"Dual page with cover",Y=t$5.createElement(l$5,null);break;case e$5.ViewMode.SinglePage:default:B=R&&R.scrollMode?R.scrollMode.singlePage:"Single page",Y=t$5.createElement(r$5,null)}return $({icon:Y,label:B,onClick:O})},p$3={left:0,top:8},v$3=function(A){var $=A.isDisabled,H=A.isSelected,O=A.mode,R=A.onClick,B="";switch(O){case e$5.ViewMode.DualPage:B="view-mode__dual-button";break;case e$5.ViewMode.DualPageWithCover:B="view-mode__dual-cover-button";break;case e$5.ViewMode.SinglePage:default:B="view-mode__single-button"}return t$5.createElement(b$3,{mode:O,onClick:R},function(Y){return t$5.createElement(e$5.Tooltip,{ariaControlsSuffix:"view-mode-switch",position:e$5.Position.BottomCenter,target:t$5.createElement(e$5.MinimalButton,{ariaLabel:Y.label,isDisabled:$,isSelected:H,testId:B,onClick:Y.onClick},Y.icon),content:function(){return Y.label},offset:p$3})})},k$2=function(A){var $=A.children,H=A.mode,O=A.store,R=w$1(O).viewMode,B=f$4(O).scrollMode,Y=R===H,he=(B===e$5.ScrollMode.Horizontal||B===e$5.ScrollMode.Wrapped)&&H!==e$5.ViewMode.SinglePage;return($||function(ue){return t$5.createElement(v$3,{isDisabled:he,isSelected:Y,mode:ue.mode,onClick:ue.onClick})})({isDisabled:he,isSelected:Y,mode:H,onClick:function(){h$3(O,H)}})},C$2=function(A){var $=A.isDisabled,H=A.isSelected,O=A.mode,R=A.onClick,B="";switch(O){case e$5.ViewMode.DualPage:B="view-mode__dual-menu";break;case e$5.ViewMode.DualPageWithCover:B="view-mode__dual-cover-menu";break;case e$5.ViewMode.SinglePage:default:B="view-mode__single-menu"}return t$5.createElement(b$3,{mode:O,onClick:R},function(Y){return t$5.createElement(e$5.MenuItem,{checked:H,icon:Y.icon,isDisabled:$,testId:B,onClick:Y.onClick},Y.label)})};scrollMode_min.DualPageCoverViewModeIcon=l$5,scrollMode_min.DualPageViewModeIcon=c$5,scrollMode_min.HorizontalScrollingIcon=n$5,scrollMode_min.PageScrollingIcon=r$5,scrollMode_min.VerticalScrollingIcon=d$4,scrollMode_min.WrappedScrollingIcon=s$4,scrollMode_min.scrollModePlugin=function(){var A=t$5.useMemo(function(){return e$5.createStore({scrollMode:e$5.ScrollMode.Vertical,viewMode:e$5.ViewMode.SinglePage,switchScrollMode:function(){},switchViewMode:function(){}})},[]),$=function(O){return t$5.createElement(S$3,i$5({},O,{store:A}))},H=function(O){return t$5.createElement(k$2,i$5({},O,{store:A}))};return{install:function(O){A.update("switchScrollMode",O.switchScrollMode),A.update("switchViewMode",O.switchViewMode)},onViewerStateChange:function(O){return A.update("scrollMode",O.scrollMode),A.update("viewMode",O.viewMode),O},switchScrollMode:function(O){a$5(A,O)},switchViewMode:function(O){h$3(A,O)},SwitchScrollMode:$,SwitchScrollModeButton:function(O){return t$5.createElement($,{mode:O.mode},function(R){return t$5.createElement(M$2,{isDisabled:R.isDisabled,isSelected:R.isSelected,mode:R.mode,onClick:function(){R.onClick()}})})},SwitchScrollModeMenuItem:function(O){return t$5.createElement($,{mode:O.mode},function(R){return t$5.createElement(g$3,{isDisabled:R.isDisabled,isSelected:R.isSelected,mode:R.mode,onClick:function(){R.onClick(),O.onClick()}})})},SwitchViewMode:H,SwitchViewModeButton:function(O){return t$5.createElement(H,{mode:O.mode},function(R){return t$5.createElement(v$3,{isDisabled:R.isDisabled,isSelected:R.isSelected,mode:R.mode,onClick:function(){R.onClick()}})})},SwitchViewModeMenuItem:function(O){return t$5.createElement(H,{mode:O.mode},function(R){return t$5.createElement(C$2,{isDisabled:R.isDisabled,isSelected:R.isSelected,mode:R.mode,onClick:function(){R.onClick(),O.onClick()}})})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$3.exports=scrollMode_min;var libExports$5=lib$3.exports,lib$2={exports:{}},search_min={},e$4=libExports$h;function t$4(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(H){if(H!=="default"){var O=Object.getOwnPropertyDescriptor(A,H);Object.defineProperty($,H,O.get?O:{enumerable:!0,get:function(){return A[H]}})}}),$.default=A,Object.freeze($)}var r$4=t$4(reactExports),n$4=function(){return r$4.createElement(e$4.Icon,{size:16},r$4.createElement("path",{d:`M0.541,5.627L11.666,18.2c0.183,0.207,0.499,0.226,0.706,0.043c0.015-0.014,0.03-0.028,0.043-0.043
            L23.541,5.627`}))},o$4=function(){return r$4.createElement(e$4.Icon,{size:16},r$4.createElement("path",{d:`M23.535,18.373L12.409,5.8c-0.183-0.207-0.499-0.226-0.706-0.043C11.688,5.77,11.674,5.785,11.66,5.8
            L0.535,18.373`}))},a$4=function(){return r$4.createElement(e$4.Icon,{ignoreDirection:!0,size:16},r$4.createElement("path",{d:`M10.5,0.5c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.5,10.5,0.5z
            M23.5,23.5
            l-5.929-5.929`}))},c$4=function(){return c$4=Object.assign||function(A){for(var $,H=1,O=arguments.length;H<O;H++)for(var R in $=arguments[H])Object.prototype.hasOwnProperty.call($,R)&&(A[R]=$[R]);return A},c$4.apply(this,arguments)},u$4={keyword:"",regExp:new RegExp(" "),wholeWords:!1},i$4=function(A){return{left:"".concat(A.left,"%"),top:"".concat(A.top,"%"),height:"".concat(A.height,"%"),width:"".concat(A.width,"%")}},s$3=function(A){var $=A.index,H=A.area,O=A.onHighlightKeyword,R=r$4.useRef();return e$4.useIsomorphicLayoutEffect(function(){var B=R.current;O&&B&&O({highlightEle:B,keyword:H.keyword})},[]),r$4.createElement("div",{className:"rpv-search__highlight","data-index":$,ref:R,style:i$4(H),title:H.keywordStr.trim()})},l$4=function(A){var $=A.parentNode;$&&$.removeChild(A)},h$2=function(A){var $=A.parentNode;if($){var H=document.createRange();H.selectNodeContents(A),function(O,R){l$4(O);var B=R.parentNode;B&&B.insertBefore(O,R),l$4(R)}(H.extractContents(),A),$.normalize()}},d$3=function(A,$){return A.top<$.top?-1:A.top>$.top?1:A.left<$.left?-1:A.left>$.left?1:0},f$3=function(A){var $=A.numPages,H=A.pageIndex,O=A.renderHighlights,R=A.store,B=A.onHighlightKeyword,Y=r$4.useRef(),he=r$4.useCallback(function(De){return r$4.createElement(r$4.Fragment,null,De.highlightAreas.map(function(Me,Ne){return r$4.createElement(s$3,{index:Ne,key:Ne,area:Me,onHighlightKeyword:B})}))},[]),ue=O||he,le=r$4.useState(R.get("matchPosition")),W=le[0],be=le[1],ce=r$4.useState(R.get("keyword")||[u$4]),Q=ce[0],ie=ce[1],ee=r$4.useState({pageIndex:H,scale:1,status:e$4.LayerRenderStatus.PreRender}),q=ee[0],K=ee[1],ne=r$4.useRef(null),fe=r$4.useRef([]),de=r$4.useState([]),te=de[0],se=de[1],re=function(){return!0},ae=r$4.useCallback(function(){return R.get("targetPageFilter")||re},[R.get("targetPageFilter")]),oe=function(De){var Me=fe.current;if(Me.length===0)return[];var Ne=[],Ie=[].slice.call(De.querySelectorAll(".rpv-core__text-layer-text")),qe=Me.map(function(Se){return Se.char}).join("");return Q.forEach(function(Se){var Te=Se.keyword;if(Te.trim()){for(var He,_e=Se.regExp.flags.indexOf("g")===-1?new RegExp(Se.regExp,"".concat(Se.regExp.flags,"g")):Se.regExp,G=[];(He=_e.exec(qe))!==null;)G.push({keyword:_e,startIndex:He.index,endIndex:_e.lastIndex});G.map(function(X){return{keyword:X.keyword,indexes:Me.slice(X.startIndex,X.endIndex)}}).forEach(function(X){var ge=X.indexes.reduce(function(Pe,Ae){return Pe[Ae.spanIndex]=(Pe[Ae.spanIndex]||[]).concat([Ae]),Pe},{});Object.values(ge).forEach(function(Pe){if(Pe.length!==1||Pe[0].char.trim()!==""){var Ae=Se.wholeWords?Pe.slice(1,-1):Pe,ke=function(Oe,Qe,ot,st,ut){var dt=document.createRange(),mt=st.firstChild;if(!mt||mt.nodeType!==Node.TEXT_NODE)return null;var Ge=mt.textContent.length,Xe=ut[0].charIndexInSpan,me=ut.length===1?Xe:ut[ut.length-1].charIndexInSpan;if(Xe>Ge||me+1>Ge)return null;dt.setStart(mt,Xe),dt.setEnd(mt,me+1);var ye=document.createElement("span");dt.surroundContents(ye);var je=ye.getBoundingClientRect(),Ke=ot.getBoundingClientRect(),nt=Ke.height,pt=Ke.width,ht=100*(je.left-Ke.left)/pt,We=100*(je.top-Ke.top)/nt,wt=100*je.height/nt,St=100*je.width/pt;return h$2(ye),{keyword:Qe,keywordStr:Oe,numPages:$,pageIndex:H,left:ht,top:We,height:wt,width:St,pageHeight:nt,pageWidth:pt}}(Te,X.keyword,De,Ie[Ae[0].spanIndex],Ae);ke&&Ne.push(ke)}})})}}),Ne.sort(d$3)},Ee=function(De){De&&De.length>0&&ie(De)},J=function(De){return be(De)},ve=function(De){if(De.has(H)){var Me=De.get(H);Me&&K({ele:Me.ele,pageIndex:H,scale:Me.scale,status:Me.status})}},Ce=function(){return Q.length===0||Q.length===1&&Q[0].keyword.trim()===""};return r$4.useEffect(function(){if(!Ce()&&q.status===e$4.LayerRenderStatus.DidRender&&!fe.current.length){var De=q.ele,Me=[].slice.call(De.querySelectorAll(".rpv-core__text-layer-text")).map(function(Ne){return Ne.textContent}).reduce(function(Ne,Ie,qe){return Ne.concat(Ie.split("").map(function(Se,Te){return{char:Se,charIndexInSpan:Te,spanIndex:qe}}))},[{char:"",charIndexInSpan:0,spanIndex:0}]).slice(1);fe.current=Me}},[Q,q.status]),r$4.useEffect(function(){if(!Ce()&&q.ele&&q.status===e$4.LayerRenderStatus.DidRender&&ae()({pageIndex:H,numPages:$})){var De=q.ele,Me=oe(De);se(Me)}},[Q,W,q.status,fe.current]),r$4.useEffect(function(){Ce()&&q.ele&&q.status===e$4.LayerRenderStatus.DidRender&&se([])},[Q,q.status]),r$4.useEffect(function(){if(te.length!==0){var De=Y.current;if(W.pageIndex===H&&De&&q.status===e$4.LayerRenderStatus.DidRender){var Me=De.querySelector('.rpv-search__highlight[data-index="'.concat(W.matchIndex,'"]'));if(Me){var Ne=function(Te,He){for(var _e=Te.offsetTop,G=Te.offsetLeft,X=Te.parentElement;X&&X!==He;)_e+=X.offsetTop,G+=X.offsetLeft,X=X.parentElement;return{left:G,top:_e}}(Me,De),Ie=Ne.left,qe=Ne.top,Se=R.get("jumpToDestination");Se&&(Se({pageIndex:H,bottomOffset:(De.getBoundingClientRect().height-qe)/q.scale,leftOffset:Ie/q.scale,scaleTo:q.scale}),ne.current&&ne.current.classList.remove("rpv-search__highlight--current"),ne.current=Me,Me.classList.add("rpv-search__highlight--current"))}}}},[te,W]),r$4.useEffect(function(){return R.subscribe("keyword",Ee),R.subscribe("matchPosition",J),R.subscribe("renderStatus",ve),function(){R.unsubscribe("keyword",Ee),R.unsubscribe("matchPosition",J),R.unsubscribe("renderStatus",ve)}},[]),r$4.createElement("div",{className:"rpv-search__highlights","data-testid":"search__highlights-".concat(H),ref:Y},ue({getCssProperties:i$4,highlightAreas:te}))},p$2=function(A){var $,H=A.wholeWords?" ".concat(A.keyword," "):A.keyword,O=A.matchCase?"g":"gi";return{keyword:A.keyword,regExp:new RegExp(($=H,$.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")),O),wholeWords:A.wholeWords||!1}},g$2=function(A,$,H){return A instanceof RegExp?{keyword:A.source,regExp:A,wholeWords:H||!1}:typeof A=="string"?A===""?u$4:p$2({keyword:A,matchCase:$||!1,wholeWords:H||!1}):($!==void 0&&(A.matchCase=$),H!==void 0&&(A.wholeWords=H),p$2(A))},m$3=function(A){var $,H=A.get("initialKeyword"),O=r$4.useMemo(function(){if(H&&H.length===1){var J=g$2(H[0]);return{matchCase:J.regExp.flags.indexOf("i")===-1,wholeWords:J.wholeWords}}return{matchCase:!1,wholeWords:!1}},[]),R=function(J){var ve=r$4.useRef(J.get("doc")),Ce=function(De){ve.current=De};return r$4.useEffect(function(){return J.subscribe("doc",Ce),function(){J.unsubscribe("doc",Ce)}},[]),ve}(A),B=r$4.useState(H),Y=B[0],he=B[1],ue=r$4.useState([]),le=ue[0],W=ue[1],be=r$4.useState(0),ce=be[0],Q=be[1],ie=r$4.useState(O.matchCase),ee=ie[0],q=ie[1],K=r$4.useRef([]),ne=r$4.useState(O.wholeWords),fe=ne[0],de=ne[1],te=function(){return!0},se=r$4.useCallback(function(){return A.get("targetPageFilter")||te},[A.get("targetPageFilter")]),re=function(J){var ve=le.length;if(Y.length===0||ve===0)return null;var Ce=J===ve+1?1:Math.max(1,Math.min(ve,J));return Q(Ce),oe(le[Ce-1])},ae=function(J){return he(J===""?[]:[J])},oe=function(J){var ve=A.get("jumpToPage");return ve&&ve(J.pageIndex),A.update("matchPosition",{matchIndex:J.matchIndex,pageIndex:J.pageIndex}),J},Ee=function(J,ve,Ce){var De=R.current;if(!De)return Promise.resolve([]);var Me=De.numPages,Ne=J.map(function(Ie){return g$2(Ie,ve,Ce)});return A.update("keyword",Ne),Q(0),W([]),new Promise(function(Ie,qe){var Se=K.current.length===0?function(){var Te=R.current;if(!Te)return Promise.resolve([]);var He=Array(Te.numPages).fill(0).map(function(_e,G){return e$4.getPage(Te,G).then(function(X){return X.getTextContent()}).then(function(X){var ge=X.items.map(function(Pe){return Pe.str||""}).join("");return Promise.resolve({pageContent:ge,pageIndex:G})})});return Promise.all(He).then(function(_e){return _e.sort(function(G,X){return G.pageIndex-X.pageIndex}),Promise.resolve(_e.map(function(G){return G.pageContent}))})}().then(function(Te){return K.current=Te,Promise.resolve(Te)}):Promise.resolve(K.current);Se.then(function(Te){var He=[];Te.forEach(function(_e,G){se()({pageIndex:G,numPages:Me})&&Ne.forEach(function(X){for(var ge,Pe=0;(ge=X.regExp.exec(_e))!==null;)He.push({keyword:X.regExp,matchIndex:Pe,pageIndex:G,pageText:_e,startIndex:ge.index,endIndex:X.regExp.lastIndex}),Pe++})}),W(He),He.length>0&&(Q(1),oe(He[0])),Ie(He)})})};return r$4.useEffect(function(){K.current=[]},[R.current]),{clearKeyword:function(){A.update("keyword",[u$4]),ae(""),Q(0),W([]),q(!1),de(!1)},changeMatchCase:function(J){q(J),Y.length>0&&Ee(Y,J,fe)},changeWholeWords:function(J){de(J),Y.length>0&&Ee(Y,ee,J)},currentMatch:ce,jumpToMatch:re,jumpToNextMatch:function(){return re(ce+1)},jumpToPreviousMatch:function(){return re(ce-1)},keywords:Y,matchCase:ee,numberOfMatches:le.length,wholeWords:fe,search:function(){return Ee(Y,ee,fe)},searchFor:Ee,setKeywords:he,keyword:Y.length===0?"":($=Y[0],$ instanceof RegExp?$.source:typeof $=="string"?$:$.keyword),setKeyword:ae,setTargetPages:function(J){A.update("targetPageFilter",J)}}},v$2=function(A){var $=A.children,H=A.store,O=m$3(H),R=r$4.useState(!1),B=R[0],Y=R[1],he=function(ue){return Y(!0)};return r$4.useEffect(function(){return H.subscribe("doc",he),function(){H.unsubscribe("doc",he)}},[]),$(c$4(c$4({},O),{isDocumentLoaded:B}))},x=function(A){var $=A.containerRef,H=A.store,O=r$4.useRef(!1),R=function(){O.current=!0},B=function(){O.current=!1},Y=function(he){var ue=$.current;ue&&(he.shiftKey||he.altKey||he.key!=="f"||(e$4.isMac()?he.metaKey&&!he.ctrlKey:he.ctrlKey)&&(O.current||document.activeElement&&ue.contains(document.activeElement))&&(he.preventDefault(),H.update("areShortcutsPressed",!0)))};return r$4.useEffect(function(){var he=$.current;if(he)return document.addEventListener("keydown",Y),he.addEventListener("mouseenter",R),he.addEventListener("mouseleave",B),function(){document.removeEventListener("keydown",Y),he.removeEventListener("mouseenter",R),he.removeEventListener("mouseleave",B)}},[$.current]),r$4.createElement(r$4.Fragment,null)},y={left:0,top:8},E$2=function(A){var $=A.store,H=A.onToggle,O=r$4.useContext(e$4.LocalizationContext).l10n,R=r$4.useContext(e$4.ThemeContext).direction,B=r$4.useState(!1),Y=B[0],he=B[1],ue=r$4.useState(!1),le=ue[0],W=ue[1],be=R===e$4.TextDirection.RightToLeft,ce=m$3($),Q=ce.clearKeyword,ie=ce.changeMatchCase,ee=ce.changeWholeWords,q=ce.currentMatch,K=ce.jumpToNextMatch,ne=ce.jumpToPreviousMatch,fe=ce.keyword,de=ce.matchCase,te=ce.numberOfMatches,se=ce.wholeWords,re=ce.search,ae=ce.setKeyword,oe=function(De){he(!0),re().then(function(Me){he(!1),W(!0),De&&De()})};r$4.useEffect(function(){var De=$.get("initialKeyword");De&&De.length===1&&fe&&oe(function(){$.update("initialKeyword",[])})},[]);var Ee=O&&O.search?O.search.enterToSearch:"Enter to search",J=O&&O.search?O.search.previousMatch:"Previous match",ve=O&&O.search?O.search.nextMatch:"Next match",Ce=O&&O.search?O.search.close:"Close";return r$4.createElement("div",{className:"rpv-search__popover"},r$4.createElement("div",{className:"rpv-search__popover-input-counter"},r$4.createElement(e$4.TextBox,{ariaLabel:Ee,autoFocus:!0,placeholder:Ee,type:"text",value:fe,onChange:function(De){W(!1),ae(De)},onKeyDown:function(De){De.key==="Enter"&&fe&&(le?K():oe())}}),r$4.createElement("div",{className:e$4.classNames({"rpv-search__popover-counter":!0,"rpv-search__popover-counter--ltr":!be,"rpv-search__popover-counter--rtl":be})},Y&&r$4.createElement(e$4.Spinner,{testId:"search__popover-searching",size:"1rem"}),!Y&&r$4.createElement("span",{"data-testid":"search__popover-num-matches"},q,"/",te))),r$4.createElement("label",{className:"rpv-search__popover-label"},r$4.createElement("input",{className:"rpv-search__popover-label-checkbox","data-testid":"search__popover-match-case",checked:de,type:"checkbox",onChange:function(De){W(!1),ie(De.target.checked)}})," ",O&&O.search?O.search.matchCase:"Match case"),r$4.createElement("label",{className:"rpv-search__popover-label"},r$4.createElement("input",{className:"rpv-search__popover-label-checkbox",checked:se,"data-testid":"search__popover-whole-words",type:"checkbox",onChange:function(De){W(!1),ee(De.target.checked)}})," ",O&&O.search?O.search.wholeWords:"Whole words"),r$4.createElement("div",{className:"rpv-search__popover-footer"},r$4.createElement("div",{className:"rpv-search__popover-footer-item"},r$4.createElement(e$4.Tooltip,{ariaControlsSuffix:"search-previous-match",position:be?e$4.Position.BottomRight:e$4.Position.BottomCenter,target:r$4.createElement(e$4.MinimalButton,{ariaLabel:J,isDisabled:q<=1,onClick:ne},r$4.createElement(o$4,null)),content:function(){return J},offset:y})),r$4.createElement("div",{className:"rpv-search__popover-footer-item"},r$4.createElement(e$4.Tooltip,{ariaControlsSuffix:"search-next-match",position:e$4.Position.BottomCenter,target:r$4.createElement(e$4.MinimalButton,{ariaLabel:ve,isDisabled:q>te-1,onClick:K},r$4.createElement(n$4,null)),content:function(){return ve},offset:y})),r$4.createElement("div",{className:e$4.classNames({"rpv-search__popover-footer-button":!0,"rpv-search__popover-footer-button--ltr":!be,"rpv-search__popover-footer-button--rtl":be})},r$4.createElement(e$4.Button,{onClick:function(){H(),Q()}},Ce))))},w=function(A){var $=A.children,H=A.onClick,O=r$4.useContext(e$4.LocalizationContext).l10n,R=O&&O.search?O.search.search:"Search";return $({icon:r$4.createElement(a$4,null),label:R,onClick:H})},b$2={left:0,top:8},k$1=function(A){var $=A.enableShortcuts,H=A.store,O=A.onClick,R=$?e$4.isMac()?"Meta+F":"Ctrl+F":"",B=function(Y){Y&&O()};return r$4.useEffect(function(){return H.subscribe("areShortcutsPressed",B),function(){H.unsubscribe("areShortcutsPressed",B)}},[]),r$4.createElement(w,{onClick:O},function(Y){return r$4.createElement(e$4.Tooltip,{ariaControlsSuffix:"search-popover",position:e$4.Position.BottomCenter,target:r$4.createElement(e$4.MinimalButton,{ariaKeyShortcuts:R,ariaLabel:Y.label,testId:"search__popover-button",onClick:O},Y.icon),content:function(){return Y.label},offset:b$2})})},S$2={left:0,top:8},C$1=function(A){var $=A.children,H=A.enableShortcuts,O=A.store,R=r$4.useContext(e$4.ThemeContext).direction===e$4.TextDirection.RightToLeft?e$4.Position.BottomRight:e$4.Position.BottomLeft,B=$||function(Y){return r$4.createElement(k$1,c$4({enableShortcuts:H,store:O},Y))};return r$4.createElement(e$4.Popover,{ariaControlsSuffix:"search",lockScroll:!1,position:R,target:function(Y){return B({onClick:Y})},content:function(Y){return r$4.createElement(E$2,{store:O,onToggle:Y})},offset:S$2,closeOnClickOutside:!1,closeOnEscape:!0})},P$1=function(A){return Array.isArray(A)?A.map(function($){return g$2($)}):[g$2(A)]};search_min.NextIcon=n$4,search_min.PreviousIcon=o$4,search_min.SearchIcon=a$4,search_min.searchPlugin=function(A){var $=r$4.useMemo(function(){return Object.assign({},{enableShortcuts:!0,onHighlightKeyword:function(){}},A)},[]),H=r$4.useMemo(function(){return e$4.createStore({initialKeyword:A&&A.keyword?Array.isArray(A.keyword)?A.keyword:[A.keyword]:[],keyword:A&&A.keyword?P$1(A.keyword):[u$4],matchPosition:{matchIndex:-1,pageIndex:-1},renderStatus:new Map})},[]),O=m$3(H),R=O.clearKeyword,B=O.jumpToMatch,Y=O.jumpToNextMatch,he=O.jumpToPreviousMatch,ue=O.searchFor,le=O.setKeywords,W=O.setTargetPages,be=function(ce){return r$4.createElement(C$1,c$4({enableShortcuts:$.enableShortcuts},ce,{store:H}))};return{install:function(ce){var Q=A&&A.keyword?Array.isArray(A.keyword)?A.keyword:[A.keyword]:[],ie=A&&A.keyword?P$1(A.keyword):[u$4];H.update("initialKeyword",Q),H.update("jumpToDestination",ce.jumpToDestination),H.update("jumpToPage",ce.jumpToPage),H.update("keyword",ie)},renderPageLayer:function(ce){return r$4.createElement(f$3,{key:ce.pageIndex,numPages:ce.doc.numPages,pageIndex:ce.pageIndex,renderHighlights:A==null?void 0:A.renderHighlights,store:H,onHighlightKeyword:$.onHighlightKeyword})},renderViewer:function(ce){var Q=ce.slot;return Q.subSlot&&(Q.subSlot.children=r$4.createElement(r$4.Fragment,null,$.enableShortcuts&&r$4.createElement(x,{containerRef:ce.containerRef,store:H}),Q.subSlot.children)),Q},uninstall:function(ce){var Q=H.get("renderStatus");Q&&Q.clear()},onDocumentLoad:function(ce){H.update("doc",ce.doc)},onTextLayerRender:function(ce){var Q=H.get("renderStatus");Q&&(Q=Q.set(ce.pageIndex,ce),H.update("renderStatus",Q))},Search:function(ce){return r$4.createElement(v$2,c$4({},ce,{store:H}))},ShowSearchPopover:be,ShowSearchPopoverButton:function(){return r$4.createElement(be,null,function(ce){return r$4.createElement(k$1,c$4({enableShortcuts:$.enableShortcuts,store:H},ce))})},clearHighlights:function(){R()},highlight:function(ce){var Q=Array.isArray(ce)?ce:[ce];return le(Q),ue(Q)},jumpToMatch:B,jumpToNextMatch:Y,jumpToPreviousMatch:he,setTargetPages:W}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$2.exports=search_min;var libExports$4=lib$2.exports,lib$1={exports:{}},theme_min={},e$3=libExports$h;function t$3(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(H){if(H!=="default"){var O=Object.getOwnPropertyDescriptor(A,H);Object.defineProperty($,H,O.get?O:{enumerable:!0,get:function(){return A[H]}})}}),$.default=A,Object.freeze($)}var n$3=t$3(reactExports),r$3=function(){return n$3.createElement(e$3.Icon,{size:16},n$3.createElement("path",{d:"M19.5,15.106l2.4-2.4a1,1,0,0,0,0-1.414l-2.4-2.4V5.5a1,1,0,0,0-1-1H15.106l-2.4-2.4a1,1,0,0,0-1.414,0l-2.4,2.4H5.5a1,1,0,0,0-1,1V8.894l-2.4,2.4a1,1,0,0,0,0,1.414l2.4,2.4V18.5a1,1,0,0,0,1,1H8.894l2.4,2.4a1,1,0,0,0,1.414,0l2.4-2.4H18.5a1,1,0,0,0,1-1Z"}),n$3.createElement("path",{d:"M10,6.349a6,6,0,0,1,0,11.3,6,6,0,1,0,0-11.3Z"}))},c$3=function(){return n$3.createElement(e$3.Icon,{size:16},n$3.createElement("path",{d:"M19.491,15.106l2.4-2.4a1,1,0,0,0,0-1.414l-2.4-2.4V5.5a1,1,0,0,0-1-1H15.1L12.7,2.1a1,1,0,0,0-1.414,0l-2.4,2.4H5.491a1,1,0,0,0-1,1V8.894l-2.4,2.4a1,1,0,0,0,0,1.414l2.4,2.4V18.5a1,1,0,0,0,1,1H8.885l2.4,2.4a1,1,0,0,0,1.414,0l2.4-2.4h3.394a1,1,0,0,0,1-1Z"}),n$3.createElement("path",{d:"M11.491,6c4,0,6,2.686,6,6s-2,6-6,6Z"}))},o$3=function(){return o$3=Object.assign||function(A){for(var $,H=1,O=arguments.length;H<O;H++)for(var R in $=arguments[H])Object.prototype.hasOwnProperty.call($,R)&&(A[R]=$[R]);return A},o$3.apply(this,arguments)},a$3={left:0,top:8},i$3=function(A){var $=A.onClick,H=n$3.useContext(e$3.ThemeContext),O=n$3.useContext(e$3.LocalizationContext).l10n,R=H.currentTheme==="dark",B=O&&O.theme?R?O.theme.switchLightTheme:O.theme.switchDarkTheme:R?"Switch to the light theme":"Switch to the dark theme";return n$3.createElement(e$3.Tooltip,{ariaControlsSuffix:"theme-switch",position:e$3.Position.BottomCenter,target:n$3.createElement(e$3.MinimalButton,{ariaLabel:B,testId:"theme__switch-button",onClick:$},R?n$3.createElement(c$3,null):n$3.createElement(r$3,null)),content:function(){return B},offset:a$3})},l$3=function(A){var $=A.children,H=n$3.useContext(e$3.ThemeContext);return($||function(O){return n$3.createElement(i$3,{onClick:O.onClick})})({onClick:function(){return H.setCurrentTheme(H.currentTheme==="dark"?"light":"dark")}})},u$3=function(A){var $=A.onClick,H=n$3.useContext(e$3.ThemeContext),O=n$3.useContext(e$3.LocalizationContext).l10n,R=H.currentTheme==="dark",B=O&&O.theme?R?O.theme.switchLightTheme:O.theme.switchDarkTheme:R?"Switch to the light theme":"Switch to the dark theme";return n$3.createElement(e$3.MenuItem,{icon:R?n$3.createElement(c$3,null):n$3.createElement(r$3,null),testId:"theme__switch-menu",onClick:$},B)};theme_min.DarkIcon=r$3,theme_min.LightIcon=c$3,theme_min.themePlugin=function(){var A=function($){return n$3.createElement(l$3,o$3({},$))};return{SwitchTheme:A,SwitchThemeButton:function(){return n$3.createElement(A,null,function($){return n$3.createElement(i$3,o$3({},$))})},SwitchThemeMenuItem:function($){return n$3.createElement(A,null,function(H){return n$3.createElement(u$3,{onClick:function(){H.onClick(),$.onClick()}})})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$1.exports=theme_min;var libExports$3=lib$1.exports,lib={exports:{}},zoom_min={},e$2=libExports$h;function t$2(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(H){if(H!=="default"){var O=Object.getOwnPropertyDescriptor(A,H);Object.defineProperty($,H,O.get?O:{enumerable:!0,get:function(){return A[H]}})}}),$.default=A,Object.freeze($)}var n$2=t$2(reactExports),o$2=function(){return n$2.createElement(e$2.Icon,{ignoreDirection:!0,size:16},n$2.createElement("path",{d:`M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z
            M23.5,23.499
            l-5.929-5.929
            M5.5,10.499h10
            M10.5,5.499v10`}))},r$2=function(){return n$2.createElement(e$2.Icon,{ignoreDirection:!0,size:16},n$2.createElement("path",{d:`M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z
            M23.5,23.499
            l-5.929-5.929
            M5.5,10.499h10`}))},c$2=function(){return c$2=Object.assign||function(A){for(var $,H=1,O=arguments.length;H<O;H++)for(var R in $=arguments[H])Object.prototype.hasOwnProperty.call($,R)&&(A[R]=$[R]);return A},c$2.apply(this,arguments)},a$2=function(A){var $=n$2.useState(A.get("scale")||0),H=$[0],O=$[1],R=function(B){O(B)};return n$2.useEffect(function(){return A.subscribe("scale",R),function(){A.unsubscribe("scale",R)}},[]),{scale:H}},u$2=function(A){var $=A.children,H=A.store;return($||function(O){return n$2.createElement(n$2.Fragment,null,"".concat(Math.round(100*O.scale),"%"))})({scale:a$2(H).scale})},l$2={passive:!1},i$2=null,s$2=function(A){var $=A.pagesContainerRef,H=A.store,O=e$2.useDebounceCallback(function(B){var Y=H.get("zoom");Y&&Y(B)},40),R=function(B){if(B.ctrlKey){B.preventDefault();var Y=B.target.getBoundingClientRect(),he=1-B.deltaY/100,ue=B.clientX-Y.left,le=B.clientY-Y.top,W=H.get("scale"),be=(i$2||(i$2=document.createElementNS("http://www.w3.org/2000/svg","svg"))).createSVGMatrix().translate(ue,le).scale(he).translate(-ue,-le).scale(W);O(be.a)}};return e$2.useIsomorphicLayoutEffect(function(){var B=$.current;if(B)return B.addEventListener("wheel",R,l$2),function(){B.removeEventListener("wheel",R)}},[]),n$2.createElement(n$2.Fragment,null)},m$2=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],f$2=function(A){return m$2.find(function($){return $>A})||A},v$1=function(A){var $=m$2.findIndex(function(H){return H>=A});return $===-1||$===0?A:m$2[$-1]},p$1=function(A){var $=A.containerRef,H=A.store,O=function(R){if(!R.shiftKey&&!R.altKey&&(e$2.isMac()?R.metaKey:R.ctrlKey)){var B=$.current;if(B&&document.activeElement&&B.contains(document.activeElement)){var Y=H.get("zoom");if(Y){var he=H.get("scale")||1,ue=1;switch(R.key){case"-":ue=v$1(he);break;case"=":ue=f$2(he);break;case"0":ue=1;break;default:ue=he}ue!==he&&(R.preventDefault(),Y(ue))}}}};return n$2.useEffect(function(){if($.current)return document.addEventListener("keydown",O),function(){document.removeEventListener("keydown",O)}},[$.current]),n$2.createElement(n$2.Fragment,null)},z=[.5,.75,1,1.25,1.5,2,3,4],E$1={left:0,top:8},d$2=function(A){var $=A.levels,H=$===void 0?z:$,O=A.scale,R=A.onZoom,B=n$2.useContext(e$2.LocalizationContext).l10n,Y=n$2.useContext(e$2.ThemeContext).direction===e$2.TextDirection.RightToLeft,he=B&&B.zoom?B.zoom.zoomDocument:"Zoom document";return n$2.createElement(e$2.Popover,{ariaControlsSuffix:"zoom",ariaHasPopup:"menu",position:e$2.Position.BottomCenter,target:function(ue){return n$2.createElement(e$2.MinimalButton,{ariaLabel:he,testId:"zoom__popover-target",onClick:function(){ue()}},n$2.createElement("span",{className:"rpv-zoom__popover-target"},n$2.createElement("span",{"data-testid":"zoom__popover-target-scale",className:e$2.classNames({"rpv-zoom__popover-target-scale":!0,"rpv-zoom__popover-target-scale--ltr":!Y,"rpv-zoom__popover-target-scale--rtl":Y})},Math.round(100*O),"%"),n$2.createElement("span",{className:"rpv-zoom__popover-target-arrow"})))},content:function(ue){return n$2.createElement(e$2.Menu,null,Object.keys(e$2.SpecialZoomLevel).map(function(le){var W=le;return n$2.createElement(e$2.MenuItem,{key:W,onClick:function(){ue(),R(W)}},function(be){switch(be){case e$2.SpecialZoomLevel.ActualSize:return B&&B.zoom?B.zoom.actualSize:"Actual size";case e$2.SpecialZoomLevel.PageFit:return B&&B.zoom?B.zoom.pageFit:"Page fit";case e$2.SpecialZoomLevel.PageWidth:return B&&B.zoom?B.zoom.pageWidth:"Page width"}}(W))}),n$2.createElement(e$2.MenuDivider,null),H.map(function(le){return n$2.createElement(e$2.MenuItem,{key:le,onClick:function(){ue(),R(le)}},"".concat(Math.round(100*le),"%"))}))},offset:E$1,closeOnClickOutside:!0,closeOnEscape:!0})},g$1=function(A){var $=A.children,H=A.levels,O=A.store;return($||function(R){return n$2.createElement(d$2,{levels:H,scale:R.scale,onZoom:R.onZoom})})({scale:a$2(O).scale,onZoom:function(R){var B=O.get("zoom");B&&B(R)}})},C={left:0,top:8},h$1=function(A){var $=A.enableShortcuts,H=A.onClick,O=n$2.useContext(e$2.LocalizationContext).l10n,R=O&&O.zoom?O.zoom.zoomIn:"Zoom in",B=$?e$2.isMac()?"Meta+=":"Ctrl+=":"";return n$2.createElement(e$2.Tooltip,{ariaControlsSuffix:"zoom-in",position:e$2.Position.BottomCenter,target:n$2.createElement(e$2.MinimalButton,{ariaKeyShortcuts:B,ariaLabel:R,testId:"zoom__in-button",onClick:H},n$2.createElement(o$2,null)),content:function(){return R},offset:C})},b$1=function(A){var $=A.children,H=A.enableShortcuts,O=A.store,R=a$2(O).scale;return($||h$1)({enableShortcuts:H,onClick:function(){var B=O.get("zoom");B&&B(f$2(R))}})},k=function(A){var $=A.onClick,H=n$2.useContext(e$2.LocalizationContext).l10n,O=H&&H.zoom?H.zoom.zoomIn:"Zoom in";return n$2.createElement(e$2.MenuItem,{icon:n$2.createElement(o$2,null),testId:"zoom__in-menu",onClick:$},O)},S$1={left:0,top:8},M$1=function(A){var $=A.enableShortcuts,H=A.onClick,O=n$2.useContext(e$2.LocalizationContext).l10n,R=O&&O.zoom?O.zoom.zoomOut:"Zoom out",B=$?e$2.isMac()?"Meta+-":"Ctrl+-":"";return n$2.createElement(e$2.Tooltip,{ariaControlsSuffix:"zoom-out",position:e$2.Position.BottomCenter,target:n$2.createElement(e$2.MinimalButton,{ariaKeyShortcuts:B,ariaLabel:R,testId:"zoom__out-button",onClick:H},n$2.createElement(r$2,null)),content:function(){return R},offset:S$1})},I$1=function(A){var $=A.children,H=A.enableShortcuts,O=A.store,R=a$2(O).scale;return($||M$1)({enableShortcuts:H,onClick:function(){var B=O.get("zoom");B&&B(v$1(R))}})},Z=function(A){var $=A.onClick,H=n$2.useContext(e$2.LocalizationContext).l10n,O=H&&H.zoom?H.zoom.zoomOut:"Zoom out";return n$2.createElement(e$2.MenuItem,{icon:n$2.createElement(r$2,null),testId:"zoom__out-menu",onClick:$},O)};zoom_min.ZoomInIcon=o$2,zoom_min.ZoomOutIcon=r$2,zoom_min.zoomPlugin=function(A){var $=n$2.useMemo(function(){return Object.assign({},{enableShortcuts:!0},A)},[]),H=n$2.useMemo(function(){return e$2.createStore({})},[]),O=function(Y){return n$2.createElement(b$1,c$2({enableShortcuts:$.enableShortcuts},Y,{store:H}))},R=function(Y){return n$2.createElement(I$1,c$2({enableShortcuts:$.enableShortcuts},Y,{store:H}))},B=function(Y){return n$2.createElement(g$1,c$2({},Y,{store:H}))};return{renderViewer:function(Y){var he=Y.slot;if(!$.enableShortcuts)return he;var ue={children:n$2.createElement(n$2.Fragment,null,n$2.createElement(p$1,{containerRef:Y.containerRef,store:H}),n$2.createElement(s$2,{pagesContainerRef:Y.pagesContainerRef,store:H}),he.children)};return c$2(c$2({},he),ue)},install:function(Y){H.update("zoom",Y.zoom)},onViewerStateChange:function(Y){return H.update("scale",Y.scale),Y},zoomTo:function(Y){var he=H.get("zoom");he&&he(Y)},CurrentScale:function(Y){return n$2.createElement(u$2,c$2({},Y,{store:H}))},ZoomIn:O,ZoomInButton:function(){return n$2.createElement(O,null,function(Y){return n$2.createElement(h$1,c$2({},Y))})},ZoomInMenuItem:function(Y){return n$2.createElement(O,null,function(he){return n$2.createElement(k,{onClick:function(){he.onClick(),Y.onClick()}})})},ZoomOut:R,ZoomOutButton:function(){return n$2.createElement(R,null,function(Y){return n$2.createElement(M$1,c$2({},Y))})},ZoomOutMenuItem:function(Y){return n$2.createElement(R,null,function(he){return n$2.createElement(Z,{onClick:function(){he.onClick(),Y.onClick()}})})},Zoom:B,ZoomPopover:function(Y){return n$2.createElement(B,null,function(he){return n$2.createElement(d$2,c$2({levels:Y==null?void 0:Y.levels},he))})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib.exports=zoom_min;var libExports$2=lib.exports,e$1=libExports$h,t$1=libExports$d,r$1=reactExports,n$1=libExports$c,o$1=libExports$b,a$1=libExports$a,l$1=libExports$9,i$1=libExports$8,c$1=libExports$7,m$1=libExports$6,u$1=libExports$5,s$1=libExports$4,d$1=libExports$3,p=libExports$2;function v(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(H){if(H!=="default"){var O=Object.getOwnPropertyDescriptor(A,H);Object.defineProperty($,H,O.get?O:{enumerable:!0,get:function(){return A[H]}})}}),$.default=A,Object.freeze($)}var _=v(r$1),E=function(){return _.createElement(e$1.Icon,{size:16},_.createElement("path",{d:`M12,0.5c1.381,0,2.5,1.119,2.5,2.5S13.381,5.5,12,5.5S9.5,4.381,9.5,3S10.619,0.5,12,0.5z
            M12,9.5
            c1.381,0,2.5,1.119,2.5,2.5s-1.119,2.5-2.5,2.5S9.5,13.381,9.5,12S10.619,9.5,12,9.5z
            M12,18.5c1.381,0,2.5,1.119,2.5,2.5
            s-1.119,2.5-2.5,2.5S9.5,22.381,9.5,21S10.619,18.5,12,18.5z`}))},g={left:0,top:8},P=function(A){var $=A.toolbarSlot,H=_.useContext(e$1.LocalizationContext).l10n,O=_.useContext(e$1.ThemeContext).direction===e$1.TextDirection.RightToLeft?e$1.Position.BottomLeft:e$1.Position.BottomRight,R=$.DownloadMenuItem,B=$.EnterFullScreenMenuItem,Y=$.GoToFirstPageMenuItem,he=$.GoToLastPageMenuItem,ue=$.GoToNextPageMenuItem,le=$.GoToPreviousPageMenuItem,W=$.OpenMenuItem,be=$.PrintMenuItem,ce=$.RotateBackwardMenuItem,Q=$.RotateForwardMenuItem,ie=$.ShowPropertiesMenuItem,ee=$.SwitchScrollModeMenuItem,q=$.SwitchSelectionModeMenuItem,K=$.SwitchViewModeMenuItem,ne=$.SwitchThemeMenuItem;return _.createElement(e$1.Popover,{ariaControlsSuffix:"toolbar-more-actions",ariaHasPopup:"menu",position:O,target:function(fe,de){var te=H&&H.toolbar?H.toolbar.moreActions:"More actions";return _.createElement(e$1.Tooltip,{ariaControlsSuffix:"toolbar-more-actions",position:O,target:_.createElement(e$1.MinimalButton,{ariaLabel:te,isSelected:de,testId:"toolbar__more-actions-popover-target",onClick:fe},_.createElement(E,null)),content:function(){return te},offset:g})},content:function(fe){return _.createElement(e$1.Menu,null,_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(ne,{onClick:fe})),_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(B,{onClick:fe})),_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(W,null)),_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(be,{onClick:fe})),_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(R,{onClick:fe})),_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(e$1.MenuDivider,null)),_.createElement(Y,{onClick:fe}),_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(le,{onClick:fe})),_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(ue,{onClick:fe})),_.createElement(he,{onClick:fe}),_.createElement(e$1.MenuDivider,null),_.createElement(Q,{onClick:fe}),_.createElement(ce,{onClick:fe}),_.createElement(e$1.MenuDivider,null),_.createElement(q,{mode:t$1.SelectionMode.Text,onClick:fe}),_.createElement(q,{mode:t$1.SelectionMode.Hand,onClick:fe}),_.createElement(e$1.MenuDivider,null),_.createElement(ee,{mode:e$1.ScrollMode.Page,onClick:fe}),_.createElement(ee,{mode:e$1.ScrollMode.Vertical,onClick:fe}),_.createElement(ee,{mode:e$1.ScrollMode.Horizontal,onClick:fe}),_.createElement(ee,{mode:e$1.ScrollMode.Wrapped,onClick:fe}),_.createElement(e$1.MenuDivider,null),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},_.createElement(K,{mode:e$1.ViewMode.SinglePage,onClick:fe})),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},_.createElement(K,{mode:e$1.ViewMode.DualPage,onClick:fe})),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},_.createElement(K,{mode:e$1.ViewMode.DualPageWithCover,onClick:fe})),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},_.createElement(e$1.MenuDivider,null)),_.createElement(ie,{onClick:fe}))},offset:g,closeOnClickOutside:!0,closeOnEscape:!0})},M=function(){return M=Object.assign||function(A){for(var $,H=1,O=arguments.length;H<O;H++)for(var R in $=arguments[H])Object.prototype.hasOwnProperty.call($,R)&&(A[R]=$[R]);return A},M.apply(this,arguments)},h=function(A){return function($){var H=_.useMemo(function(){return A($)},[]),O=_.useContext(e$1.ThemeContext).direction===e$1.TextDirection.RightToLeft,R=H.CurrentPageInput,B=H.Download,Y=H.EnterFullScreen,he=H.GoToNextPage,ue=H.GoToPreviousPage,le=H.NumberOfPages,W=H.Open,be=H.Print,ce=H.ShowSearchPopover,Q=H.SwitchTheme,ie=H.Zoom,ee=H.ZoomIn,q=H.ZoomOut;return _.createElement("div",{"data-testid":"toolbar",className:e$1.classNames({"rpv-toolbar":!0,"rpv-toolbar--rtl":O}),role:"toolbar","aria-orientation":"horizontal"},_.createElement("div",{className:"rpv-toolbar__left"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(ce,null)),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(ue,null))),_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(R,null),_.createElement("span",{className:"rpv-toolbar__label"},_.createElement(le,null))),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(he,null)))),_.createElement("div",{className:"rpv-toolbar__center"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(q,null)),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(ie,null))),_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(ee,null))),_.createElement("div",{className:"rpv-toolbar__right"},_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(Q,null))),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(Y,null))),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(W,null))),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(B,null))),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(be,null))),_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(P,{toolbarSlot:H}))))}},f$1=function(A){var $=A.NumberOfPages;return Object.assign({},A,{NumberOfPages:function(){return _.createElement(_.Fragment,null,"/ ",_.createElement($,null))}})},S=function(A){return h(f$1)(A)},I=function(A){var $=A.children,H=A.slot;return($||S)(H)};toolbar_min.MoreActionsPopover=P,toolbar_min.MoreIcon=E,toolbar_min.toolbarPlugin=function(A){var $=n$1.fullScreenPlugin(A?A.fullScreenPlugin:{}),H=o$1.getFilePlugin(A?A.getFilePlugin:{}),O=a$1.openPlugin(A?A.openPlugin:{}),R=l$1.pageNavigationPlugin(A?A.pageNavigationPlugin:{}),B=i$1.printPlugin(A?A.printPlugin:{}),Y=c$1.propertiesPlugin(),he=m$1.rotatePlugin(),ue=u$1.scrollModePlugin(),le=s$1.searchPlugin(A?A.searchPlugin:{}),W=t$1.selectionModePlugin(A?A.selectionModePlugin:{}),be=d$1.themePlugin(),ce=p.zoomPlugin(A?A.zoomPlugin:{}),Q=[$,H,O,R,B,Y,he,ue,le,W,be,ce],ie=_.useCallback(function(ee){var q=$.EnterFullScreen,K=$.EnterFullScreenMenuItem,ne=H.Download,fe=H.DownloadMenuItem,de=O.Open,te=O.OpenMenuItem,se=R.CurrentPageInput,re=R.CurrentPageLabel,ae=R.GoToFirstPage,oe=R.GoToFirstPageMenuItem,Ee=R.GoToLastPage,J=R.GoToLastPageMenuItem,ve=R.GoToNextPage,Ce=R.GoToNextPageMenuItem,De=R.GoToPreviousPage,Me=R.GoToPreviousPageMenuItem,Ne=R.NumberOfPages,Ie=B.Print,qe=B.PrintMenuItem,Se=Y.ShowProperties,Te=Y.ShowPropertiesMenuItem,He=he.Rotate,_e=he.RotateBackwardMenuItem,G=he.RotateForwardMenuItem,X=ue.SwitchScrollMode,ge=ue.SwitchScrollModeMenuItem,Pe=ue.SwitchViewMode,Ae=ue.SwitchViewModeMenuItem,ke=le.Search,Oe=le.ShowSearchPopover,Qe=W.SwitchSelectionMode,ot=W.SwitchSelectionModeMenuItem,st=be.SwitchTheme,ut=be.SwitchThemeMenuItem,dt=ce.CurrentScale,mt=ce.Zoom,Ge=ce.ZoomIn,Xe=ce.ZoomInMenuItem,me=ce.ZoomOut,ye=ce.ZoomOutMenuItem;return _.createElement(I,M({},ee,{slot:{CurrentPageInput:se,CurrentPageLabel:re,CurrentScale:dt,Download:ne,DownloadMenuItem:fe,EnterFullScreen:q,EnterFullScreenMenuItem:K,GoToFirstPage:ae,GoToFirstPageMenuItem:oe,GoToLastPage:Ee,GoToLastPageMenuItem:J,GoToNextPage:ve,GoToNextPageMenuItem:Ce,GoToPreviousPage:De,GoToPreviousPageMenuItem:Me,NumberOfPages:Ne,Open:de,OpenMenuItem:te,Print:Ie,PrintMenuItem:qe,Rotate:He,RotateBackwardMenuItem:_e,RotateForwardMenuItem:G,Search:ke,ShowProperties:Se,ShowPropertiesMenuItem:Te,ShowSearchPopover:Oe,SwitchScrollMode:X,SwitchScrollModeMenuItem:ge,SwitchSelectionMode:Qe,SwitchSelectionModeMenuItem:ot,SwitchViewMode:Pe,SwitchViewModeMenuItem:Ae,SwitchTheme:st,SwitchThemeMenuItem:ut,Zoom:mt,ZoomIn:Ge,ZoomInMenuItem:Xe,ZoomOut:me,ZoomOutMenuItem:ye}}))},[]);return{fullScreenPluginInstance:$,getFilePluginInstance:H,openPluginInstance:O,pageNavigationPluginInstance:R,printPluginInstance:B,propertiesPluginInstance:Y,rotatePluginInstance:he,scrollModePluginInstance:ue,searchPluginInstance:le,selectionModePluginInstance:W,themePluginInstance:be,zoomPluginInstance:ce,install:function(ee){Q.forEach(function(q){q.install&&q.install(ee)})},renderPageLayer:function(ee){return _.createElement(_.Fragment,null,Q.map(function(q,K){return q.renderPageLayer?_.createElement(_.Fragment,{key:K},q.renderPageLayer(ee)):_.createElement(_.Fragment,{key:K})}))},renderViewer:function(ee){var q=ee.slot;return Q.forEach(function(K){K.renderViewer&&(q=K.renderViewer(M(M({},ee),{slot:q})))}),q},uninstall:function(ee){Q.forEach(function(q){q.uninstall&&q.uninstall(ee)})},onDocumentLoad:function(ee){Q.forEach(function(q){q.onDocumentLoad&&q.onDocumentLoad(ee)})},onAnnotationLayerRender:function(ee){Q.forEach(function(q){q.onAnnotationLayerRender&&q.onAnnotationLayerRender(ee)})},onTextLayerRender:function(ee){Q.forEach(function(q){q.onTextLayerRender&&q.onTextLayerRender(ee)})},onViewerStateChange:function(ee){var q=ee;return Q.forEach(function(K){K.onViewerStateChange&&(q=K.onViewerStateChange(q))}),q},renderDefaultToolbar:h,Toolbar:ie}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$c.exports=toolbar_min;var libExports$1=lib$c.exports,e=libExports$h,t=reactExports,n=libExports$g,a=libExports$f,r=libExports$e,o=libExports$1;function l(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(H){if(H!=="default"){var O=Object.getOwnPropertyDescriptor(A,H);Object.defineProperty($,H,O.get?O:{enumerable:!0,get:function(){return A[H]}})}}),$.default=A,Object.freeze($)}var u=l(t),c=function(){return u.createElement(e.Icon,{size:16},u.createElement("path",{d:`M11.5,1.5h11c0.552,0,1,0.448,1,1v20c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h3
            M11.5,10.5c0,0.55-0.3,0.661-0.659,0.248L8,7.5l-2.844,3.246c-0.363,0.414-0.659,0.3-0.659-0.247v-9c0-0.552,0.448-1,1-1h5
            c0.552,0,1,0.448,1,1L11.5,10.5z
            M14.5,6.499h6
            M14.5,10.499h6
            M3.5,14.499h17
            M3.5,18.499h16.497`}))},i=function(){return i=Object.assign||function(A){for(var $,H=1,O=arguments.length;H<O;H++)for(var R in $=arguments[H])Object.prototype.hasOwnProperty.call($,R)&&(A[R]=$[R]);return A},i.apply(this,arguments)},s=function(){return u.createElement(e.Icon,{size:16},u.createElement("path",{d:`M7.618,15.345l8.666-8.666c0.78-0.812,2.071-0.838,2.883-0.058s0.838,2.071,0.058,2.883
            c-0.019,0.02-0.038,0.039-0.058,0.058L7.461,21.305c-1.593,1.593-4.175,1.592-5.767,0s-1.592-4.175,0-5.767c0,0,0,0,0,0
            L13.928,3.305c2.189-2.19,5.739-2.19,7.929-0.001s2.19,5.739,0,7.929l0,0L13.192,19.9`}))},d=function(){return u.createElement(e.Icon,{size:16},u.createElement("path",{d:`M10.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z
            M23.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z
            M10.5,22.5 c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z
            M23.5,22.5c0,0.552-0.448,1-1,1 h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z`}))},b={left:8,top:0},f={left:-8,top:0},m=function(A){var $=A.attachmentTabContent,H=A.bookmarkTabContent,O=A.store,R=A.thumbnailTabContent,B=A.tabs,Y=u.useRef(),he=u.useContext(e.LocalizationContext).l10n,ue=u.useState(O.get("isCurrentTabOpened")||!1),le=ue[0],W=ue[1],be=u.useState(Math.max(O.get("currentTab")||0,0)),ce=be[0],Q=be[1],ie=u.useContext(e.ThemeContext).direction===e.TextDirection.RightToLeft,ee=[{content:R,icon:u.createElement(d,null),title:he&&he.defaultLayout?he.defaultLayout.thumbnail:"Thumbnail"},{content:H,icon:u.createElement(c,null),title:he&&he.defaultLayout?he.defaultLayout.bookmark:"Bookmark"},{content:$,icon:u.createElement(s,null),title:he&&he.defaultLayout?he.defaultLayout.attachment:"Attachment"}],q=B?B(ee):ee,K=function(fe){fe>=0&&fe<=q.length-1&&(O.update("isCurrentTabOpened",!0),Q(fe))},ne=function(fe){W(fe)};return u.useEffect(function(){return O.subscribe("currentTab",K),O.subscribe("isCurrentTabOpened",ne),function(){O.unsubscribe("currentTab",K),O.unsubscribe("isCurrentTabOpened",ne)}},[]),q.length===0?u.createElement(u.Fragment,null):u.createElement(u.Fragment,null,u.createElement("div",{"data-testid":"default-layout__sidebar",className:e.classNames({"rpv-default-layout__sidebar":!0,"rpv-default-layout__sidebar--opened":le,"rpv-default-layout__sidebar--ltr":!ie,"rpv-default-layout__sidebar--rtl":ie}),ref:Y},u.createElement("div",{className:"rpv-default-layout__sidebar-tabs"},u.createElement("div",{className:"rpv-default-layout__sidebar-headers",role:"tablist","aria-orientation":"vertical"},q.map(function(fe,de){return u.createElement("div",{"aria-controls":"rpv-default-layout__sidebar-content","aria-selected":ce===de,key:de,className:"rpv-default-layout__sidebar-header",id:"rpv-default-layout__sidebar-tab-".concat(de),role:"tab"},u.createElement(e.Tooltip,{ariaControlsSuffix:"default-layout-sidebar-tab-".concat(de),position:ie?e.Position.LeftCenter:e.Position.RightCenter,target:u.createElement(e.MinimalButton,{ariaLabel:fe.title,isSelected:ce===de,onClick:function(){return function(te){if(ce===te){O.update("isCurrentTabOpened",!O.get("isCurrentTabOpened"));var se=Y.current;se&&se.style.width&&se.style.removeProperty("width")}else O.update("currentTab",te)}(de)}},fe.icon),content:function(){return fe.title},offset:ie?f:b}))})),u.createElement("div",{"aria-labelledby":"rpv-default-layout__sidebar-tab-".concat(ce),id:"rpv-default-layout__sidebar-content",className:e.classNames({"rpv-default-layout__sidebar-content":!0,"rpv-default-layout__sidebar-content--opened":le,"rpv-default-layout__sidebar-content--ltr":!ie,"rpv-default-layout__sidebar-content--rtl":ie}),role:"tabpanel",tabIndex:-1},q[ce].content))),le&&u.createElement(e.Splitter,{constrain:function(fe){return fe.firstHalfPercentage>=20&&fe.firstHalfPercentage<=80}}))};defaultLayout_min.BookmarkIcon=c,defaultLayout_min.FileIcon=s,defaultLayout_min.ThumbnailIcon=d,defaultLayout_min.defaultLayoutPlugin=function(A){var $=u.useMemo(function(){return e.createStore({isCurrentTabOpened:!1,currentTab:0})},[]),H=n.attachmentPlugin(),O=a.bookmarkPlugin(),R=r.thumbnailPlugin(A?A.thumbnailPlugin:{}),B=o.toolbarPlugin(A?A.toolbarPlugin:{}),Y=H.Attachments,he=O.Bookmarks,ue=R.Thumbnails,le=B.Toolbar,W=A?A.sidebarTabs:function(ce){return ce},be=[H,O,R,B];return{attachmentPluginInstance:H,bookmarkPluginInstance:O,thumbnailPluginInstance:R,toolbarPluginInstance:B,activateTab:function(ce){$.update("currentTab",ce)},toggleTab:function(ce){var Q=$.get("currentTab");$.update("isCurrentTabOpened",!$.get("isCurrentTabOpened")),Q!==ce&&$.update("currentTab",ce)},install:function(ce){be.forEach(function(Q){Q.install&&Q.install(ce)})},renderPageLayer:function(ce){return u.createElement(u.Fragment,null,be.map(function(Q,ie){return Q.renderPageLayer?u.createElement(u.Fragment,{key:ie},Q.renderPageLayer(ce)):u.createElement(u.Fragment,{key:ie},u.createElement(u.Fragment,null))}))},renderViewer:function(ce){var Q=ce.slot;be.forEach(function(ee){ee.renderViewer&&(Q=ee.renderViewer(i(i({},ce),{slot:Q})))});var ie=Q.subSlot&&Q.subSlot.attrs?{className:Q.subSlot.attrs.className,"data-testid":Q.subSlot.attrs["data-testid"],ref:Q.subSlot.attrs.ref,style:Q.subSlot.attrs.style}:{};return Q.children=u.createElement("div",{className:"rpv-default-layout__container"},u.createElement("div",{"data-testid":"default-layout__main",className:e.classNames({"rpv-default-layout__main":!0,"rpv-default-layout__main--rtl":ce.themeContext.direction===e.TextDirection.RightToLeft})},u.createElement(m,{attachmentTabContent:u.createElement(Y,null),bookmarkTabContent:u.createElement(he,null),store:$,thumbnailTabContent:u.createElement(ue,null),tabs:W}),u.createElement("div",{className:"rpv-default-layout__body","data-testid":"default-layout__body"},u.createElement("div",{className:"rpv-default-layout__toolbar"},A&&A.renderToolbar?A.renderToolbar(le):u.createElement(le,null)),u.createElement("div",i({},ie),Q.subSlot.children))),Q.children),Q.subSlot.attrs={},Q.subSlot.children=u.createElement(u.Fragment,null),Q},uninstall:function(ce){be.forEach(function(Q){Q.uninstall&&Q.uninstall(ce)})},onDocumentLoad:function(ce){be.forEach(function(Q){Q.onDocumentLoad&&Q.onDocumentLoad(ce)}),A&&A.setInitialTab&&A.setInitialTab(ce.doc).then(function(Q){$.update("currentTab",Q),$.update("isCurrentTabOpened",!0)})},onAnnotationLayerRender:function(ce){be.forEach(function(Q){Q.onAnnotationLayerRender&&Q.onAnnotationLayerRender(ce)})},onTextLayerRender:function(ce){be.forEach(function(Q){Q.onTextLayerRender&&Q.onTextLayerRender(ce)})},onViewerStateChange:function(ce){var Q=ce;return be.forEach(function(ie){ie.onViewerStateChange&&(Q=ie.onViewerStateChange(Q))}),Q}}},defaultLayout_min.setInitialTabFromPageMode=function(A){return new Promise(function($,H){A.getPageMode().then(function(O){if(O)switch(O){case e.PageMode.Attachments:$(2);break;case e.PageMode.Bookmarks:$(1);break;case e.PageMode.Thumbnails:$(0);break;default:$(-1)}else $(-1)})})};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$h.exports=defaultLayout_min;var libExports=lib$h.exports;const cs={};function InvoicePreviewCard({isLoading:A,previewUrl:$,onAction:H}){const O=libExports.defaultLayoutPlugin();return jsxRuntimeExports.jsx(SheCard,{className:cs.invoicesCard,title:"Preview",titleTransKey:"CardTitles.Preview",minWidth:"600px",isLoading:A,showCloseButton:!0,onSecondaryButtonClick:()=>H("closeInvoicePreviewCard"),children:jsxRuntimeExports.jsx("div",{className:cs.invoicesCardContent,children:jsxRuntimeExports.jsx(libExports$h.Worker,{workerUrl:`https://unpkg.com/pdfjs-dist@${pdfExports.version}/build/pdf.worker.min.js`,children:jsxRuntimeExports.jsx(libExports$h.Viewer,{fileUrl:$,plugins:[O]})})})})}function useInvoicesPageService(A){const $=useAppDispatch(),H=useProductsPageService(),O=useAppSelector(StoreSliceEnum.INVOICES),R=useAppSelector(StoreSliceEnum.PRODUCTS),{addToast:B}=useToast(),{openConfirmationDialog:Y}=useDialogService(),[he]=PurchasesApiHooks.useGetInvoicesForGridMutation(),[ue]=AssetsApiHooks.useLazyDownloadAssetQuery();function le(K){R.purchaseCounters||($(InvoicesPageSliceActions.setIsProductMenuCardLoading(!0)),H.getPurchaseCountersHandler(K).then(()=>$(InvoicesPageSliceActions.setIsProductMenuCardLoading(!1))),$(InvoicesPageSliceActions.setIsProductMenuCardLoading(!1)))}function W(K){return $(InvoicesPageSliceActions.setIsInvoiceCardGridLoading(!0)),he(K).then(ne=>($(InvoicesPageSliceActions.setIsInvoiceCardGridLoading(!1)),$(InvoicesPageSliceActions.refreshInvoicesGridRequestModel(ne.data)),ne.data))}function be(K,ne){$(InvoicesPageSliceActions.setIsFileUploaderLoading(!0)),H.uploadPhotoHandler(ne).then(fe=>{$(InvoicesPageSliceActions.setIsFileUploaderLoading(!1)),fe.data.assetId?($(InvoicesPageSliceActions.setIsProductMenuCardLoading(!0)),$(InvoicesPageSliceActions.setIsInvoiceCardGridLoading(!0)),Promise.all([H.getPurchaseCountersHandler(Number(K)),W(Number(K))]).then(()=>{$(InvoicesPageSliceActions.setIsProductMenuCardLoading(!1)),$(InvoicesPageSliceActions.setIsInvoiceCardGridLoading(!1))}),B({text:"Invoice added successfully",type:"success"})):B({text:`${fe.error.data.detail}`,type:"error"})})}async function ce(K,ne){var de;await Y({headerTitle:"Delete Invoice",text:`You are about to delete invoice "${K.row.original.originalName}".`,primaryButtonValue:"Delete",secondaryButtonValue:"Cancel"})&&((de=K.table.options.meta)==null||de.hideRow(K.row.original.id),await H.deletePhotoHandler(K.row.original.assetId).then(te=>{var se;H.getPurchaseCountersHandler(Number(ne)),O.invoicesGridRequestModel.items.length===1&&$(InvoicesPageSliceActions.refreshInvoicesGridRequestModel({...O.invoicesGridRequestModel,items:[]})),te?((se=K.table.options.meta)==null||se.unhideRow(K.row.original.id),B({text:te.error.data.detail,type:"error"})):B({text:"Invoice deleted successfully",type:"success"})})),K.row.original.url===O.previewUrl&&A("invoicePreviewCard")}function Q(K){return ue(K).then(ne=>ne)}function ie(K){Q(K.assetId).then(ne=>{if((ne==null?void 0:ne.data)instanceof Blob){const fe=window.URL.createObjectURL(ne.data),de=document.createElement("a");de.href=fe,de.download="invoice.pdf",document.body.appendChild(de),de.click(),de.remove(),window.URL.revokeObjectURL(fe),B({text:"Invoice is downloading",type:"success"})}else B({text:ne.error.data.detail,type:"error"})})}function ee(K){A("invoicePreviewCard",!0),$(InvoicesPageSliceActions.refreshPreviewUrl(K.url))}function q(){A("invoicePreviewCard"),$(InvoicesPageSliceActions.refreshPreviewUrl(null))}return{state:O,productsState:R,getPurchaseCountersHandler:le,getInvoicesForGridHandler:W,uploadInvoiceHandler:be,deleteInvoiceHandler:ce,downloadInvoice:ie,previewInvoiceHandler:ee,closeInvoicePreviewCardHandler:q}}function InvoicesPage(){const{handleCardAction:A,createRefCallback:$}=useCardActions({selectActiveCards:he=>he[StoreSliceEnum.INVOICES].activeCards,refreshAction:InvoicesPageSliceActions.refreshActiveCards}),{state:H,productsState:O,...R}=useInvoicesPageService(A),{purchaseId:B}=useParams();reactExports.useEffect(()=>{R.getPurchaseCountersHandler(Number(B)),R.getInvoicesForGridHandler(Number(B))},[B]);async function Y(he,ue){switch(he){case"uploadInvoice":R.uploadInvoiceHandler(Number(B),ue);break;case"previewInvoice":R.previewInvoiceHandler(ue);break;case"deleteInvoice":R.deleteInvoiceHandler(ue,B);break;case"downloadInvoice":R.downloadInvoice(ue);break;case"closeInvoicePreviewCard":R.closeInvoicePreviewCardHandler();break}}return jsxRuntimeExports.jsx("div",{className:cs$2.invoicesPage,children:jsxRuntimeExports.jsxs(SheContextSidebar,{menuCollectionType:"purchases",menuTitle:"Manage Product",itemId:Number(B),counter:O.purchaseCounters,activeCards:H.activeCards,children:[jsxRuntimeExports.jsx(InvoicesCard,{isLoading:H.isInvoicesCardLoading,isGridLoading:H.isInvoiceCardGridLoading,isImageUploaderLoading:H.isFileUploaderLoading,data:H.invoicesGridRequestModel.items,contextId:Number(B),onAction:Y}),H.activeCards.includes("invoicePreviewCard")&&jsxRuntimeExports.jsx("div",{ref:$("invoicePreviewCard"),children:jsxRuntimeExports.jsx(InvoicePreviewCard,{previewUrl:H.previewUrl,onAction:Y})})]})})}export{InvoicesPage};
