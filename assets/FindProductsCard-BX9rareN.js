import{j as e,a6 as v,a7 as z,k as y,a8 as I,a9 as p,r as P,z as m,m as b}from"./index-CqLEDb0h.js";import{G as h}from"./GridTraitsFilter-CP_O8I3b.js";import{G as C}from"./GridItemsFilter-C9zRYV-7.js";import{S as k}from"./SheCard-CX5qtFRW.js";import{S as _}from"./SheGrid-Fci2HgNW.js";import{c as T}from"./SheContextSidebar-CL4FXvtg.js";import{S as V}from"./SheInput-DbpOA7IC.js";import{I as D,u as O}from"./useAppTranslation-CsMEigHw.js";import{P as A}from"./plus-Cg_Vlo1I.js";const B="_findProductsCard_12xpd_1",N={findProductsCard:B},K="_productNameImageBlock_13d5h_1",G="_productNameImage_13d5h_1",F="_variantName_13d5h_8",Q="_variantCode_13d5h_8",$="_productCategory_13d5h_17",c={productNameImageBlock:K,productNameImage:G,variantName:F,variantCode:Q,productCategory:$};function E({row:i,onAction:a}){return e.jsxs(v,{children:[e.jsx(z,{asChild:!0,children:e.jsxs(y,{variant:"ghost",className:"flex h-8 w-8 p-0 data-[state=open]:bg-muted",children:[e.jsx(T,{}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(I,{align:"start",className:"w-[160px]",children:[e.jsx(p,{onClick:()=>a("manageProduct",i.original),children:"Manage product"}),e.jsx(p,{onClick:()=>a("manageVariant",i.original),children:"Manage variant"}),e.jsx(p,{onClick:()=>a("openAddStockCard",i.original),children:"Add to stock"})]})]})}function M({row:i}){const[a,t]=P.useState(1);return i.original.amount=a,e.jsx(V,{value:"1",onChange:r=>{t(Number(r)),i.original.amount=r}})}function R({onAction:i}){return[{accessorKey:"variantCode",header:"Code",minSize:70,maxSize:70,cell:({row:a})=>e.jsx(m,{delayDuration:200,text:a.getValue("variantCode"),children:e.jsx("span",{className:c.variantCode,children:a.getValue("variantCode")})})},{accessorKey:"photo",header:"Image",minSize:80,maxSize:80,cell:({row:a})=>{const t=a.getValue("photo");return e.jsx("div",{className:c.productNameImageBlock,children:t?e.jsx("img",{src:t==null?void 0:t.thumbnailUrl,alt:a.getValue("variantName"),className:c.productNameImage}):e.jsx(b,{icon:D,maxWidth:"30px"})})}},{accessorKey:"variantName",header:"Product Name",minSize:150,cell:({row:a})=>e.jsx(m,{delayDuration:200,text:a.getValue("variantName"),children:e.jsx("span",{className:c.variantName,children:a.getValue("variantName")})})},{accessorKey:"productCategory",header:"Category",minSize:100,cell:({row:a})=>{var r,n;const t=a.getValue("productCategory");return e.jsx(m,{delayDuration:200,text:(t==null?void 0:t.categoryName)||"N/A",children:e.jsxs("div",{className:c.productCategory,children:[((r=a.original.productCategory)==null?void 0:r.thumbnail)&&e.jsx("img",{src:(n=a.original.productCategory)==null?void 0:n.thumbnail,alt:a.original.productCategory.categoryName}),e.jsx("span",{children:(t==null?void 0:t.categoryName)||"N/A"})]})})}},{accessorKey:"brand",header:"Brand",minSize:100,cell:({row:a})=>{var r,n;const t=a.getValue("brand");return e.jsx(m,{delayDuration:200,text:(t==null?void 0:t.brandName)||"N/A",children:e.jsxs("div",{className:c.productCategory,children:[((r=a.original.brand)==null?void 0:r.thumbnail)&&e.jsx("img",{src:(n=a.original.brand)==null?void 0:n.thumbnail,alt:a.original.brand.brandName}),e.jsx("span",{children:(t==null?void 0:t.brandName)||"N/A"})]})})}},{accessorKey:"traitOptions",header:"Details",minSize:100,maxSize:100,cell:({row:a})=>{const t=a.original.traitOptions||[],r=t.filter(s=>s.traitTypeId===2&&s.optionColor),n=t.filter(s=>s.traitTypeId===1&&s.optionName);return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",maxWidth:"50px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",verticalAlign:"middle"},children:[r.map((s,d)=>e.jsx("div",{style:{background:s.optionColor,minWidth:"20px",minHeight:"20px",borderRadius:"50%",border:"2px solid #ccc"}},`color-${d}`)),n.map((s,d)=>e.jsx("span",{style:{fontSize:"0.875rem"},children:s.optionName},`size-${d}`))]})}},{accessorKey:"stockAmount",header:"In Stock",minSize:100,maxSize:100,cell:({row:a})=>e.jsx("span",{children:`${a.getValue("stockAmount")} units`})},{accessorKey:"salePrice",header:"Price",minSize:120,maxSize:120,cell:({row:a})=>{const t=a.getValue("salePrice");return e.jsx("span",{children:t||"N/A"})}},{accessorKey:"quantity",header:"Quantity",size:100,minSize:100,maxSize:100,cell:({row:a})=>e.jsx(M,{row:a})},{id:"add",header:"",minSize:100,maxSize:100,cell:({row:a})=>e.jsx("div",{onClick:t=>t.stopPropagation(),children:e.jsx(y,{icon:A,value:"Add",variant:"secondary",onClick:()=>i("addVariantToOrder",a.original)})})},{id:"rowActions",header:"",minSize:70,maxSize:70,cell:({row:a,table:t})=>e.jsx(E,{row:a,onAction:i,table:t})}]}function Z({isLoading:i,isGridLoading:a,variants:t,preferences:r,gridRequestModel:n,sortingOptions:s,colorsForFilter:d,sizesForFilter:j,categories:S,brands:f,onAction:l}){var g,x;const{translate:u}=O();return e.jsx(k,{className:N.findProductsCard,title:u("CardTitles.FindProducts"),isLoading:i,showCloseButton:!0,onSecondaryButtonClick:()=>l("closeFindProductsCard"),children:e.jsx("div",{className:N.findProductsCardContent,children:e.jsxs(_,{isLoading:a,columns:R({onAction:l}),data:t,gridRequestModel:n,sortingItems:s,columnsPreferences:r,preferenceContext:"variantReferences",skeletonQuantity:n.pageSize,onApplyColumns:()=>l("onApplyColumns"),onDefaultColumns:()=>l("onResetColumnsHandler"),onGridRequestChange:o=>l("variantsGridRequestChange",o),children:[e.jsx(C,{items:f,columnName:u("SectionTitles.Brand"),getId:o=>o.brandId,getName:o=>o.brandName,selected:(g=n.filter)==null?void 0:g.brands}),e.jsx(C,{items:S,columnName:u("SectionTitles.Category"),getId:o=>o.categoryId,getName:o=>o.categoryName,selected:(x=n.filter)==null?void 0:x.categories}),e.jsx(h,{traitOptions:d,traitType:"color"}),e.jsx(h,{traitOptions:j,traitType:"size"})]})})})}export{Z as F};
