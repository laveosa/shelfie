import{j as e,q as f,f as S,w as N,s as T,e as m,R as p,o as k,ab as J,J as ue,K as xe,x as ee,X as ve}from"./index-DybU9lv3.js";import{S as D}from"./SheCard-JWlyTss7.js";import{S as X}from"./SheDatePicker-ByjOO6gI.js";import{S as Y}from"./SheSelect-DkAtzaWK.js";import{S as I}from"./SheGrid-DvAOS33I.js";import{I as y,u as L}from"./useAppTranslation-NlALFuCP.js";import{f as Ne,g as ae,M as ge,h as he,i as Ce,U as pe}from"./SheContextSidebar-BKksk-en.js";import{S as A}from"./SheInput-CKzfybja.js";import{P as B}from"./plus-Dv0aUE5j.js";import{G as je,a as _e}from"./GridSortingEnum-Qa64oiYF.js";import{G as Se}from"./GridDateRangeFilter-B_jpiLCH.js";var se=(i=>(i.NONE="None",i.NEW="New",i.PACKING_PENDING="PackingPending",i.DELIVERY_PENDING="DeliveryPending",i.COMPLETED="Completed",i))(se||{});const ke={None:"No Status",New:"New",PackingPending:"Packing Pending",DeliveryPending:"Delivery Pending",Completed:"Completed"},Ie="_shipmentConfigurationCard_dp01d_1",ye="_shipmentConfigurationCardContent_dp01d_5",fe="_shipmentConfiguration_dp01d_1",be="_shipmentDetailsItem_dp01d_16",Be="_subtitleText_dp01d_27",Oe="_customerInfoAvatarBlock_dp01d_31",Pe="_avatarImage_dp01d_36",Te="_avatarInitials_dp01d_51",De="_customerInfoBlock_dp01d_66",Le="_selectCustomerBlock_dp01d_70",Ae="_shipmentProductsBlock_dp01d_78",ze="_shipmentProductsButton_dp01d_83",$e="_shipmentContentBlock_dp01d_87",Fe="_packageContentBlock_dp01d_87",we="_deliveryServiceBlock_dp01d_93",Ke="_deliveryServiceButtons_dp01d_98",l={shipmentConfigurationCard:Ie,shipmentConfigurationCardContent:ye,shipmentConfiguration:fe,shipmentDetailsItem:be,subtitleText:Be,customerInfoAvatarBlock:Oe,avatarImage:Pe,avatarInitials:Te,customerInfoBlock:De,selectCustomerBlock:Le,shipmentProductsBlock:Ae,shipmentProductsButton:ze,shipmentContentBlock:$e,packageContentBlock:Fe,deliveryServiceBlock:we,deliveryServiceButtons:Ke},qe="_customerNameBlock_vite1_1",We="_noImageIcon_vite1_7",Ue="_avatarInitials_vite1_14",Ve="_orderLink_vite1_28",b={customerNameBlock:qe,noImageIcon:We,avatarInitials:Ue,orderLink:Ve};function Qe(i){return[{accessorKey:"orderId",header:"Order Id",minSize:100,maxSize:100,cell:({row:a})=>e.jsx("div",{className:`${b.orderLink} she-text-link`,onClick:()=>i("navigateToOrder",a.original.orderId),children:a.original.orderId})},{accessorKey:"customerName",header:"Customer",minSize:120,cell:({row:a})=>{var n,r;const s=(n=a.original.customer)==null?void 0:n.thumbnailUrl,t=(r=a.original.customer)==null?void 0:r.customerName;return e.jsxs("div",{className:b.customerNameBlock,children:[e.jsx("div",{children:s?e.jsx("img",{src:s,alt:t||"Customer",className:"object-cover rounded-md w-full h-full",style:{width:"48px",height:"48px"}}):t?e.jsx("div",{className:b.avatarInitials,children:f(t)}):e.jsx("div",{className:b.noImageIcon,children:e.jsx(S,{icon:y,maxWidth:"30px"})})}),e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsx(N,{delayDuration:200,text:t,className:"max-w-[100px] overflow-hidden text-ellipsis whitespace-nowrap",children:e.jsx("span",{className:"she-text",children:t})})})]})}},{accessorKey:"orderDate",header:"Date",minSize:100,maxSize:100,cell:({row:a})=>e.jsx("span",{children:T(a.getValue("orderDate"),"date")})},{accessorKey:"unitsAmount",header:"Items",minSize:80,maxSize:80,cell:({row:a})=>e.jsx("span",{children:a.getValue("unitsAmount")})},{id:"manage",header:"",minSize:120,maxSize:120,cell:({row:a,table:s})=>{const t=s.options.meta;return e.jsx("div",{onClick:n=>n.stopPropagation(),style:{display:"flex",justifyContent:"center"},children:e.jsx(m,{icon:Ne,variant:"secondary",value:"Remove",onClick:()=>i("removeOrderFromShipment",a.original),disabled:t==null?void 0:t.isRowLoading(a.id)})})}}]}const Ee="_variantNameCell_1652q_1",Re="_productNameImageBlock_1652q_6",Ge="_productNameImage_1652q_6",He="_variantName_1652q_1",Me="_traitOptionsCell_1652q_19",Je="_colorOptions_1652q_29",Xe="_orderLink_1652q_36",j={variantNameCell:Ee,productNameImageBlock:Re,productNameImage:Ge,variantName:He,traitOptionsCell:Me,colorOptions:Je,orderLink:Xe};function Ye({onAction:i}){return[{id:"variantName",accessorFn:a=>a.variantName,header:"Product",minSize:160,maxSize:160,cell:({row:a})=>{var t;const s=(t=a.original.photo)==null?void 0:t.thumbnailUrl;return e.jsxs("div",{className:j.variantNameCell,children:[e.jsx("div",{className:j.productNameImageBlock,children:s?e.jsx("img",{src:s,alt:a.original.variantName||"Variant",className:j.productNameImage}):e.jsx(S,{icon:y,maxWidth:"30px"})}),e.jsx(N,{delayDuration:200,text:a.getValue("variantName"),className:j.variantName,children:e.jsx("span",{children:a.getValue("variantName")})})]})}},{accessorKey:"traitOptions",header:"Traits",minSize:100,maxSize:100,cell:({row:a})=>{const s=a.original.traitOptions||[],t=s.filter(r=>r.traitTypeId===2&&r.optionColor),n=s.filter(r=>r.traitTypeId===1&&r.optionName);return e.jsxs("div",{className:j.traitOptionsCell,children:[t.map((r,o)=>e.jsx("div",{className:j.colorOptions,style:{background:r.optionColor}},`color-${o}`)),n.map((r,o)=>e.jsx("span",{style:{fontSize:"0.875rem"},children:r.optionName},`size-${o}`))]})}},{accessorKey:"orderId",header:"Order",minSize:80,cell:({row:a})=>e.jsx("div",{className:`${j.orderLink} she-text-link`,onClick:()=>i("navigateToOrder",a.original.orderId),children:a.original.orderId})},{accessorKey:"quantityPending",header:"Qty pending",minSize:100,maxSize:100,cell:({row:a})=>e.jsx("span",{children:a.original.quantityPending})},{id:"add",header:"",minSize:100,maxSize:100,cell:({row:a})=>e.jsx("div",{onClick:s=>s.stopPropagation(),children:e.jsx(m,{icon:ae,value:"Add",variant:"secondary",onClick:()=>{i("addItemToShipment",a.original.stockActionId)}})})}]}const Ze="_variantNameCell_1wbj2_1",ea="_productNameImageBlock_1wbj2_7",aa="_productNameImage_1wbj2_7",sa="_variantName_1wbj2_1",ta="_traitOptionsCell_1wbj2_20",ra="_colorOptions_1wbj2_30",na="_orderLink_1wbj2_37",la="_inputBlock_1wbj2_41",ia="_quantityNumber_1wbj2_47",ca="_quantityInput_1wbj2_58",x={variantNameCell:Ze,productNameImageBlock:ea,productNameImage:aa,variantName:sa,traitOptionsCell:ta,colorOptions:ra,orderLink:na,inputBlock:la,quantityNumber:ia,quantityInput:ca};function oa({onAction:i}){return[{id:"variantName",accessorFn:a=>a.variantName,header:"Product",minSize:160,maxSize:160,cell:({row:a})=>{var t;const s=(t=a.original.photo)==null?void 0:t.thumbnailUrl;return e.jsxs("div",{className:x.variantNameCell,children:[e.jsx("div",{className:x.productNameImageBlock,children:s?e.jsx("img",{src:s,alt:a.original.variantName||"Variant",className:x.productNameImage}):e.jsx(S,{icon:y,maxWidth:"30px"})}),e.jsx(N,{delayDuration:200,text:a.getValue("variantName"),className:x.variantName,children:e.jsx("span",{children:a.getValue("variantName")})})]})}},{accessorKey:"traitOptions",header:"Details",minSize:100,maxSize:100,cell:({row:a})=>{const s=a.original.traitOptions||[],t=s.filter(r=>r.traitTypeId===2&&r.optionColor),n=s.filter(r=>r.traitTypeId===1&&r.optionName);return e.jsxs("div",{className:x.traitOptionsCell,children:[t.map((r,o)=>e.jsx("div",{className:x.colorOptions,style:{background:r.optionColor}},`color-${o}`)),n.map((r,o)=>e.jsx("span",{style:{fontSize:"0.875rem"},children:r.optionName},`size-${o}`))]})}},{accessorKey:"orderId",header:"Order",minSize:80,cell:({row:a})=>e.jsx("div",{className:`${x.orderLink} she-text-link`,onClick:()=>i("navigateToOrder",a.original.orderId),children:a.original.orderId})},{accessorKey:"quantity",header:"Qty to pack",minSize:250,maxSize:250,cell:({row:a})=>e.jsxs("div",{className:x.inputBlock,children:[e.jsx(m,{icon:ge,variant:"secondary",onClick:()=>i("decreasePackedOrderItemQuantity",a.original.stockActionId)}),e.jsx("div",{className:x.quantityNumber,children:e.jsx("span",{className:"she-text",children:`${a.original.limitQuantityToPack}  /`})}),e.jsx(A,{className:x.quantityInput,value:a.original.quantityToPack,type:"number",minWidth:"130px",maxWidth:"130px",onDelay:s=>{a.original.quantityToPack=s,i("changePackedOrderItemQuantity",a.original)}}),e.jsx(m,{icon:B,variant:"secondary",disabled:a.original.limitQuantityToPack===a.original.quantityToPack,onClick:()=>i("increasePackedOrderItemQuantity",a.original.stockActionId)})]})}]}const da="_variantNameCell_sqmc3_1",ma="_productNameImageBlock_sqmc3_7",ua="_productNameImage_sqmc3_7",xa="_variantName_sqmc3_1",va="_traitOptionsCell_sqmc3_20",Na="_colorOptions_sqmc3_30",ga="_orderLink_sqmc3_37",_={variantNameCell:da,productNameImageBlock:ma,productNameImage:ua,variantName:xa,traitOptionsCell:va,colorOptions:Na,orderLink:ga};function ha({onAction:i}){return[{id:"variantName",accessorFn:a=>a.variantName,header:"Product",minSize:160,maxSize:160,cell:({row:a})=>{var t;const s=(t=a.original.photo)==null?void 0:t.thumbnailUrl;return e.jsxs("div",{className:_.variantNameCell,children:[e.jsx("div",{className:_.productNameImageBlock,children:s?e.jsx("img",{src:s,alt:a.original.variantName||"Variant",className:_.productNameImage}):e.jsx(S,{icon:y,maxWidth:"30px"})}),e.jsx(N,{delayDuration:200,text:a.getValue("variantName"),className:_.variantName,children:e.jsx("span",{children:a.getValue("variantName")})})]})}},{accessorKey:"traitOptions",header:"Details",minSize:100,maxSize:100,cell:({row:a})=>{const s=a.original.traitOptions||[],t=s.filter(r=>r.traitTypeId===2&&r.optionColor),n=s.filter(r=>r.traitTypeId===1&&r.optionName);return e.jsxs("div",{className:_.traitOptionsCell,children:[t.map((r,o)=>e.jsx("div",{className:_.colorOptions,style:{background:r.optionColor}},`color-${o}`)),n.map((r,o)=>e.jsx("span",{style:{fontSize:"0.875rem"},children:r.optionName},`size-${o}`))]})}},{accessorKey:"orderId",header:"Order",minSize:80,cell:({row:a})=>e.jsx("div",{className:`${_.orderLink} she-text-link`,onClick:()=>i("navigateToOrder",a.original.orderId),children:a.original.orderId})},{accessorKey:"quantity",header:"Qty packed",minSize:100,cell:({row:a})=>e.jsxs("span",{className:"she-text",children:[a.original.quantityPacked," "]})}]}function ts({isLoading:i,shipment:a,deliveryServices:s,onAction:t}){var $,F,w,K,q,W,U,V,Q,E,R,G,H,M;const[n,r]=p.useState(),[o,C]=p.useState((a==null?void 0:a.trackNumber)||null),[O,te]=p.useState((a==null?void 0:a.deliveryServiceId)||null),[re,ne]=p.useState(null),[z,le]=p.useState(null),{translate:d}=L(),ie=p.useRef(null),ce=p.useRef(null);function oe(c){return u=>e.jsx("span",{dangerouslySetInnerHTML:{__html:c},...u})}function de(c){return c==null?void 0:c.map(u=>({value:u.deliveryServiceId,text:u.deliveryServiceName,icon:oe(u.deliveryServiceLogo)}))}p.useEffect(()=>{ne(()=>{var u;const c=(u=a==null?void 0:a.orderItems)==null?void 0:u.map(P=>({...P,amount:1}));return ie.current=c,c}),le(()=>{var u;const c=(u=a==null?void 0:a.shipmentItems)==null?void 0:u.map(P=>({...P,amount:1}));return ce.current=c,c})},[a==null?void 0:a.orderItems]);function me(){return Object.values(se).map(c=>({value:c,text:ke[c]}))}return e.jsx(D,{className:l.shipmentConfigurationCard,title:d("CardTitles.ShipmentConfiguration",{shipmentId:a==null?void 0:a.shipmentId}),showCloseButton:!0,isLoading:i,showNotificationCard:!0,notificationCardProps:{title:"Cancel Shipment",titleTransKey:"CardTitles.CancelShipment",text:"This variant will be deleted, it will no longer be available for sale but you will still see it in the orders where it sold",textTransKey:"ConfirmationMessages.CancelShipment",buttonText:"Cancel",buttonTextTransKey:"Cancel",onClick:()=>t("cancelShipment",a==null?void 0:a.shipmentId)},onSecondaryButtonClick:()=>t("closeShipmentConfigurationCard"),children:e.jsx("div",{className:l.shipmentConfigurationCardContent,children:e.jsxs("div",{className:l.shipmentConfiguration,children:[e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("OrderForm.Labels.CreatedAt")}),(a==null?void 0:a.createdAt)&&e.jsx("span",{className:"she-text",children:T(a==null?void 0:a.createdAt,"date")})]}),e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("ShipmentForm.Labels.QueuePacking")}),e.jsx(X,{maxWidth:"250px",date:a==null?void 0:a.queuePacking,onSelectDate:c=>t("changeShipmentDate",{queuePacking:c,queueShipment:a==null?void 0:a.queueShipment})})]}),e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("ShipmentForm.Labels.QueueShipment")}),e.jsx(X,{maxWidth:"250px",date:a==null?void 0:a.queueShipment,onSelectDate:c=>t("changeShipmentDate",{queuePacking:a==null?void 0:a.queuePacking,queueShipment:c})})]}),e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("OrderForm.Labels.ShipmentStatus")}),e.jsx(Y,{maxWidth:"250px",hideFirstOption:!0,selected:a==null?void 0:a.shipmentStatus,items:me(),onSelect:c=>r(c)})]}),e.jsx(k,{}),e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:l.subtitleText,children:d("SectionTitles.Customer")}),e.jsx(m,{value:"Change Customer",valueTransKey:"SpecialText.ChangeCustomer",icon:he,variant:"secondary",onClick:()=>t("changeCustomer")})]}),(a==null?void 0:a.customer)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("CustomerForm.Labels.Name")}),e.jsx("div",{children:e.jsxs("div",{className:l.customerInfoAvatarBlock,children:[($=a==null?void 0:a.customer)!=null&&$.thumbnailUrl?e.jsx(S,{className:l.avatarImage,icon:a==null?void 0:a.customer.thumbnailUrl}):e.jsx("div",{className:l.avatarInitials,children:f((F=a==null?void 0:a.customer)==null?void 0:F.customerName)}),e.jsx("div",{className:l.customerInfoBlock,children:e.jsx("span",{className:"she-text",children:(w=a==null?void 0:a.customer)==null?void 0:w.customerName})})]})})]}),((K=a==null?void 0:a.customer)==null?void 0:K.email)&&e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("CustomerForm.Labels.Email")}),e.jsx("span",{className:"she-text",children:(q=a==null?void 0:a.customer)==null?void 0:q.email})]}),((W=a==null?void 0:a.customer)==null?void 0:W.phone)&&e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("CustomerForm.Labels.PhoneNumber")}),e.jsx("span",{className:"she-text",children:(U=a==null?void 0:a.customer)==null?void 0:U.phone})]})]}),e.jsx(k,{}),e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:l.subtitleText,children:d("AddressForm.Labels.AddressLine1")}),e.jsx(m,{value:"Change Address",valueTransKey:"SpecialText.ChangeAddress",icon:Ce,variant:"secondary",disabled:!(a!=null&&a.customer),onClick:()=>t("openSelectAddressCard",a==null?void 0:a.customerId)})]}),(a==null?void 0:a.deliveryAddress)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("AddressForm.Labels.AddressLine1")}),e.jsx("span",{className:"she-text",children:(V=a==null?void 0:a.deliveryAddress)==null?void 0:V.addressLine1})]}),e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("AddressForm.Labels.PostalCode")}),e.jsx("span",{className:"she-text",children:(Q=a==null?void 0:a.deliveryAddress)==null?void 0:Q.postalCode})]}),e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("AddressForm.Labels.City")}),e.jsx("span",{className:"she-text",children:(E=a==null?void 0:a.deliveryAddress)==null?void 0:E.city})]}),e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("AddressForm.Labels.State")}),e.jsx("span",{children:(R=a==null?void 0:a.deliveryAddress)==null?void 0:R.state})]}),e.jsxs("div",{className:l.shipmentDetailsItem,children:[e.jsx("span",{className:"she-text",children:d("AddressForm.Labels.Country")}),e.jsx("span",{children:(G=a==null?void 0:a.deliveryAddress)==null?void 0:G.countryName})]})]}),e.jsx(k,{}),e.jsxs("div",{className:l.selectCustomerBlock,children:[e.jsx("span",{className:l.subtitleText,children:d("ShipmentForm.Labels.OrdersInShipment")}),e.jsx(m,{value:"Select Order",valueTransKey:"SpecialText.SelectOrder",icon:B,variant:"secondary",onClick:()=>t("openSelectOrderForShipmentCard")})]}),e.jsx(I,{isLoading:!1,showHeader:!1,columns:Qe(t),data:a==null?void 0:a.orders}),((H=a==null?void 0:a.orderItems)==null?void 0:H.length)>0&&(a==null?void 0:a.shipmentStatus)!=="DeliveryPending"&&e.jsxs(e.Fragment,{children:[e.jsx(k,{}),e.jsxs("div",{className:l.shipmentProductsBlock,children:[e.jsx("span",{className:l.subtitleText,children:d("ShipmentForm.Labels.ProductsWaitingForShipment")}),e.jsx(m,{value:"Add All",valueTransKey:"SpecialText.AddAll",icon:B,variant:"info",onClick:()=>t("addAllItemsToShipment")})]}),e.jsx(I,{isLoading:!1,showHeader:!1,columns:Ye({onAction:t}),data:re})]}),((M=a==null?void 0:a.shipmentItems)==null?void 0:M.length)>0&&(a==null?void 0:a.shipmentStatus)!=="DeliveryPending"&&e.jsxs(e.Fragment,{children:[e.jsx(k,{}),e.jsx("div",{className:l.shipmentProductsBlock,children:e.jsx("span",{className:l.subtitleText,children:d("OrderActions.ConfirmPackedProducts")})}),e.jsx(I,{isLoading:!1,showHeader:!1,columns:oa({onAction:t}),data:z}),e.jsx("div",{className:l.shipmentProductsButton,children:e.jsx(m,{value:"Confirm packed products",valueTransKey:"OrderActions.ConfirmPackedProducts",icon:J,onClick:()=>t("confirmPackedProducts",z)})})]}),["DeliveryPending","Completed"].includes(a==null?void 0:a.shipmentStatus)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:l.shipmentContentBlock,children:[e.jsx(k,{}),e.jsxs("div",{className:l.packageContentBlock,children:[e.jsx("span",{className:l.subtitleText,children:d("ShipmentForm.Labels.PackageContent")}),e.jsx(I,{isLoading:!1,showHeader:!1,columns:ha({onAction:t}),data:a==null?void 0:a.shipmentItems})]})]}),e.jsxs("div",{className:l.deliveryServiceBlock,children:[e.jsx("span",{className:l.subtitleText,children:d("ShipmentForm.Labels.ConfirmDeliveryService")}),e.jsx(A,{label:"Tracking number",labelTransKey:"ShipmentForm.Labels.TrackingNumber",placeholder:"enter tracking number...",placeholderTransKey:"ShipmentForm.Placeholders.EnterTrackingNumber",fullWidth:!0,value:o,onDelay:c=>C(c)}),e.jsx(Y,{label:"Delivery service",labelTransKey:"ShipmentForm.Labels.DeliveryService",placeholder:"enter tracking number...",placeholderTransKey:"ShipmentForm.Placeholders.EnterTrackingNumber",fullWidth:!0,hideFirstOption:!0,items:de(s),selected:O,onSelect:c=>te(c)}),e.jsxs("div",{className:l.deliveryServiceButtons,children:[e.jsx(m,{value:"Return shipment to packing",valueTransKey:"OrderActions.ReturnShipmentToPacking",variant:"secondary",onClick:()=>t("returnShipmentStatusToPrevious")}),e.jsx(m,{value:(a==null?void 0:a.shipmentStatus)==="DeliveryPending"?"Confirm shipment send":"Save changes",valueTransKey:(a==null?void 0:a.shipmentStatus)==="DeliveryPending"?"OrderActions.ConfirmShipmentSend":"",icon:J,disabled:!o||!O||!a.deliveryAddressId,onClick:()=>{t("confirmDeliveryData",{trackNumber:o,deliveryServiceId:O,deliveryAddressId:a.deliveryAddressId})}})]})]})]})]})})})}const Ca="_selectCustomerAddressCard_g4gnv_1",pa="_selectCustomerAddressCardContent_g4gnv_1",ja="_customerInformationBlock_g4gnv_6",_a="_customerBlock_g4gnv_11",Sa="_noImageIcon_g4gnv_16",ka="_avatarInitials_g4gnv_23",Ia="_createAddressBlock_g4gnv_36",ya="_createAddressText_g4gnv_41",fa="_addressesListBlock_g4gnv_45",g={selectCustomerAddressCard:Ca,selectCustomerAddressCardContent:pa,customerInformationBlock:ja,customerBlock:_a,noImageIcon:Sa,avatarInitials:ka,createAddressBlock:Ia,createAddressText:ya,addressesListBlock:fa},ba="_iconCheck_1wa1s_1",Z={iconCheck:ba};function Ba({onAction:i}){return[{id:"select",minSize:70,maxSize:70,cell:({row:a,table:s})=>{const t=s.options.meta,n=r=>{r.stopPropagation(),r.preventDefault(),i("selectAddress",a.original.addressId)};return e.jsx("div",{onClick:r=>r.stopPropagation(),children:e.jsx(m,{className:a.original.isSelected===!0?Z.iconCheck:"",icon:a.original.isSelected===!0?ue:xe,variant:"ghost",onClick:n,disabled:t==null?void 0:t.isRowLoading(a.id)})})}},{id:"city",header:"Address",minSize:100,cell:({row:a})=>{const s=a.original.alias,t=a.original.addressLine1,n=a.original.addressLine2;return e.jsx("div",{className:Z.customerNameBlock,children:e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx(N,{delayDuration:200,text:s,className:"max-w-[120px] overflow-hidden text-ellipsis whitespace-nowrap",children:e.jsx("span",{className:"she-text",children:s})}),t&&e.jsx(N,{delayDuration:200,text:t,className:"max-w-[120px] overflow-hidden text-ellipsis whitespace-nowrap",children:e.jsx("span",{className:"she-subtext",children:t})}),n&&e.jsx(N,{delayDuration:200,text:n,className:"max-w-[120px] overflow-hidden text-ellipsis whitespace-nowrap",children:e.jsx("span",{className:"she-subtext",children:n})})]})})}},{id:"manage",header:"Actions",minSize:120,maxSize:120,cell:({row:a,table:s})=>{const t=s.options.meta,n=r=>{r.stopPropagation(),r.preventDefault(),i("manageAddress",a.original)};return e.jsx("div",{onClick:r=>r.stopPropagation(),children:e.jsx(m,{icon:ee,value:"Manage",variant:"secondary",onClick:n,disabled:t==null?void 0:t.isRowLoading(a.id)})})}}]}function rs({isLoading:i,isGridLoading:a,customer:s,addressesList:t,onAction:n}){return L(),e.jsx(D,{className:g.selectCustomerAddressCard,title:"Select Customer Address",isLoading:i,showCloseButton:!0,onSecondaryButtonClick:()=>n("closeSelectAddressCard"),children:e.jsxs("div",{className:g.selectCustomerAddressCardContent,children:[e.jsxs("div",{className:g.customerInformationBlock,children:[e.jsxs("div",{className:g.customerBlock,children:[e.jsx("div",{children:s!=null&&s.thumbnailUrl?e.jsx("img",{src:s==null?void 0:s.thumbnailUrl,alt:s==null?void 0:s.customerName,className:"object-cover rounded-md w-full h-full",style:{width:"48px",height:"48px"}}):s!=null&&s.customerName?e.jsx("div",{className:g.avatarInitials,children:f(s==null?void 0:s.customerName)}):e.jsx("div",{className:g.noImageIcon,children:e.jsx(S,{icon:y,maxWidth:"30px"})})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx(N,{delayDuration:200,text:s==null?void 0:s.customerName,className:"max-w-[120px] overflow-hidden text-ellipsis whitespace-nowrap",children:e.jsx("span",{className:"she-text",children:s==null?void 0:s.customerName})}),(s==null?void 0:s.email)&&e.jsx(N,{delayDuration:200,text:s==null?void 0:s.email,className:"max-w-[120px] overflow-hidden text-ellipsis whitespace-nowrap",children:e.jsx("span",{className:"she-subtext",children:s==null?void 0:s.email})})]})]}),e.jsx(m,{value:"Manage",icon:ee,variant:"secondary",onClick:()=>n("openCustomerCard",s)})]}),e.jsxs("div",{className:g.createAddressBlock,children:[e.jsxs("div",{className:g.createAddressText,children:[e.jsx("span",{className:"she-text",children:"Missing address?"}),e.jsx("span",{className:"she-text",children:"Create one!"})]}),e.jsx(m,{value:"Create Address",icon:B,variant:"secondary",onClick:()=>n("manageAddress",null)})]}),e.jsxs("div",{className:g.addressesListBlock,children:[e.jsx(A,{placeholder:"search address...",isSearch:!0,fullWidth:!0,showClearBtn:!0,onDelay:r=>n("searchAddress",r),onClear:()=>n("searchAddress",null)}),e.jsx(I,{data:t,isLoading:a,showHeader:!1,columns:Ba({onAction:n}),skeletonQuantity:10,customMessage:"There are no addresses created yet"})]})]})})}const Oa="_selectOrderForShipmentCard_py9am_1",Pa="_selectOrderForShipmentCardContent_py9am_5",Ta="_customerBlockContainer_py9am_10",Da="_customerBlock_py9am_10",La="_customerInfo_py9am_20",Aa="_customerInfoAvatarBlock_py9am_26",za="_avatarImage_py9am_31",$a="_avatarInitials_py9am_34",Fa="_customerName_py9am_47",h={selectOrderForShipmentCard:Oa,selectOrderForShipmentCardContent:Pa,customerBlockContainer:Ta,customerBlock:Da,customerInfo:La,customerInfoAvatarBlock:Aa,avatarImage:za,avatarInitials:$a,customerName:Fa},wa="_customerNameBlock_c3ncm_1",Ka="_noImageIcon_c3ncm_7",qa="_avatarInitials_c3ncm_14",Wa="_shipmentStatus_c3ncm_28",Ua="_shipmentStatusAvailable_c3ncm_38",Va="_shipmentStatusNotAvailable_c3ncm_44",Qa="_selectButton_c3ncm_62",v={customerNameBlock:wa,noImageIcon:Ka,avatarInitials:qa,shipmentStatus:Wa,shipmentStatusAvailable:Ua,shipmentStatusNotAvailable:Va,selectButton:Qa};function Ea(i){const a=s=>s==="New"||s==="Pending"?v.shipmentStatusAvailable:s==="Not Available"?v.shipmentStatusNotAvailable:"";return[{id:"id",header:"ID",minSize:60,maxSize:60,cell:({row:s})=>e.jsx("span",{children:s.original.id})},{id:"customer",accessorFn:s=>s.variantName,header:"customer",minSize:120,cell:({row:s})=>{var r,o;const t=(r=s.original.customer)==null?void 0:r.thumbnailUrl,n=(o=s.original.customer)==null?void 0:o.customerName;return e.jsxs("div",{className:v.customerNameBlock,children:[t?e.jsx("img",{src:t,alt:n||"Customer",className:"object-cover rounded-md w-full h-full",style:{width:"48px",height:"48px"}}):n?e.jsx("div",{className:v.avatarInitials,children:f(n)}):e.jsx("div",{className:v.noImageIcon,children:e.jsx(S,{icon:y,maxWidth:"30px"})}),e.jsx(N,{delayDuration:200,text:n,className:"max-w-[100%] overflow-hidden text-ellipsis whitespace-nowrap",children:e.jsx("span",{className:"she-text",children:n})})]})}},{id:"date",header:"Date",minSize:90,maxSize:90,cell:({row:s})=>e.jsx("span",{children:T(s.original.date,"date")})},{id:"orderStatus",header:"Order",minSize:100,maxSize:100,cell:({row:s})=>{const t=s.original.orderStatus;return e.jsx("div",{className:`${v.shipmentStatus} ${a(t)}`,children:e.jsx("span",{children:t})})}},{id:"paymentStatus",header:"Payment",minSize:100,maxSize:100,cell:({row:s})=>{const t=s.original.paymentStatus;return e.jsx("div",{className:`${v.shipmentStatus} ${a(t)}`,children:e.jsx("span",{children:t})})}},{id:"shipmentStatus",header:"Status",minSize:100,maxSize:100,cell:({row:s})=>{const t=s.original.shipmentStatus;return e.jsx("div",{className:`${v.shipmentStatus} ${a(t)}`,children:e.jsx("span",{children:t})})}},{id:"value",header:"Value",minSize:80,maxSize:80,cell:({row:s})=>{const t=s.original.currency.briefName;return e.jsx("span",{className:"she-text",children:`${s.original.value}${t}`})}},{id:"add",header:"",minSize:100,maxSize:100,cell:({row:s})=>e.jsx("div",{className:v.selectButton,onClick:t=>t.stopPropagation(),children:e.jsx(m,{icon:ae,value:"Add",variant:"secondary",onClick:()=>i("connectOrderToShipment",s.original)})})}]}function ns({isLoading:i,isGridLoading:a,ordersGridRequestModel:s,customer:t,onAction:n}){var o;L();function r(){return Object.values(je).map(C=>({value:C,description:_e[C]}))}return e.jsx(D,{className:h.selectOrderForShipmentCard,title:"Select order for shipment",titleTransKey:"",showCloseButton:!0,isLoading:i,onSecondaryButtonClick:()=>n("closeSelectOrderForShipmentCard"),children:e.jsxs("div",{className:h.selectOrderForShipmentCardContent,children:[e.jsxs("div",{className:h.customerBlockContainer,children:[e.jsx("span",{className:"she-text",children:"Show customer orders:"}),e.jsxs("div",{className:h.customerBlock,children:[e.jsxs("div",{className:h.customerInfo,children:[t&&e.jsxs("div",{className:h.customerInfoAvatarBlock,children:[t!=null&&t.thumbnailUrl?e.jsx("img",{src:t==null?void 0:t.thumbnailUrl,alt:(t==null?void 0:t.name)||(t==null?void 0:t.customerName),className:h.avatarImage}):e.jsx("div",{className:h.avatarInitials,children:f((t==null?void 0:t.name)||(t==null?void 0:t.customerName))}),e.jsx("span",{className:`${h.customerName} she-subtext`,children:(t==null?void 0:t.name)||(t==null?void 0:t.customerName)})]}),e.jsx(m,{value:t?"Change Customer":"Select Customer",valueTransKey:t?"SpecialText.ChangeCustomer":"OrderActions.SelectCustomer",icon:pe,variant:"secondary",onClick:()=>n("changeCustomer")})]}),e.jsx(m,{value:"Show All",valueTransKey:"SpecialText.ShowAll",icon:ve,variant:"secondary",onClick:()=>n("showAllOrders")})]})]}),e.jsx(I,{gridRequestModel:s,data:s==null?void 0:s.items,columns:Ea(n),sortingItems:r(),skeletonQuantity:(o=s==null?void 0:s.items)==null?void 0:o.length,customMessage:"No orders created yet",customMessageTransKey:"",isLoading:a,onApplyColumns:C=>n("applyColumns",C),onDefaultColumns:()=>n("resetColumns"),onGridRequestChange:C=>n("gridRequestChange",C),children:e.jsx(Se,{})})]})})}export{se as S,ke as a,ts as b,ns as c,rs as d};
