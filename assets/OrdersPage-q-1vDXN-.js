import{j as s,z as h,m as x,I as S,x as f,k as p,B as C,a as l,S as m,E as _,r as y}from"./index-CqLEDb0h.js";import{c as j}from"./OrdersPage.module-m8m3mWZe.js";import{G as O,a as P}from"./GridSortingEnum-Qa64oiYF.js";import{u as v}from"./useOrdersPageService-D5yYVCl1.js";import{S as I}from"./SheCard-CX5qtFRW.js";import{G as N}from"./GridShowItemsFilter-CBaCqxs7.js";import{S as k}from"./SheSelect-C_zn2LY0.js";import{S as z}from"./SheGrid-Fci2HgNW.js";import{I as B}from"./useAppTranslation-CsMEigHw.js";import{G}from"./GridDateRangeFilter-BRmQwoG_.js";import{a as R,S as b}from"./SheContextSidebar-CL4FXvtg.js";import{P as E}from"./plus-Cg_Vlo1I.js";import"./SheCardNotification-BVOYMQJ2.js";import"./ComponentViewEnum-Ba6F4129.js";import"./SheInput-DbpOA7IC.js";import"./trash-Czml7Fyd.js";import"./chevron-up-DLJ1s3UP.js";import"./select-DL5f33uf.js";import"./settings-2-BKZv0M77.js";import"./SheDatePicker-DFDs0SXU.js";import"./folder-up-D4AQ9V_0.js";const D="_ordersCard_1ywly_1",K="_ordersCardContent_1ywly_5",$="_ordersCardHeader_1ywly_9",L="_createOrderButton_1ywly_12",u={ordersCard:D,ordersCardContent:K,ordersCardHeader:$,createOrderButton:L},V="_productStatus_1fxes_1",H="_customerBlock_1fxes_15",T="_customerImage_1fxes_19",w="_customerInfo_1fxes_27",W="_statusBlank_1fxes_39",q="_statusSuccess_1fxes_45",F="_statusWarning_1fxes_51",M="_statusProcess_1fxes_57",U="_statusProgressing_1fxes_63",A="_statusDone_1fxes_69",Q="_statusError_1fxes_75",r={productStatus:V,customerBlock:H,customerImage:T,customerInfo:w,statusBlank:W,statusSuccess:q,statusWarning:F,statusProcess:M,statusProgressing:U,statusDone:A,statusError:Q};function J(c){const n=e=>{switch(e){case"New":return r.statusBlank;case"Processing":return r.statusProcess;case"Pending":return r.statusWarning;case"Shipped":return r.statusProgressing;case"Delivered":return r.statusDone;case"Returned":return r.statusWarning;case"Refunded":return r.statusError;case"Cancelled":return r.statusError;case"Paid":return r.statusSuccess;default:return r.statusBlank}};return[{accessorKey:"id",header:"ID",minSize:50,maxSize:50},{accessorKey:"customer",header:"Customer",minSize:220,cell:({row:e})=>{const t=e.original.customer.thumbnailUrl;return s.jsx(h,{delayDuration:200,text:e.original.customer.customerName,description:`email: ${e.original.customer.email}, phone: ${e.original.customer.phone}`,className:"max-w-[100%] overflow-hidden text-ellipsis whitespace-nowrap",children:s.jsxs("div",{className:r.customerBlock,children:[s.jsx("div",{className:r.customerImage,children:s.jsx(x,{icon:t||B,fullWidth:!0,iconView:S.BUTTON})}),s.jsxs("div",{className:r.customerInfo,children:[s.jsx("span",{className:"she-text",children:e.original.customer.customerName}),s.jsx("span",{className:"she-subtext",children:e.original.customer.email}),s.jsx("span",{className:"she-subtext",children:e.original.customer.phone})]})]})})}},{accessorKey:"date",header:"Date",minSize:100,cell:({row:e})=>s.jsx("span",{children:f(e.getValue("date"),"date")})},{accessorKey:"channel",header:"Channel",minSize:100,cell:({row:e})=>s.jsx("span",{children:e.getValue("channel")})},{accessorKey:"orderStatus",header:"Order",minSize:100,cell:({row:e})=>{const t=e.getValue("orderStatus");return s.jsx("div",{className:`${r.productStatus} ${n(t)}`,children:s.jsx("span",{children:t})})}},{accessorKey:"paymentStatus",header:"Payment",minSize:100,cell:({row:e})=>{const t=e.getValue("paymentStatus");return s.jsx("div",{className:`${r.productStatus} ${n(t)}`,children:s.jsx("span",{children:t})})}},{accessorKey:"count",header:"Items",minSize:80,maxSize:80,cell:({row:e})=>s.jsx("span",{children:e.getValue("count")})},{accessorKey:"value",header:"Value",minSize:120,maxSize:120,cell:({row:e})=>s.jsx("span",{children:`${e.getValue("value")} ${e.original.currency.briefName}`})},{accessorKey:"income",header:"Income",minSize:120,maxSize:120,cell:({row:e})=>s.jsx("span",{children:`${e.getValue("income")} ${e.original.currency.briefName}`})},{id:"manage",header:"",minSize:120,maxSize:120,cell:({row:e,table:t})=>{const a=t.options.meta,i=o=>{o.stopPropagation(),o.preventDefault(),c(e.id,a==null?void 0:a.setLoadingRow,e.original)};return s.jsx("div",{onClick:o=>o.stopPropagation(),style:{display:"flex",justifyContent:"center"},children:s.jsx(p,{icon:C,variant:"secondary",value:"Manage",onClick:i,disabled:a==null?void 0:a.isRowLoading(e.id)})})}}]}function X({isLoading:c,isGridLoading:n,preferences:e,sortingOptions:t,ordersGridRequestModel:a,onAction:i}){function o(d,Y,g){i("manageOrder",g)}return s.jsxs("div",{className:u.ordersCard,children:[s.jsx(I,{className:u.ordersCardContent,headerClassName:u.ordersCardHeader,title:"Orders",titleTransKey:"CardTitles.Orders",isLoading:c,children:s.jsxs(z,{isLoading:n,columns:J(o),data:a.items,gridRequestModel:a,sortingItems:t,columnsPreferences:e,preferenceContext:"productReferences",skeletonQuantity:a.pageSize,onApplyColumns:d=>i("applyColumns",d),onDefaultColumns:()=>i("resetColumns"),onGridRequestChange:d=>i("gridRequestChange",d),children:[s.jsx(G,{}),s.jsx(k,{icon:R,placeholder:"Status",placeholderTransKey:"OrderForm.Placeholders.Status",minWidth:"150px"}),s.jsx(N,{context:"Canceled"})]})}),s.jsx(p,{className:u.createOrderButton,value:"Create Order",valueTransKey:"OrderActions.CreateOrder",icon:E,variant:"info",onClick:()=>i("createOrder")})]})}function _e(){const c=v(),n=l(m.ORDERS),e=l(m.APP),t=Object.values(O).map(o=>({value:o,description:P[o]})),{orderId:a}=_();y.useEffect(()=>{c.getListOfOrdersForGridHandler(n.ordersGridRequestModel)},[]);async function i(o,d){switch(o){case"createOrder":c.createOrderHandler();break;case"manageOrder":c.manageOrderHandler(d);break;case"gridRequestChange":c.handleGridRequestChange(d);break;case"applyColumns":c.updateUserPreferencesHandler(d);break;case"resetColumns":c.resetUserPreferencesHandler("products");break}}return s.jsx("div",{className:j.ordersPage,children:s.jsx(b,{menuCollectionType:"sales",menuTitle:"Sales",itemId:Number(a),counter:n.salesCounters,activeCards:n.activeCards,children:s.jsx(X,{isLoading:n.isOrdersCardLoading,isGridLoading:n.isOrdersGridLoading,preferences:e.preferences,sortingOptions:t,ordersGridRequestModel:n.ordersGridRequestModel,onAction:i})})})}export{_e as OrdersPage};
