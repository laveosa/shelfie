import{j as s,q as h,s as f,e as g,o as _,M as p,F as T,t as j,n as R,S as N,r as k,v}from"./index-BgOJB3Ra.js";import{S as x}from"./SheCard-CCn2EH8C.js";import{S as w}from"./SheInput-D1_7mt6S.js";import{S as Z}from"./SheTextarea-C4YXuBkw.js";import{C as M}from"./ComponentViewEnum-Ba6F4129.js";import{O as H,S}from"./SheContextSidebar-DxIT1Qz7.js";import{T as A}from"./SheCardNotification-DSQmZ-ff.js";import"./useAppTranslation-CT98VBjh.js";import"./chevron-up-uQrm97uW.js";import"./settings-2-Do0HRWMK.js";import"./folder-up-tYay7GWq.js";import"./trash-C8ichjcO.js";import"./plus-CyuclygH.js";const b={},C="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20800%20800'%3e%3cradialGradient%20id='a'%20cx='101.9'%20cy='809'%20r='1.1'%20gradientTransform='matrix(800%200%200%20-800%20-81386%20648000)'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0'%20style='stop-color:%2309f'/%3e%3cstop%20offset='.6'%20style='stop-color:%23a033ff'/%3e%3cstop%20offset='.9'%20style='stop-color:%23ff5280'/%3e%3cstop%20offset='1'%20style='stop-color:%23ff7061'/%3e%3c/radialGradient%3e%3cpath%20fill='url(%23a)'%20d='M400%200C174.7%200%200%20165.1%200%20388c0%20116.6%2047.8%20217.4%20125.6%20287%206.5%205.8%2010.5%2014%2010.7%2022.8l2.2%2071.2a32%2032%200%200%200%2044.9%2028.3l79.4-35c6.7-3%2014.3-3.5%2021.4-1.6%2036.5%2010%2075.3%2015.4%20115.8%2015.4%20225.3%200%20400-165.1%20400-388S625.3%200%20400%200z'/%3e%3cpath%20fill='%23FFF'%20d='m159.8%20501.5%20117.5-186.4a60%2060%200%200%201%2086.8-16l93.5%2070.1a24%2024%200%200%200%2028.9-.1l126.2-95.8c16.8-12.8%2038.8%207.4%2027.6%2025.3L522.7%20484.9a60%2060%200%200%201-86.8%2016l-93.5-70.1a24%2024%200%200%200-28.9.1l-126.2%2095.8c-16.8%2012.8-38.8-7.3-27.5-25.2z'/%3e%3c/svg%3e",B="_messengerCard_1ue3b_1",L="_messengerCardContent_1ue3b_1",P="_chatsList_1ue3b_6",F="_chatItem_1ue3b_14",$="_avatarNameBlock_1ue3b_26",G="_chatAvatar_1ue3b_30",O="_chatAvatarImage_1ue3b_41",E="_facebookLogo_1ue3b_44",D="_avatarInitials_1ue3b_52",U="_nameConversationBlock_1ue3b_70",W="_chatName_1ue3b_70",q="_chatLastMessage_1ue3b_73",z="_chatTime_1ue3b_80",Y="_selectedChat_1ue3b_86",n={messengerCard:B,messengerCardContent:L,chatsList:P,chatItem:F,avatarNameBlock:$,chatAvatar:G,chatAvatarImage:O,facebookLogo:E,avatarInitials:D,nameConversationBlock:U,chatName:W,chatLastMessage:q,chatTime:z,selectedChat:Y};function V({chats:e,selectedChat:r,onAction:u}){return s.jsx(x,{className:n.messengerCard,children:s.jsxs("div",{className:n.messengerCardContent,children:[s.jsx(w,{placeholder:"Search",fullWidth:!0,isSearch:!0,showClearBtn:!0,onDelay:t=>{u("chatListSearch",{value:t})}}),s.jsx("div",{className:n.chatsList,children:e.map(t=>{const d=t.userId===r;return s.jsxs("div",{className:`${n.chatItem} ${d?n.selectedChat:""}`,onClick:()=>u("onChatClick",t),children:[s.jsxs("div",{className:n.avatarNameBlock,children:[s.jsxs("div",{className:n.chatAvatar,onClick:l=>{l.stopPropagation(),u("onAvatarClick",t.userId)},children:[t.userPrifilePic?s.jsx("img",{src:t.userPrifilePic,alt:t.userId.toString(),className:n.chatAvatarImage}):s.jsx("div",{className:n.avatarInitials,children:h(t.userName)}),s.jsx("img",{src:C,alt:"facebook-logo",className:n.facebookLogo})]}),s.jsxs("div",{className:n.nameConversationBlock,children:[s.jsx("div",{className:n.chatName,children:s.jsx("span",{className:"she-text",children:t.userName})}),s.jsx("div",{className:n.chatLastMessage,children:s.jsx("span",{children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusamus, ad atque doloribus id magni molestiae repellat veniam. Deserunt dignissimos, vel?"})})]})]}),s.jsx("div",{className:n.chatTime,children:s.jsx("span",{children:f(t.lastTimeUpdate,"time")})})]},t.userId)})})]})})}const Q="_messengerConversationCard_10t5j_1",J="_messengerConversationCardContent_10t5j_1",K="_messengerConversationCardHeader_10t5j_6",X="_avatarNameBlock_10t5j_11",ee="_chatAvatar_10t5j_16",se="_chatAvatarImage_10t5j_27",te="_facebookLogo_10t5j_30",re="_avatarInitials_10t5j_38",ae="_chatName_10t5j_56",ie="_headerButtonBlock_10t5j_59",de="_conversationItems_10t5j_64",ne="_conversationItem_10t5j_64",oe="_conversationItemFromMe_10t5j_77",ce="_conversationItemToMe_10t5j_85",a={messengerConversationCard:Q,messengerConversationCardContent:J,messengerConversationCardHeader:K,avatarNameBlock:X,chatAvatar:ee,chatAvatarImage:se,facebookLogo:te,avatarInitials:re,chatName:ae,headerButtonBlock:ie,conversationItems:de,conversationItem:ne,conversationItemFromMe:oe,conversationItemToMe:ce};function me({chat:e,onAction:r,onReceiveConversation:u}){const t=[{id:1,senderId:e.userId,receiverId:456,text:"Hey, how are you? Hey, how are you?Hey, how are you?Hey, how are you?Hey, how are you?Hey, how are you?Hey, how are you?Hey, how are you?Hey, how are you?Hey, how are you?Hey, how are you?Hey, how are you?Hey, how are you?Hey, how are you?Hey, how are you?Hey, how are you?Hey, how are you?Hey, how are you?Hey, how are you?Hey, how are you?Hey, how are you?Hey, how are you?Hey, how are you?Hey, how are you?Hey, how are you?Hey, how are you?",timestamp:"2025-04-28T08:00:00Z",isRead:!0},{id:2,senderId:456,receiverId:e.userId,text:"Good, just woke up. You?",timestamp:"2025-04-28T08:01:00Z",isRead:!0},{id:3,senderId:e.userId,receiverId:456,text:"Same here, planning my day.",timestamp:"2025-04-28T08:02:00Z",isRead:!0},{id:4,senderId:456,receiverId:e.userId,text:"Busy schedule?",timestamp:"2025-04-28T08:03:00Z",isRead:!0},{id:5,senderId:e.userId,receiverId:456,text:"Yeah, a lot of meetings.",timestamp:"2025-04-28T08:04:00Z",isRead:!0},{id:6,senderId:456,receiverId:e.userId,text:"Same here. Mondays are crazy.",timestamp:"2025-04-28T08:05:00Z",isRead:!0},{id:7,senderId:e.userId,receiverId:456,text:"Tell me about it.",timestamp:"2025-04-28T08:06:00Z",isRead:!0},{id:8,senderId:456,receiverId:e.userId,text:"Coffee helps though!",timestamp:"2025-04-28T08:07:00Z",isRead:!0},{id:9,senderId:e.userId,receiverId:456,text:"Definitely. Already had two cups.",timestamp:"2025-04-28T08:08:00Z",isRead:!0},{id:10,senderId:456,receiverId:e.userId,text:"Haha same!",timestamp:"2025-04-28T08:09:00Z",isRead:!0},{id:11,senderId:e.userId,receiverId:456,text:"Plans for today?",timestamp:"2025-04-28T08:10:00Z",isRead:!0},{id:12,senderId:456,receiverId:e.userId,text:"Meetings till noon, then project work.",timestamp:"2025-04-28T08:11:00Z",isRead:!0},{id:13,senderId:e.userId,receiverId:456,text:"Nice. Hope it goes smooth!",timestamp:"2025-04-28T08:12:00Z",isRead:!0},{id:14,senderId:456,receiverId:e.userId,text:"Thanks! You too!",timestamp:"2025-04-28T08:13:00Z",isRead:!0},{id:15,senderId:e.userId,receiverId:456,text:"Need to prep slides first.",timestamp:"2025-04-28T08:14:00Z",isRead:!0},{id:16,senderId:456,receiverId:e.userId,text:"Good luck!",timestamp:"2025-04-28T08:15:00Z",isRead:!0},{id:17,senderId:e.userId,receiverId:456,text:"Thanks, appreciate it.",timestamp:"2025-04-28T08:16:00Z",isRead:!0},{id:18,senderId:456,receiverId:e.userId,text:"Let's catch up later?",timestamp:"2025-04-28T08:17:00Z",isRead:!0},{id:19,senderId:e.userId,receiverId:456,text:"Sure, after lunch maybe?",timestamp:"2025-04-28T08:18:00Z",isRead:!0},{id:20,senderId:456,receiverId:e.userId,text:"Perfect!",timestamp:"2025-04-28T08:19:00Z",isRead:!0},{id:21,senderId:e.userId,receiverId:456,text:"BTW, did you see the new designs?",timestamp:"2025-04-28T08:20:00Z",isRead:!0},{id:22,senderId:456,receiverId:e.userId,text:"Not yet, planning to today.",timestamp:"2025-04-28T08:21:00Z",isRead:!0},{id:23,senderId:e.userId,receiverId:456,text:"They're amazing, you're gonna love them.",timestamp:"2025-04-28T08:22:00Z",isRead:!0},{id:24,senderId:456,receiverId:e.userId,text:"Can't wait!",timestamp:"2025-04-28T08:23:00Z",isRead:!0},{id:25,senderId:e.userId,receiverId:456,text:"Sent you the link on Slack.",timestamp:"2025-04-28T08:24:00Z",isRead:!0},{id:26,senderId:456,receiverId:e.userId,text:"Got it, thanks!",timestamp:"2025-04-28T08:25:00Z",isRead:!0},{id:27,senderId:e.userId,receiverId:456,text:"Np :)",timestamp:"2025-04-28T08:26:00Z",isRead:!0},{id:28,senderId:456,receiverId:e.userId,text:"Gotta go into a call now.",timestamp:"2025-04-28T08:27:00Z",isRead:!0},{id:29,senderId:e.userId,receiverId:456,text:"Good luck!",timestamp:"2025-04-28T08:28:00Z",isRead:!0},{id:30,senderId:456,receiverId:e.userId,text:"Thanks, talk later!",timestamp:"2025-04-28T08:29:00Z",isRead:!0},{id:31,senderId:e.userId,receiverId:456,text:"Ping me if you need anything.",timestamp:"2025-04-28T08:30:00Z",isRead:!0},{id:32,senderId:456,receiverId:e.userId,text:"Will do!",timestamp:"2025-04-28T08:31:00Z",isRead:!0},{id:33,senderId:e.userId,receiverId:456,text:"Cool!",timestamp:"2025-04-28T08:32:00Z",isRead:!0},{id:34,senderId:456,receiverId:e.userId,text:"Heading out for lunch soon.",timestamp:"2025-04-28T11:00:00Z",isRead:!0},{id:35,senderId:e.userId,receiverId:456,text:"Enjoy!",timestamp:"2025-04-28T11:01:00Z",isRead:!0},{id:36,senderId:456,receiverId:e.userId,text:"Thanks, you too.",timestamp:"2025-04-28T11:02:00Z",isRead:!0},{id:37,senderId:e.userId,receiverId:456,text:"Will do.",timestamp:"2025-04-28T11:03:00Z",isRead:!0},{id:38,senderId:456,receiverId:e.userId,text:"Back from lunch!",timestamp:"2025-04-28T12:00:00Z",isRead:!0},{id:39,senderId:e.userId,receiverId:456,text:"Nice, how was it?",timestamp:"2025-04-28T12:01:00Z",isRead:!0},{id:40,senderId:456,receiverId:e.userId,text:"Delicious ðŸ˜‹",timestamp:"2025-04-28T12:02:00Z",isRead:!0},{id:41,senderId:e.userId,receiverId:456,text:"Now sleepy? :D",timestamp:"2025-04-28T12:03:00Z",isRead:!0},{id:42,senderId:456,receiverId:e.userId,text:"A little ðŸ˜…",timestamp:"2025-04-28T12:04:00Z",isRead:!0},{id:43,senderId:e.userId,receiverId:456,text:"Hang in there!",timestamp:"2025-04-28T12:05:00Z",isRead:!0},{id:44,senderId:456,receiverId:e.userId,text:"Trying my best!",timestamp:"2025-04-28T12:06:00Z",isRead:!0},{id:45,senderId:e.userId,receiverId:456,text:"Almost done for today.",timestamp:"2025-04-28T16:00:00Z",isRead:!0},{id:46,senderId:456,receiverId:e.userId,text:"Yes, finally.",timestamp:"2025-04-28T16:01:00Z",isRead:!0},{id:47,senderId:e.userId,receiverId:456,text:"Any evening plans?",timestamp:"2025-04-28T16:02:00Z",isRead:!0},{id:48,senderId:456,receiverId:e.userId,text:"Just relaxing, watching TV.",timestamp:"2025-04-28T16:03:00Z",isRead:!0},{id:49,senderId:e.userId,receiverId:456,text:"Sounds good!",timestamp:"2025-04-28T16:04:00Z",isRead:!0},{id:50,senderId:456,receiverId:e.userId,text:"Yep, much needed.",timestamp:"2025-04-28T16:05:00Z",isRead:!0}];return s.jsx(x,{className:a.messengerConversationCard,width:"450px",showFooter:!0,showPrimaryButton:!0,primaryButtonTitle:"Send",showSecondaryButton:!0,secondaryButtonTitle:"Close",view:M.CARD,onPrimaryButtonClick:()=>r("sendMessage"),onSecondaryButtonClick:()=>r("onChatClick",e),children:s.jsxs("div",{className:a.messengerConversationCardContent,children:[s.jsxs("div",{className:a.messengerConversationCardHeader,children:[s.jsxs("div",{className:a.avatarNameBlock,children:[s.jsxs("div",{className:a.chatAvatar,onClick:d=>{d.stopPropagation(),r("onAvatarClick",e.userId)},children:[e.userPrifilePic?s.jsx("img",{src:e.userPrifilePic,alt:e.userId.toString(),className:a.chatAvatarImage}):s.jsx("div",{className:a.avatarInitials,children:h(e.userName)}),s.jsx("img",{src:C,alt:"facebook-logo",className:a.facebookLogo})]}),s.jsx("div",{className:a.chatName,children:s.jsx("span",{className:"she-title",children:e.userName})})]}),s.jsxs("div",{className:a.headerButtonBlock,children:[s.jsx(g,{icon:H,variant:"secondary"}),s.jsx(g,{icon:A,variant:"secondary"})]})]}),s.jsx(_,{}),s.jsx("div",{className:a.conversationItems,children:t==null?void 0:t.map(d=>s.jsx("div",{className:a.conversationItem,children:d.senderId!=e.userId?s.jsx("div",{className:a.conversationItemFromMe,children:s.jsx("span",{children:d.text})},d.id):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:a.chatAvatar,onClick:l=>{l.stopPropagation(),r("onAvatarClick",e.userId)},children:e.userPrifilePic?s.jsx("img",{src:e.userPrifilePic,alt:e.userId.toString(),className:a.chatAvatarImage}):s.jsx("div",{className:a.avatarInitials,children:h(e.userName)})}),s.jsx("div",{className:a.conversationItemToMe,children:s.jsx("span",{children:d.text})},d.id)]})},d.id))}),s.jsx("div",{children:s.jsx(Z,{fullWidth:!0,rows:2})})]})})}function ue(){const[e]=p.useGetMessagesFromUserMutation(),[r]=p.useSendMessageMutation(),[u]=p.useListOfChatsMutation(),[t]=T.useLazyGetMessagesFromCurrentConversationQuery();function d(i,m){return e({userId:i,model:m}).then(I=>I)}function l(i,m){return r({senderId:i,model:m}).then(I=>I)}function c(i){return u(i).then(m=>m.data)}function o(i){return t(i).then(m=>m)}return{getMessagesFromUserHandler:d,sendMessageHandler:l,listOfChatsHandler:c,getMessagesFromCurrentConversationHandler:o}}function Re(){var l;const e=j(),r=R(N.MESSENGER),u=ue();k.useEffect(()=>{u.listOfChatsHandler(r.messengerRequestModel).then(c=>{e(v.refreshMessengerResponseModel(c))})},[]);function t(c,o){const i=`${c}-${o}`;if(r.activeCards.includes(i)){const I=r.activeCards.filter(y=>y!==i);e(v.refreshActiveCards(I))}else{const I=[...r.activeCards,i];e(v.refreshActiveCards(I))}}function d(c,o){switch(c){case"chatListSearch":console.log("Search payload:",o);const i={...r.messengerRequestModel,searchQuery:o.value};u.listOfChatsHandler(i).then(m=>{e(v.refreshMessengerResponseModel(m))});break;case"onChatClick":if(!o||!o.userId)return;e(v.refreshSelectedChat(o)),t("messengerConversationCard",o.userId);break;case"onAvatarClick":console.log("AVATAR",o);break}}return s.jsxs(S,{className:b.messengerPage,hideSidebarBlock:!0,children:[s.jsx(V,{chats:r.messengerResponseModel.items,selectedChat:(l=r.selectedChat)==null?void 0:l.userId,onAction:d}),r.activeCards.filter(c=>c.startsWith("messengerConversationCard-")).map(c=>{const o=c.split("-")[1],i=r.messengerResponseModel.items.find(m=>String(m.userId)===o);return i?s.jsx(me,{chat:i,onAction:d,onReceiveConversation:u.getMessagesFromCurrentConversationHandler},c):null})]})}export{Re as MessengerPage};
