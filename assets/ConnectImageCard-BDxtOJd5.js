import{j as s,i as u,n as C}from"./index-QVa4z7_S.js";import{S as P}from"./SheCard-kTEBGX3C.js";import{S as v}from"./SheGrid-B__wIDKU.js";import{S as N}from"./SheFileUploader-BMeh559s.js";import{c as S}from"./SheSelect-B0BpQ26V.js";import{p as k}from"./placeholder-image-BgG3Yd5d.js";import{o as y}from"./SheContextSidebar-D0hr3lNH.js";import{T as _}from"./SheCardNotification-Cx8SJ7ob.js";import{u as T}from"./useAppTranslation-Cig1lqc1.js";const b="_productPhotosCard_s6dni_1",w="_productPhotosCardContent_s6dni_1",z="_managePhotos_s6dni_6",l={productPhotosCard:b,productPhotosCardContent:w,managePhotos:z},R=i=>[{accessorKey:"thumbnailUrl",header:"Preview",minSize:80,maxSize:80,cell:({row:e,table:o})=>{const a=e.getValue("thumbnailUrl"),t=o.options.meta;return s.jsx("div",{className:"relative w-12 h-12 cursor-pointer",onClick:()=>i("image",e.id,t==null?void 0:t.setLoadingRow),children:s.jsx("img",{src:a,alt:"photo",className:"object-cover rounded-md w-full h-full",onError:n=>{n.currentTarget.src=k}})})}},{accessorKey:"format",header:"Format",minSize:150,maxSize:150,cell:({row:e})=>s.jsx("span",{className:"she-subtext",children:`${e.original.height}px x ${e.original.width}px`})},{accessorKey:"isActive",header:"Active",minSize:60,maxSize:60,cell:({row:e,table:o})=>{const a=o.options.meta;return s.jsx(S,{disabled:a==null?void 0:a.isRowLoading(e.id),checked:e.getValue("isActive"),onCheckedChange:()=>i("activate",e.id,a==null?void 0:a.setLoadingRow,e)})}},{id:"map",header:"Actions",minSize:100,maxSize:100,cell:({row:e,table:o})=>{const a=o.options.meta;return s.jsx(u,{icon:y,value:"Map",variant:"secondary",onClick:()=>i("connect",e.id,a==null?void 0:a.setLoadingRow,e)})}},{id:"delete",minSize:60,maxSize:60,cell:({row:e,table:o})=>{const a=o.options.meta;return s.jsx(u,{icon:_,variant:"outline",onClick:()=>i("delete",e.id,a==null?void 0:a.setLoadingRow,e)})}}];function F({isLoading:i,isImageUploaderLoading:e,isGridLoading:o,data:a,contextId:t,productCounter:n,showCloseButton:x,onAction:c}){const{translate:j}=T();function m(d,r){switch(d){case"upload":c("uploadPhoto",r);break;case"delete":c("deletePhoto",r);break;case"connect":c("openConnectImageCard",r);break;case"dnd":const{newIndex:g,activeItem:h,oldIndex:f}=r;c("changePhotoPosition",{newIndex:g,activeItem:h,oldIndex:f});break;case"activate":c("activatePhoto",r);break}}function I(d,r,g,h){switch(d){case"delete":m("delete",h.original);break;case"connect":m("connect",h.original);break;case"activate":m("activate",h.original);break}}return s.jsx(P,{className:l.productPhotosCard,title:"Product Photos",titleTransKey:"CardTitles.ProductPhotos",minWidth:"500px",showCloseButton:x,isLoading:i,onSecondaryButtonClick:()=>c("closeProductPhotsCard"),children:s.jsxs("div",{className:l.productPhotosCardContent,children:[s.jsx(N,{isLoading:e,contextName:"product",contextId:t,onUpload:d=>m("upload",d)}),s.jsxs("div",{className:l.managePhotos,children:[s.jsx("span",{className:`${l.managePhotosTitle} she-title`,children:j("CardTitles.ManagePhotos")}),s.jsx("div",{className:l.managePhotosGrid,children:s.jsx(v,{className:l.photosGrid,isLoading:o,enableDnd:!0,showHeader:!1,columns:R(I),data:a,skeletonQuantity:n==null?void 0:n.gallery,cellPadding:"5px 10px",customMessage:"PRODUCT HAS NO PHOTO",customMessageTransKey:"ProductMessages.NoPhotos",onNewItemPosition:(d,r,g)=>m("dnd",{newIndex:d,activeItem:r,oldIndex:g})})})]})]})})}const L="_connectImageCard_17led_1",G="_connectImageCardContent_17led_1",K="_connectImageGrid_17led_1",p={connectImageCard:L,connectImageCardContent:G,connectImageGrid:K},O=i=>[{accessorKey:"isActive",header:"Status",minSize:80,maxSize:80,cell:({row:e,table:o})=>{const a=o.options.meta;return s.jsx(S,{disabled:a==null?void 0:a.isRowLoading(e.id),checked:e.getValue("isActive"),onCheckedChange:()=>i("imageActions",{rowId:e.id,setLoadingRow:a==null?void 0:a.setLoadingRow,row:e})})}},{accessorKey:"variantName",header:"Variant",minSize:200,maxSize:200,cell:({row:e})=>s.jsx(C,{delayDuration:200,text:e.original.variantName,className:"max-w-[100%] overflow-hidden text-ellipsis whitespace-nowrap",children:s.jsx("span",{className:"she-text",children:e.original.variantName})})},{accessorKey:"traitOptions",header:"Traits",minSize:80,maxSize:80,cell:({row:e})=>{const o=e.original.traitOptions.filter(t=>t.traitTypeId===2).map(t=>t.optionColor).filter(t=>t!==null),a=e.original.traitOptions.filter(t=>t.traitTypeId===1).map(t=>t.optionName).filter(t=>t!==null);return s.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[o.map((t,n)=>s.jsx("div",{style:{background:t,width:"20px",height:"20px",borderRadius:"5px",display:"inline-block",marginRight:"5px"}},n)),s.jsx("div",{style:{display:"flex",gap:"5px"},children:a.map((t,n)=>s.jsx(C,{delayDuration:200,text:t,className:"max-w-[50px] overflow-hidden text-ellipsis whitespace-nowrap",children:s.jsx("span",{className:"she-text",children:t},n)},n))})]})}}];function Q({isLoading:i,isGridLoading:e,variants:o,selectedPhoto:a,productCounter:t,onAction:n,onSecondaryButtonClick:x,...c}){return s.jsx(P,{className:p.connectImageCard,title:"Connect image to product variants",titleTransKey:"CardTitles.ConnectImageToProductVariants",showCloseButton:!0,isLoading:i,onSecondaryButtonClick:()=>n("closeConnectImageCard"),...c,children:s.jsx("div",{className:p.connectImageCardContent,children:s.jsx("div",{className:p.connectImageGrid,children:s.jsx(v,{isLoading:e,showHeader:!1,columns:O(n),data:o,skeletonQuantity:t==null?void 0:t.variants,gridRequestModel:o})})})})}export{Q as C,F as P};
