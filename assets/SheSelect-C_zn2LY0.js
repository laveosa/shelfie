import{r,j as e,h as be,aL as We,i as te,aM as _e,aN as le,aO as me,aP as Ie,f as ae,ah as ze,R as Me,aI as Ae,aa as Z,_ as E,m as Ue,z as Xe,aJ as Ge}from"./index-CqLEDb0h.js";import{u as xe,S as Je,a as Ye,b as Qe,c as Ze,d as et}from"./select-DL5f33uf.js";import{g as ke,u as ve,b as ye,c as Ne,a as tt,d as Se}from"./SheInput-DbpOA7IC.js";import{I as ot}from"./useAppTranslation-CsMEigHw.js";const st="_sheSelect_qzdt0_1",nt="_sheSelectItemCover_qzdt0_26",ct="_sheSelectItemColorsContainer_qzdt0_32",at="_sheSelectItemInfoContainer_qzdt0_35",lt="_sheSelectItemTooltipContainer_qzdt0_56",rt="_sheSelectOpen_qzdt0_60",it="_sheSelectItemNotSelected_qzdt0_64",dt="_sheSelectItemIconContainer_qzdt0_69",ht="_sheSelectItemsContainer_qzdt0_73",ut="_highlighted_qzdt0_81",R={sheSelect:st,sheSelectItemCover:nt,sheSelectItemColorsContainer:ct,sheSelectItemInfoContainer:at,sheSelectItemTooltipContainer:lt,sheSelectOpen:rt,sheSelectItemNotSelected:it,sheSelectItemIconContainer:dt,sheSelectItemsContainer:ht,highlighted:ut},pt="_sheSelectItem_2rw77_4",ft="_sheShowSelectIcon_2rw77_7",mt="_sheSelectItemOption_2rw77_13",fe={sheSelectItem:pt,sheShowSelectIcon:ft,sheSelectItemOption:mt},Ct="_sheOption_1doru_1",gt="_sheOptionToggleContainer_1doru_21",St="_sheOptionIconContainer_1doru_25",bt="_iconPlaceholder_1doru_32",_t="_sheOptionColorsContainer_1doru_35",It="_sheOptionInfoContainer_1doru_46",xt="_sheOptionInfoBlock_1doru_53",kt="_sheOptionExtraInfoBlock_1doru_54",vt="_sheOptionDescription_1doru_70",yt="_sheOptionTooltipContainer_1doru_80",Nt="_fullWidth_1doru_85",wt="_optionSelected_1doru_90",Tt="_normal_1doru_94",Ot="_card_1doru_97",N={sheOption:Ct,sheOptionToggleContainer:gt,sheOptionIconContainer:St,iconPlaceholder:bt,sheOptionColorsContainer:_t,sheOptionInfoContainer:It,sheOptionInfoBlock:xt,sheOptionExtraInfoBlock:kt,sheOptionDescription:vt,sheOptionTooltipContainer:yt,fullWidth:Nt,optionSelected:wt,normal:Tt,card:Ot},jt="_sheToggle_1060s_1",Et="_sheToggleControl_1060s_5",$t="_sheToggleContextBlock_1060s_11",Pt="_sheToggleViewCheckbox_1060s_23",Rt="_sheToggleIcon_1060s_23",Bt="_sheToggleViewSwitch_1060s_26",A={sheToggle:jt,sheToggleControl:Et,sheToggleContextBlock:$t,sheToggleViewCheckbox:Pt,sheToggleIcon:Rt,sheToggleViewSwitch:Bt};var ee=(t=>(t.CHECKBOX="checkbox",t.SWITCH="switch",t))(ee||{}),re="Checkbox",[Ht]=be(re),[qt,Ce]=Ht(re);function Kt(t){const{__scopeCheckbox:o,checked:n,children:f,defaultChecked:l,disabled:c,form:m,name:u,onCheckedChange:a,required:S,value:C="on",internal_do_not_use_render:p}=t,[d,k]=_e({prop:n,defaultProp:l??!1,onChange:a,caller:re}),[g,I]=r.useState(null),[v,h]=r.useState(null),i=r.useRef(!1),y=g?!!m||!!g.closest("form"):!0,$={checked:d,disabled:c,setChecked:k,control:g,setControl:I,name:u,form:m,value:C,hasConsumerStoppedPropagationRef:i,required:S,defaultChecked:L(l)?!1:l,isFormControl:y,bubbleInput:v,setBubbleInput:h};return e.jsx(qt,{scope:o,...$,children:Dt(p)?p($):f})}var we="CheckboxTrigger",Te=r.forwardRef(({__scopeCheckbox:t,onKeyDown:o,onClick:n,...f},l)=>{const{control:c,value:m,disabled:u,checked:a,required:S,setControl:C,setChecked:p,hasConsumerStoppedPropagationRef:d,isFormControl:k,bubbleInput:g}=Ce(we,t),I=le(l,C),v=r.useRef(a);return r.useEffect(()=>{const h=c==null?void 0:c.form;if(h){const i=()=>p(v.current);return h.addEventListener("reset",i),()=>h.removeEventListener("reset",i)}},[c,p]),e.jsx(te.button,{type:"button",role:"checkbox","aria-checked":L(a)?"mixed":a,"aria-required":S,"data-state":Pe(a),"data-disabled":u?"":void 0,disabled:u,value:m,...f,ref:I,onKeyDown:me(o,h=>{h.key==="Enter"&&h.preventDefault()}),onClick:me(n,h=>{p(i=>L(i)?!0:!i),g&&k&&(d.current=h.isPropagationStopped(),d.current||h.stopPropagation())})})});Te.displayName=we;var ge=r.forwardRef((t,o)=>{const{__scopeCheckbox:n,name:f,checked:l,defaultChecked:c,required:m,disabled:u,value:a,onCheckedChange:S,form:C,...p}=t;return e.jsx(Kt,{__scopeCheckbox:n,checked:l,defaultChecked:c,disabled:u,required:m,onCheckedChange:S,name:f,form:C,value:a,internal_do_not_use_render:({isFormControl:d})=>e.jsxs(e.Fragment,{children:[e.jsx(Te,{...p,ref:o,__scopeCheckbox:n}),d&&e.jsx($e,{__scopeCheckbox:n})]})})});ge.displayName=re;var Oe="CheckboxIndicator",je=r.forwardRef((t,o)=>{const{__scopeCheckbox:n,forceMount:f,...l}=t,c=Ce(Oe,n);return e.jsx(We,{present:f||L(c.checked)||c.checked===!0,children:e.jsx(te.span,{"data-state":Pe(c.checked),"data-disabled":c.disabled?"":void 0,...l,ref:o,style:{pointerEvents:"none",...t.style}})})});je.displayName=Oe;var Ee="CheckboxBubbleInput",$e=r.forwardRef(({__scopeCheckbox:t,...o},n)=>{const{control:f,hasConsumerStoppedPropagationRef:l,checked:c,defaultChecked:m,required:u,disabled:a,name:S,value:C,form:p,bubbleInput:d,setBubbleInput:k}=Ce(Ee,t),g=le(n,k),I=xe(c),v=Ie(f);r.useEffect(()=>{const i=d;if(!i)return;const y=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(y,"checked").set,H=!l.current;if(I!==c&&b){const x=new Event("click",{bubbles:H});i.indeterminate=L(c),b.call(i,L(c)?!1:c),i.dispatchEvent(x)}},[d,I,c,l]);const h=r.useRef(L(c)?!1:c);return e.jsx(te.input,{type:"checkbox","aria-hidden":!0,defaultChecked:m??h.current,required:u,disabled:a,name:S,value:C,form:p,...o,tabIndex:-1,ref:g,style:{...o.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});$e.displayName=Ee;function Dt(t){return typeof t=="function"}function L(t){return t==="indeterminate"}function Pe(t){return L(t)?"indeterminate":t?"checked":"unchecked"}const Re=r.forwardRef(({className:t,...o},n)=>e.jsx(ge,{ref:n,className:ae("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...o,children:e.jsx(je,{className:ae("flex items-center justify-center text-current"),children:e.jsx(ze,{className:"h-4 w-4"})})}));Re.displayName=ge.displayName;var ie="Switch",[Lt]=be(ie),[Vt,Ft]=Lt(ie),Be=r.forwardRef((t,o)=>{const{__scopeSwitch:n,name:f,checked:l,defaultChecked:c,required:m,disabled:u,value:a="on",onCheckedChange:S,form:C,...p}=t,[d,k]=r.useState(null),g=le(o,y=>k(y)),I=r.useRef(!1),v=d?C||!!d.closest("form"):!0,[h,i]=_e({prop:l,defaultProp:c??!1,onChange:S,caller:ie});return e.jsxs(Vt,{scope:n,checked:h,disabled:u,children:[e.jsx(te.button,{type:"button",role:"switch","aria-checked":h,"aria-required":m,"data-state":De(h),"data-disabled":u?"":void 0,disabled:u,value:a,...p,ref:g,onClick:me(t.onClick,y=>{i($=>!$),v&&(I.current=y.isPropagationStopped(),I.current||y.stopPropagation())})}),v&&e.jsx(Ke,{control:d,bubbles:!I.current,name:f,value:a,checked:h,required:m,disabled:u,form:C,style:{transform:"translateX(-100%)"}})]})});Be.displayName=ie;var He="SwitchThumb",qe=r.forwardRef((t,o)=>{const{__scopeSwitch:n,...f}=t,l=Ft(He,n);return e.jsx(te.span,{"data-state":De(l.checked),"data-disabled":l.disabled?"":void 0,...f,ref:o})});qe.displayName=He;var Wt="SwitchBubbleInput",Ke=r.forwardRef(({__scopeSwitch:t,control:o,checked:n,bubbles:f=!0,...l},c)=>{const m=r.useRef(null),u=le(m,c),a=xe(n),S=Ie(o);return r.useEffect(()=>{const C=m.current;if(!C)return;const p=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(p,"checked").set;if(a!==n&&k){const g=new Event("click",{bubbles:f});k.call(C,n),C.dispatchEvent(g)}},[a,n,f]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...l,tabIndex:-1,ref:u,style:{...l.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Ke.displayName=Wt;function De(t){return t?"checked":"unchecked"}var Le=Be,zt=qe;const Ve=r.forwardRef(({className:t,...o},n)=>e.jsx(Le,{className:ae("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...o,ref:n,children:e.jsx(zt,{className:ae("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ve.displayName=Le.displayName;function Fe(t){const o=Me.useRef(null);return{eventHandler:l=>{o.current=l},valueHandler:l=>{t(l,o==null?void 0:o.current),o.current=null}}}function Mt(t){const{checked:o,text:n,textTransKey:f,iconProps:l,type:c=ee.CHECKBOX,isLoading:m,disabled:u,onChecked:a}=t,S=ke(t,Ne),[C,p]=r.useState(o??!1),{ariaDescribedbyId:d,updateFormValue:k}=ve({props:t,identifier:"SheToggle"}),{eventHandler:g,valueHandler:I}=Fe(h),v=Ae(6);r.useEffect(()=>{typeof o=="boolean"&&o!==C&&p(o)},[o]);function h(i,y){p(i),k(i),a==null||a(i,{value:i,model:t,event:y})}return e.jsx(ye,{...S,className:`${A.sheToggle} ${S.className} ${c===ee.SWITCH?A.sheToggleViewSwitch:A.sheToggleViewCheckbox}`,ariaDescribedbyId:d,iconProps:{className:`${l==null?void 0:l.className} ${A.sheToggleIcon}`},iconPosition:"out",showClearBtn:!1,children:e.jsxs("div",{className:`${A.sheToggleControl} ${u||m?"disabled":""} componentTriggerElement`,children:[c===ee.CHECKBOX&&e.jsx(Re,{id:v,checked:C,"aria-describedby":d,disabled:u||m,onClick:g,onCheckedChange:I}),c===ee.SWITCH&&e.jsx(Ve,{id:v,checked:C,"aria-describedby":d,disabled:u||m,onClick:g,onCheckedChange:I}),n&&n.length>0&&e.jsx("label",{htmlFor:v,className:A.sheToggleContextBlock,"aria-describedby":d,children:n&&e.jsx("span",{className:"she-text",children:e.jsx(Z,{i18nKey:f,children:n})})})]})})}function At(t){const{className:o="",style:n,toggleClassName:f="",toggleStyle:l,iconClassName:c="",iconStyle:m,colorsClassName:u="",colorsStyle:a,infoClassName:S="",infoStyle:C,tooltipClassName:p="",tooltipStyle:d,minWidth:k,maxWidth:g,fullWidth:I,disabled:v,isLoading:h,ariaDescribedbyId:i,mode:y="single",view:$="normal",value:b,showIconsColumn:H,icon:x,iconProps:U,showColorsColumn:W,colors:q,text:V,textTransKey:de,description:oe,descriptionTransKey:se,sideText:w,sideTextTransKey:X,sideDescription:P,sideDescriptionTransKey:ne,isSelected:z,tooltip:F,toggleProps:G,checkOnClick:ce,onCheck:K,onClick:D,...he}=t,[J,Y]=r.useState(null);r.useEffect(()=>{E.isEqual(z,J)||Y(z)},[z]);function ue(j){ce&&y==="multiple"?Y(T=>{const B=!T;return D==null||D(M(b,j)),K==null||K(M(b,j,B)),B}):D==null||D(M(b,j))}function pe(j,{event:T}){T.stopPropagation(),Y(B=>{const s=!B;return K==null||K(M(j,T,s)),s})}function M(j,T,B=J){return{value:j,model:{...t,isSelected:B},event:T}}return e.jsx(tt,{isLoading:h,fullWidth:!0,children:e.jsxs("div",{className:`${N.sheOption} ${o} ${I?N.fullWidth:""} ${N[$]} ${y==="single"&&z?N.optionSelected:""} ${v||h?"disabled":""}`,style:{minWidth:k,maxWidth:g,...n},role:"option",onClick:ue,...he,children:[y==="multiple"&&e.jsx(Mt,{className:`${N.sheOptionToggleContainer} ${f}`,style:l,checked:J,ignoreFormAction:!0,onChecked:pe,...G}),(x||H)&&e.jsx(Ue,{className:`${N.sheOptionIconContainer} ${c} ${x?"":N.iconPlaceholder}`,style:m,icon:x||ot,...U}),(q&&q.length>0||W)&&e.jsx("div",{className:`${N.sheOptionColorsContainer} ${u}`,style:a,children:q==null?void 0:q.map((j,T)=>e.jsx("div",{style:{backgroundColor:j}},j+T+1))}),e.jsxs("div",{className:`${N.sheOptionInfoContainer} ${S}`,style:C,children:[e.jsxs("div",{className:N.sheOptionInfoBlock,children:[V&&e.jsx("span",{className:"she-text","aria-describedby":i,children:e.jsx(Z,{i18nKey:de,children:V})}),oe&&e.jsx("span",{className:`${N.sheOptionDescription} she-subtext`,"aria-describedby":i,children:e.jsx(Z,{i18nKey:se,children:oe})})]}),((w==null?void 0:w.length)>0||(P==null?void 0:P.length)>0)&&e.jsxs("div",{className:`${N.sheOptionExtraInfoBlock}`,children:[(w==null?void 0:w.length)>0&&e.jsx("span",{className:"she-text","aria-describedby":i,children:e.jsx(Z,{i18nKey:X,children:w})}),(P==null?void 0:P.length)>0&&e.jsx("span",{className:`${N.sheOptionDescription} she-subtext`,"aria-describedby":i,children:e.jsx(Z,{i18nKey:ne,children:P})})]})]}),F&&e.jsx(Xe,{className:`${N.sheOptionTooltipContainer} ${p}`,style:d,showDefaultIcon:!0,ariaDescribedbyId:i,...F})]})})}function Ut({id:t,className:o="",style:n,elementClassName:f="",elementStyle:l,showSelectIcon:c,onCheck:m,...u}){return e.jsx(Je,{id:t,className:`${fe.sheSelectItem} ${o} ${c?fe.sheShowSelectIcon:""}`,style:n,value:t,defaultValue:t,onKeyDown:a=>{a.key==="Enter"&&m({event:a})},onClick:a=>m({event:a}),children:e.jsx(At,{...u,className:`${fe.sheSelectItemOption} ${f}`,mode:"plain",view:"normal",style:l})})}function Xt(t){const{triggerRef:o,popoverRef:n,elementClassName:f="",elementStyle:l,placeholder:c="select item...",placeholderTransKey:m="PLACE_VALID_TRANS_KEY",selected:u,items:a,hideFirstOption:S,disabled:C,isLoading:p,isOpen:d,showSelectIcon:k,autoFocus:g,openOnFocus:I,showHighlighted:v,onOpen:h,onSelect:i,onTriggerKeyDown:y}=t,$=ke(t,Ne),[b,H]=r.useState(null),[x,U]=r.useState(null),[W,q]=r.useState(null),[V,de]=r.useState(null),[oe,se]=r.useState(null),w=Se(o),X=Se(n),P=r.useRef(null),{ariaDescribedbyId:ne,translate:z,setFocus:F,updateSelectedItems:G,getItemFromListByIdentifier:ce,initializeItemsList:K,calculatePopoverWidth:D,updateFormValue:he,resetFormField:J}=ve({props:t,identifier:"SheSelect"}),{eventHandler:Y,valueHandler:ue}=Fe(pe);r.useEffect(()=>{const s=K([...E.cloneDeep(a)||[]]),O=s==null?void 0:s.filter(Q=>Q.isSelected);let _=ce(s,"value",u);!_&&O&&O.length>0&&(_=O[0]),S||(s.length===0||s[0].text!=="not selected")&&s.unshift({id:Ge("not selected",0),className:R.sheSelectItemNotSelected,text:"not selected",textTransKey:"not_selected",value:null}),E.isEqual(s,b)?H(G(b,_)):H(s),E.isEqual(_,x)||U(_),se(!1),P.current=_==null?void 0:_.value,B()},[a,u]),r.useEffect(()=>{!E.isNil(d)&&typeof d=="boolean"&&!E.isEqual(d,W)&&T(d),!E.isNil(p)&&typeof p=="boolean"&&!E.isEqual(p,V)&&(de(p),T(d))},[d,p]),r.useEffect(()=>{B()},[g]);function pe(s,O){const _=E.cloneDeep(ce(b,"id",s));if(_){_.isSelected=!0;const Q=G(b,_.value);H(Q),se(!E.isEqual(P.current,_.value)),he(_.value),i==null||i(_.value,{value:_.value,model:{...t,items:Q,selected:_.value},event:O}),U(_)}}function M(s){!V&&s&&x&&requestAnimationFrame(()=>{const O=document.getElementById(x.id);O&&O.scrollIntoView({block:"start"})}),setTimeout(()=>T(s))}function j(s){const O=G(b);H(O),U(null),J(),i==null||i(null,{value:null,model:{...t,items:O,selected:null},event:s}),F(!0,w)}function T(s){p||C||!a||a.length===0?(q(!1),h==null||h(!1)):E.isEqual(s,W)||(q(s),h==null||h(s),s?D(X,w):F(g,w))}function B(){!a||a.length===0||(I||d?(T(d??g),F(g,X)):F(g,w))}return e.jsx(ye,{...$,className:`${R.sheSelect} ${$.className} ${v&&oe?R.highlighted:""}`,ariaDescribedbyId:ne,clearBtnValue:x,onClear:j,onKeyDown:y,children:e.jsxs(Ye,{value:(x==null?void 0:x.id)??"",open:W,disabled:C||V||!a||a.length===0,onOpenChange:M,onValueChange:s=>{s!==(x==null?void 0:x.id)&&setTimeout(()=>ue(s))},children:[e.jsx(Qe,{ref:w,className:`${f} ${W?R.sheSelectOpen:""} componentTriggerElement`,style:l,children:e.jsx(Ze,{placeholder:z(m,{},c)})}),(b==null?void 0:b.length)>0&&e.jsx(et,{ref:X,children:e.jsx("div",{className:R.sheSelectItemsContainer,children:b==null?void 0:b.map(s=>e.jsx(Ut,{...s,id:s.id,className:`${R.sheSelectItemCover} ${s.className||""}`,iconClassName:`${R.sheSelectItemIconContainer} ${s.iconClassName||""}`,colorsClassName:`${R.sheSelectItemColorsContainer} ${s.colorsClassName||""}`,infoClassName:`${R.sheSelectItemInfoContainer} ${s.infoClassName||""}`,tooltipClassName:`${R.sheSelectItemTooltipContainer} ${s.tooltipClassName||""}`,showSelectIcon:k,ariaDescribedbyId:ne,isLoading:E.isNil(s.isLoading)?V:s.isLoading,onCheck:O=>Y(O.event)},s.id))})})]})})}const Zt=r.memo(Xt);export{Re as C,Zt as S,Mt as a,ee as b,Fe as u};
