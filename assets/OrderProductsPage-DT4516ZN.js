import{j as d,o as Wt,m as J,X as Qt,k as ee,z as Yt,B as Kt,r as q,u as ie,S as N,p as Xt,G as Zt,H as Jt,E as Ce,O as _,P as S,A as de,V as B,W as x,q as W,Y as a,_ as ea,K as Q,Z as Y,N as ce,$ as ue,a0 as w,x as ta,a as K}from"./index-CqLEDb0h.js";import{G as aa,a as oa}from"./GridSortingEnum-Qa64oiYF.js";import{u as ra}from"./useCardActions-BvZqcpJ7.js";import{F as na}from"./FindProductsCard-BX9rareN.js";import{o as sa,b as le,u as ia,S as da,a as X}from"./types-TQ-jcydJ.js";import{R as ca,S as pe}from"./SheInput-DbpOA7IC.js";import{C as ua}from"./ComponentViewEnum-Ba6F4129.js";import{E as la,S as pa}from"./SheContextSidebar-CL4FXvtg.js";import{T as ma}from"./SheCardNotification-BVOYMQJ2.js";import{S as ha}from"./SheCard-CX5qtFRW.js";import{S as Ca}from"./SheGrid-Fci2HgNW.js";import{c as Z}from"./ProductsInOrderGridColumns.module-DQJajK5A.js";import{I as fa,u as ga}from"./useAppTranslation-CsMEigHw.js";import{P as ya}from"./plus-Cg_Vlo1I.js";import{u as Pa}from"./useToast-BWT7QgMZ.js";import{u as Ia}from"./useOrdersPageService-D5yYVCl1.js";import{u as La}from"./chevron-up-DLJ1s3UP.js";import{V as Sa,A as xa,S as va,D as ka,M as Va,a as Ga}from"./VariantPhotosCard-C2v4FpEI.js";import{S as Ha,C as Ma}from"./CompaniesListGridColumns-DoqfeCQs.js";import{S as ba}from"./SelectEntityCard-CxCADFZ_.js";import{C as Oa,a as Ta,P as me,M as Ra,L as Da,b as Fa}from"./ManageLocationPhotosGridColumns-g5RgDhO9.js";import{S as ja}from"./StockHistoryCard-rx3cPANL.js";import"./GridTraitsFilter-CP_O8I3b.js";import"./trash-Czml7Fyd.js";import"./GridItemsFilter-C9zRYV-7.js";import"./settings-2-BKZv0M77.js";import"./form-BPwqqXcv.js";import"./folder-up-D4AQ9V_0.js";import"./SheSelect-C_zn2LY0.js";import"./select-DL5f33uf.js";import"./SheForm-BPCdrBeX.js";import"./she-select-convertors-CdG-Ygpu.js";import"./SheDatePicker-DFDs0SXU.js";import"./SheFileUploader-DanH7GSt.js";import"./index-CmwFoL9v.js";import"./placeholder-image-BgG3Yd5d.js";import"./SheTextarea-Btj3xUJN.js";import"./AddressForm-Dn6PYovg.js";const Na="_orderProductsPage_17jge_1",Aa="_findProductsCard_17jge_1",he={orderProductsPage:Na,findProductsCard:Aa},qa="_productsInOrderCard_hp3sv_1",Ea="_productsInOrderCardContent_hp3sv_1",_a="_addProductBlock_hp3sv_6",Ba="_productsSummaryBlock_hp3sv_15",wa="_productsSummary_hp3sv_15",Ua="_productsSummaryTitle_hp3sv_24",$a="_productsSummaryTextBlock_hp3sv_28",za="_productsSummaryText_hp3sv_28",H={productsInOrderCard:qa,productsInOrderCardContent:Ea,addProductBlock:_a,productsSummaryBlock:Ba,productsSummary:wa,productsSummaryTitle:Ua,productsSummaryTextBlock:$a,productsSummaryText:za},Wa="_productsInOrderForm_6tg5u_1",Qa="_formItems_6tg5u_4",Ya="_formItem_6tg5u_4",Ka="_inputFormItem_6tg5u_14",Xa="_totalValue_6tg5u_17",Za="_formIcon_6tg5u_21",v={productsInOrderForm:Wa,formItems:Qa,formItem:Ya,inputFormItem:Ka,totalValue:Xa,formIcon:Za},Ja=sa({priceBrutto:le(),quantity:le()});function eo({className:u,data:h,onSubmit:s,onDelete:i}){const{form:f}=ia({values:r(h),defaultValues:{stockDocumentPrice:{brutto:0},unitsAmount:0,total:0},scheme:Ja,mode:ca.CHANGE});function e(P){s({brutto:Number(P.stockDocumentPrice.brutto),unitsAmount:Number(P.unitsAmount)})}function r(P){var L;const y=Number((L=P.stockDocumentPrice)==null?void 0:L.brutto)||0,C=Number(P.unitsAmount)||0,g=y*C;return{stockDocumentPrice:{brutto:y},unitsAmount:C,total:g}}return d.jsx("div",{className:`${v.productsInOrderForm} ${u}`,children:d.jsx(da,{form:f,formPosition:Wt.CENTER,view:ua.STANDARD,fullWidth:!0,hidePrimaryBtn:!0,hideSecondaryBtn:!0,onSubmit:e,children:d.jsxs("div",{className:v.formItems,children:[d.jsxs("div",{className:v.formItem,children:[d.jsx("span",{children:"Price Brutto"}),d.jsx(X,{name:"stockDocumentPrice.brutto",className:v.inputFormItem,render:({field:P})=>d.jsx(pe,{value:P.value,type:"number",step:2,maxWidth:"90px",minWidth:"90px",onDelay:()=>{e(f.getValues())}})})]}),d.jsx(J,{className:v.formIcon,icon:Qt,maxWidth:"30px"}),d.jsxs("div",{className:v.formItem,children:[d.jsx("span",{children:"Quantity"}),d.jsx(X,{name:"unitsAmount",className:v.inputFormItem,render:({field:P})=>d.jsx(pe,{value:P.value,type:"number",maxWidth:"70px",minWidth:"70",onDelay:()=>{e(f.getValues())}})})]}),d.jsx(J,{className:v.formIcon,icon:la,maxWidth:"30px"}),d.jsxs("div",{className:v.formItem,children:[d.jsx("span",{children:"Total"}),d.jsx(X,{name:"total",render:({field:P})=>{var y;return d.jsx("span",{className:`${v.totalValue} she-title`,children:`${P.value.toFixed(2)} ${((y=h==null?void 0:h.stockDocumentPrice)==null?void 0:y.currencyName)??""}`})}})]}),d.jsxs("div",{className:v.formItem,children:[d.jsx("span",{children:"Remove"}),d.jsx(ee,{icon:ma,variant:"secondary",type:"button",onClick:()=>i()})]})]})})})}function to({onAction:u}){return[{id:"variantName",accessorFn:h=>h.variantName,header:"Product",minSize:100,cell:({row:h})=>{var i;const s=(i=h.original.photo)==null?void 0:i.thumbnailUrl;return d.jsxs("div",{className:Z.productNameWrapper,children:[d.jsx("div",{className:Z.productNameImageBlock,children:s?d.jsx("img",{src:s,alt:h.original.variantName||"Variant",className:Z.productNameImage}):d.jsx(J,{icon:fa,maxWidth:"30px"})}),d.jsx("div",{children:d.jsx(Yt,{delayDuration:200,text:h.getValue("variantName"),className:"max-w-[100px] overflow-hidden text-ellipsis whitespace-nowrap",children:d.jsx("span",{children:h.getValue("variantName")})})})]})}},{accessorKey:"traitOptions",header:"Traits",minSize:100,cell:({row:h})=>{const s=h.original.traitOptions||[],i=s.filter(e=>e.traitTypeId===2&&e.optionColor),f=s.filter(e=>e.traitTypeId===1&&e.optionName);return d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",maxWidth:"50px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",verticalAlign:"middle"},children:[i.map((e,r)=>d.jsx("div",{style:{background:e.optionColor,minWidth:"20px",minHeight:"20px",borderRadius:"50%",border:"2px solid #ccc"}},`color-${r}`)),f.map((e,r)=>d.jsx("span",{style:{fontSize:"0.875rem"},children:e.optionName},`size-${r}`))]})}},{id:"actions",header:"Actions",minSize:160,maxSize:160,cell:({row:h})=>d.jsx("div",{onClick:s=>s.stopPropagation(),children:d.jsx(ee,{icon:Kt,value:"Manage Variant",variant:"secondary",onClick:()=>u("manageVariant",h.original)})})}]}function ao({isLoading:u,isGridLoading:h,stockActions:s,onAction:i}){const[f,e]=q.useState(null),[r,P]=q.useState({total:0,currency:""}),{translate:y}=ga();q.useEffect(()=>{s&&e(s.map(g=>{var L;return{...g,id:g.variantId,expandableRows:((L=g.variantStockActions)==null?void 0:L.length)>0?g.variantStockActions:[{brutto:null,unitsAmount:null}]}}))},[s]),q.useEffect(()=>{if(!(f!=null&&f.length)){P({total:0,currency:""});return}const g=f.reduce((L,M)=>{var k,T;const D=Number((k=M.stockDocumentPrice)==null?void 0:k.brutto)||0,F=Number(M.unitsAmount)||0,b=((T=M.stockDocumentPrice)==null?void 0:T.currencyName)||L.currency;return{total:L.total+D*F,currency:b}},{total:0,currency:""});P(g)},[f]);function C(g){return d.jsx(eo,{data:g.original,onSubmit:L=>i("updateStockAction",{formData:L,row:g}),onDelete:()=>i("removeStockAction",g)})}return d.jsx(ha,{className:H.productsInOrderCard,title:"Products in order",titleTransKey:"CardTitles.ProductsInOrder",maxWidth:"485px",minWidth:"485px",isLoading:u,children:d.jsxs("div",{className:H.productsInOrderCardContent,children:[d.jsxs("div",{className:H.addProductBlock,children:[d.jsx("span",{className:"she-text",children:y("OrderMessages.NoOrderCompleteWithoutProduct")}),d.jsx(ee,{value:"Add Product",valueTransKey:"OrderActions.AddProduct",icon:ya,variant:"secondary",onClick:()=>i("addProduct")})]}),d.jsx(Ca,{isLoading:h,showHeader:!1,columns:to({onAction:i}),data:f,skeletonQuantity:10,enableExpansion:!0,renderExpandedContent:C},f==null?void 0:f.length),d.jsx("div",{className:H.productsSummaryBlock,children:d.jsxs("div",{className:H.productsSummary,children:[d.jsx("span",{className:H.productsSummaryTitle,children:"Summary"}),d.jsxs("div",{className:H.productsSummaryTextBlock,children:[d.jsx("span",{className:`${H.productsSummaryText} she-text`,children:y("OrderForm.Labels.ProductsTotal")}),d.jsxs("span",{className:`${H.productsSummaryText} she-text`,children:[r.total.toFixed(2)||0,r.currency]})]})]})})]})})}function oo(u,h){const s=ie(t=>t[N.ORDER_PRODUCTS]),i=ie(t=>t[N.ORDERS]),f=Ia(),e=Xt(),{addToast:r}=Pa(),P=Zt(),{openConfirmationDialog:y}=Jt(),{t:C}=La(),{orderId:g}=Ce(),[L]=_.useAddVariantsToOrderMutation(),[M]=_.useUpdateStockActionInOrderMutation(),[D]=_.useRemoveStockActionFromOrderMutation(),[F]=S.useLazyGenerateProductCodeQuery(),[b]=de.useDeletePhotoMutation(),[k]=B.useGetListOfPurchasesForGridMutation(),[T]=B.useAddVariantToPurchaseProductsMutation(),[O]=B.useLazyGetPurchaseDetailsQuery(),[p]=B.useCreatePurchaseForSupplierMutation(),[V]=x.useGetListOfCompaniesForGridMutation(),[fe]=x.useCreateCompanyMutation(),[U]=de.useUploadPhotoMutation(),[ge]=x.useAddNewLocationToCompanyMutation(),[te]=W.useLazyGetCountryCodeQuery(),[j]=x.useLazyGetCompanyDetailsQuery(),[ye]=x.useDeleteCompanyMutation(),[Pe]=x.useAddLocationToCompanyMutation(),[Ie]=S.useLazyGetVariantDetailsQuery(),[Le]=S.useLazyGetListOfTraitsWithOptionsForProductQuery(),[Se]=W.useLazyGetTaxesListQuery(),[xe]=S.useLazyGetProductPhotosForVariantQuery(),[ve]=S.useUpdateVariantDetailsMutation(),[ke]=S.useUpdateVariantTraitOptionsMutation(),[Ve]=S.useDeleteVariantMutation(),[Ge]=S.useDisposeVariantFromStockMutation(),[He]=S.useAttachProductPhotoToVariantMutation(),[Me]=S.useDetachVariantPhotoMutation(),[be]=S.useChangePhotoPositionForVariantMutation(),[Oe]=W.useLazyGetCurrenciesListQuery(),[Te]=S.useLazyGetVariantStockHistoryQuery(),[Re]=x.useUpdateCompanyDetailsMutation(),[De]=x.useChangePositionOfCompanyPhotoMutation(),[Fe]=x.useChangePositionOfLocationPhotoMutation(),[je]=x.useUpdateLocationDetailsMutation(),[Ne]=x.useDeleteLocationMutation(),[Ae]=_.useGetListOfStockActionsForGridMutation();function A(t){e(a.setIsProductsInOrderGridLoading(!0)),Ae({orderId:t,model:s.stockActionsGridRequestModel}).then(o=>{var n;e(a.setIsProductsInOrderGridLoading(!1)),(n=o==null?void 0:o.data)!=null&&n.items&&e(a.refreshStockActionsGridRequestModel({...o.data,items:o.data.items.map(c=>{var l,m,I,G;return{...c,stockItemPrice:((l=c.stockDocumentPrice)==null?void 0:l.brutto)!==null&&((m=c.stockDocumentPrice)==null?void 0:m.brutto)!==void 0&&((I=c.stockDocumentPrice)!=null&&I.currencyName)?`${c.stockDocumentPrice.brutto}${c.stockDocumentPrice.currencyName}`:"0"+(((G=c.stockDocumentPrice)==null?void 0:G.currencyName)||"")}})}))})}function ae(t){e(a.setIsFindProductsGridLoading(!0)),f.getVariantsForGridHandler(t).then(o=>{e(a.setIsFindProductsGridLoading(!1)),e(Q.refreshVariantsGridRequestModel(o.data))})}function qe(t){i.brands.length===0&&f.getBrandsForFilterHandler(),i.categories.length===0&&f.getCategoriesForFilterHandler(),(i.sizesForFilter.length===0||i.colorsForFilter.length===0)&&f.getTraitsForFilterHandler(),ae(t)}function Ee(t,o){var l;const n=ea.cloneDeep(o),c=(l=s.stockActionsGridRequestModel.items)==null?void 0:l.find(m=>m.variantId===n.variantId&&m.stockItemPrice===(n==null?void 0:n.salePrice)?m:void 0);if(c)oe(c.stockActionId,{unitsAmount:c.unitsAmount+n.amount,brutto:c.stockDocumentPrice.brutto});else return L({orderId:t,model:{variantId:n.variantId,amount:n.amount}}).then(m=>(m.error?r({text:`${m.error.data.detail}`,type:"error"}):(e(Q.refreshVariantsGridRequestModel({...i.variantsGridRequestModel,items:i.variantsGridRequestModel.items.map(I=>{if(I.variantId==n.variantId){const G=Number(I.stockAmount)-Number(n.amount);return{...I,stockAmount:G}}return I})})),e(a.refreshStockActionsGridRequestModel({...s.stockActionsGridRequestModel,items:[m.data,...s.stockActionsGridRequestModel.items]})),r({text:"Stock action added successfully",type:"success"})),m.data))}function _e(t){ae(t)}function oe(t,o){return M({stockActionId:t,model:o}).then(n=>(n.error?(e(a.refreshStockActionsGridRequestModel({...s.stockActionsGridRequestModel,items:[...s.stockActionsGridRequestModel.items]})),r({text:`${n.error.data.detail}`,type:"error"})):(e(a.refreshStockActionsGridRequestModel({...s.stockActionsGridRequestModel,items:s.stockActionsGridRequestModel.items.map(c=>c.stockActionId===t?{...c,unitsAmount:o.unitsAmount,stockDocumentPrice:{...c.stockDocumentPrice,brutto:o.brutto}}:c)})),r({text:"Stock action updated successfully",type:"success"})),n.data))}function Be(t){return D(t.stockActionId).then(o=>(o.error?r({text:`${o.error.data.detail}`,type:"error"}):(e(a.refreshStockActionsGridRequestModel({...s.stockActionsGridRequestModel,items:s.stockActionsGridRequestModel.items.filter(n=>n.stockActionId!==t.stockActionId)})),e(Q.refreshVariantsGridRequestModel({...i.variantsGridRequestModel,items:i.variantsGridRequestModel.items.map(n=>{if(n.variantId==t.variantId){const c=Number(n.stockAmount)+Number(t.unitsAmount);return{...n,stockAmount:c}}return n})})),r({text:"Stock action deleted successfully",type:"success"})),o.data))}function we(t){e(Y.refreshActiveTab("products")),P(`${ce.PRODUCTS}${ce.PRODUCT_BASIC_DATA}/${t.productId}`)}function Ue(){return F(null).then(t=>t.data)}function $e(t){return b(t).then(o=>o.data)}function R(t){return Ie(t).then(o=>(e(a.refreshProductId(o.data.productId)),{...o.data,traitOptions:ue(o.data.traitOptions,"color",[{field:"isRemoved",value:!0,color:w.ERROR},{field:"isMissing",value:!0,color:w.ERROR}])}))}function re(t){return Le(t).then(o=>(e(a.refreshListOfTraitsWithOptionsForProduct(o.data)),o.data))}function $(){s.taxesList.length||Se(void 0).then(t=>{e(a.refreshTaxesList(t.data))})}function ze(t,o){return Me({id:t,photoId:o}).then(n=>n)}function ne(t,o){return xe({productId:t,variantId:o}).then(n=>n.data)}function We(t,o){return ke({id:t,model:o}).then(n=>n)}function Qe(t){h({findProductsCard:!1,variantConfigurationCard:!0}),e(a.setIsVariantConfigurationCardLoading(!0)),e(a.setIsVariantOptionsGridLoading(!0)),e(a.setIsVariantPhotoGridLoading(!0)),s.activeCards.includes("variantPhotosCard")&&(e(a.setIsProductPhotoGridLoading(!0)),ne(s.productId,t.variantId).then(o=>{e(a.setIsProductPhotoGridLoading(!1)),e(a.refreshProductPhotosForVariant(o))})),$(),R(t.variantId).then(o=>{e(a.setIsVariantConfigurationCardLoading(!1)),e(a.setIsVariantOptionsGridLoading(!1)),e(a.setIsVariantPhotoGridLoading(!1)),o?(e(a.refreshSelectedVariant(o)),e(a.refreshVariantPhotos(o==null?void 0:o.photos))):(r({text:"Variant not found",type:"error"}),u("variantConfigurationCard"))})}function Ye(t){ve({id:t.variant.variantId,model:t.formattedData}).then(o=>{var n;if(o){const c={...o.data,traitOptions:ue((n=o.data)==null?void 0:n.traitOptions,"color",[{field:"isRemoved",value:!0,color:w.ERROR},{field:"isMissing",value:!0,color:w.ERROR}])};e(a.refreshSelectedVariant(c)),r({text:"Variant updated successfully",type:"success"})}else r({text:"Variant not updated",description:o.error.message,type:"error"})})}function Ke(t){u("manageTraitsCard"),e(a.setIsManageTraitsCardLoading(!0)),We(t.variant.variantId,t.submissionData).then(o=>{e(a.setIsManageTraitsCardLoading(!1)),o.error?r({text:"Variant trait options not updated",description:o.error.message,type:"error"}):(R(t.variant.variantId).then(n=>{e(a.refreshSelectedVariant(n))}),r({text:"Variant trait options updated successfully",type:"success"}))})}function Xe(t,o){return Ge({id:t,model:o}).then(n=>n.data)}function Ze(t,o){return He({variantId:t,photoId:o}).then(n=>n)}function se(t,o,n){return be({id:t,photoId:o,index:n}).then(c=>c.data)}async function Je(t){if(await y({headerTitle:"Delete Variant",text:`You are about to delete variant "${t.variantName}".`,primaryButtonValue:"Delete",secondaryButtonValue:"Cancel"}))await Ve(t.variantId).then(n=>{n.error?r({text:n.error.data.detail,type:"error"}):(u("variantConfigurationCard"),r({text:"Variant deleted successfully",type:"success"}))});else return}function et(t){e(a.setIsAddStockCardLoading(!0)),T({id:t.purchaseId,model:t.priceModel}).then(o=>{e(a.setIsAddStockCardLoading(!1)),R(t.priceModel.variantId).then(n=>{n&&e(a.refreshSelectedVariant(n))}),O(t.purchaseId).then(n=>{e(a.refreshSelectedPurchase(n.data))}),o?(u("addStockCard"),r({text:"Stock increased successfully",type:"success"})):r({text:"Stock not increased",description:o.error.message,type:"error"})})}function tt(t){e(a.setIsDisposeStockCardLoading(!0)),Xe(t.variant.variantId,t.formattedData).then(()=>{e(a.setIsDisposeStockCardLoading(!1)),R(t.variant.variantId).then(o=>{e(a.refreshSelectedVariant(o))}),r({text:"Variant disposed successfully",type:"success"})})}function at(t){e(a.setIsVariantPhotosCardLoading(!0)),U(t).then(o=>{e(a.setIsVariantPhotosCardLoading(!1)),o.error?r({text:"Photo not uploaded",description:o.error.message,type:"error"}):(e(a.refreshVariantPhotos([...s.variantPhotos,o.data])),e(a.refreshSelectedVariant({...s.selectedVariant,photos:[...s.selectedVariant.photos,o.data]})),s.variantPhotos.length===0&&A(g),r({text:"Photo uploaded successfully",type:"success"}))})}function ot(t){Ze(s.selectedVariant.variantId,t.photoId).then(o=>{if(e(a.setIsVariantPhotosCardLoading(!1)),o.error)r({text:"Can`t attach photo to variant",type:"error"});else{const n=s.productPhotosForVariant.find(c=>c.photoId===t.photoId);if(n){const c=s.variantPhotos??[],l=c.some(m=>m.photoId===n.photoId)?c:[...c,n];e(a.refreshVariantPhotos(l)),e(a.refreshProductPhotosForVariant(s.productPhotosForVariant.filter(m=>m.photoId!==t.photoId)))}s.variantPhotos.length===0&&A(g),r({text:"Photo added to variant successfully",type:"success"})}})}async function rt(t){await y({headerTitle:"Detach photo from variant",text:`You are about to detach photo from variant  "${s.selectedVariant.variantName}".`,primaryButtonValue:"Detach",secondaryButtonValue:"Cancel"})&&await ze(s.selectedVariant.variantId,t.photoId).then(n=>{if(n.error)r({text:"Photo not added to variant",description:n.error.message,type:"error"});else{const c=s.variantPhotos??[],l=c.find(m=>m.photoId===t.photoId);if(l){const m=s.productPhotosForVariant??[],I=m.some(z=>z.photoId===l.photoId)?m:[...m,l];e(a.refreshProductPhotosForVariant(I));const G=c.filter(z=>z.photoId!==t.photoId);e(a.refreshVariantPhotos(G))}s.variantPhotos.length===1&&A(g),r({text:"Photo was detached successfully",type:"success"})}})}function nt(t){switch(t.contextName){case"Company":De({companyId:s.managedCompany.companyId,photoId:t.activeItem.photoId,index:t.newIndex}).then(o=>{o.error||(j(s.managedCompany.companyId).then(n=>{e(a.refreshManagedCompany(n.data))}),(t.newIndex===0||t.oldIndex===0)&&(e(a.setIsSelectEntityCardLoading(!0)),e(a.setIsSuppliersGridLoading(!0)),V(s.companiesGridRequestModel).then(n=>{e(a.setIsSelectEntityCardLoading(!1)),e(a.setIsSuppliersGridLoading(!1));const c=n.data.items.map(l=>{var m;return{...l,isSelected:l.companyId===((m=s.selectedCompany)==null?void 0:m.companyId)}});e(a.refreshCompaniesGridRequestModel({...n.data,items:c}))})))});break;case"Location":Fe({locationId:s.managedLocation.locationId,photoId:t.activeItem.photoId,index:t.newIndex}).then(o=>{o.error||j(s.managedCompany.companyId).then(n=>{e(a.refreshManagedCompany(n.data))})});break;default:se(s.selectedVariant.variantId,t.activeItem.photoId,t.newIndex),se(s.selectedVariant.variantId,t.activeItem.photoId,t.newIndex).then(()=>{e(a.setIsVariantPhotoGridLoading(!0)),R(s.selectedVariant.variantId).then(o=>{e(a.setIsVariantPhotoGridLoading(!1)),e(a.refreshSelectedVariant(o)),e(a.refreshVariantPhotos(o==null?void 0:o.photos))}),(t.newIndex===0||t.activeItem.sortOrder===1)&&A(g)})}}function st(){h({findProductsCard:!1,addStockCard:!0}),e(a.setIsAddStockCardLoading(!0)),Promise.all([Oe(),$()]).then(([t])=>{e(a.setIsAddStockCardLoading(!1)),e(a.refreshCurrenciesList(t.data))})}function it(){u("disposeStockCard",!0),R(s.selectedVariant.variantId).then(t=>{e(a.refreshSelectedVariant(t))})}function dt(t){u("variantHistoryCard",!0),e(a.setIsVariantsHistoryGridLoading(!0)),Te(t).then(o=>{var n;if(e(a.setIsVariantsHistoryGridLoading(!1)),!o.error&&o){const c=(n=o.data)==null?void 0:n.map(l=>({...l,createdDate:ta(l.createdDate,"date")}));e(a.refreshVariantHistory(c))}})}function ct(){u("manageTraitsCard",!0),re(s.productId)}function ut(t){u("variantPhotosCard",!0),e(a.setIsProductPhotoGridLoading(!0)),ne(s.productId,t).then(o=>{e(a.setIsProductPhotoGridLoading(!1)),e(a.refreshProductPhotosForVariant(o))})}function lt(t){u("selectPurchaseCard",!0),e(a.setIsPurchaseGridLoading(!0)),k(t).then(o=>{if(e(a.setIsPurchaseGridLoading(!1)),o.error)return;const n=o.data.items.map(c=>{var l;return{...c,isSelected:c.purchaseId===((l=s.selectedPurchase)==null?void 0:l.purchaseId)}});e(a.refreshPurchaseGridRequestModel({...o.data,items:n}))})}function pt(){u("productTraitConfigurationCard")}function mt(){u("variantPhotosCard")}function ht(){e(Y.resetSelectedVariant()),u("variantConfigurationCard")}function Ct(){u("variantHistoryCard")}function ft(){u("selectPurchaseCard")}function gt(t){u("selectPurchaseCard"),e(a.refreshSelectedPurchase(t))}function yt(){u("addStockCard"),e(a.resetSelectedPurchase())}function Pt(t){e(a.setIsPurchaseGridLoading(!0)),k({...s.purchaseGridRequestModel,searchQuery:t}).then(o=>{if(e(a.setIsPurchaseGridLoading(!1)),o.error)return;const n=o.data.items.map(c=>{var l;return{...c,isSelected:c.purchaseId===((l=s.selectedPurchase)==null?void 0:l.purchaseId)}});e(a.refreshPurchaseGridRequestModel({...o.data,items:n}))})}function It(t){e(a.setIsPurchaseGridLoading(!0)),k({...s.purchaseGridRequestModel,filter:t}).then(o=>{if(e(a.setIsPurchaseGridLoading(!1)),o.error)return;const n=o.data.items.map(c=>{var l;return{...c,isSelected:c.purchaseId===((l=s.selectedPurchase)==null?void 0:l.purchaseId)}});e(a.refreshPurchaseGridRequestModel({...o.data,items:n}))})}function Lt(t){return e(a.setIsSupplierCardLoading(!0)),p({date:t.selectedDate,supplierId:s.selectedCompany.companyId,documentNotes:t.purchaseNotes}).then(o=>{e(a.refreshSelectedPurchase(o.data)),e(a.setIsSupplierCardLoading(!1)),o?(u("supplierCard"),r({text:C("SuccessMessages.PurchaseCreated"),type:"success"})):r({text:o.error.message,type:"error"})})}function St(){u("supplierCard",!0)}function xt(){e(Y.resetSelectedSupplier()),u("selectEntityCard",!0),s.countryCodes||te().then(()=>{}),e(a.setIsSelectEntityCardLoading(!0)),e(a.setIsSuppliersGridLoading(!0)),V(s.companiesGridRequestModel).then(t=>{e(a.setIsSelectEntityCardLoading(!1)),e(a.setIsSuppliersGridLoading(!1));const o=t.data.items.map(n=>{var c;return{...n,isSelected:n.companyId===((c=s.selectedCompany)==null?void 0:c.companyId)}});e(a.refreshCompaniesGridRequestModel({...t.data,items:o}))})}function vt(t){e(a.setIsSuppliersGridLoading(!0)),V({...s.companiesGridRequestModel,searchQuery:t}).then(o=>{e(a.setIsSuppliersGridLoading(!1));const n=o.data.items.map(c=>{var l;return{...c,isSelected:c.companyId===((l=s.selectedCompany)==null?void 0:l.companyId)}});e(a.refreshCompaniesGridRequestModel({...o.data,items:n}))})}function kt(){u("createCompanyCard",!0),E()}function Vt(t){u("selectEntityCard"),e(a.refreshSelectedCompany(t))}function Gt(t){e(a.setIsCreateCompanyCardLoading(!0)),fe(t.company).then(o=>{o.error?r({text:o.error.details.message,type:"error"}):(t.image.uploadModels.map(n=>{n.contextId=o.data.companyId,e(a.setIsPhotoUploaderLoading(!0)),U(n).then(c=>{e(a.setIsPhotoUploaderLoading(!1)),r(c?{text:C("SuccessMessages.ImageAdded"),type:"success"}:{text:c.error.details.message,type:"error"})})}),ge({companyId:o.data.companyId,model:t.address}).then(()=>{e(a.setIsCreateCompanyCardLoading(!1)),u("createCompanyCard"),e(a.setIsSuppliersGridLoading(!0)),V(s.companiesGridRequestModel).then(n=>{e(a.setIsSuppliersGridLoading(!1));const c=n.data.items.map(l=>{var m;return{...l,isSelected:l.companyId===((m=s.selectedCompany)==null?void 0:m.companyId)}});e(a.refreshCompaniesGridRequestModel({...n.data,items:c}))})}),r({text:"Company created successfully",type:"success"}))})}function Ht(){u("createCompanyCard")}function Mt(t){u("companyConfigurationCard",!0),e(a.setIsCompanyConfigurationCardLoading(!0)),e(a.setIsLocationsGridLoading(!0)),E(),j(t.companyId).then(o=>{e(a.setIsCompanyConfigurationCardLoading(!1)),e(a.setIsLocationsGridLoading(!1)),e(a.refreshManagedCompany(o.data))})}async function bt(t){await y({headerTitle:"Deleting company",text:`You are about to delete company ${t.companyName}.`,primaryButtonValue:"Delete",secondaryButtonValue:"Cancel"})&&(e(a.setIsCompanyConfigurationCardLoading(!0)),ye(t.companyId).then(n=>{if(n.error){r({text:"Failed to delete company",type:"error"});return}else r({text:"Company deleted successfully",type:"info"}),u("companyConfigurationCard"),e(a.setIsCompanyConfigurationCardLoading(!1)),e(a.setIsLocationsGridLoading(!1)),e(a.resetManagedCompany()),e(a.setIsSuppliersGridLoading(!0)),V(s.companiesGridRequestModel).then(c=>{e(a.setIsSuppliersGridLoading(!1));const l=c.data.items.map(m=>{var I;return{...m,isSelected:m.companyId===((I=s.selectedCompany)==null?void 0:I.companyId)}});e(a.refreshCompaniesGridRequestModel({...c.data,items:l}))}),s.selectedCompany.companyId===s.managedCompany.companyId&&e(a.resetSelectedCompany())}))}function Ot(){u("companyConfigurationCard"),e(a.resetManagedCompany())}function Tt(){u("companyPhotosCard",!0)}function Rt(t){e(a.setIsCompanyConfigurationCardLoading(!0)),Re({companyId:s.managedCompany.companyId,model:t}).then(o=>{e(a.setIsCompanyConfigurationCardLoading(!1)),o.error?r({text:"Failed to update company",type:"error"}):(e(a.refreshManagedCompany(o.data)),e(a.setIsSuppliersGridLoading(!0)),V(s.companiesGridRequestModel).then(n=>{e(a.setIsSuppliersGridLoading(!1));const c=n.data.items.map(l=>{var m;return{...l,isSelected:l.companyId===((m=s.selectedCompany)==null?void 0:m.companyId)}});e(a.refreshCompaniesGridRequestModel({...n.data,items:c}))}),r({text:"Company updated successfully",type:"success"}))})}async function Dt(t){await y({headerTitle:"Deleting company photo",text:"You are about to delete company photo.",primaryButtonValue:"Delete",secondaryButtonValue:"Cancel"})&&b(t.photoId).then(n=>{const c=s.managedCompany.photos.filter(l=>l.photoId!==t.photoId);e(a.refreshManagedCompany({...s.managedCompany,photos:c})),e(a.setIsSuppliersGridLoading(!0)),V(s.companiesGridRequestModel).then(l=>{e(a.setIsSuppliersGridLoading(!1));const m=l.data.items.map(I=>{var G;return{...I,isSelected:I.companyId===((G=s.selectedCompany)==null?void 0:G.companyId)}});e(a.refreshCompaniesGridRequestModel({...l.data,items:m}))}),n.error?r({text:"Photo not deleted",description:n.error.details.message,type:"error"}):r({text:"Photo deleted successfully",type:"success"})})}function Ft(t){return e(a.setIsPhotoUploaderLoading(!0)),U(t).then(o=>{var n;return o.error?(r({text:((n=o.error.data)==null?void 0:n.detail)||"Upload failed",type:"error"}),o):(o.data.photoId&&(e(a.setIsPhotoUploaderLoading(!1)),t.contextName==="Company"?(e(a.setIsSuppliersGridLoading(!0)),V(s.companiesGridRequestModel).then(c=>{e(a.setIsSuppliersGridLoading(!1));const l=c.data.items.map(m=>{var I;return{...m,isSelected:m.companyId===((I=s.selectedCompany)==null?void 0:I.companyId)}});e(a.refreshCompaniesGridRequestModel({...c.data,items:l}))}),e(a.refreshManagedCompany({...s.managedCompany,photos:[...s.managedCompany.photos||[],o.data]}))):e(a.refreshManagedLocation({...s.managedLocation,photos:[...s.managedLocation.photos||[],o.data]})),r({text:"Photos added successfully",type:"success"})),o)})}function jt(t){u(t==="Company"?"companyPhotosCard":"locationPhotosCard")}function Nt(t){u("locationConfigurationCard",!0),E(),e(t?a.refreshManagedLocation(t):a.resetManagedLocation())}function At(t){e(a.setIsLocationConfigurationCardLoading(!0)),Pe({companyId:s.managedCompany.companyId,model:t}).then(o=>{var n;o.error?r({text:(n=o.error.data)==null?void 0:n.detail,type:"error"}):(u("locationConfigurationCard"),e(a.setIsCompanyConfigurationCardLoading(!0)),e(a.setIsLocationsGridLoading(!0)),j(s.managedCompany.companyId).then(c=>{e(a.setIsCompanyConfigurationCardLoading(!1)),e(a.setIsLocationsGridLoading(!1)),e(a.refreshManagedCompany(c.data))}),r({text:"Location added successfully",type:"success"}))})}function qt(t){e(a.setIsLocationConfigurationCardLoading(!0)),Ne(t.locationId).then(o=>{var n;o.error?r({text:(n=o.error.data)==null?void 0:n.detail,type:"error"}):(u("locationConfigurationCard"),e(a.setIsCompanyConfigurationCardLoading(!0)),e(a.setIsLocationsGridLoading(!0)),j(s.managedCompany.companyId).then(c=>{e(a.setIsCompanyConfigurationCardLoading(!1)),e(a.setIsLocationsGridLoading(!1)),e(a.refreshManagedCompany(c.data))}),r({text:"Location deleted successfully",type:"success"}))})}function Et(t){e(a.setIsLocationConfigurationCardLoading(!0)),je({locationId:s.managedLocation.locationId,model:t}).then(o=>{e(a.setIsLocationConfigurationCardLoading(!1)),o.error?r({text:"Failed to update location",type:"error"}):(e(a.setIsCompanyConfigurationCardLoading(!0)),j(s.managedCompany.companyId).then(n=>{e(a.setIsCompanyConfigurationCardLoading(!1)),e(a.refreshManagedCompany(n.data))}),r({text:"Location updated successfully",type:"success"}))})}function _t(){u("locationConfigurationCard"),e(a.resetManagedLocation())}function Bt(){if(u("selectEntityCard",!0),s.companiesGridRequestModel===null)e(a.setIsSelectEntityCardLoading(!0)),e(a.setIsSuppliersGridLoading(!0)),V(s.companiesGridRequestModel).then(t=>{e(a.setIsSelectEntityCardLoading(!1)),e(a.setIsSuppliersGridLoading(!1));const o=t.data.items.map(n=>{var c;return{...n,isSelected:n.companyId===((c=s.selectedCompany)==null?void 0:c.companyId)}});e(a.refreshCompaniesGridRequestModel({...t.data,items:o}))});else{const t=s.companiesGridRequestModel.items.map(o=>{var n;return{...o,isSelected:o.companyId===((n=s.selectedCompany)==null?void 0:n.companyId)}});e(a.refreshCompaniesGridRequestModel({...s.companiesGridRequestModel,items:t}))}}function wt(){u("supplierCard")}function Ut(){u("selectEntityCard")}function $t(){u("locationPhotosCard",!0)}async function zt(t){await y({headerTitle:"Deleting location photo",text:"You are about to delete location photo.",primaryButtonValue:"Delete",secondaryButtonValue:"Cancel"})&&b(t.photoId).then(n=>{const c=s.managedLocation.photos.filter(l=>l.photoId!==t.photoId);e(a.refreshManagedLocation({...s.managedLocation,photos:c})),n.error?r({text:"Photo not deleted",description:n.error.details.message,type:"error"}):r({text:"Photo deleted successfully",type:"success"})})}function E(){s.countryCodes.length===0&&te(void 0).then(t=>{e(a.refreshCountryCodes(t.data))})}return{getOrderStockActionsListForGrid:A,addProductHandler:qe,addVariantsToOrderHandler:Ee,variantsGridRequestChange:_e,updateStockActionInOrderHandler:oe,removeStockActionFromOrderHandler:Be,manageProductHandler:we,generateProductCodeHandler:Ue,deletePhotoHandler:$e,getVariantDetailsHandler:R,getListOfTraitsWithOptionsForProductHandler:re,getTaxesListHandler:$,manageVariantHandler:Qe,updateVariantDetailsHandler:Ye,updateVariantTraitOptions:Ke,deleteVariantHandler:Je,increaseStockAmountHandler:et,disposeFromStockHandler:tt,uploadPhotoToVariantHandler:at,addPhotoToVariantHandler:ot,detachPhotoFromVariantHandler:rt,changePhotoPositionHandler:nt,openAddStockCardHandler:st,openDisposeStockCardHandler:it,openVariantHistoryCardHandler:dt,openManageTraitsCardHandler:ct,openVariantPhotosCardHandler:ut,openSelectPurchaseCardHandler:lt,closeProductTraitConfigurationCardHandler:pt,closeVariantPhotosCardHandler:mt,closeVariantConfigurationCardHandler:ht,closeVariantHistoryCardHandler:Ct,closeSelectPurchaseCardHandler:ft,selectPurchaseHandler:gt,closeAddStockCardHandler:yt,searchSupplierHandle:Pt,filterSuppliersByDateHandle:It,createPurchaseForSupplierHandler:Lt,closeSupplierCardHandler:wt,closeSelectEntityCardHandler:Ut,openSupplierCardHandler:St,openSelectEntityCardHandler:xt,searchEntityHandle:vt,openCreateEntityCardHandler:kt,createCompanyHandler:Gt,closeCreateCompanyCardHandler:Ht,selectCompanyHandle:Vt,manageCompanyHandler:Mt,deleteCompanyHandler:bt,closeCompanyConfigurationCardHandler:Ot,manageCompanyPhotosHandler:Tt,updateCompanyHandler:Rt,deleteCompanyPhotoHandler:Dt,uploadPhotoHandler:Ft,closePhotosCardHandler:jt,openLocationConfigurationCardHandler:Nt,closeLocationConfigurationCardHandler:_t,createLocationHandler:At,deleteLocationHandler:qt,updateLocationHandler:Et,detachSupplierHandler:Bt,manageLocationPhotosHandler:$t,deleteLocationPhotoHandler:zt,getCountryCodesHandler:E}}function wo(){var g,L,M,D,F,b,k,T;const{handleCardAction:u,createRefCallback:h,handleMultipleCardActions:s}=ra({selectActiveCards:O=>O[N.ORDER_PRODUCTS].activeCards,refreshAction:a.refreshActiveCards}),i=K(N.ORDER_PRODUCTS),f=K(N.APP),e=K(N.ORDERS),r=oo(u,s),P=Object.values(aa).map(O=>({value:O,description:oa[O]})),{orderId:y}=Ce();q.useEffect(()=>{r.getOrderStockActionsListForGrid(y)},[y]);async function C(O,p){switch(O){case"addProduct":u("findProductsCard",!0),r.addProductHandler(e.variantsGridRequestModel);break;case"addVariantToOrder":r.addVariantsToOrderHandler(y,p);break;case"variantsGridRequestChange":r.variantsGridRequestChange(p);break;case"closeFindProductsCard":u("findProductsCard");break;case"updateStockAction":r.updateStockActionInOrderHandler(p.row.original.stockActionId,p.formData);break;case"removeStockAction":r.removeStockActionFromOrderHandler(p.original);break;case"manageProduct":r.manageProductHandler(p);break;case"manageVariant":r.manageVariantHandler(p);break;case"updateVariantDetails":r.updateVariantDetailsHandler(p);break;case"updateVariantTraitOptions":r.updateVariantTraitOptions(p);break;case"deleteVariant":r.deleteVariantHandler(p);break;case"increaseStockAmount":r.increaseStockAmountHandler(p);break;case"disposeFromStock":r.disposeFromStockHandler(p);break;case"uploadPhotoToVariant":r.uploadPhotoToVariantHandler(p);break;case"deletePhoto":console.log("PHOTO DELETE",p);break;case"addPhotoToVariant":r.addPhotoToVariantHandler(p);break;case"detachPhotoFromVariant":r.detachPhotoFromVariantHandler(p);break;case"dndVariantPhoto":r.changePhotoPositionHandler(p);break;case"openAddStockCard":r.openAddStockCardHandler();break;case"selectPurchase":r.selectPurchaseHandler(p);break;case"searchSupplier":r.searchSupplierHandle(p);break;case"filterSuppliersByDate":r.filterSuppliersByDateHandle(p);break;case"openDisposeStockCard":r.openDisposeStockCardHandler();break;case"openVariantHistoryCard":r.openVariantHistoryCardHandler(p);break;case"openManageTraitsCard":r.openManageTraitsCardHandler();break;case"openVariantPhotosCard":r.openVariantPhotosCardHandler(p);break;case"openSelectPurchaseCard":r.openSelectPurchaseCardHandler(i.purchaseGridRequestModel);break;case"openSupplierCard":r.openSupplierCardHandler();break;case"openSelectEntityCard":r.openSelectEntityCardHandler();break;case"searchEntity":r.searchEntityHandle(p);break;case"openCreateEntityCard":r.openCreateEntityCardHandler();break;case"createCompany":r.createCompanyHandler(p);break;case"closeCreateCompanyCard":r.closeCreateCompanyCardHandler();break;case"manageCompany":r.manageCompanyHandler(p);break;case"updateCompany":r.updateCompanyHandler(p);break;case"deleteCompany":r.deleteCompanyHandler(p);break;case"closeCompanyConfigurationCard":r.closeCompanyConfigurationCardHandler();break;case"manageCompanyPhotos":r.manageCompanyPhotosHandler();break;case"uploadPhoto":r.uploadPhotoHandler(p);break;case"deleteCompanyPhoto":r.deleteCompanyPhotoHandler(p);break;case"changePhotoPosition":r.changePhotoPositionHandler(p);break;case"closePhotosCard":r.closePhotosCardHandler(p);break;case"openLocationConfigurationCard":r.openLocationConfigurationCardHandler(p);break;case"createLocation":r.createLocationHandler(p);break;case"updateLocation":r.updateLocationHandler(p);break;case"deleteLocation":r.deleteLocationHandler(p);break;case"closeLocationConfigurationCard":r.closeLocationConfigurationCardHandler();break;case"manageLocationPhotos":r.manageLocationPhotosHandler();break;case"deleteLocationPhoto":r.deleteLocationPhotoHandler(p);break;case"selectCompany":r.selectCompanyHandle(p);break;case"detachSupplier":r.detachSupplierHandler();break;case"createPurchase":r.createPurchaseForSupplierHandler(p);break;case"closeVariantPhotosCard":r.closeVariantPhotosCardHandler();break;case"closeVariantConfigurationCard":r.closeVariantConfigurationCardHandler();break;case"closeVariantHistoryCard":r.closeVariantHistoryCardHandler();break;case"closeSelectPurchaseCard":r.closeSelectPurchaseCardHandler();break;case"closeAddStockCard":r.closeAddStockCardHandler();break;case"closeSupplierCard":r.closeSupplierCardHandler();break;case"closeSelectEntityCard":r.closeSelectEntityCardHandler();break}}return d.jsx("div",{className:he.orderProductsPage,children:d.jsxs(pa,{menuCollectionType:"order",menuTitle:"Order",itemId:Number(y),activeCards:i.activeCards,counter:e.productCounter,children:[d.jsx(ao,{isLoading:i.isProductsInOrderCardLoading,isGridLoading:i.isProductsInOrderGridLoading,stockActions:i.stockActionsGridRequestModel.items,onAction:C}),((g=i.activeCards)==null?void 0:g.includes("findProductsCard"))&&d.jsx("div",{className:he.findProductsCard,ref:h("findProductsCard"),children:d.jsx(na,{isLoading:i.isFindProductsCardLoading,isGridLoading:i.isFindProductsGridLoading,variants:e.variantsGridRequestModel.items,gridRequestModel:e.variantsGridRequestModel,preferences:f.preferences,sortingOptions:P,colorsForFilter:e.colorsForFilter,sizesForFilter:e.sizesForFilter,categories:e.categories,brands:e.brands,onAction:C})}),i.activeCards.includes("variantConfigurationCard")&&d.jsx("div",{ref:h("variantConfigurationCard"),children:d.jsx(Sa,{isLoading:i.isVariantConfigurationCardLoading,isVariantOptionsGridLoading:i.isVariantOptionsGridLoading,isVariantPhotoGridLoading:i.isVariantPhotoGridLoading,variant:i.selectedVariant,variantPhotos:i.variantPhotos,data:i.variantTraitsGridRequestModel,taxesList:i.taxesList,productCounter:i.productCounter,onAction:C,onGenerateProductCode:r.generateProductCodeHandler})}),i.activeCards.includes("addStockCard")&&d.jsx("div",{ref:h("addStockCard"),children:d.jsx(xa,{isLoading:i.isAddStockCardLoading,taxTypes:i.taxesList,currencyTypes:i.currenciesList,variant:i.selectedVariant,purchase:i.selectedPurchase,onAction:C})}),i.activeCards.includes("selectPurchaseCard")&&d.jsx("div",{ref:h("selectPurchaseCard"),children:d.jsx(va,{isLoading:i.isSelectPurchaseCardLoading,isGridLoading:i.isPurchaseGridLoading,purchases:i.purchaseGridRequestModel.items,onAction:C})}),i.activeCards.includes("supplierCard")&&d.jsx("div",{ref:h("supplierCard"),children:d.jsx(Ha,{isLoading:i.isSupplierCardLoading,selectedPurchase:i.selectedPurchase,selectedSupplier:i.selectedCompany,showCloseButton:!0,onAction:C})}),((L=i.activeCards)==null?void 0:L.includes("selectEntityCard"))&&d.jsx("div",{ref:h("selectEntityCard"),children:d.jsx(ba,{isLoading:i.isSelectEntityCardLoading,isGridLoading:i.isSuppliersGridLoading,entityName:"Company",entityCollection:(M=i.companiesGridRequestModel)==null?void 0:M.items,columns:Ma({onAction:C}),onAction:C})}),i.activeCards.includes("createCompanyCard")&&d.jsx("div",{ref:h("createCompanyCard"),children:d.jsx(Oa,{isLoading:i.isCreateCompanyCardLoading,isPhotoUploaderLoading:i.isPhotoUploaderLoading,countryCodes:i.countryCodes,onAction:C})}),i.activeCards.includes("companyConfigurationCard")&&d.jsx("div",{ref:h("companyConfigurationCard"),children:d.jsx(Ta,{isLoading:i.isCompanyConfigurationCardLoading,isGridLoading:i.isLocationsGridLoading,company:i.managedCompany,countryCodes:i.countryCodes,onAction:C})}),i.activeCards.includes("companyPhotosCard")&&d.jsx("div",{ref:h("companyPhotosCard"),children:d.jsx(me,{isImageUploaderLoading:i.isPhotoUploaderLoading,data:(D=i.managedCompany)==null?void 0:D.photos,contextName:"Company",contextId:(F=i.managedCompany)==null?void 0:F.companyId,noDataText:"COMPANY HAS NO PHOTOS",showCloseButton:!0,columns:Ra({onAction:C}),onAction:C})}),i.activeCards.includes("locationConfigurationCard")&&d.jsx("div",{ref:h("locationConfigurationCard"),children:d.jsx(Da,{isLoading:i.isCustomerAddressDetailsLoading,location:i.managedLocation,countryCodes:i.countryCodes,onAction:C})}),i.activeCards.includes("locationPhotosCard")&&d.jsx("div",{ref:h("locationPhotosCard"),children:d.jsx(me,{isImageUploaderLoading:i.isPhotoUploaderLoading,data:(b=i.managedLocation)==null?void 0:b.photos,contextName:"Location",contextId:(k=i.managedLocation)==null?void 0:k.locationId,noDataText:"LOCATION HAS NO PHOTOS",showCloseButton:!0,columns:Fa({onAction:C}),onAction:C})}),i.activeCards.includes("disposeStockCard")&&d.jsx("div",{ref:h("disposeStockCard"),children:d.jsx(ka,{isLoading:i.isDisposeStockCardLoading,variant:i.selectedVariant,onAction:C,onSecondaryButtonClick:()=>u("disposeStockCard")})}),i.activeCards.includes("variantHistoryCard")&&d.jsx("div",{ref:h("variantHistoryCard"),children:d.jsx(ja,{isLoading:i.isVariantHistoryCardLoading,isGridLoading:i.isVariantsHistoryGridLoading,variant:i.selectedVariant,data:i.variantHistory,onAction:C})}),i.activeCards.includes("manageTraitsCard")&&d.jsx("div",{ref:h("manageTraitsCard"),children:d.jsx(Va,{isLoading:i.isManageTraitsCardLoading,traits:i.listOfTraitsWithOptionsForProduct,variant:i.selectedVariant,onAction:C,onSecondaryButtonClick:()=>u("manageTraitsCard")})}),i.activeCards.includes("variantPhotosCard")&&d.jsx("div",{ref:h("variantPhotosCard"),children:d.jsx(Ga,{isLoading:i.isVariantPhotosCardLoading,isVariantPhotoGridLoading:i.isVariantPhotoGridLoading,isProductPhotoGridLoading:i.isProductPhotoGridLoading,variantPhotos:i.variantPhotos,productPhotos:i.productPhotosForVariant,contextId:(T=i.selectedVariant)==null?void 0:T.variantId,onAction:C})})]})})}export{wo as OrderProductsPage};
