import{r as p,j as n,ah as dr,k as y,z as fr,B as mr,R as C,b7 as pr,f as hr,aK as gr,a6 as vr,a7 as xr,a8 as Cr,a9 as br,t as jr}from"./index-CqLEDb0h.js";import{c as v}from"./ChooseVariantTraitsCard.module-DPmE-6dq.js";import{S as D}from"./SheCard-CX5qtFRW.js";import{C as _r}from"./SheSelect-C_zn2LY0.js";import{u as q}from"./useAppTranslation-CsMEigHw.js";import{P as M}from"./plus-Cg_Vlo1I.js";import{C as Nr}from"./SheCardNotification-BVOYMQJ2.js";import{i as J,e as Q,F as U,a as Z,b as A}from"./form-BPwqqXcv.js";import{a as rr,b as tr,c as ar,d as er,S as nr}from"./select-DL5f33uf.js";import{S as L}from"./SheForm-BPCdrBeX.js";import{S as H}from"./SheInput-DbpOA7IC.js";import{S as $}from"./SheGrid-Fci2HgNW.js";import{P as Ir,a as wr,b as yr}from"./SheDatePicker-DFDs0SXU.js";import{c as kr}from"./SheContextSidebar-CL4FXvtg.js";function jt({isLoading:r,items:t,selectedItems:e,onAction:o,onSecondaryButtonClick:a,...i}){const[u,l]=p.useState(null),[h,c]=p.useState(e==null?void 0:e.map(s=>s.traitId)),{translate:d}=q();function g(s,j){c(_=>j?[..._,s]:_.filter(x=>x!==s))}return n.jsx(D,{className:v.chooseVariantTraitsCard,title:"Choose variant traits for product",titleTransKey:"CardTitles.ChooseVariantTraitsForProduct",isLoading:r,showCloseButton:!0,primaryButtonProps:{value:"Save Traits",valueTransKey:"ProductActions.SaveTraits",icon:dr,variant:"info"},onSecondaryButtonClick:a,...i,children:n.jsxs("div",{className:v.chooseVariantTraitsContent,children:[n.jsxs("div",{className:v.textBlock,children:[n.jsx("span",{className:"she-text",children:d("ProductForm.Labels.PickTraitsDescription")}),n.jsx("span",{className:"she-text",children:d("ProductForm.Labels.MissingTraitPrompt")})]}),n.jsx(y,{className:v.chooseVariantTraitsCardButton,value:"Add Trait",valueTransKey:"ProductActions.AddTrait",icon:M,variant:"outline",fullWidth:!0,onClick:()=>o("addTrait",null)}),n.jsxs("div",{className:v.traitsItemsWrapper,children:[n.jsxs("div",{className:v.traitsItemsHeader,children:[n.jsx("span",{className:`${v.headerItemTrait} she-text`,children:d("ProductForm.Labels.Trait")}),n.jsx("span",{className:`${v.headerItemOptions} she-text`,children:d("ProductForm.Labels.Options")}),n.jsx("span",{className:`${v.headerItemAction} she-text`,children:d("ProductForm.Labels.Action")})]}),n.jsx("div",{className:v.traitsItems,children:(t==null?void 0:t.length)>0&&(t==null?void 0:t.map(s=>n.jsx("div",{className:`${v.traitsItem} ${u===s.traitId?v.selected:""}`,children:n.jsxs("div",{className:v.traitsItemBlock,children:[n.jsx(_r,{className:v.traitCheckbox,checked:h.includes(s.traitId),onCheckedChange:j=>g(s.traitId,!!j)}),n.jsxs("div",{className:v.traitNameBlock,onClick:()=>{l(s.traitId),o==null||o("manageTrait",s.traitId)},children:[n.jsx(fr,{delayDuration:200,text:s.traitName,className:"max-w-[50px] min-w-[50px] overflow-hidden text-ellipsis whitespace-nowrap",children:n.jsx("span",{className:`${v.traitName} she-text`,children:s.traitName})}),n.jsx("span",{className:`${v.traitNameAmount} she-text`,children:s.optionsAmount})]}),n.jsx(y,{value:"Manage",valueTransKey:"ProductActions.Manage",variant:"secondary",icon:mr,minWidth:"120px",maxWidth:"120px",onClick:()=>{l(s.traitId),o==null||o("manageTrait",s.traitId)}})]})},s.traitId)))}),n.jsxs("div",{className:v.buttonBlock,children:[n.jsx(y,{value:"Cancel",variant:"secondary",onClick:a}),n.jsx(y,{icon:Nr,value:"Save Traits",onClick:()=>o==null?void 0:o("setProductTraits",{traitIds:h})})]})]})]})})}const Sr="_productTraitConfigurationCard_ewkjx_1",Pr="_productTraitConfigurationContent_ewkjx_1",Tr="_formInput_ewkjx_12",Fr="_buttonBlock_ewkjx_15",Vr="_productTraitConfigurationGridContainer_ewkjx_19",Mr="_productTraitConfigurationGrid_ewkjx_19",N={productTraitConfigurationCard:Sr,productTraitConfigurationContent:Pr,formInput:Tr,buttonBlock:Fr,productTraitConfigurationGridContainer:Vr,productTraitConfigurationGrid:Mr};function E(){return(E=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r}).apply(this,arguments)}function or(r,t){if(r==null)return{};var e,o,a={},i=Object.keys(r);for(o=0;o<i.length;o++)t.indexOf(e=i[o])>=0||(a[e]=r[e]);return a}function B(r){var t=p.useRef(r),e=p.useRef(function(o){t.current&&t.current(o)});return t.current=r,e.current}var F=function(r,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),r>e?e:r<t?t:r},T=function(r){return"touches"in r},K=function(r){return r&&r.ownerDocument.defaultView||self},W=function(r,t,e){var o=r.getBoundingClientRect(),a=T(t)?function(i,u){for(var l=0;l<i.length;l++)if(i[l].identifier===u)return i[l];return i[0]}(t.touches,e):t;return{left:F((a.pageX-(o.left+K(r).pageXOffset))/o.width),top:F((a.pageY-(o.top+K(r).pageYOffset))/o.height)}},X=function(r){!T(r)&&r.preventDefault()},ir=C.memo(function(r){var t=r.onMove,e=r.onKey,o=or(r,["onMove","onKey"]),a=p.useRef(null),i=B(t),u=B(e),l=p.useRef(null),h=p.useRef(!1),c=p.useMemo(function(){var j=function(f){X(f),(T(f)?f.touches.length>0:f.buttons>0)&&a.current?i(W(a.current,f,l.current)):x(!1)},_=function(){return x(!1)};function x(f){var m=h.current,I=K(a.current),w=f?I.addEventListener:I.removeEventListener;w(m?"touchmove":"mousemove",j),w(m?"touchend":"mouseup",_)}return[function(f){var m=f.nativeEvent,I=a.current;if(I&&(X(m),!function(S,P){return P&&!T(S)}(m,h.current)&&I)){if(T(m)){h.current=!0;var w=m.changedTouches||[];w.length&&(l.current=w[0].identifier)}I.focus(),i(W(I,m,l.current)),x(!0)}},function(f){var m=f.which||f.keyCode;m<37||m>40||(f.preventDefault(),u({left:m===39?.05:m===37?-.05:0,top:m===40?.05:m===38?-.05:0}))},x]},[u,i]),d=c[0],g=c[1],s=c[2];return p.useEffect(function(){return s},[s]),C.createElement("div",E({},o,{onTouchStart:d,onMouseDown:d,className:"react-colorful__interactive",ref:a,onKeyDown:g,tabIndex:0,role:"slider"}))}),G=function(r){return r.filter(Boolean).join(" ")},sr=function(r){var t=r.color,e=r.left,o=r.top,a=o===void 0?.5:o,i=G(["react-colorful__pointer",r.className]);return C.createElement("div",{className:i,style:{top:100*a+"%",left:100*e+"%"}},C.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},b=function(r,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*r)/e},Er=function(r){return Rr(R(r))},R=function(r){return r[0]==="#"&&(r=r.substring(1)),r.length<6?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?b(parseInt(r[3]+r[3],16)/255,2):1}:{r:parseInt(r.substring(0,2),16),g:parseInt(r.substring(2,4),16),b:parseInt(r.substring(4,6),16),a:r.length===8?b(parseInt(r.substring(6,8),16)/255,2):1}},Or=function(r){return Kr(Br(r))},Lr=function(r){var t=r.s,e=r.v,o=r.a,a=(200-t)*e/100;return{h:b(r.h),s:b(a>0&&a<200?t*e/100/(a<=100?a:200-a)*100:0),l:b(a/2),a:b(o,2)}},z=function(r){var t=Lr(r);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},Br=function(r){var t=r.h,e=r.s,o=r.v,a=r.a;t=t/360*6,e/=100,o/=100;var i=Math.floor(t),u=o*(1-e),l=o*(1-(t-i)*e),h=o*(1-(1-t+i)*e),c=i%6;return{r:b(255*[o,l,u,u,h,o][c]),g:b(255*[h,o,o,l,u,u][c]),b:b(255*[u,u,h,o,o,l][c]),a:b(a,2)}},V=function(r){var t=r.toString(16);return t.length<2?"0"+t:t},Kr=function(r){var t=r.r,e=r.g,o=r.b,a=r.a,i=a<1?V(b(255*a)):"";return"#"+V(t)+V(e)+V(o)+i},Rr=function(r){var t=r.r,e=r.g,o=r.b,a=r.a,i=Math.max(t,e,o),u=i-Math.min(t,e,o),l=u?i===t?(e-o)/u:i===e?2+(o-t)/u:4+(t-e)/u:0;return{h:b(60*(l<0?l+6:l)),s:b(i?u/i*100:0),v:b(i/255*100),a}},zr=C.memo(function(r){var t=r.hue,e=r.onChange,o=G(["react-colorful__hue",r.className]);return C.createElement("div",{className:o},C.createElement(ir,{onMove:function(a){e({h:360*a.left})},onKey:function(a){e({h:F(t+360*a.left,0,360)})},"aria-label":"Hue","aria-valuenow":b(t),"aria-valuemax":"360","aria-valuemin":"0"},C.createElement(sr,{className:"react-colorful__hue-pointer",left:t/360,color:z({h:t,s:100,v:100,a:1})})))}),Dr=C.memo(function(r){var t=r.hsva,e=r.onChange,o={backgroundColor:z({h:t.h,s:100,v:100,a:1})};return C.createElement("div",{className:"react-colorful__saturation",style:o},C.createElement(ir,{onMove:function(a){e({s:100*a.left,v:100-100*a.top})},onKey:function(a){e({s:F(t.s+100*a.left,0,100),v:F(t.v-100*a.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+b(t.s)+"%, Brightness "+b(t.v)+"%"},C.createElement(sr,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:z(t)})))}),lr=function(r,t){if(r===t)return!0;for(var e in r)if(r[e]!==t[e])return!1;return!0},qr=function(r,t){return r.toLowerCase()===t.toLowerCase()||lr(R(r),R(t))};function Hr(r,t,e){var o=B(e),a=p.useState(function(){return r.toHsva(t)}),i=a[0],u=a[1],l=p.useRef({color:t,hsva:i});p.useEffect(function(){if(!r.equal(t,l.current.color)){var c=r.toHsva(t);l.current={hsva:c,color:t},u(c)}},[t,r]),p.useEffect(function(){var c;lr(i,l.current.hsva)||r.equal(c=r.fromHsva(i),l.current.color)||(l.current={hsva:i,color:c},o(c))},[i,r,o]);var h=p.useCallback(function(c){u(function(d){return Object.assign({},d,c)})},[]);return[i,h]}var Gr=typeof window<"u"?p.useLayoutEffect:p.useEffect,$r=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},Y=new Map,Wr=function(r){Gr(function(){var t=r.current?r.current.ownerDocument:document;if(t!==void 0&&!Y.has(t)){var e=t.createElement("style");e.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,Y.set(t,e);var o=$r();o&&e.setAttribute("nonce",o),t.head.appendChild(e)}},[])},Xr=function(r){var t=r.className,e=r.colorModel,o=r.color,a=o===void 0?e.defaultColor:o,i=r.onChange,u=or(r,["className","colorModel","color","onChange"]),l=p.useRef(null);Wr(l);var h=Hr(e,a,i),c=h[0],d=h[1],g=G(["react-colorful",t]);return C.createElement("div",E({},u,{ref:l,className:g}),C.createElement(Dr,{hsva:c,onChange:d}),C.createElement(zr,{hue:c.h,onChange:d,className:"react-colorful__last-control"}))},Yr={defaultColor:"000",toHsva:Er,fromHsva:function(r){return Or({h:r.h,s:r.s,v:r.v,a:1})},equal:qr},Jr=function(r){return C.createElement(Xr,E({},r,{colorModel:Yr}))};const Qr="_sheColorpicker_1s7pp_1",Ur={sheColorpicker:Qr};function Zr({disabled:r,value:t,onChange:e,onBlur:o,name:a,className:i,...u}){const[l,h]=p.useState(!1),[c,d]=p.useState(t),g=p.useRef(null),s=p.useRef(null),j=p.useMemo(()=>t||"#FFFFFF",[t]);p.useEffect(()=>{d(t)},[t]),p.useEffect(()=>{const x=f=>{g.current&&!g.current.contains(f.target)&&s.current&&!s.current.contains(f.target)&&(h(!1),c!==t&&e(c),o&&o())};return l&&document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[l,c,t,e,o]);const _=x=>{h(x),!x&&c!==t&&(e(c),o&&o())};return n.jsx("div",{className:Ur.sheColorpicker,children:n.jsxs(Ir,{open:l,onOpenChange:_,children:[n.jsx(wr,{asChild:!0,disabled:r,children:n.jsx(pr,{...u,ref:s,className:hr("block",i),name:a,style:{backgroundColor:j},variant:"outline"})}),n.jsx(yr,{ref:g,className:"w-full",children:n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(Jr,{color:c,onChange:d}),n.jsx(gr,{maxLength:7,value:c,onChange:x=>d(x.target.value)})]})})]})})}function cr({row:r,table:t,onAction:e}){const o=t.options.meta;return n.jsxs(vr,{children:[n.jsx(xr,{asChild:!0,children:n.jsxs(y,{variant:"ghost",className:"flex h-8 w-8 p-0 data-[state=open]:bg-muted",children:[n.jsx(kr,{}),n.jsx("span",{className:"sr-only",children:"Open menu"})]})}),n.jsx(Cr,{align:"start",className:"w-[160px]",children:n.jsx(br,{onClick:()=>{queueMicrotask(()=>{e("deleteOption",r.id,o==null?void 0:o.setLoadingRow,r)})},children:"Delete option"})})]})}const Ar=r=>[{accessorKey:"color",minSize:50,maxSize:50,cell:({row:t})=>{const e=t.original.optionColor,o=t.original.optionName,a=t.original.optionId;return n.jsx("div",{className:"relative w-12 h-12 cursor-pointer",children:n.jsx(Zr,{value:e,onChange:i=>{const u={optionColor:i,optionName:o};r("updateOption",t.id,void 0,t,a,u)}})})}},{accessorKey:"optionName",minSize:250,maxSize:250,cell:({row:t})=>{const e=t.original.optionColor,o=t.original.optionName,a=t.original.optionId;return n.jsx(H,{value:o,placeholder:"Color name",onBlur:i=>{const u={optionColor:e,optionName:i};r("updateOption",t.id,void 0,t,a,u)}})}},{id:"rowActions",size:40,minSize:40,maxSize:40,cell:({row:t,table:e})=>n.jsx(cr,{row:t,onAction:r,table:e})}],rt=r=>[{accessorKey:"optionName",header:"",minSize:300,maxSize:300,cell:({row:t})=>{const e=t.original.optionName||"",o=t.original.optionId;return n.jsx(H,{value:e,fullWidth:!0,placeholder:"Size value",onDelay:a=>{const i={optionName:a};r("updateOption",t.id,void 0,t,o,i)}})}},{id:"rowActions",header:"",size:40,minSize:40,maxSize:40,cell:({row:t,table:e})=>n.jsx(cr,{row:t,onAction:r,table:e})}];function _t({isLoading:r,isGridLoading:t,data:e,typesOfTraits:o,selectedTrait:a,onAction:i,onPrimaryButtonClick:u,onSecondaryButtonClick:l,...h}){var x;const[c,d]=C.useState((e==null?void 0:e.items)??[]),{translate:g}=q(),s=J({defaultValues:{traitName:a?a.traitName:"",traitTypeId:a?a.traitTypeId:""}});p.useEffect(()=>{a&&s.reset({traitName:a.traitName,traitTypeId:a.traitTypeId}),d((e==null?void 0:e.items)??[])},[a,s,e]),p.useEffect(()=>{a&&s.reset({traitName:a.traitName,traitTypeId:a.traitTypeId})},[a,s]);function j(f){a!=null&&a.traitId?i("updateTrait",f):i("createTrait",f)}function _(f,m,I,w,S,P){switch(f){case"deleteOption":w&&i("deleteOption",w.original);break;case"updateOption":P&&S!=null&&(d(ur=>ur.map(O=>O.optionId===S?{...O,...P}:O)),i("updateOption",{optionId:S,updatedModel:P}));break;case"addOption":i("addOption",null);break}}return n.jsx(D,{className:N.productTraitConfigurationCard,title:a!=null&&a.traitId?g("CardTitles.ManageTrait",{traitName:a.traitName}):g("CardTitles.CreateProductTrait"),isLoading:r,showNotificationCard:!!(a!=null&&a.traitId),notificationCardProps:{title:"Delete Trait",titleTransKey:"CardTitles.DeleteTrait",text:"This trait will be deleted, it will no longer be available for selection but you will still see it in products where it was used, until you change the trait",textTransKey:"ConfirmationMessages.DeleteTrait",onClick:()=>i("deleteTrait",a)},showCloseButton:!0,onSecondaryButtonClick:l,...h,children:n.jsxs("div",{className:N.productTraitConfigurationContent,children:[n.jsx("div",{className:N.productTraitConfigurationForm,children:n.jsxs(L,{form:s,onSubmit:j,children:[n.jsx(L.Field,{rules:{required:!0,minLength:{value:3,message:g("ProductForm.Validation.TraitNameMinLength")},maxLength:{value:50,message:g("ProductForm.Validation.TraitNameMaxLength")}},name:"traitName",children:n.jsx(H,{className:N.formInput,label:"Trait Name",labelTransKey:"ProductForm.Labels.TraitName",placeholder:"enter trait name...",placeholderTransKey:"ProductForm.Placeholders.TraitName",isValid:!s.formState.errors.traitName,patternErrorMessage:(x=s.formState.errors.traitName)==null?void 0:x.message,showError:!0,onDelay:(a==null?void 0:a.traitId)&&(()=>j(s.getValues()))})}),!(a!=null&&a.traitId)&&n.jsx("div",{className:N.productConfigurationFormRow,children:n.jsx(Q,{control:s.control,name:"traitTypeId",rules:{required:!0},render:({field:f})=>n.jsxs(U,{children:[n.jsx(Z,{children:g("ProductForm.Labels.TraitType")}),n.jsxs(rr,{onValueChange:m=>{f.onChange(Number(m)),a!=null&&a.traitId&&j(s.getValues())},value:f.value?f.value.toString():"",children:[n.jsx(A,{children:n.jsx(tr,{children:n.jsx(ar,{placeholder:g("ProductForm.Placeholders.SelectTraitType")})})}),n.jsx(er,{children:o==null?void 0:o.map(m=>n.jsx(nr,{value:m.traitTypeId.toString(),children:n.jsx("div",{children:m.traitTypeName})},m.traitTypeId))})]})]})})}),!(a!=null&&a.traitId)&&n.jsxs("div",{className:N.buttonBlock,children:[n.jsx(y,{value:"Cancel",valueTransKey:"CommonButtons.Cancel",variant:"secondary",onClick:()=>i("closeProductTraitConfigurationCard",null)}),n.jsx(y,{value:"Create Trait",valueTransKey:"ProductActions.CreateTrait",icon:M,variant:"info",disabled:!s.formState.isValid,onClick:s.handleSubmit(j)})]})]})}),(a==null?void 0:a.traitId)&&n.jsxs(n.Fragment,{children:[n.jsx(jr,{}),n.jsxs("div",{className:`${N.productTraitConfigurationGridContainer} she-title`,children:[n.jsx("span",{className:"she-title",children:g("ProductForm.Labels.Options")}),(a==null?void 0:a.traitTypeId)===1&&n.jsx($,{isLoading:t,className:N.productTraitConfigurationGrid,enableDnd:!0,showHeader:!1,showColumnsHeader:!1,columns:rt(_),data:c,gridRequestModel:e,cellPadding:"10px 10px",onNewItemPosition:(f,m)=>i("dndTraitOption",{selectedTrait:a,newIndex:f,activeItem:m})}),(a==null?void 0:a.traitTypeId)===2&&n.jsx($,{isLoading:t,className:N.productTraitConfigurationGrid,enableDnd:!0,showHeader:!1,showColumnsHeader:!1,columns:Ar(_),data:c,gridRequestModel:e,onNewItemPosition:(f,m)=>i("dndTraitOption",{selectedTrait:a,newIndex:f,activeItem:m})})]})]}),(a==null?void 0:a.traitId)&&n.jsx(y,{value:"Add option",valueTransKey:"ProductActions.AddTraitOption",icon:M,variant:"outline",onClick:()=>_("addOption")})]})})}const tt="_addVariantCard_w75qt_1",at="_addVariantCardContent_w75qt_1",et="_addVariantCardFormItem_w75qt_6",nt="_select_w75qt_6",ot="_warningColorSelect_w75qt_9",it="_warningText_w75qt_15",k={addVariantCard:tt,addVariantCardContent:at,addVariantCardFormItem:et,select:nt,warningColorSelect:ot,warningText:it};function Nt({isLoading:r,traits:t,isDuplicateVariant:e,onAction:o,...a}){const{translate:i}=q(),u=t==null?void 0:t.reduce((d,g)=>({...d,[g.traitId]:""}),{}),l=J({defaultValues:u});function h(d){const s={options:Object.values(d).filter(j=>j!=="").map(j=>Number(j))};o(e?"addDuplicatedVariant":"addVariant",s)}const c=Object.values(l.getValues()).every(d=>d==="");return n.jsx(D,{className:k.addVariantCard,title:"Add Variant",titleTransKey:"ProductActions.AddVariant",isLoading:r,showCloseButton:!0,showFooter:!0,primaryButtonProps:{value:"Add Variant",valueTransKey:"ProductActions.AddVariant",icon:M,variant:"info",disabled:c},onSecondaryButtonClick:()=>o("closeAddVariantCard"),onPrimaryButtonClick:l.handleSubmit(h),...a,children:n.jsxs("div",{className:k.addVariantCardContent,children:[n.jsx("span",{className:"she-text",children:i("ProductForm.Labels.SelectTraitOptions")}),n.jsx(L,{form:l,onSubmit:h,children:t==null?void 0:t.map(d=>n.jsx(Q,{control:l.control,name:d.traitId.toString(),render:({field:g})=>n.jsx("div",{className:k.addVariantCardFormItem,style:e?{paddingBottom:"10px"}:{paddingBottom:"20px"},children:n.jsxs(U,{className:e?k.warningColorSelect:k.select,children:[n.jsx(Z,{children:d.traitName}),n.jsxs(rr,{onValueChange:s=>{g.onChange(s)},value:g.value,children:[n.jsx(A,{children:n.jsx(tr,{children:n.jsx(ar,{placeholder:i("ProductForm.Placeholders.SelectTraitType",{traitType:d.traitTypeName.toLowerCase()})})})}),n.jsx(er,{children:d.traitOptions.filter(s=>!s.isRaw).map(s=>n.jsx(nr,{value:s.optionId.toString(),children:d.traitTypeId===2?n.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[n.jsx("div",{style:{width:"20px",height:"20px",background:(s==null?void 0:s.optionColor)||"#ccc",marginRight:"8px",borderRadius:"2px"}}),s.optionName]}):s.optionName},s.optionId))})]})]})})},d.traitId))}),e&&n.jsx("span",{className:k.warningText,children:i("ValidationMessages.DuplicateVariantWarning")})]})})}export{Nt as A,jt as C,_t as P};
