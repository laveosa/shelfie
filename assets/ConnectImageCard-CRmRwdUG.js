import{j as t,e as u,w as C}from"./index-DybU9lv3.js";import{S as P}from"./SheCard-JWlyTss7.js";import{S}from"./SheGrid-DvAOS33I.js";import{S as N}from"./SheFileUploader-BAVOSjtG.js";import{p as T}from"./placeholder-image-BgG3Yd5d.js";import{a as v,b as j}from"./SheSelect-DkAtzaWK.js";import{o as k}from"./SheContextSidebar-BKksk-en.js";import{T as _}from"./SheCardNotification-Yx-BMvzf.js";import{u as b}from"./useAppTranslation-NlALFuCP.js";const w="_productPhotosCard_s6dni_1",z="_productPhotosCardContent_s6dni_1",R="_managePhotos_s6dni_6",d={productPhotosCard:w,productPhotosCardContent:z,managePhotos:R},G=i=>[{accessorKey:"thumbnailUrl",header:"Preview",minSize:80,maxSize:80,cell:({row:e,table:s})=>{const o=e.getValue("thumbnailUrl"),a=s.options.meta;return t.jsx("div",{className:"relative w-12 h-12 cursor-pointer",onClick:()=>i("image",e.id,a==null?void 0:a.setLoadingRow),children:t.jsx("img",{src:o,alt:"photo",className:"object-cover rounded-md w-full h-full",onError:n=>{n.currentTarget.src=T}})})}},{accessorKey:"format",header:"Format",minSize:150,maxSize:150,cell:({row:e})=>t.jsx("span",{className:"she-subtext",children:`${e.original.height}px x ${e.original.width}px`})},{accessorKey:"isActive",header:"Active",minSize:60,maxSize:60,cell:({row:e,table:s})=>{const o=s.options.meta;return t.jsx(v,{disabled:o==null?void 0:o.isRowLoading(e.id),type:j.SWITCH,checked:e.getValue("isActive")})}},{id:"map",header:"Actions",minSize:100,maxSize:100,cell:({row:e,table:s})=>{const o=s.options.meta;return t.jsx(u,{icon:k,value:"Map",variant:"secondary",onClick:()=>i("connect",e.id,o==null?void 0:o.setLoadingRow,e)})}},{id:"delete",minSize:60,maxSize:60,cell:({row:e,table:s})=>{const o=s.options.meta;return t.jsx(u,{icon:_,variant:"outline",onClick:()=>i("delete",e.id,o==null?void 0:o.setLoadingRow,e)})}}];function F({isLoading:i,isImageUploaderLoading:e,isGridLoading:s,data:o,contextId:a,productCounter:n,showCloseButton:x,onAction:r}){const{translate:I}=b();function m(l,c){switch(l){case"upload":r("uploadPhoto",c);break;case"delete":r("deletePhoto",c);break;case"connect":r("openConnectImageCard",c);break;case"dnd":const{newIndex:p,activeItem:h,oldIndex:y}=c;r("changePhotoPosition",{newIndex:p,activeItem:h,oldIndex:y});break;case"activate":r("activatePhoto",c);break}}function f(l,c,p,h){switch(l){case"delete":m("delete",h.original);break;case"connect":m("connect",h.original);break;case"activate":m("activate",h.original);break}}return t.jsx(P,{className:d.productPhotosCard,title:"Product Photos",titleTransKey:"CardTitles.ProductPhotos",minWidth:"500px",showCloseButton:x,isLoading:i,onSecondaryButtonClick:()=>r("closeProductPhotsCard"),children:t.jsxs("div",{className:d.productPhotosCardContent,children:[t.jsx(N,{isLoading:e,contextName:"product",contextId:a,onUpload:l=>m("upload",l)}),t.jsxs("div",{className:d.managePhotos,children:[t.jsx("span",{className:`${d.managePhotosTitle} she-title`,children:I("CardTitles.ManagePhotos")}),t.jsx("div",{className:d.managePhotosGrid,children:t.jsx(S,{className:d.photosGrid,isLoading:s,enableDnd:!0,showHeader:!1,columns:G(f),data:o,skeletonQuantity:n==null?void 0:n.gallery,cellPadding:"5px 10px",customMessage:"PRODUCT HAS NO PHOTO",customMessageTransKey:"ProductMessages.NoPhotos",onNewItemPosition:(l,c,p)=>m("dnd",{newIndex:l,activeItem:c,oldIndex:p})})})]})]})})}const L="_connectImageCard_17led_1",K="_connectImageCardContent_17led_1",O="_connectImageGrid_17led_1",g={connectImageCard:L,connectImageCardContent:K,connectImageGrid:O},H=i=>[{accessorKey:"isActive",header:"Status",minSize:80,maxSize:80,cell:({row:e,table:s})=>{const o=s.options.meta;return t.jsx(v,{disabled:o==null?void 0:o.isRowLoading(e.id),checked:e.getValue("isActive"),type:j.SWITCH,onCheckedChange:()=>{}})}},{accessorKey:"variantName",header:"Variant",minSize:200,maxSize:200,cell:({row:e})=>t.jsx(C,{delayDuration:200,text:e.original.variantName,className:"max-w-[100%] overflow-hidden text-ellipsis whitespace-nowrap",children:t.jsx("span",{className:"she-text",children:e.original.variantName})})},{accessorKey:"traitOptions",header:"Traits",minSize:80,maxSize:80,cell:({row:e})=>{const s=e.original.traitOptions.filter(a=>a.traitTypeId===2).map(a=>a.optionColor).filter(a=>a!==null),o=e.original.traitOptions.filter(a=>a.traitTypeId===1).map(a=>a.optionName).filter(a=>a!==null);return t.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[s.map((a,n)=>t.jsx("div",{style:{background:a,width:"20px",height:"20px",borderRadius:"5px",display:"inline-block",marginRight:"5px"}},n)),t.jsx("div",{style:{display:"flex",gap:"5px"},children:o.map((a,n)=>t.jsx(C,{delayDuration:200,text:a,className:"max-w-[50px] overflow-hidden text-ellipsis whitespace-nowrap",children:t.jsx("span",{className:"she-text",children:a},n)},n))})]})}}];function Q({isLoading:i,isGridLoading:e,variants:s,selectedPhoto:o,productCounter:a,onAction:n,onSecondaryButtonClick:x,...r}){return t.jsx(P,{className:g.connectImageCard,title:"Connect image to product variants",titleTransKey:"CardTitles.ConnectImageToProductVariants",showCloseButton:!0,isLoading:i,onSecondaryButtonClick:()=>n("closeConnectImageCard"),...r,children:t.jsx("div",{className:g.connectImageCardContent,children:t.jsx("div",{className:g.connectImageGrid,children:t.jsx(S,{isLoading:e,showHeader:!1,columns:H(),data:s,skeletonQuantity:a==null?void 0:a.variants,gridRequestModel:s})})})})}export{Q as C,F as P};
