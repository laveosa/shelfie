import{j as r,m as p,n as h,h as S,i as u,C as g,d as C,S as x,o as f,r as y}from"./index-DfKOL2Au.js";import{c as j}from"./OrdersPage.module-m8m3mWZe.js";import{G as v,a as O}from"./GridSortingEnum-Qa64oiYF.js";import{u as b}from"./useOrdersPageService-BfSzbDCq.js";import{S as _}from"./SheCard-D94sEshW.js";import{G as N}from"./GridShowItemsFilter-BiPYlu8K.js";import{S as z}from"./SheSelect-BwBy7jP3.js";import{S as G}from"./SheGrid-D9PjJLsA.js";import{I as P}from"./useAppTranslation-DFMThoVi.js";import{G as R}from"./GridDateRangeFilter-Dm1eg9L1.js";import{a as I,S as K}from"./SheContextSidebar-CXl1hHm7.js";import{P as $}from"./settings-2-YB_aH9aL.js";import"./SheCardNotification-DlcvUPqQ.js";import"./ComponentViewEnum-Ba6F4129.js";import"./SheInput-Cf0S--AC.js";import"./trash-oAAyJ39n.js";import"./chevron-up-YiKjjxSt.js";import"./select-b9CFFz3g.js";import"./SheDatePicker-BIRQ4-8R.js";const A="_ordersCard_1ywly_1",k="_ordersCardContent_1ywly_5",L="_ordersCardHeader_1ywly_9",w="_createOrderButton_1ywly_12",l={ordersCard:A,ordersCardContent:k,ordersCardHeader:L,createOrderButton:w},H="_productStatus_1u0yf_1",V="_productStatusAvailable_1u0yf_11",D="_productStatusNotAvailable_1u0yf_17",d={productStatus:H,productStatusAvailable:V,productStatusNotAvailable:D};function E(i){const s=e=>e==="New"||e==="Pending"?d.productStatusAvailable:e==="Not Available"?d.productStatusNotAvailable:"";return[{accessorKey:"id",header:"ID",minSize:50,maxSize:50},{accessorKey:"customer",header:"Customer",minSize:120,cell:({row:e})=>{const a=e.original.customer.thumbnailUrl;return r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[r.jsx("div",{children:a?r.jsx("img",{src:a,alt:e.original.customer.name,className:"object-cover rounded-md w-12 h-12"}):r.jsx(p,{icon:P,maxWidth:"30px"})}),r.jsx("div",{children:r.jsx(h,{delayDuration:200,text:e.original.customer.name,className:"max-w-[100%] overflow-hidden text-ellipsis whitespace-nowrap",children:r.jsx("span",{children:e.original.customer.name})})})]})}},{accessorKey:"date",header:"Date",minSize:100,cell:({row:e})=>r.jsx("span",{children:S(e.getValue("date"),"date")})},{accessorKey:"channel",header:"Channel",minSize:100,cell:({row:e})=>r.jsx("span",{children:e.getValue("channel")})},{accessorKey:"orderStatus",header:"Order",minSize:100,cell:({row:e})=>{const a=e.getValue("orderStatus");return r.jsx("div",{className:`${d.productStatus} ${s(a)}`,children:r.jsx("span",{children:a})})}},{accessorKey:"paymentStatus",header:"Payment",minSize:100,cell:({row:e})=>{const a=e.getValue("paymentStatus");return r.jsx("div",{className:`${d.productStatus} ${s(a)}`,children:r.jsx("span",{children:a})})}},{accessorKey:"shipmentStatus",header:"Shipment",minSize:100,cell:({row:e})=>{const a=e.getValue("shipmentStatus");return r.jsx("div",{className:`${d.productStatus} ${s(a)}`,children:r.jsx("span",{children:a})})}},{accessorKey:"count",header:"Items",minSize:80,maxSize:80,cell:({row:e})=>r.jsx("span",{children:e.getValue("count")})},{accessorKey:"value",header:"Value",minSize:120,maxSize:120,cell:({row:e})=>r.jsx("span",{children:`${e.getValue("value")} ${e.original.currency.briefName}`})},{accessorKey:"income",header:"Income",minSize:120,maxSize:120,cell:({row:e})=>r.jsx("span",{children:`${e.getValue("income")} ${e.original.currency.briefName}`})},{id:"manage",header:"",minSize:120,maxSize:120,cell:({row:e,table:a})=>{const t=a.options.meta,n=o=>{o.stopPropagation(),o.preventDefault(),i(e.id,t==null?void 0:t.setLoadingRow,e.original)};return r.jsx("div",{onClick:o=>o.stopPropagation(),style:{display:"flex",justifyContent:"center"},children:r.jsx(u,{icon:g,variant:"secondary",value:"Manage",onClick:n,disabled:t==null?void 0:t.isRowLoading(e.id)})})}}]}function T({isLoading:i,isGridLoading:s,preferences:e,sortingOptions:a,ordersGridRequestModel:t,onAction:n}){function o(c,q,m){n("manageOrder",m)}return r.jsxs("div",{className:l.ordersCard,children:[r.jsx(_,{className:l.ordersCardContent,headerClassName:l.ordersCardHeader,title:"Orders",titleTransKey:"CardTitles.Orders",isLoading:i,children:r.jsxs(G,{isLoading:s,columns:E(o),data:t.items,gridRequestModel:t,sortingItems:a,columnsPreferences:e,preferenceContext:"productReferences",skeletonQuantity:t.pageSize,onApplyColumns:c=>n("applyColumns",c),onDefaultColumns:()=>n("resetColumns"),onGridRequestChange:c=>n("gridRequestChange",c),children:[r.jsx(R,{}),r.jsx(z,{icon:I,placeholder:"Status",placeholderTransKey:"OrderForm.Placeholders.Status",minWidth:"150px"}),r.jsx(N,{context:"Canceled"})]})}),r.jsx(u,{className:l.createOrderButton,value:"Create Order",valueTransKey:"OrderActions.CreateOrder",icon:$,variant:"info",onClick:()=>n("createOrder")})]})}function ce(){const i=b(),s=C(x.ORDERS),e=Object.values(v).map(n=>({value:n,description:O[n]})),{orderId:a}=f();y.useEffect(()=>{i.getListOfOrdersForGridHandler(s.ordersGridRequestModel)},[]);async function t(n,o){switch(n){case"createOrder":i.createOrderHandler();break;case"manageOrder":i.manageOrderHandler(o);break;case"gridRequestChange":i.handleGridRequestChange(o);break;case"applyColumns":i.updateUserPreferencesHandler(o);break;case"resetColumns":i.resetUserPreferencesHandler("products");break}}return r.jsx("div",{className:j.ordersPage,children:r.jsx(K,{menuCollectionType:"sales",menuTitle:"Sales",itemId:Number(a),counter:s.salesCounters,activeCards:s.activeCards,children:r.jsx(T,{isLoading:s.isOrdersCardLoading,isGridLoading:s.isOrdersGridLoading,preferences:s.preferences,sortingOptions:e,ordersGridRequestModel:s.ordersGridRequestModel,onAction:t})})})}export{ce as OrdersPage};
