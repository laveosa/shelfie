import{h as q,n as z,S as f,u as B,i as V,z as N,E as n,U as F,W as i,H as s,l as Q,N as o}from"./index-v5GGPS6e.js";function _(){const u=q(),g=z(f.APP),O=B(e=>e[f.ORDERS]),t=V(),c=N(),[p]=n.useGetListOfOrdersForGridMutation(),[h]=F.useUpdateUserPreferencesMutation(),[G]=F.useResetUserPreferencesMutation(),[S]=n.useCreateOrderMutation(),[L]=n.useGetListOfCustomersForGridMutation(),[H]=i.useGetVariantsForGridMutation(),[m]=i.useLazyGetBrandsForProductsFilterQuery(),[A]=i.useLazyGetCategoriesForProductsFilterQuery(),[P]=i.useLazyGetTraitsForFilterQuery(),[M]=n.useGetListOfStockActionsForGridMutation();function l(e){return t(s.setIsOrdersGridLoading(!0)),p(e).then(r=>(t(s.setIsOrdersGridLoading(!1)),t(s.refreshOrdersGridRequestModel(r.data)),r.data))}function C(e){l(e)}function R(e){const r=Q.merge({},g.preferences,e);return h(r).then(()=>{u.getUserPreferencesHandler()})}function U(e){return G(e).then(()=>{u.getUserPreferencesHandler()})}function E(){return S().then(e=>(e.error||(t(s.refreshSelectedOrder(e.data)),c(`${o.SALES}${o.ORDER_DETAILS}/${e.data.id}`)),e.data))}function I(e){t(s.refreshSelectedOrder(e)),c(`${o.SALES}${o.ORDER_DETAILS}/${e.id}`)}function y(e){return L(e).then(r=>{const a=r.data.items.map(d=>d.customerId===O.selectedOrder.customerId?{...d,isSelected:!0}:{...d,isSelected:!1});return t(s.refreshCustomersGridRequestModel({...r.data,items:a})),r.data})}function k(e){return t(s.setIsLoading(!0)),H(e).then(r=>{if(t(s.setIsLoading(!1)),!r.error)return t(s.refreshVariantsGridRequestModel(r.data)),r.data})}function T(){return m(null).then(e=>(t(s.refreshBrands(e.data)),e.data))}function v(){return A(null).then(e=>(t(s.refreshCategories(e.data)),e.data))}function D(){return P().then(e=>(t(s.refreshSizesForFilter(e.data.filter(r=>r.traitTypeId===1).flatMap(r=>r.traitOptions))),t(s.refreshColorsForFilter(e.data.filter(r=>r.traitTypeId===2).flatMap(r=>r.traitOptions))),e.data))}function $(e,r){return M({orderId:e,model:r}).then(a=>(t(s.refreshStockActionsGridRequestModel(a.data)),a.data))}return{getListOfOrdersForGridHandler:l,handleGridRequestChange:C,updateUserPreferencesHandler:R,resetUserPreferencesHandler:U,createOrderHandler:E,manageOrderHandler:I,getListOfCustomersForGridHandler:y,getVariantsForGridHandler:k,getBrandsForFilterHandler:T,getCategoriesForFilterHandler:v,getTraitsForFilterHandler:D,getListOfStockActionsForGridHandler:$}}export{_ as u};
