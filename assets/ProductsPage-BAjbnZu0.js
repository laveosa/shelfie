import{j as e,f as j,ab as y,w as m,s as w,e as p,r as $,a0 as O,ah as L,ai as H}from"./index-B-X5EcuA.js";import{u as E,S}from"./SheGrid-B7PzTgap.js";import{S as U,T as W,a as C,b as v}from"./SheTabs-CEiiVpag.js";import{u as b,I as f}from"./useAppTranslation-BEIAejbC.js";import{T as P,L as Q,R as J,B as R}from"./trash-D5of7uSU.js";import{a as X,b as Y}from"./SheSelect-BYf3Qco0.js";import{G as Z}from"./GridDateRangeFilter-DnQDpGqV.js";import{S as ee}from"./SheInput-D_FdvjVj.js";import{G as N}from"./GridItemsFilter-BuqJfE8q.js";import{G as D}from"./GridShowItemsFilter-BYVCJGqT.js";import{G as F}from"./GridTraitsFilter-B5qjYygk.js";import{u as ae}from"./useProductsPageService-JQTSnIUL.js";import{G as te,a as se}from"./GridSortingEnum-Qa64oiYF.js";import{P as q}from"./plus-C1TnDraU.js";import"./settings-2-MXiM0XqW.js";import"./chevron-up-wVe6XqTg.js";import"./select-D9zRADj-.js";import"./SheDatePicker-DGD_Ny0u.js";import"./useToast-BHV8QaX_.js";const re="_ProductsPage_wombk_1",ie="_pageHeader_wombk_1",ce="_productsPageContent_wombk_9",ne="_tabItemsWrapper_wombk_9",oe="_tabItems_wombk_9",le="_tabItemTrigger_wombk_19",de="_tabBlock_wombk_26",ue="_productsPageTabContext_wombk_33",l={ProductsPage:re,pageHeader:ie,productsPageContent:ce,tabItemsWrapper:ne,tabItems:oe,tabItemTrigger:le,tabBlock:de,productsPageTabContext:ue};function me(n){const{translate:r}=b();return[{accessorKey:"purchaseId",header:"ID",minSize:50,maxSize:50,cell:({row:i})=>e.jsx("span",{className:"she-text",children:i.getValue("purchaseId")})},{id:"supplier",accessorFn:i=>i.supplier,header:"Supplier",minSize:150,maxSize:200,cell:({row:i})=>{const t=i.getValue("supplier");return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(j,{icon:t.thumbnailUrl||f,className:"m-auto",style:{...!t.thumbnailUrl&&{padding:"10px"}},minWidth:"40px",maxWidth:"40px",color:"#64748b",iconView:y.BUTTON}),e.jsx(m,{delayDuration:200,text:t.supplierName,className:"max-w-[100%] overflow-hidden text-ellipsis whitespace-nowrap",children:e.jsx("span",{className:"she-text",children:t.supplierName})})]})}},{accessorKey:"location",header:"Location",minSize:50,maxSize:200,cell:({row:i})=>{var t,a;return e.jsx(m,{delayDuration:200,text:(t=i.original.location)==null?void 0:t.address,className:"max-w-[100%] overflow-hidden text-ellipsis whitespace-nowrap",children:e.jsx("span",{className:"she-text",children:(a=i.original.location)==null?void 0:a.address})})}},{accessorKey:"documentNotes",header:"Notes",minSize:100,cell:({row:i})=>e.jsx(m,{delayDuration:200,text:i.getValue("documentNotes"),className:"max-w-[100%] overflow-hidden text-ellipsis whitespace-nowrap",children:e.jsx("span",{className:"she-text",children:i.getValue("documentNotes")})})},{accessorKey:"date",header:"Date",minSize:100,maxSize:100,cell:({row:i})=>e.jsx("span",{className:"she-text",children:w(i.getValue("date"),"date")})},{accessorKey:"unitsAmount",header:"Units",minSize:70,maxSize:100,cell:({row:i})=>e.jsx("span",{className:"she-text",children:`${i.getValue("unitsAmount")} ${i.getValue("unitsAmount")===1?"unit":"units"}`})},{accessorKey:"expense",header:"Expense",minSize:70,maxSize:100,cell:({row:i})=>e.jsx("span",{className:"she-text",children:`${i.getValue("expense")} ${i.original.currencyBrief}`})},{accessorKey:"soldAmount",header:"Sold",minSize:70,maxSize:100,cell:({row:i})=>e.jsx("span",{className:"she-text",children:`${i.getValue("soldAmount")} ${i.original.currencyBrief}`})},{accessorKey:"valueAmount",header:"Order Value",minSize:80,maxSize:100,cell:({row:i})=>e.jsx("span",{className:"she-text",children:`${i.getValue("valueAmount")} ${i.original.currencyBrief}`})},{id:"manage",header:"",minSize:100,maxSize:100,cell:({row:i})=>e.jsx(p,{value:r("CommonButtons.Manage"),onClick:()=>n("managePurchase",i.original)})},{id:"rowActions",header:"",minSize:56,maxSize:56,cell:({row:i,table:t})=>e.jsx(p,{icon:P,variant:"secondary",onClick:()=>n("deletePurchase",{table:t,row:i})})}]}const pe="_productName_10cd0_1",he="_productCode_10cd0_10",ge="_productCategory_10cd0_19",xe="_productBrand_10cd0_20",Ne="_productStatus_10cd0_40",be="_productStatusAvailable_10cd0_49",Se="_productStatusNotAvailable_10cd0_55",h={productName:pe,productCode:he,productCategory:ge,productBrand:xe,productStatus:Ne,productStatusAvailable:be,productStatusNotAvailable:Se};function Ce(n){const{translate:r}=b(),i=t=>t==="Available"?h.productStatusAvailable:t==="Not Available"?h.productStatusNotAvailable:"";return[{accessorKey:"productId",header:"ID",minSize:50,maxSize:50,cell:({row:t})=>e.jsx("span",{className:"she-text",children:t.getValue("productId")})},{accessorKey:"image",header:"Image",minSize:56,maxSize:56,cell:({row:t})=>{const a=t.getValue("image");return e.jsx(j,{icon:(a==null?void 0:a.thumbnailUrl)||f,className:"m-auto",style:{...!(a!=null&&a.thumbnailUrl)&&{padding:"10px"}},color:"#64748b",iconView:y.BUTTON})}},{accessorKey:"productCode",header:"Code",minSize:60,maxSize:60,cell:({row:t})=>e.jsx(m,{delayDuration:200,text:t.getValue("productCode"),children:e.jsx("span",{className:`${h.productCode} she-text`,children:t.getValue("productCode")})})},{accessorKey:"productName",header:"Product Name",minSize:150,cell:({row:t})=>e.jsx(m,{delayDuration:200,text:t.getValue("productName"),children:e.jsx("span",{className:`${h.productName} she-text`,children:t.getValue("productName")})})},{accessorKey:"productCategory",header:"Category",minSize:100,cell:({row:t})=>{var d,c;const a=t.getValue("productCategory");return e.jsx(m,{delayDuration:200,text:(a==null?void 0:a.categoryName)||"N/A",children:e.jsxs("div",{className:h.productCategory,children:[((d=t.original.productCategory)==null?void 0:d.thumbnail)&&e.jsx("img",{src:(c=t.original.productCategory)==null?void 0:c.thumbnail,alt:t.original.productCategory.categoryName}),e.jsx("span",{className:"she-text",children:(a==null?void 0:a.categoryName)||"N/A"})]})})}},{accessorKey:"brand",header:"Brand",minSize:60,cell:({row:t})=>{const a=t.original.brand;return e.jsx(m,{delayDuration:200,text:(a==null?void 0:a.brandName)||"N/A",children:e.jsx("div",{className:h.productBrand,children:(a==null?void 0:a.thumbnail)&&e.jsx("img",{src:a==null?void 0:a.thumbnail,alt:a==null?void 0:a.brandName})})})}},{accessorKey:"barcode",header:"Barcode",minSize:100,cell:({row:t})=>e.jsx("span",{className:"she-text",children:t.getValue("barcode")})},{accessorKey:"status",header:"Status",minSize:120,cell:({row:t})=>e.jsx("div",{className:`${h.productStatus} ${i(t.getValue("status"))}`,children:e.jsx("span",{children:t.getValue("status")})})},{accessorKey:"salePrice",header:"Sale Price",minSize:80,cell:({row:t})=>{const a=t.getValue("salePrice");return e.jsx("span",{className:"she-text",children:a||"N/A"})}},{accessorKey:"variantsCount",header:"Variants",minSize:80,cell:({row:t})=>e.jsx("span",{className:"she-text",children:t.getValue("variantsCount")})},{accessorKey:"stockAmount",header:"Stock",minSize:60,cell:({row:t})=>e.jsx("span",{className:"she-text",children:`${t.getValue("stockAmount")} ${t.getValue("stockAmount")===1?"unit":"units"}`})},{accessorKey:"isActive",header:"Active",minSize:80,maxSize:160,cell:({row:t})=>e.jsx(X,{checked:t.original.isActive,type:Y.SWITCH,onChecked:()=>n("activateProduct",t.original)})},{id:"manage",header:"",minSize:100,maxSize:100,cell:({row:t})=>e.jsx(p,{value:r("CommonButtons.Manage"),onClick:()=>n("manageProduct",t.original.productId)})},{id:"rowActions",header:"",minSize:56,maxSize:56,cell:({row:t,table:a})=>e.jsx(p,{icon:P,variant:"secondary",onClick:()=>n("deleteProduct",{table:a,row:t})})}]}const ve="_variantName_m9a9h_1",je="_variantCode_m9a9h_1",ye="_productCategory_m9a9h_10",fe="_productStatus_m9a9h_28",Pe="_productStatusAvailable_m9a9h_36",ze="_productStatusNotAvailable_m9a9h_42",g={variantName:ve,variantCode:je,productCategory:ye,productStatus:fe,productStatusAvailable:Pe,productStatusNotAvailable:ze};function Ae(n){const{translate:r}=b(),i=t=>t==="Available"?g.productStatusAvailable:t==="Not Available"?g.productStatusNotAvailable:"";return[{accessorKey:"variantId",header:"ID",minSize:50,maxSize:50,cell:({row:t})=>e.jsx("span",{className:"she-text",children:t.getValue("variantId")})},{accessorKey:"photo",header:"Image",minSize:56,maxSize:56,cell:({row:t})=>{const a=t.getValue("photo");return e.jsx(j,{icon:(a==null?void 0:a.thumbnailUrl)||f,className:"m-auto",style:{...!(a!=null&&a.thumbnailUrl)&&{padding:"10px"}},color:"#64748b",iconView:y.BUTTON})}},{accessorKey:"variantCode",header:"Code",minSize:60,maxSize:60,cell:({row:t})=>e.jsx(m,{delayDuration:200,text:t.getValue("variantCode"),children:e.jsx("span",{className:`${g.variantCode} she-text`,children:t.getValue("variantCode")})})},{accessorKey:"variantName",header:"Variant Name",minSize:150,cell:({row:t})=>e.jsx(m,{delayDuration:200,text:t.getValue("variantName"),children:e.jsx("span",{className:`${g.variantName} she-text`,children:t.getValue("variantName")})})},{accessorKey:"productCategory",header:"Category",minSize:100,cell:({row:t})=>{var d,c;const a=t.getValue("productCategory");return e.jsx(m,{delayDuration:200,text:(a==null?void 0:a.categoryName)||"N/A",children:e.jsxs("div",{className:g.productCategory,children:[((d=t.original.productCategory)==null?void 0:d.thumbnail)&&e.jsx("img",{src:(c=t.original.productCategory)==null?void 0:c.thumbnail,alt:t.original.productCategory.categoryName}),e.jsx("span",{className:"she-text",children:(a==null?void 0:a.categoryName)||"N/A"})]})})}},{accessorKey:"brand",header:"Brand",minSize:60,cell:({row:t})=>{const a=t.original.brand;return e.jsx(m,{delayDuration:200,text:(a==null?void 0:a.brandName)||"N/A",children:e.jsx("div",{className:g.productCategory,children:(a==null?void 0:a.thumbnail)&&e.jsx("img",{src:a==null?void 0:a.thumbnail,alt:a==null?void 0:a.brandName})})})}},{accessorKey:"traitOptions",header:"Details",minSize:80,maxSize:80,cell:({row:t})=>{const a=t.original.traitOptions||[],d=a.filter(u=>u.traitTypeId===2&&u.optionColor),c=a.filter(u=>u.traitTypeId===1&&u.optionName);return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",maxWidth:"50px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",verticalAlign:"middle"},children:[d.map((u,x)=>e.jsx("div",{style:{background:u.optionColor,minWidth:"20px",minHeight:"20px",borderRadius:"50%",border:"2px solid #ccc"}},`color-${x}`)),c.map((u,x)=>e.jsx("span",{style:{fontSize:"0.875rem"},className:"she-text",children:u.optionName},`size-${x}`))]})}},{accessorKey:"status",header:"Status",minSize:120,cell:({row:t})=>e.jsx("div",{className:`${g.productStatus} ${i(t.getValue("status"))}`,children:e.jsx("span",{children:t.getValue("status")})})},{accessorKey:"salePrice",header:"Price",minSize:80,cell:({row:t})=>{const a=t.getValue("salePrice");return e.jsx("span",{className:"she-text",children:a||"N/A"})}},{accessorKey:"stockAmount",header:"In Stock",minSize:60,cell:({row:t})=>e.jsx("span",{className:"she-text",children:`${t.getValue("stockAmount")} ${t.getValue("stockAmount")===1?"unit":"units"}`})},{id:"manage",header:"",minSize:100,maxSize:100,cell:({row:t})=>e.jsx(p,{value:r("CommonButtons.Manage"),onClick:()=>n("manageVariant",t.original)})},{id:"rowActions",header:"",minSize:56,maxSize:56,cell:({row:t,table:a})=>e.jsx(p,{icon:P,variant:"secondary",onClick:()=>n("deleteVariant",{table:a,row:t})})}]}function M({fieldKey:n,icon:r,placeholder:i}){const{gridRequestModel:t,onGridRequestChange:a}=E();return e.jsx(ee,{icon:r,placeholder:i,maxWidth:"200px",showClearBtn:!0,onDelay:d=>{a==null||a({...t,currentPage:0,filter:{...t==null?void 0:t.filter,[n]:d}})},onClear:()=>{a==null||a({...t,currentPage:0,filter:{...t==null?void 0:t.filter,[n]:null}})}})}function Ue(){var u,x,z,A,_,V,I,k,T,G,K,B;const{translate:n}=b(),{state:r,appState:i,dispatch:t,...a}=ae(),d=Object.values(te).map(s=>({value:s,description:se[s]}));$.useEffect(()=>{r.activeTab==="products"?a.getTheProductsForGridHandler(r.productsGridRequestModel):r.activeTab==="variants"?a.getVariantsForGridHandler(r.variantsGridRequestModel):r.activeTab==="purchases"&&a.getListOfPurchasesForGridHandler(r.purchasesGridRequestModel),t(O.resetSelectedVariant())},[r.activeTab,t]),$.useEffect(()=>{r.brands.length===0&&a.getBrandsForFilterHandler(),r.categories.length===0&&a.getCategoriesForFilterHandler(),(r.sizesForFilter.length===0||r.colorsForFilter.length===0)&&a.getTraitsForFilterHandler(),a.getCompaniesListHandler()},[]);function c(s,o){switch(s){case"activateProduct":a.activateProductHandler(o);break;case"activateVariant":a.activateVariantActionHandler(o);break;case"manageProduct":a.manageProductActionHandler(o);break;case"manageVariant":a.manageVariantActionHandler(o.variantId,o.productId);break;case"managePurchase":a.managePurchaseActionHandler(o==null?void 0:o.purchaseId);break;case"deleteProduct":a.deleteProductActionHandler(o);break;case"deleteVariant":a.deleteVariantActionHandler(o);break;case"deletePurchase":a.deletePurchaseActionHandler(o);break;case"addProduct":a.addProductActionHandler();break;case"reportPurchase":a.reportPurchaseActionHandler();break;case"gridRequestChange":a.gridRequestChangeHandler(o);break;case"applyColumns":a.applyColumnsActionHandler(o);break;case"resetColumns":a.resetColumnsActionHandler();break;case"tabChange":a.tabChangeActionHandler(o);break}}return e.jsxs("div",{className:l.ProductsPage,children:[e.jsxs("div",{className:l.pageHeader,children:[e.jsx("span",{className:"she-title",children:n("PageTitles.Products")}),r.activeTab==="purchases"?e.jsx("div",{children:e.jsx(p,{value:n("SupplierActions.ReportPurchase"),icon:q,variant:"info",onClick:()=>c("reportPurchase")})}):e.jsx("div",{children:e.jsx(p,{icon:q,variant:"info",onClick:()=>c("addProduct"),value:n("ProductActions.AddProduct")})})]}),e.jsx("div",{className:l.productsPageContent,children:e.jsxs(U,{defaultValue:r.activeTab,onValueChange:s=>c("tabChange",s),children:[e.jsx("div",{className:l.tabItemsWrapper,children:e.jsxs(W,{className:l.tabItems,children:[e.jsx(C,{className:l.tabItemTrigger,value:"products",children:e.jsxs("div",{className:l.tabBlock,children:[e.jsx(L,{size:"16"})," ",n("TabContent.Products")]})}),e.jsx(C,{className:l.tabItemTrigger,value:"variants",children:e.jsxs("div",{className:l.tabBlock,children:[e.jsx(Q,{size:"16"})," ",n("TabContent.Variants")]})}),e.jsx(C,{className:l.tabItemTrigger,value:"purchases",children:e.jsxs("div",{className:l.tabBlock,children:[e.jsx(J,{size:"16"})," ",n("TabContent.Purchases")]})})]})}),e.jsx(v,{value:"products",className:l.productsPageTabContext,children:e.jsxs(S,{gridRequestModel:r.productsGridRequestModel,columns:Ce(c),sortingItems:d,columnsPreferences:i.preferences,preferenceContext:"productReferences",isLoading:r.isLoading,skeletonQuantity:10,onApplyColumns:s=>c("applyColumns",s),onDefaultColumns:()=>c("resetColumns"),onGridRequestChange:s=>c("gridRequestChange",s),children:[e.jsx(N,{items:r.brands,columnName:"Brands",getId:s=>s.brandId,getName:s=>s.brandName,selected:(x=(u=r.productsGridRequestModel)==null?void 0:u.filter)==null?void 0:x.brands}),e.jsx(N,{items:r.categories,columnName:"Categories",getId:s=>s.categoryId,getName:s=>s.categoryName,selected:(A=(z=r.productsGridRequestModel)==null?void 0:z.filter)==null?void 0:A.categories}),e.jsx(D,{context:"Deleted"})]})}),e.jsx(v,{value:"variants",className:l.productsPageTabContext,children:e.jsxs(S,{gridRequestModel:r.variantsGridRequestModel,columns:Ae(c),sortingItems:d,columnsPreferences:i.preferences,preferenceContext:"variantReferences",isLoading:r.isLoading,skeletonQuantity:10,onApplyColumns:s=>c("applyColumns",s),onDefaultColumns:()=>c("resetColumns"),onGridRequestChange:s=>c("gridRequestChange",s),children:[e.jsx(N,{items:r.brands,columnName:"Brands",getId:s=>s.brandId,getName:s=>s.brandName,selected:(V=(_=r.variantsGridRequestModel)==null?void 0:_.filter)==null?void 0:V.brands}),e.jsx(N,{items:r.categories,columnName:"Categories",getId:s=>s.categoryId,getName:s=>s.categoryName,selected:(k=(I=r.variantsGridRequestModel)==null?void 0:I.filter)==null?void 0:k.categories}),e.jsx(F,{traitOptions:r.colorsForFilter,traitType:"color"}),e.jsx(F,{traitOptions:r.sizesForFilter,traitType:"size"}),e.jsx(D,{context:"Deleted"})]})}),e.jsx(v,{value:"purchases",className:l.productsPageTabContext,children:e.jsxs(S,{gridRequestModel:r.purchasesGridRequestModel,columns:me(c),sortingItems:d,columnsPreferences:i.preferences,preferenceContext:"purchaseReferences",isLoading:r.isLoading,skeletonQuantity:10,onApplyColumns:s=>c("applyColumns",s),onDefaultColumns:()=>c("resetColumns"),onGridRequestChange:s=>c("gridRequestChange",s),children:[e.jsx(N,{items:r.companies,columnName:"Suppliers",icon:R,getId:s=>s.companyId,getName:s=>s.companyName,selected:(G=(T=r.purchasesGridRequestModel)==null?void 0:T.filter)==null?void 0:G.suppliers}),e.jsx(Z,{}),e.jsx(N,{items:r.brands,columnName:"Brands",icon:R,getId:s=>s.brandId,getName:s=>s.brandName,selected:(B=(K=r.purchasesGridRequestModel)==null?void 0:K.filter)==null?void 0:B.brands}),e.jsx(M,{icon:H,placeholder:"Value from",fieldKey:"valueFrom"}),e.jsx(M,{icon:H,placeholder:"Value to",fieldKey:"valueTo"})]})})]})})]})}export{Ue as ProductsPage};
